2022-03-18 10:17:56.030 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5006 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-18 10:18:01.043 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 29305 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-18 10:18:01.044 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-18 10:18:02.136 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-18 10:18:02.141 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-18 10:18:02.169 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 Elasticsearch repository interfaces.
2022-03-18 10:18:02.176 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-18 10:18:02.177 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-18 10:18:02.188 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-18 10:18:02.215 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-18 10:18:02.217 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-18 10:18:02.245 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2022-03-18 10:18:03.253 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-18 10:18:03.310 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-18 10:18:03.311 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-18 10:18:03.311 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-18 10:18:03.420 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-18 10:18:03.420 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2305 ms
2022-03-18 10:18:05.261 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-18 10:18:06.663 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-18 10:18:06.666 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-18 10:18:06.666 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-18 10:18:06.965 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-18 10:18:06.989 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-18 10:18:07.005 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 26.73 seconds (JVM running for 27.34)
2022-03-18 10:18:30.934 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-18 10:18:30.935 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-18 10:18:30.936 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-18 10:18:31.230 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-18 10:18:32.330 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-18 10:18:32.343 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:18:32.375 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-18 10:18:32.492 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-18 10:18:32.498 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:18:32.499 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:18:32.580 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:18:32.582 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:18:32.583 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-18 10:18:32.665 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-18 10:18:32.666 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905052' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-18 10:18:32.666 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-18 10:18:32.748 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-18 10:18:32.910 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905052,账户user_balance:UserBalanceChain(userId=user_balance, currencyId=6, balance=100.0000000000000000, hold=0E-16, freeze=null, borrow=null),user_partner_balance:UserBalanceChain(userId=user_partner_balance, currencyId=6, balance=72746.9747071413333333, hold=0E-16, freeze=null, borrow=null),otc_user_balance:UserBalanceChain(userId=otc_user_balance, currencyId=6, balance=0E-16, hold=null, freeze=null, borrow=null),assert_user_balance:UserBalanceChain(userId=asset_user_balance, currencyId=6, balance=0E-16, hold=null, freeze=null, borrow=null)
2022-03-18 10:27:14.835 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:27:14.837 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-18 10:27:14.922 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-18 10:27:14.923 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:27:14.923 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:27:15.004 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:27:15.005 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:27:15.006 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-18 10:27:15.094 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-18 10:27:15.095 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905052' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-18 10:27:15.096 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-18 10:27:15.178 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-18 10:27:15.226 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905052,账户user_balance:UserBalanceChain(userId=user_balance, currencyId=6, balance=1000.0000000000000000, hold=0E-16, freeze=null, borrow=null),user_partner_balance:UserBalanceChain(userId=user_partner_balance, currencyId=6, balance=72746.9847549813333333, hold=0E-16, freeze=null, borrow=null),otc_user_balance:UserBalanceChain(userId=otc_user_balance, currencyId=6, balance=0E-16, hold=null, freeze=null, borrow=null),assert_user_balance:UserBalanceChain(userId=asset_user_balance, currencyId=6, balance=0E-16, hold=null, freeze=null, borrow=null)
2022-03-18 10:29:58.620 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-18 10:29:58.623 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905052(String)
2022-03-18 10:29:58.707 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-18 10:29:58.708 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905052' AND type=4 AND `size` = '0') 
2022-03-18 10:29:58.709 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-18 10:29:58.791 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-18 10:29:58.792 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:29:58.792 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-18 10:29:58.877 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-18 10:29:58.878 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:67.8078326127582083,hold:370.0092750300000000
2022-03-18 10:29:58.878 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-562.1828923572417917,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:437.8171076427582083,操作后，数据库存储的总金额:437.8171076427582083
2022-03-18 10:29:58.880 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:29:58.881 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:29:58.966 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:29:58.991 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) 
2022-03-18 10:29:58.991 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905052(String)
2022-03-18 10:29:59.077 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:29:59.077 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:29:59.077 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:29:59.159 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:29:59.159 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:72784.6519853653333333,hold:0E-16
2022-03-18 10:29:59.160 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:72746.98475498133,操作后，账户变化金额:37.6672303840000000,操作后，计算剩余的金额:72784.6519853653300000,操作后，数据库存储的总金额:72784.6519853653333333
2022-03-18 10:29:59.181 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-18 10:29:59.182 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905052(String)
2022-03-18 10:29:59.263 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-18 10:29:59.264 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:29:59.265 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-18 10:29:59.346 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-18 10:29:59.348 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905052' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-18 10:29:59.348 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-18 10:29:59.429 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-18 10:29:59.430 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:0E-16
2022-03-18 10:29:59.430 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:0.0,操作后，账户变化金额:0,操作后，计算剩余的金额:0.0,操作后，数据库存储的总金额:0E-16
2022-03-18 10:29:59.431 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:29:59.432 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-18 10:29:59.516 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-18 10:29:59.516 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-18 10:29:59.516 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-18 10:29:59.599 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-18 10:29:59.599 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.SqlUtil - 用户:51905052,合伙人:[{"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-18 10:29:59.600 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905052' and created_date>='' 
2022-03-18 10:29:59.601 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-18 10:29:59.703 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 29
2022-03-18 10:29:59.704 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905052,流水:[UserBillChain(userId=51905052, type=3, size=-72.6469188405797101, preBalance=1000.0000000000000000, postBalance=927.3530811594202899, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951开仓保证金-72.6469188405797101, createdDate=2022-03-18 10:28:10, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-2.0050549600000000, preBalance=927.3530811594202899, postBalance=925.3480261994202899, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951开仓手续费-2.0050549600000000, createdDate=2022-03-18 10:28:10, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=1.4035384720000000, preBalance=72746.9847549813333333, postBalance=72748.3882934533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11951, note=手续费返佣：1.403538472,单号来源:11951,用户来源: 51905052, createdDate=2022-03-18 10:28:11, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-254.3698170731707317, preBalance=925.3480261994202899, postBalance=670.9782091262495582, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952开仓保证金-254.3698170731707317, createdDate=2022-03-18 10:28:15, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-8.3433300000000000, preBalance=670.9782091262495582, postBalance=662.6348791262495582, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952开仓手续费-8.3433300000000000, createdDate=2022-03-18 10:28:15, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-174.6352439024390243, preBalance=662.6348791262495582, postBalance=487.9996352238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11953, note=单号:11953开仓保证金-174.6352439024390243, createdDate=2022-03-18 10:28:18, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-5.7280360000000000, preBalance=487.9996352238105339, postBalance=482.2715992238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11953, note=单号:11953开仓手续费-5.7280360000000000, createdDate=2022-03-18 10:28:18, fromUserId=0, total=null), UserBillChain(userId=51905052, type=55, size=-7.0000000000000000, preBalance=482.2715992238105339, postBalance=475.2715992238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952增加保证金-7.0000000000000000, createdDate=2022-03-18 10:28:19, fromUserId=0, total=null), UserBillChain(userId=51905052, type=4, size=426.6505513633048780, preBalance=475.2715992238105339, postBalance=887.8498351871154119, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11954, note=单号:11954平仓收益412.5782359633048780, createdDate=2022-03-18 10:28:20, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-14.0723154000000000, preBalance=887.8498351871154119, postBalance=887.8498351871154119, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11954, note=单号:11954平仓手续费-14.0723154000000000, createdDate=2022-03-18 10:28:20, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=5.8403310000000000, preBalance=72748.3882934533333333, postBalance=72754.2286244533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11952, note=手续费返佣：5.840331,单号来源:11952,用户来源: 51905052, createdDate=2022-03-18 10:28:21, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.0096252000000000, preBalance=72754.2286244533333333, postBalance=72758.2382496533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11953, note=手续费返佣：4.0096252,单号来源:11953,用户来源: 51905052, createdDate=2022-03-18 10:28:21, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=9.8506207800000000, preBalance=72758.2382496533333333, postBalance=72768.0888704333333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11954, note=手续费返佣：9.85062078,单号来源:11954,用户来源: 51905052, createdDate=2022-03-18 10:28:22, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-144.4899623188405797, preBalance=887.8498351871154119, postBalance=743.3598728682748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11955, note=单号:11955开仓保证金-144.4899623188405797, createdDate=2022-03-18 10:28:23, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-3.9879229600000000, preBalance=743.3598728682748322, postBalance=739.3719499082748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11955, note=单号:11955开仓手续费-3.9879229600000000, createdDate=2022-03-18 10:28:23, fromUserId=0, total=null), UserBillChain(userId=51905052, type=55, size=-7.0000000000000000, preBalance=739.3719499082748322, postBalance=732.3719499082748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951增加保证金-7.0000000000000000, createdDate=2022-03-18 10:28:25, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-217.8478202898550724, preBalance=732.3719499082748322, postBalance=514.5241296184197598, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11957, note=单号:11957开仓保证金-217.8478202898550724, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-6.0125998400000000, preBalance=514.5241296184197598, postBalance=508.5115297784197598, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11957, note=单号:11957开仓手续费-6.0125998400000000, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=4, size=214.3604158550289855, preBalance=508.5115297784197598, postBalance=716.8750549934487453, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11956, note=单号:11956平仓收益208.3635252150289855, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-5.9968906400000000, preBalance=716.8750549934487453, postBalance=716.8750549934487453, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11956, note=单号:11956平仓手续费-5.9968906400000000, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-244.2513739130434782, preBalance=716.8750549934487453, postBalance=472.6236810804052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11958, note=单号:11958开仓保证金-244.2513739130434782, createdDate=2022-03-18 10:28:27, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-6.7413379200000000, preBalance=472.6236810804052671, postBalance=465.8823431604052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11958, note=单号:11958开仓手续费-6.7413379200000000, createdDate=2022-03-18 10:28:27, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=2.7915460720000000, preBalance=72768.0888704333333333, postBalance=72770.8804165053333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11955, note=手续费返佣：2.791546072,单号来源:11955,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.2088198880000000, preBalance=72770.8804165053333333, postBalance=72775.0892363933333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11957, note=手续费返佣：4.208819888,单号来源:11957,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.1978234480000000, preBalance=72775.0892363933333333, postBalance=72779.2870598413333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11956, note=手续费返佣：4.197823448,单号来源:11956,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.7189365440000000, preBalance=72779.2870598413333333, postBalance=72784.0059963853333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11958, note=手续费返佣：4.718936544,单号来源:11958,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-27.1423941176470588, preBalance=465.8823431604052671, postBalance=438.7399490427582083, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11961, note=单号:11961开仓保证金-27.1423941176470588, createdDate=2022-03-18 10:28:38, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-0.9228414000000000, preBalance=438.7399490427582083, postBalance=437.8171076427582083, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11961, note=单号:11961开仓手续费-0.9228414000000000, createdDate=2022-03-18 10:28:38, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.6459889800000000, preBalance=72784.0059963853333333, postBalance=72784.6519853653333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11961, note=手续费返佣：0.64598898,单号来源:11961,用户来源: 51905052, createdDate=2022-03-18 10:28:42, fromUserId=51905052, total=null)]
2022-03-18 10:29:59.705 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905052流水--------
2022-03-18 10:29:59.705 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-72.6469188405797101
2022-03-18 10:29:59.706 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11951' LIMIT 0,1 
2022-03-18 10:29:59.706 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:29:59.789 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:29:59.790 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:29:59.790 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:29:59.873 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:29:59.874 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-2.0050549600000000
2022-03-18 10:29:59.876 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11951' LIMIT 0,1000 
2022-03-18 10:29:59.877 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:29:59.960 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-18 10:29:59.961 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:29:59.961 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:00.043 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:00.112 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:30:00.112 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:30:00.194 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:30:00.195 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11951' and type=? limit 0,100 
2022-03-18 10:30:00.196 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:30:00.278 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:00.279 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11951,数据库:1.40353847,计算:1.403538
2022-03-18 10:30:00.279 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11951' and type=? limit 0,100 
2022-03-18 10:30:00.280 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:30:00.369 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:00.369 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11951,比列:0.300000,数据库:0.6015164880000000,计算得:0.601516
2022-03-18 10:30:00.370 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:1.4035384720000000
2022-03-18 10:30:00.370 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72746.9847549813333333,分佣金额:1.4035384720000000,之后余额:72748.3882934533333333
2022-03-18 10:30:00.371 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-254.3698170731707317
2022-03-18 10:30:00.372 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11952' LIMIT 0,1 
2022-03-18 10:30:00.372 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:30:00.469 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:30:00.470 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:30:00.471 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:00.552 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:00.553 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-8.3433300000000000
2022-03-18 10:30:00.554 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11952' LIMIT 0,1000 
2022-03-18 10:30:00.554 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:30:00.637 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-18 10:30:00.638 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:30:00.639 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:00.721 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:00.723 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:30:00.723 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:30:00.806 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:30:00.807 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11952' and type=? limit 0,100 
2022-03-18 10:30:00.808 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:30:00.889 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:00.890 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11952,数据库:5.84033100,计算:5.840331
2022-03-18 10:30:00.890 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11952' and type=? limit 0,100 
2022-03-18 10:30:00.891 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:30:00.973 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:00.974 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11952,比列:0.300000,数据库:2.5029990000000000,计算得:2.502999
2022-03-18 10:30:00.974 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-174.6352439024390243
2022-03-18 10:30:00.975 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11953' LIMIT 0,1 
2022-03-18 10:30:00.976 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:30:01.057 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:30:01.058 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:30:01.058 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:01.139 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:01.140 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11953) 
2022-03-18 10:30:01.140 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-18 10:30:01.230 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-18 10:30:01.232 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-5.7280360000000000
2022-03-18 10:30:01.233 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11953' LIMIT 0,1000 
2022-03-18 10:30:01.233 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:30:01.316 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:30:01.317 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:30:01.317 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:01.398 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:01.399 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905052,订单:11953,类型:51
2022-03-18 10:30:01.401 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:30:01.401 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:30:01.485 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:30:01.487 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11953' and type=? limit 0,100 
2022-03-18 10:30:01.488 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:30:01.571 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:01.572 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11953,数据库:4.00962520,计算:4.009625
2022-03-18 10:30:01.572 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11953' and type=? limit 0,100 
2022-03-18 10:30:01.572 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:30:01.654 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:01.655 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11953,比列:0.300000,数据库:1.7184108000000000,计算得:1.718410
2022-03-18 10:30:01.655 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-7.0000000000000000
2022-03-18 10:30:01.656 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:426.6505513633048780
2022-03-18 10:30:01.656 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 10:30:01.656 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:30:01.740 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:30:01.741 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:30:01.741 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:01.823 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:01.824 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 10:30:01.824 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:30:01.907 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:30:01.908 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:30:01.908 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:01.990 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:01.991 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,1 
2022-03-18 10:30:01.992 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 10:30:02.074 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 10:30:02.074 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11954,计算得:-2.373500
2022-03-18 10:30:02.074 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-14.0723154000000000
2022-03-18 10:30:02.075 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 10:30:02.075 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:30:02.157 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:30:02.157 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:30:02.158 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:02.258 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:02.260 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:30:02.260 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:30:02.342 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:30:02.344 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,100 
2022-03-18 10:30:02.344 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:30:02.428 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:02.429 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11954,数据库:9.85062078,计算:9.850620
2022-03-18 10:30:02.430 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,100 
2022-03-18 10:30:02.430 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:30:02.514 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:02.514 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11954,比列:0.300000,数据库:4.2216946200000000,计算得:4.221694
2022-03-18 10:30:02.514 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:5.8403310000000000
2022-03-18 10:30:02.514 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72748.3882934533333333,分佣金额:5.8403310000000000,之后余额:72754.2286244533333333
2022-03-18 10:30:02.515 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.0096252000000000
2022-03-18 10:30:02.515 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72754.2286244533333333,分佣金额:4.0096252000000000,之后余额:72758.2382496533333333
2022-03-18 10:30:02.515 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:9.8506207800000000
2022-03-18 10:30:02.515 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72758.2382496533333333,分佣金额:9.8506207800000000,之后余额:72768.0888704333333333
2022-03-18 10:30:02.515 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-144.4899623188405797
2022-03-18 10:30:02.516 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11955' LIMIT 0,1 
2022-03-18 10:30:02.516 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:30:02.598 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:30:02.599 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:30:02.600 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:02.680 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:02.681 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11955) 
2022-03-18 10:30:02.681 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-18 10:30:02.765 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-18 10:30:02.766 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-3.9879229600000000
2022-03-18 10:30:02.767 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11955' LIMIT 0,1000 
2022-03-18 10:30:02.767 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:30:02.850 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:30:02.851 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:30:02.852 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:02.934 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:02.934 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905052,订单:11955,类型:51
2022-03-18 10:30:02.935 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:30:02.936 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:30:03.018 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:30:03.019 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11955' and type=? limit 0,100 
2022-03-18 10:30:03.020 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:30:03.104 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:03.105 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11955,数据库:2.79154607,计算:2.791546
2022-03-18 10:30:03.106 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11955' and type=? limit 0,100 
2022-03-18 10:30:03.106 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:30:03.190 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:03.191 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11955,比列:0.300000,数据库:1.1963768880000000,计算得:1.196376
2022-03-18 10:30:03.191 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-7.0000000000000000
2022-03-18 10:30:03.191 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-217.8478202898550724
2022-03-18 10:30:03.192 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11957' LIMIT 0,1 
2022-03-18 10:30:03.192 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:30:03.275 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:30:03.276 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:30:03.276 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:03.357 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:03.358 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-6.0125998400000000
2022-03-18 10:30:03.359 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11957' LIMIT 0,1000 
2022-03-18 10:30:03.360 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:30:03.444 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:30:03.445 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:30:03.446 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:03.529 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:03.531 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:30:03.531 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:30:03.613 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:30:03.614 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11957' and type=? limit 0,100 
2022-03-18 10:30:03.615 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:30:03.698 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:03.698 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11957,数据库:4.20881988,计算:4.208819
2022-03-18 10:30:03.699 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11957' and type=? limit 0,100 
2022-03-18 10:30:03.700 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:30:03.783 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:03.783 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11957,比列:0.300000,数据库:1.8037799520000000,计算得:1.803779
2022-03-18 10:30:03.784 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:214.3604158550289855
2022-03-18 10:30:03.785 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 10:30:03.785 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:30:03.874 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:30:03.875 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:30:03.876 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:03.957 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:03.958 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 10:30:03.959 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:30:04.047 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:30:04.048 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:30:04.049 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:04.132 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:04.134 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,1 
2022-03-18 10:30:04.135 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 10:30:04.218 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 10:30:04.219 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11956,计算得:-9.781800
2022-03-18 10:30:04.219 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-5.9968906400000000
2022-03-18 10:30:04.220 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 10:30:04.220 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:30:04.304 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:30:04.305 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:30:04.305 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:04.385 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:04.386 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:30:04.387 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:30:04.470 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:30:04.471 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,100 
2022-03-18 10:30:04.472 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:30:04.555 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:04.556 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11956,数据库:4.19782344,计算:4.197823
2022-03-18 10:30:04.557 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,100 
2022-03-18 10:30:04.558 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:30:04.641 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:04.641 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11956,比列:0.300000,数据库:1.7990671920000000,计算得:1.799067
2022-03-18 10:30:04.641 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-244.2513739130434782
2022-03-18 10:30:04.642 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11958' LIMIT 0,1 
2022-03-18 10:30:04.642 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:30:04.727 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:30:04.728 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:30:04.728 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:04.810 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:04.811 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-6.7413379200000000
2022-03-18 10:30:04.811 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11958' LIMIT 0,1000 
2022-03-18 10:30:04.812 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:30:04.894 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:30:04.895 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:30:04.896 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:04.976 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:04.977 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:30:04.978 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:30:05.060 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:30:05.061 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11958' and type=? limit 0,100 
2022-03-18 10:30:05.062 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:30:05.145 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:05.146 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11958,数据库:4.71893654,计算:4.718936
2022-03-18 10:30:05.147 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11958' and type=? limit 0,100 
2022-03-18 10:30:05.147 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:30:05.231 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:05.231 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11958,比列:0.300000,数据库:2.0224013760000000,计算得:2.022401
2022-03-18 10:30:05.231 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:2.7915460720000000
2022-03-18 10:30:05.231 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72768.0888704333333333,分佣金额:2.7915460720000000,之后余额:72770.8804165053333333
2022-03-18 10:30:05.231 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.2088198880000000
2022-03-18 10:30:05.231 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72770.8804165053333333,分佣金额:4.2088198880000000,之后余额:72775.0892363933333333
2022-03-18 10:30:05.232 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.1978234480000000
2022-03-18 10:30:05.232 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72775.0892363933333333,分佣金额:4.1978234480000000,之后余额:72779.2870598413333333
2022-03-18 10:30:05.232 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.7189365440000000
2022-03-18 10:30:05.232 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72779.2870598413333333,分佣金额:4.7189365440000000,之后余额:72784.0059963853333333
2022-03-18 10:30:05.232 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.1423941176470588
2022-03-18 10:30:05.233 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11961' LIMIT 0,1 
2022-03-18 10:30:05.233 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:30:05.318 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:30:05.319 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:30:05.320 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:05.403 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:05.404 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9228414000000000
2022-03-18 10:30:05.405 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11961' LIMIT 0,1000 
2022-03-18 10:30:05.405 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:30:05.494 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:30:05.494 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:30:05.495 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:30:05.578 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:30:05.579 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:30:05.580 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:30:05.662 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:30:05.663 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11961' and type=? limit 0,100 
2022-03-18 10:30:05.663 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:30:05.746 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:05.746 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11961,数据库:0.64598898,计算:0.645988
2022-03-18 10:30:05.747 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11961' and type=? limit 0,100 
2022-03-18 10:30:05.747 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:30:05.829 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:30:05.830 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11961,比列:0.300000,数据库:0.2768524200000000,计算得:0.276852
2022-03-18 10:30:05.830 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.6459889800000000
2022-03-18 10:30:05.830 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72784.0059963853333333,分佣金额:0.6459889800000000,之后余额:72784.6519853653333333
2022-03-18 10:30:05.830 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905052流水--------
2022-03-18 10:31:39.460 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-18 10:31:39.461 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905052(String)
2022-03-18 10:31:39.545 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-18 10:31:39.547 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905052' AND type=4 AND `size` = '0') 
2022-03-18 10:31:39.547 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-18 10:31:39.629 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-18 10:31:39.630 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:39.631 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-18 10:31:39.712 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-18 10:31:39.713 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:464.7887594004052671,hold:0E-16
2022-03-18 10:31:39.713 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-535.2112405995947329,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:464.7887594004052671,操作后，数据库存储的总金额:464.7887594004052671
2022-03-18 10:31:39.714 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:39.714 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:31:39.796 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:39.815 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) 
2022-03-18 10:31:39.815 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905052(String)
2022-03-18 10:31:39.897 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:39.898 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:39.898 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:31:39.980 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:39.981 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:72785.2981850173333333,hold:0E-16
2022-03-18 10:31:39.981 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:72746.98475498133,操作后，账户变化金额:38.3134300360000000,操作后，计算剩余的金额:72785.2981850173300000,操作后，数据库存储的总金额:72785.2981850173333333
2022-03-18 10:31:39.997 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-18 10:31:39.997 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905052(String)
2022-03-18 10:31:40.079 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-18 10:31:40.080 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:40.080 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-18 10:31:40.162 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-18 10:31:40.164 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905052' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-18 10:31:40.164 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-18 10:31:40.248 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-18 10:31:40.248 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:0E-16
2022-03-18 10:31:40.249 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:0.0,操作后，账户变化金额:0,操作后，计算剩余的金额:0.0,操作后，数据库存储的总金额:0E-16
2022-03-18 10:31:40.250 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:40.250 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-18 10:31:40.332 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-18 10:31:40.333 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-18 10:31:40.333 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-18 10:31:40.414 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-18 10:31:40.414 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905052,合伙人:[{"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-18 10:31:40.415 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905052' and created_date>='' 
2022-03-18 10:31:40.415 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-18 10:31:40.521 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 32
2022-03-18 10:31:40.521 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905052,流水:[UserBillChain(userId=51905052, type=3, size=-72.6469188405797101, preBalance=1000.0000000000000000, postBalance=927.3530811594202899, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951开仓保证金-72.6469188405797101, createdDate=2022-03-18 10:28:10, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-2.0050549600000000, preBalance=927.3530811594202899, postBalance=925.3480261994202899, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951开仓手续费-2.0050549600000000, createdDate=2022-03-18 10:28:10, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=1.4035384720000000, preBalance=72746.9847549813333333, postBalance=72748.3882934533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11951, note=手续费返佣：1.403538472,单号来源:11951,用户来源: 51905052, createdDate=2022-03-18 10:28:11, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-254.3698170731707317, preBalance=925.3480261994202899, postBalance=670.9782091262495582, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952开仓保证金-254.3698170731707317, createdDate=2022-03-18 10:28:15, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-8.3433300000000000, preBalance=670.9782091262495582, postBalance=662.6348791262495582, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952开仓手续费-8.3433300000000000, createdDate=2022-03-18 10:28:15, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-174.6352439024390243, preBalance=662.6348791262495582, postBalance=487.9996352238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11953, note=单号:11953开仓保证金-174.6352439024390243, createdDate=2022-03-18 10:28:18, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-5.7280360000000000, preBalance=487.9996352238105339, postBalance=482.2715992238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11953, note=单号:11953开仓手续费-5.7280360000000000, createdDate=2022-03-18 10:28:18, fromUserId=0, total=null), UserBillChain(userId=51905052, type=55, size=-7.0000000000000000, preBalance=482.2715992238105339, postBalance=475.2715992238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952增加保证金-7.0000000000000000, createdDate=2022-03-18 10:28:19, fromUserId=0, total=null), UserBillChain(userId=51905052, type=4, size=426.6505513633048780, preBalance=475.2715992238105339, postBalance=887.8498351871154119, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11954, note=单号:11954平仓收益412.5782359633048780, createdDate=2022-03-18 10:28:20, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-14.0723154000000000, preBalance=887.8498351871154119, postBalance=887.8498351871154119, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11954, note=单号:11954平仓手续费-14.0723154000000000, createdDate=2022-03-18 10:28:20, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=5.8403310000000000, preBalance=72748.3882934533333333, postBalance=72754.2286244533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11952, note=手续费返佣：5.840331,单号来源:11952,用户来源: 51905052, createdDate=2022-03-18 10:28:21, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.0096252000000000, preBalance=72754.2286244533333333, postBalance=72758.2382496533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11953, note=手续费返佣：4.0096252,单号来源:11953,用户来源: 51905052, createdDate=2022-03-18 10:28:21, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=9.8506207800000000, preBalance=72758.2382496533333333, postBalance=72768.0888704333333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11954, note=手续费返佣：9.85062078,单号来源:11954,用户来源: 51905052, createdDate=2022-03-18 10:28:22, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-144.4899623188405797, preBalance=887.8498351871154119, postBalance=743.3598728682748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11955, note=单号:11955开仓保证金-144.4899623188405797, createdDate=2022-03-18 10:28:23, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-3.9879229600000000, preBalance=743.3598728682748322, postBalance=739.3719499082748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11955, note=单号:11955开仓手续费-3.9879229600000000, createdDate=2022-03-18 10:28:23, fromUserId=0, total=null), UserBillChain(userId=51905052, type=55, size=-7.0000000000000000, preBalance=739.3719499082748322, postBalance=732.3719499082748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951增加保证金-7.0000000000000000, createdDate=2022-03-18 10:28:25, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-217.8478202898550724, preBalance=732.3719499082748322, postBalance=514.5241296184197598, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11957, note=单号:11957开仓保证金-217.8478202898550724, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-6.0125998400000000, preBalance=514.5241296184197598, postBalance=508.5115297784197598, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11957, note=单号:11957开仓手续费-6.0125998400000000, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=4, size=214.3604158550289855, preBalance=508.5115297784197598, postBalance=716.8750549934487453, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11956, note=单号:11956平仓收益208.3635252150289855, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-5.9968906400000000, preBalance=716.8750549934487453, postBalance=716.8750549934487453, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11956, note=单号:11956平仓手续费-5.9968906400000000, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-244.2513739130434782, preBalance=716.8750549934487453, postBalance=472.6236810804052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11958, note=单号:11958开仓保证金-244.2513739130434782, createdDate=2022-03-18 10:28:27, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-6.7413379200000000, preBalance=472.6236810804052671, postBalance=465.8823431604052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11958, note=单号:11958开仓手续费-6.7413379200000000, createdDate=2022-03-18 10:28:27, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=2.7915460720000000, preBalance=72768.0888704333333333, postBalance=72770.8804165053333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11955, note=手续费返佣：2.791546072,单号来源:11955,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.2088198880000000, preBalance=72770.8804165053333333, postBalance=72775.0892363933333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11957, note=手续费返佣：4.208819888,单号来源:11957,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.1978234480000000, preBalance=72775.0892363933333333, postBalance=72779.2870598413333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11956, note=手续费返佣：4.197823448,单号来源:11956,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.7189365440000000, preBalance=72779.2870598413333333, postBalance=72784.0059963853333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11958, note=手续费返佣：4.718936544,单号来源:11958,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-27.1423941176470588, preBalance=465.8823431604052671, postBalance=438.7399490427582083, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11961, note=单号:11961开仓保证金-27.1423941176470588, createdDate=2022-03-18 10:28:38, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-0.9228414000000000, preBalance=438.7399490427582083, postBalance=437.8171076427582083, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11961, note=单号:11961开仓手续费-0.9228414000000000, createdDate=2022-03-18 10:28:38, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.6459889800000000, preBalance=72784.0059963853333333, postBalance=72784.6519853653333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11961, note=手续费返佣：0.64598898,单号来源:11961,用户来源: 51905052, createdDate=2022-03-18 10:28:42, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=4, size=27.8947941176470588, preBalance=437.8171076427582083, postBalance=464.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11962, note=单号:11962平仓收益26.9716517576470588, createdDate=2022-03-18 10:30:58, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-0.9231423600000000, preBalance=464.7887594004052671, postBalance=464.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11962, note=单号:11962平仓手续费-0.9231423600000000, createdDate=2022-03-18 10:30:58, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.6461996520000000, preBalance=72784.6519853653333333, postBalance=72785.2981850173333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11962, note=手续费返佣：0.646199652,单号来源:11962,用户来源: 51905052, createdDate=2022-03-18 10:31:02, fromUserId=51905052, total=null)]
2022-03-18 10:31:40.522 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905052流水--------
2022-03-18 10:31:40.523 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-72.6469188405797101
2022-03-18 10:31:40.523 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11951' LIMIT 0,1 
2022-03-18 10:31:40.523 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:31:40.614 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:31:40.615 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:31:40.615 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:40.697 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:40.698 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-2.0050549600000000
2022-03-18 10:31:40.699 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11951' LIMIT 0,1000 
2022-03-18 10:31:40.699 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:40.792 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-18 10:31:40.793 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:31:40.794 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:40.875 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:40.877 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:40.877 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:31:40.960 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:40.961 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11951' and type=? limit 0,100 
2022-03-18 10:31:40.962 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:31:41.047 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:41.047 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11951,数据库:1.40353847,计算:1.403538
2022-03-18 10:31:41.048 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11951' and type=? limit 0,100 
2022-03-18 10:31:41.049 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:31:41.131 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:41.132 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11951,比列:0.300000,数据库:0.6015164880000000,计算得:0.601516
2022-03-18 10:31:41.132 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:1.4035384720000000
2022-03-18 10:31:41.132 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72746.9847549813333333,分佣金额:1.4035384720000000,之后余额:72748.3882934533333333
2022-03-18 10:31:41.132 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-254.3698170731707317
2022-03-18 10:31:41.133 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11952' LIMIT 0,1 
2022-03-18 10:31:41.133 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:31:41.215 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:31:41.216 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:31:41.216 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:41.318 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:41.319 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-8.3433300000000000
2022-03-18 10:31:41.321 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11952' LIMIT 0,1000 
2022-03-18 10:31:41.321 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:41.403 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-18 10:31:41.404 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:31:41.405 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:41.486 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:41.487 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:41.487 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:31:41.568 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:41.569 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11952' and type=? limit 0,100 
2022-03-18 10:31:41.569 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:31:41.654 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:41.655 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11952,数据库:5.84033100,计算:5.840331
2022-03-18 10:31:41.655 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11952' and type=? limit 0,100 
2022-03-18 10:31:41.656 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:31:41.739 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:41.740 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11952,比列:0.300000,数据库:2.5029990000000000,计算得:2.502999
2022-03-18 10:31:41.740 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-174.6352439024390243
2022-03-18 10:31:41.741 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11953' LIMIT 0,1 
2022-03-18 10:31:41.742 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:31:41.825 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:31:41.825 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:31:41.825 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:41.910 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:41.912 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11953) 
2022-03-18 10:31:41.912 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-18 10:31:41.996 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-18 10:31:41.997 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-5.7280360000000000
2022-03-18 10:31:41.998 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11953' LIMIT 0,1000 
2022-03-18 10:31:41.998 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:42.082 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:42.083 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:31:42.083 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:42.164 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:42.165 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905052,订单:11953,类型:51
2022-03-18 10:31:42.166 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:42.166 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:31:42.247 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:42.248 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11953' and type=? limit 0,100 
2022-03-18 10:31:42.248 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:31:42.332 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:42.333 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11953,数据库:4.00962520,计算:4.009625
2022-03-18 10:31:42.334 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11953' and type=? limit 0,100 
2022-03-18 10:31:42.334 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:31:42.417 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:42.418 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11953,比列:0.300000,数据库:1.7184108000000000,计算得:1.718410
2022-03-18 10:31:42.418 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-7.0000000000000000
2022-03-18 10:31:42.418 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:426.6505513633048780
2022-03-18 10:31:42.418 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 10:31:42.418 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:42.505 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:42.506 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:31:42.506 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:42.595 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:42.597 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 10:31:42.597 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:42.681 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:42.682 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:31:42.682 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:42.765 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:42.766 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,1 
2022-03-18 10:31:42.767 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 10:31:42.851 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 10:31:42.852 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11954,计算得:-2.373500
2022-03-18 10:31:42.852 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-14.0723154000000000
2022-03-18 10:31:42.853 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 10:31:42.853 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:42.935 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:42.935 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:31:42.936 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:43.016 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:43.018 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:43.018 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:31:43.099 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:43.100 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,100 
2022-03-18 10:31:43.100 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:31:43.186 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:43.187 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11954,数据库:9.85062078,计算:9.850620
2022-03-18 10:31:43.187 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,100 
2022-03-18 10:31:43.188 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:31:43.293 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:43.293 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11954,比列:0.300000,数据库:4.2216946200000000,计算得:4.221694
2022-03-18 10:31:43.293 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:5.8403310000000000
2022-03-18 10:31:43.294 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72748.3882934533333333,分佣金额:5.8403310000000000,之后余额:72754.2286244533333333
2022-03-18 10:31:43.294 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.0096252000000000
2022-03-18 10:31:43.294 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72754.2286244533333333,分佣金额:4.0096252000000000,之后余额:72758.2382496533333333
2022-03-18 10:31:43.294 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:9.8506207800000000
2022-03-18 10:31:43.294 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72758.2382496533333333,分佣金额:9.8506207800000000,之后余额:72768.0888704333333333
2022-03-18 10:31:43.294 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-144.4899623188405797
2022-03-18 10:31:43.295 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11955' LIMIT 0,1 
2022-03-18 10:31:43.295 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:31:43.381 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:31:43.382 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:31:43.382 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:43.469 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:43.470 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11955) 
2022-03-18 10:31:43.470 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-18 10:31:43.553 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-18 10:31:43.554 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-3.9879229600000000
2022-03-18 10:31:43.555 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11955' LIMIT 0,1000 
2022-03-18 10:31:43.555 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:43.638 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:43.639 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:31:43.639 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:43.721 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:43.721 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905052,订单:11955,类型:51
2022-03-18 10:31:43.722 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:43.723 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:31:43.809 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:43.810 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11955' and type=? limit 0,100 
2022-03-18 10:31:43.811 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:31:43.896 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:43.896 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11955,数据库:2.79154607,计算:2.791546
2022-03-18 10:31:43.897 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11955' and type=? limit 0,100 
2022-03-18 10:31:43.898 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:31:43.983 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:43.983 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11955,比列:0.300000,数据库:1.1963768880000000,计算得:1.196376
2022-03-18 10:31:43.984 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-7.0000000000000000
2022-03-18 10:31:43.984 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-217.8478202898550724
2022-03-18 10:31:43.984 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11957' LIMIT 0,1 
2022-03-18 10:31:43.984 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:31:44.067 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:31:44.067 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:31:44.068 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:44.150 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:44.150 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-6.0125998400000000
2022-03-18 10:31:44.151 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11957' LIMIT 0,1000 
2022-03-18 10:31:44.151 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:44.234 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:44.235 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:31:44.235 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:44.319 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:44.321 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:44.321 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:31:44.403 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:44.404 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11957' and type=? limit 0,100 
2022-03-18 10:31:44.404 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:31:44.489 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:44.489 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11957,数据库:4.20881988,计算:4.208819
2022-03-18 10:31:44.490 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11957' and type=? limit 0,100 
2022-03-18 10:31:44.491 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:31:44.576 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:44.577 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11957,比列:0.300000,数据库:1.8037799520000000,计算得:1.803779
2022-03-18 10:31:44.577 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:214.3604158550289855
2022-03-18 10:31:44.578 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 10:31:44.578 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:44.664 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:44.665 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:31:44.665 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:44.746 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:44.747 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 10:31:44.748 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:44.831 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:44.832 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:31:44.832 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:44.913 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:44.914 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,1 
2022-03-18 10:31:44.914 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 10:31:44.996 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 10:31:44.997 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11956,计算得:-9.781800
2022-03-18 10:31:44.997 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-5.9968906400000000
2022-03-18 10:31:44.997 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 10:31:44.998 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:45.080 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:45.081 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:31:45.081 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:45.163 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:45.164 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:45.164 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:31:45.246 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:45.247 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,100 
2022-03-18 10:31:45.247 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:31:45.329 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:45.330 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11956,数据库:4.19782344,计算:4.197823
2022-03-18 10:31:45.330 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,100 
2022-03-18 10:31:45.331 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:31:45.423 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:45.423 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11956,比列:0.300000,数据库:1.7990671920000000,计算得:1.799067
2022-03-18 10:31:45.423 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-244.2513739130434782
2022-03-18 10:31:45.424 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11958' LIMIT 0,1 
2022-03-18 10:31:45.424 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:31:45.510 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:31:45.511 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:31:45.512 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:45.596 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:45.597 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-6.7413379200000000
2022-03-18 10:31:45.597 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11958' LIMIT 0,1000 
2022-03-18 10:31:45.598 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:45.680 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:45.681 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:31:45.681 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:45.762 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:45.763 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:45.764 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:31:45.845 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:45.846 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11958' and type=? limit 0,100 
2022-03-18 10:31:45.846 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:31:45.930 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:45.931 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11958,数据库:4.71893654,计算:4.718936
2022-03-18 10:31:45.931 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11958' and type=? limit 0,100 
2022-03-18 10:31:45.932 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:31:46.014 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:46.014 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11958,比列:0.300000,数据库:2.0224013760000000,计算得:2.022401
2022-03-18 10:31:46.015 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:2.7915460720000000
2022-03-18 10:31:46.015 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72768.0888704333333333,分佣金额:2.7915460720000000,之后余额:72770.8804165053333333
2022-03-18 10:31:46.015 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.2088198880000000
2022-03-18 10:31:46.015 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72770.8804165053333333,分佣金额:4.2088198880000000,之后余额:72775.0892363933333333
2022-03-18 10:31:46.015 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.1978234480000000
2022-03-18 10:31:46.015 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72775.0892363933333333,分佣金额:4.1978234480000000,之后余额:72779.2870598413333333
2022-03-18 10:31:46.015 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.7189365440000000
2022-03-18 10:31:46.016 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72779.2870598413333333,分佣金额:4.7189365440000000,之后余额:72784.0059963853333333
2022-03-18 10:31:46.016 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.1423941176470588
2022-03-18 10:31:46.016 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11961' LIMIT 0,1 
2022-03-18 10:31:46.016 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:31:46.100 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:31:46.100 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:31:46.101 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:46.182 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:46.183 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9228414000000000
2022-03-18 10:31:46.183 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11961' LIMIT 0,1000 
2022-03-18 10:31:46.183 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:46.265 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:46.265 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:31:46.265 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:46.349 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:46.350 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:46.350 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:31:46.432 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:46.433 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11961' and type=? limit 0,100 
2022-03-18 10:31:46.433 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:31:46.523 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:46.524 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11961,数据库:0.64598898,计算:0.645988
2022-03-18 10:31:46.524 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11961' and type=? limit 0,100 
2022-03-18 10:31:46.525 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:31:46.612 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:46.613 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11961,比列:0.300000,数据库:0.2768524200000000,计算得:0.276852
2022-03-18 10:31:46.613 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.6459889800000000
2022-03-18 10:31:46.613 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72784.0059963853333333,分佣金额:0.6459889800000000,之后余额:72784.6519853653333333
2022-03-18 10:31:46.613 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:27.8947941176470588
2022-03-18 10:31:46.613 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11962' LIMIT 0,1000 
2022-03-18 10:31:46.613 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:46.696 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:46.697 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:31:46.697 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:46.780 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:46.781 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11962' LIMIT 0,1000 
2022-03-18 10:31:46.781 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:46.863 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:46.864 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:31:46.864 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:46.945 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:46.946 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11962' and type=? limit 0,1 
2022-03-18 10:31:46.947 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 10:31:47.035 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 10:31:47.036 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11962,计算得:0.752400
2022-03-18 10:31:47.036 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.9231423600000000
2022-03-18 10:31:47.036 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11962' LIMIT 0,1000 
2022-03-18 10:31:47.037 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:31:47.119 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:31:47.120 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:31:47.120 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:31:47.203 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:31:47.204 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:31:47.204 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:31:47.287 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:31:47.288 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11962' and type=? limit 0,100 
2022-03-18 10:31:47.288 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:31:47.370 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:47.371 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11962,数据库:0.64619965,计算:0.646199
2022-03-18 10:31:47.372 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11962' and type=? limit 0,100 
2022-03-18 10:31:47.372 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:31:47.463 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:31:47.463 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11962,比列:0.300000,数据库:0.2769427080000000,计算得:0.276942
2022-03-18 10:31:47.464 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.6461996520000000
2022-03-18 10:31:47.464 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72784.6519853653333333,分佣金额:0.6461996520000000,之后余额:72785.2981850173333333
2022-03-18 10:31:47.464 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905052流水--------
2022-03-18 10:46:25.107 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-18 10:46:25.108 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905052(String)
2022-03-18 10:46:25.192 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-18 10:46:25.193 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905052' AND type=4 AND `size` = '0') 
2022-03-18 10:46:25.194 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-18 10:46:25.277 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-18 10:46:25.278 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:25.278 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-18 10:46:25.361 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-18 10:46:25.362 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:412.6103584804052671,hold:0E-16
2022-03-18 10:46:25.362 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-587.3896415195947329,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:412.6103584804052671,操作后，数据库存储的总金额:412.6103584804052671
2022-03-18 10:46:25.363 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:25.363 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:25.443 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:25.451 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) 
2022-03-18 10:46:25.451 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905052(String)
2022-03-18 10:46:25.532 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:25.532 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:25.532 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:25.614 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:25.615 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:72785.4230656613333333,hold:0E-16
2022-03-18 10:46:25.615 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:72746.98475498133,操作后，账户变化金额:38.4383106800000000,操作后，计算剩余的金额:72785.4230656613300000,操作后，数据库存储的总金额:72785.4230656613333333
2022-03-18 10:46:25.636 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-18 10:46:25.637 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905052(String)
2022-03-18 10:46:25.718 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-18 10:46:25.719 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:25.720 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-18 10:46:25.801 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-18 10:46:25.802 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905052' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-18 10:46:25.802 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-18 10:46:25.884 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-18 10:46:25.885 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:52.0000000000000000
2022-03-18 10:46:25.885 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:0.0,操作后，账户变化金额:-52.0000000000000000,操作后，计算剩余的金额:52.0000000000000000,操作后，数据库存储的总金额:52.0000000000000000
2022-03-18 10:46:25.886 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:25.886 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-18 10:46:25.970 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-18 10:46:25.970 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-18 10:46:25.971 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-18 10:46:26.060 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-18 10:46:26.060 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905052,合伙人:[{"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-18 10:46:26.061 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905052' and created_date>='' 
2022-03-18 10:46:26.061 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-18 10:46:26.153 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 48
2022-03-18 10:46:26.154 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905052,流水:[UserBillChain(userId=51905052, type=3, size=-72.6469188405797101, preBalance=1000.0000000000000000, postBalance=927.3530811594202899, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951开仓保证金-72.6469188405797101, createdDate=2022-03-18 10:28:10, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-2.0050549600000000, preBalance=927.3530811594202899, postBalance=925.3480261994202899, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951开仓手续费-2.0050549600000000, createdDate=2022-03-18 10:28:10, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=1.4035384720000000, preBalance=72746.9847549813333333, postBalance=72748.3882934533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11951, note=手续费返佣：1.403538472,单号来源:11951,用户来源: 51905052, createdDate=2022-03-18 10:28:11, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-254.3698170731707317, preBalance=925.3480261994202899, postBalance=670.9782091262495582, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952开仓保证金-254.3698170731707317, createdDate=2022-03-18 10:28:15, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-8.3433300000000000, preBalance=670.9782091262495582, postBalance=662.6348791262495582, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952开仓手续费-8.3433300000000000, createdDate=2022-03-18 10:28:15, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-174.6352439024390243, preBalance=662.6348791262495582, postBalance=487.9996352238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11953, note=单号:11953开仓保证金-174.6352439024390243, createdDate=2022-03-18 10:28:18, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-5.7280360000000000, preBalance=487.9996352238105339, postBalance=482.2715992238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11953, note=单号:11953开仓手续费-5.7280360000000000, createdDate=2022-03-18 10:28:18, fromUserId=0, total=null), UserBillChain(userId=51905052, type=55, size=-7.0000000000000000, preBalance=482.2715992238105339, postBalance=475.2715992238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952增加保证金-7.0000000000000000, createdDate=2022-03-18 10:28:19, fromUserId=0, total=null), UserBillChain(userId=51905052, type=4, size=426.6505513633048780, preBalance=475.2715992238105339, postBalance=887.8498351871154119, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11954, note=单号:11954平仓收益412.5782359633048780, createdDate=2022-03-18 10:28:20, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-14.0723154000000000, preBalance=887.8498351871154119, postBalance=887.8498351871154119, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11954, note=单号:11954平仓手续费-14.0723154000000000, createdDate=2022-03-18 10:28:20, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=5.8403310000000000, preBalance=72748.3882934533333333, postBalance=72754.2286244533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11952, note=手续费返佣：5.840331,单号来源:11952,用户来源: 51905052, createdDate=2022-03-18 10:28:21, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.0096252000000000, preBalance=72754.2286244533333333, postBalance=72758.2382496533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11953, note=手续费返佣：4.0096252,单号来源:11953,用户来源: 51905052, createdDate=2022-03-18 10:28:21, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=9.8506207800000000, preBalance=72758.2382496533333333, postBalance=72768.0888704333333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11954, note=手续费返佣：9.85062078,单号来源:11954,用户来源: 51905052, createdDate=2022-03-18 10:28:22, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-144.4899623188405797, preBalance=887.8498351871154119, postBalance=743.3598728682748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11955, note=单号:11955开仓保证金-144.4899623188405797, createdDate=2022-03-18 10:28:23, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-3.9879229600000000, preBalance=743.3598728682748322, postBalance=739.3719499082748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11955, note=单号:11955开仓手续费-3.9879229600000000, createdDate=2022-03-18 10:28:23, fromUserId=0, total=null), UserBillChain(userId=51905052, type=55, size=-7.0000000000000000, preBalance=739.3719499082748322, postBalance=732.3719499082748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951增加保证金-7.0000000000000000, createdDate=2022-03-18 10:28:25, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-217.8478202898550724, preBalance=732.3719499082748322, postBalance=514.5241296184197598, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11957, note=单号:11957开仓保证金-217.8478202898550724, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-6.0125998400000000, preBalance=514.5241296184197598, postBalance=508.5115297784197598, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11957, note=单号:11957开仓手续费-6.0125998400000000, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=4, size=214.3604158550289855, preBalance=508.5115297784197598, postBalance=716.8750549934487453, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11956, note=单号:11956平仓收益208.3635252150289855, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-5.9968906400000000, preBalance=716.8750549934487453, postBalance=716.8750549934487453, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11956, note=单号:11956平仓手续费-5.9968906400000000, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-244.2513739130434782, preBalance=716.8750549934487453, postBalance=472.6236810804052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11958, note=单号:11958开仓保证金-244.2513739130434782, createdDate=2022-03-18 10:28:27, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-6.7413379200000000, preBalance=472.6236810804052671, postBalance=465.8823431604052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11958, note=单号:11958开仓手续费-6.7413379200000000, createdDate=2022-03-18 10:28:27, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=2.7915460720000000, preBalance=72768.0888704333333333, postBalance=72770.8804165053333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11955, note=手续费返佣：2.791546072,单号来源:11955,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.2088198880000000, preBalance=72770.8804165053333333, postBalance=72775.0892363933333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11957, note=手续费返佣：4.208819888,单号来源:11957,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.1978234480000000, preBalance=72775.0892363933333333, postBalance=72779.2870598413333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11956, note=手续费返佣：4.197823448,单号来源:11956,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.7189365440000000, preBalance=72779.2870598413333333, postBalance=72784.0059963853333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11958, note=手续费返佣：4.718936544,单号来源:11958,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-27.1423941176470588, preBalance=465.8823431604052671, postBalance=438.7399490427582083, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11961, note=单号:11961开仓保证金-27.1423941176470588, createdDate=2022-03-18 10:28:38, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-0.9228414000000000, preBalance=438.7399490427582083, postBalance=437.8171076427582083, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11961, note=单号:11961开仓手续费-0.9228414000000000, createdDate=2022-03-18 10:28:38, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.6459889800000000, preBalance=72784.0059963853333333, postBalance=72784.6519853653333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11961, note=手续费返佣：0.64598898,单号来源:11961,用户来源: 51905052, createdDate=2022-03-18 10:28:42, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=4, size=27.8947941176470588, preBalance=437.8171076427582083, postBalance=464.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11962, note=单号:11962平仓收益26.9716517576470588, createdDate=2022-03-18 10:30:58, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-0.9231423600000000, preBalance=464.7887594004052671, postBalance=464.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11962, note=单号:11962平仓手续费-0.9231423600000000, createdDate=2022-03-18 10:30:58, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.6461996520000000, preBalance=72784.6519853653333333, postBalance=72785.2981850173333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11962, note=手续费返佣：0.646199652,单号来源:11962,用户来源: 51905052, createdDate=2022-03-18 10:31:02, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=6, size=-51.0000000000000000, preBalance=464.7887594004052671, postBalance=413.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3924, note=转出：51.00000000, createdDate=2022-03-18 10:32:33, fromUserId=null, total=null), UserBillChain(userId=51905052, type=6, size=-34.0000000000000000, preBalance=413.7887594004052671, postBalance=379.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77490, note=用户ID:51905052, 转出34.0000000000000000USDT, createdDate=2022-03-18 10:32:39, fromUserId=null, total=null), UserBillChain(userId=51905052, type=5, size=11.0000000000000000, preBalance=379.7887594004052671, postBalance=390.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:11.0000, createdDate=2022-03-18 10:32:49, fromUserId=null, total=null), UserBillChain(userId=51905052, type=5, size=22.0000000000000000, preBalance=390.7887594004052671, postBalance=412.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77492, note=用户ID:51905052, 转入22USDT, createdDate=2022-03-18 10:32:58, fromUserId=null, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162232400000000, preBalance=412.7887594004052671, postBalance=412.7725361604052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11964, note=单号:11964开仓手续费-0.0162232400000000, createdDate=2022-03-18 10:37:28, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113562680000000, preBalance=72785.2981850173333333, postBalance=72785.3095412853333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11964, note=手续费返佣：0.011356268,单号来源:11964,用户来源: 51905052, createdDate=2022-03-18 10:37:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162247200000000, preBalance=412.7725361604052671, postBalance=412.7563114404052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11965, note=单号:11965开仓手续费-0.0162247200000000, createdDate=2022-03-18 10:40:44, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113573040000000, preBalance=72785.3095412853333333, postBalance=72785.3208985893333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11965, note=手续费返佣：0.011357304,单号来源:11965,用户来源: 51905052, createdDate=2022-03-18 10:40:52, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0324535200000000, preBalance=412.7563114404052671, postBalance=412.7238579204052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11966, note=单号:11966开仓手续费-0.0324535200000000, createdDate=2022-03-18 10:41:07, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0227174640000000, preBalance=72785.3208985893333333, postBalance=72785.3436160533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11966, note=手续费返佣：0.022717464,单号来源:11966,用户来源: 51905052, createdDate=2022-03-18 10:41:12, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162292800000000, preBalance=412.7238579204052671, postBalance=412.7076286404052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11967, note=单号:11967开仓手续费-0.0162292800000000, createdDate=2022-03-18 10:41:32, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113604960000000, preBalance=72785.3436160533333333, postBalance=72785.3549765493333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11967, note=手续费返佣：0.011360496,单号来源:11967,用户来源: 51905052, createdDate=2022-03-18 10:41:42, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0810554000000000, preBalance=412.7076286404052671, postBalance=412.6265732404052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11968, note=单号:11968开仓手续费-0.0810554000000000, createdDate=2022-03-18 10:43:48, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0567387800000000, preBalance=72785.3549765493333333, postBalance=72785.4117153293333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11968, note=手续费返佣：0.05673878,单号来源:11968,用户来源: 51905052, createdDate=2022-03-18 10:43:52, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162147600000000, preBalance=412.6265732404052671, postBalance=412.6103584804052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11969, note=单号:11969开仓手续费-0.0162147600000000, createdDate=2022-03-18 10:44:24, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113503320000000, preBalance=72785.4117153293333333, postBalance=72785.4230656613333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11969, note=手续费返佣：0.011350332,单号来源:11969,用户来源: 51905052, createdDate=2022-03-18 10:44:32, fromUserId=51905052, total=null)]
2022-03-18 10:46:26.156 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905052流水--------
2022-03-18 10:46:26.157 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-72.6469188405797101
2022-03-18 10:46:26.157 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11951' LIMIT 0,1 
2022-03-18 10:46:26.158 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:46:26.240 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:46:26.241 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:46:26.241 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:26.322 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:26.322 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-2.0050549600000000
2022-03-18 10:46:26.323 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11951' LIMIT 0,1000 
2022-03-18 10:46:26.324 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:26.406 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-18 10:46:26.407 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:46:26.407 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:26.490 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:26.491 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:26.492 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:26.574 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:26.575 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11951' and type=? limit 0,100 
2022-03-18 10:46:26.575 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:26.658 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:26.659 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11951,数据库:1.40353847,计算:1.403538
2022-03-18 10:46:26.660 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11951' and type=? limit 0,100 
2022-03-18 10:46:26.660 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:26.743 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:26.744 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11951,比列:0.300000,数据库:0.6015164880000000,计算得:0.601516
2022-03-18 10:46:26.744 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:1.4035384720000000
2022-03-18 10:46:26.746 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72746.9847549813333333,分佣金额:1.4035384720000000,之后余额:72748.3882934533333333
2022-03-18 10:46:26.746 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-254.3698170731707317
2022-03-18 10:46:26.746 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11952' LIMIT 0,1 
2022-03-18 10:46:26.746 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:46:26.828 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:46:26.828 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:46:26.829 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:26.910 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:26.910 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-8.3433300000000000
2022-03-18 10:46:26.911 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11952' LIMIT 0,1000 
2022-03-18 10:46:26.911 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:26.993 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-18 10:46:26.994 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:46:26.994 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:27.078 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:27.079 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:27.079 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:27.162 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:27.163 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11952' and type=? limit 0,100 
2022-03-18 10:46:27.163 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:27.244 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:27.245 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11952,数据库:5.84033100,计算:5.840331
2022-03-18 10:46:27.245 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11952' and type=? limit 0,100 
2022-03-18 10:46:27.245 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:27.327 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:27.328 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11952,比列:0.300000,数据库:2.5029990000000000,计算得:2.502999
2022-03-18 10:46:27.328 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-174.6352439024390243
2022-03-18 10:46:27.328 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11953' LIMIT 0,1 
2022-03-18 10:46:27.329 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:46:27.410 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:46:27.411 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:46:27.411 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:27.492 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:27.493 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11953) 
2022-03-18 10:46:27.493 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-18 10:46:27.575 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-18 10:46:27.576 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-5.7280360000000000
2022-03-18 10:46:27.577 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11953' LIMIT 0,1000 
2022-03-18 10:46:27.577 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:27.662 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:27.662 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:46:27.662 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:27.744 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:27.744 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905052,订单:11953,类型:51
2022-03-18 10:46:27.745 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:27.745 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:27.827 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:27.827 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11953' and type=? limit 0,100 
2022-03-18 10:46:27.828 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:27.910 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:27.910 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11953,数据库:4.00962520,计算:4.009625
2022-03-18 10:46:27.911 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11953' and type=? limit 0,100 
2022-03-18 10:46:27.911 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:27.993 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:27.993 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11953,比列:0.300000,数据库:1.7184108000000000,计算得:1.718410
2022-03-18 10:46:27.993 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-7.0000000000000000
2022-03-18 10:46:27.993 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:426.6505513633048780
2022-03-18 10:46:27.994 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 10:46:27.994 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:28.078 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:28.079 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:46:28.079 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:28.176 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:28.177 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 10:46:28.177 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:28.259 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:28.259 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:46:28.259 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:28.340 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:28.341 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,1 
2022-03-18 10:46:28.342 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 10:46:28.424 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 10:46:28.425 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11954,计算得:-2.373500
2022-03-18 10:46:28.425 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-14.0723154000000000
2022-03-18 10:46:28.426 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 10:46:28.426 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:28.508 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:28.508 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:46:28.509 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:28.591 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:28.592 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:28.592 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:28.674 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:28.675 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,100 
2022-03-18 10:46:28.676 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:28.759 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:28.759 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11954,数据库:9.85062078,计算:9.850620
2022-03-18 10:46:28.760 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,100 
2022-03-18 10:46:28.760 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:28.843 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:28.844 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11954,比列:0.300000,数据库:4.2216946200000000,计算得:4.221694
2022-03-18 10:46:28.844 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:5.8403310000000000
2022-03-18 10:46:28.844 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72748.3882934533333333,分佣金额:5.8403310000000000,之后余额:72754.2286244533333333
2022-03-18 10:46:28.844 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.0096252000000000
2022-03-18 10:46:28.844 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72754.2286244533333333,分佣金额:4.0096252000000000,之后余额:72758.2382496533333333
2022-03-18 10:46:28.844 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:9.8506207800000000
2022-03-18 10:46:28.844 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72758.2382496533333333,分佣金额:9.8506207800000000,之后余额:72768.0888704333333333
2022-03-18 10:46:28.844 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-144.4899623188405797
2022-03-18 10:46:28.845 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11955' LIMIT 0,1 
2022-03-18 10:46:28.845 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:46:28.927 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:46:28.928 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:46:28.928 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:29.009 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:29.009 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11955) 
2022-03-18 10:46:29.009 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-18 10:46:29.095 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-18 10:46:29.095 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-3.9879229600000000
2022-03-18 10:46:29.096 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11955' LIMIT 0,1000 
2022-03-18 10:46:29.096 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:29.177 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:29.177 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:46:29.177 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:29.259 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:29.259 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905052,订单:11955,类型:51
2022-03-18 10:46:29.260 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:29.261 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:29.342 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:29.343 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11955' and type=? limit 0,100 
2022-03-18 10:46:29.344 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:29.427 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:29.427 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11955,数据库:2.79154607,计算:2.791546
2022-03-18 10:46:29.428 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11955' and type=? limit 0,100 
2022-03-18 10:46:29.428 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:29.510 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:29.510 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11955,比列:0.300000,数据库:1.1963768880000000,计算得:1.196376
2022-03-18 10:46:29.511 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-7.0000000000000000
2022-03-18 10:46:29.511 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-217.8478202898550724
2022-03-18 10:46:29.511 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11957' LIMIT 0,1 
2022-03-18 10:46:29.511 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:46:29.594 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:46:29.594 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:46:29.594 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:29.675 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:29.676 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-6.0125998400000000
2022-03-18 10:46:29.676 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11957' LIMIT 0,1000 
2022-03-18 10:46:29.677 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:29.758 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:29.759 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:46:29.759 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:29.840 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:29.841 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:29.842 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:29.924 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:29.925 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11957' and type=? limit 0,100 
2022-03-18 10:46:29.925 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:30.008 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:30.010 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11957,数据库:4.20881988,计算:4.208819
2022-03-18 10:46:30.010 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11957' and type=? limit 0,100 
2022-03-18 10:46:30.011 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:30.098 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:30.098 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11957,比列:0.300000,数据库:1.8037799520000000,计算得:1.803779
2022-03-18 10:46:30.098 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:214.3604158550289855
2022-03-18 10:46:30.098 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 10:46:30.099 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:30.184 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:30.184 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:46:30.184 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:30.266 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:30.267 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 10:46:30.267 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:30.352 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:30.353 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:46:30.353 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:30.434 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:30.436 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,1 
2022-03-18 10:46:30.436 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 10:46:30.519 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 10:46:30.520 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11956,计算得:-9.781800
2022-03-18 10:46:30.520 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-5.9968906400000000
2022-03-18 10:46:30.520 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 10:46:30.521 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:30.603 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:30.604 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:46:30.605 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:30.686 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:30.687 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:30.688 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:30.769 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:30.770 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,100 
2022-03-18 10:46:30.771 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:30.852 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:30.853 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11956,数据库:4.19782344,计算:4.197823
2022-03-18 10:46:30.853 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,100 
2022-03-18 10:46:30.853 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:30.936 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:30.937 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11956,比列:0.300000,数据库:1.7990671920000000,计算得:1.799067
2022-03-18 10:46:30.937 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-244.2513739130434782
2022-03-18 10:46:30.938 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11958' LIMIT 0,1 
2022-03-18 10:46:30.938 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:46:31.025 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:46:31.026 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:46:31.027 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:31.116 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:31.116 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-6.7413379200000000
2022-03-18 10:46:31.117 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11958' LIMIT 0,1000 
2022-03-18 10:46:31.118 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:31.200 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:31.202 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:46:31.202 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:31.283 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:31.284 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:31.284 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:31.365 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:31.365 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11958' and type=? limit 0,100 
2022-03-18 10:46:31.366 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:31.448 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:31.449 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11958,数据库:4.71893654,计算:4.718936
2022-03-18 10:46:31.449 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11958' and type=? limit 0,100 
2022-03-18 10:46:31.449 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:31.530 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:31.531 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11958,比列:0.300000,数据库:2.0224013760000000,计算得:2.022401
2022-03-18 10:46:31.531 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:2.7915460720000000
2022-03-18 10:46:31.531 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72768.0888704333333333,分佣金额:2.7915460720000000,之后余额:72770.8804165053333333
2022-03-18 10:46:31.531 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.2088198880000000
2022-03-18 10:46:31.531 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72770.8804165053333333,分佣金额:4.2088198880000000,之后余额:72775.0892363933333333
2022-03-18 10:46:31.531 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.1978234480000000
2022-03-18 10:46:31.531 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72775.0892363933333333,分佣金额:4.1978234480000000,之后余额:72779.2870598413333333
2022-03-18 10:46:31.531 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.7189365440000000
2022-03-18 10:46:31.531 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72779.2870598413333333,分佣金额:4.7189365440000000,之后余额:72784.0059963853333333
2022-03-18 10:46:31.531 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.1423941176470588
2022-03-18 10:46:31.531 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11961' LIMIT 0,1 
2022-03-18 10:46:31.532 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:46:31.614 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:46:31.615 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:46:31.615 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:31.696 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:31.697 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9228414000000000
2022-03-18 10:46:31.697 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11961' LIMIT 0,1000 
2022-03-18 10:46:31.697 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:31.779 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:31.779 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:46:31.779 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:31.861 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:31.862 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:31.862 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:31.953 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:31.954 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11961' and type=? limit 0,100 
2022-03-18 10:46:31.955 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:32.038 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:32.039 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11961,数据库:0.64598898,计算:0.645988
2022-03-18 10:46:32.039 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11961' and type=? limit 0,100 
2022-03-18 10:46:32.040 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:32.121 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:32.121 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11961,比列:0.300000,数据库:0.2768524200000000,计算得:0.276852
2022-03-18 10:46:32.121 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.6459889800000000
2022-03-18 10:46:32.121 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72784.0059963853333333,分佣金额:0.6459889800000000,之后余额:72784.6519853653333333
2022-03-18 10:46:32.122 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:27.8947941176470588
2022-03-18 10:46:32.122 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11962' LIMIT 0,1000 
2022-03-18 10:46:32.122 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:32.203 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:32.204 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:46:32.204 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:32.285 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:32.286 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11962' LIMIT 0,1000 
2022-03-18 10:46:32.287 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:32.369 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:32.370 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:46:32.371 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:32.453 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:32.454 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11962' and type=? limit 0,1 
2022-03-18 10:46:32.455 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 10:46:32.542 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 10:46:32.542 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11962,计算得:0.752400
2022-03-18 10:46:32.542 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.9231423600000000
2022-03-18 10:46:32.543 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11962' LIMIT 0,1000 
2022-03-18 10:46:32.543 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:32.625 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:32.626 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:46:32.626 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:32.707 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:32.708 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:32.708 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:32.791 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:32.792 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11962' and type=? limit 0,100 
2022-03-18 10:46:32.792 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:32.876 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:32.877 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11962,数据库:0.64619965,计算:0.646199
2022-03-18 10:46:32.877 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11962' and type=? limit 0,100 
2022-03-18 10:46:32.877 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:32.967 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:32.967 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11962,比列:0.300000,数据库:0.2769427080000000,计算得:0.276942
2022-03-18 10:46:32.967 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.6461996520000000
2022-03-18 10:46:32.967 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72784.6519853653333333,分佣金额:0.6461996520000000,之后余额:72785.2981850173333333
2022-03-18 10:46:32.967 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-51.0000000000000000
2022-03-18 10:46:32.967 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-34.0000000000000000
2022-03-18 10:46:32.968 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:11.0000000000000000
2022-03-18 10:46:32.968 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:22.0000000000000000
2022-03-18 10:46:32.968 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162232400000000
2022-03-18 10:46:32.968 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11964' LIMIT 0,1000 
2022-03-18 10:46:32.968 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:33.065 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:33.065 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:46:33.065 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:33.151 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:33.152 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:33.152 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:33.235 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:33.235 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11964' and type=? limit 0,100 
2022-03-18 10:46:33.236 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:33.316 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:33.317 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11964,数据库:0.01135626,计算:0.011356
2022-03-18 10:46:33.317 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11964' and type=? limit 0,100 
2022-03-18 10:46:33.317 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:33.399 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:33.400 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11964,比列:0.300000,数据库:0.0048669720000000,计算得:0.004866
2022-03-18 10:46:33.400 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113562680000000
2022-03-18 10:46:33.400 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.2981850173333333,分佣金额:0.0113562680000000,之后余额:72785.3095412853333333
2022-03-18 10:46:33.400 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162247200000000
2022-03-18 10:46:33.400 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11965' LIMIT 0,1000 
2022-03-18 10:46:33.401 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:33.482 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:33.483 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:46:33.483 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:33.564 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:33.564 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:33.564 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:33.646 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:33.647 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11965' and type=? limit 0,100 
2022-03-18 10:46:33.648 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:33.729 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:33.730 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11965,数据库:0.01135730,计算:0.011357
2022-03-18 10:46:33.730 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11965' and type=? limit 0,100 
2022-03-18 10:46:33.730 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:33.811 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:33.811 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11965,比列:0.300000,数据库:0.0048674160000000,计算得:0.004867
2022-03-18 10:46:33.811 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113573040000000
2022-03-18 10:46:33.811 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.3095412853333333,分佣金额:0.0113573040000000,之后余额:72785.3208985893333333
2022-03-18 10:46:33.811 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0324535200000000
2022-03-18 10:46:33.812 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11966' LIMIT 0,1000 
2022-03-18 10:46:33.812 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:33.893 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:33.893 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:46:33.893 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:33.974 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:33.976 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:33.976 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:34.058 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:34.059 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11966' and type=? limit 0,100 
2022-03-18 10:46:34.059 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:34.141 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:34.141 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11966,数据库:0.02271746,计算:0.022717
2022-03-18 10:46:34.142 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11966' and type=? limit 0,100 
2022-03-18 10:46:34.142 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:34.224 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:34.224 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11966,比列:0.300000,数据库:0.0097360560000000,计算得:0.009736
2022-03-18 10:46:34.225 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0227174640000000
2022-03-18 10:46:34.225 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.3208985893333333,分佣金额:0.0227174640000000,之后余额:72785.3436160533333333
2022-03-18 10:46:34.225 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162292800000000
2022-03-18 10:46:34.225 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11967' LIMIT 0,1000 
2022-03-18 10:46:34.225 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:34.307 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:34.308 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:46:34.308 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:34.389 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:34.391 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:34.391 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:34.472 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:34.473 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11967' and type=? limit 0,100 
2022-03-18 10:46:34.474 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:34.557 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:34.558 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11967,数据库:0.01136049,计算:0.011360
2022-03-18 10:46:34.558 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11967' and type=? limit 0,100 
2022-03-18 10:46:34.559 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:34.642 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:34.642 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11967,比列:0.300000,数据库:0.0048687840000000,计算得:0.004868
2022-03-18 10:46:34.643 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113604960000000
2022-03-18 10:46:34.644 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.3436160533333333,分佣金额:0.0113604960000000,之后余额:72785.3549765493333333
2022-03-18 10:46:34.644 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0810554000000000
2022-03-18 10:46:34.644 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11968' LIMIT 0,1000 
2022-03-18 10:46:34.645 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:34.727 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:34.727 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:46:34.727 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:34.809 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:34.809 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:34.809 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:34.892 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:34.893 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11968' and type=? limit 0,100 
2022-03-18 10:46:34.893 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:34.977 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:34.977 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11968,数据库:0.05673878,计算:0.056738
2022-03-18 10:46:34.978 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11968' and type=? limit 0,100 
2022-03-18 10:46:34.978 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:35.061 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:35.061 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11968,比列:0.300000,数据库:0.0243166200000000,计算得:0.024316
2022-03-18 10:46:35.062 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0567387800000000
2022-03-18 10:46:35.062 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.3549765493333333,分佣金额:0.0567387800000000,之后余额:72785.4117153293333333
2022-03-18 10:46:35.062 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162147600000000
2022-03-18 10:46:35.063 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11969' LIMIT 0,1000 
2022-03-18 10:46:35.063 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:46:35.153 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:46:35.154 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:46:35.154 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:46:35.235 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:46:35.235 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:46:35.236 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:46:35.321 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:46:35.322 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11969' and type=? limit 0,100 
2022-03-18 10:46:35.322 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:46:35.405 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:35.406 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11969,数据库:0.01135033,计算:0.011350
2022-03-18 10:46:35.407 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11969' and type=? limit 0,100 
2022-03-18 10:46:35.407 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:46:35.490 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:46:35.490 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11969,比列:0.300000,数据库:0.0048644280000000,计算得:0.004864
2022-03-18 10:46:35.491 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113503320000000
2022-03-18 10:46:35.491 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.4117153293333333,分佣金额:0.0113503320000000,之后余额:72785.4230656613333333
2022-03-18 10:46:35.491 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905052流水--------
2022-03-18 10:52:37.356 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-18 10:52:37.357 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905052(String)
2022-03-18 10:52:37.441 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-18 10:52:37.442 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905052' AND type=4 AND `size` = '0') 
2022-03-18 10:52:37.442 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-18 10:52:37.522 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-18 10:52:37.523 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:37.523 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-18 10:52:37.605 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-18 10:52:37.605 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:412.5941388404052671,hold:0E-16
2022-03-18 10:52:37.605 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-587.4058611595947329,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:412.5941388404052671,操作后，数据库存储的总金额:412.5941388404052671
2022-03-18 10:52:37.606 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:37.606 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:37.684 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:37.693 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) 
2022-03-18 10:52:37.693 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905052(String)
2022-03-18 10:52:37.780 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:37.780 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:37.780 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:37.864 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:37.864 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:72785.4344194093333333,hold:0E-16
2022-03-18 10:52:37.864 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:72746.98475498133,操作后，账户变化金额:38.4496644280000000,操作后，计算剩余的金额:72785.4344194093300000,操作后，数据库存储的总金额:72785.4344194093333333
2022-03-18 10:52:37.882 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-18 10:52:37.883 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905052(String)
2022-03-18 10:52:37.970 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-18 10:52:37.971 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:37.972 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-18 10:52:38.051 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-18 10:52:38.052 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905052' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-18 10:52:38.052 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-18 10:52:38.138 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-18 10:52:38.138 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:52.0000000000000000
2022-03-18 10:52:38.138 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:0.0,操作后，账户变化金额:-52.0000000000000000,操作后，计算剩余的金额:52.0000000000000000,操作后，数据库存储的总金额:52.0000000000000000
2022-03-18 10:52:38.138 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:38.139 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-18 10:52:38.219 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-18 10:52:38.219 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-18 10:52:38.219 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-18 10:52:38.303 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-18 10:52:38.303 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.SqlUtil - 用户:51905052,合伙人:[{"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-18 10:52:38.304 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905052' and created_date>='' 
2022-03-18 10:52:38.304 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-18 10:52:38.470 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 50
2022-03-18 10:52:38.470 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905052,流水:[UserBillChain(userId=51905052, type=3, size=-72.6469188405797101, preBalance=1000.0000000000000000, postBalance=927.3530811594202899, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951开仓保证金-72.6469188405797101, createdDate=2022-03-18 10:28:10, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-2.0050549600000000, preBalance=927.3530811594202899, postBalance=925.3480261994202899, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951开仓手续费-2.0050549600000000, createdDate=2022-03-18 10:28:10, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=1.4035384720000000, preBalance=72746.9847549813333333, postBalance=72748.3882934533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11951, note=手续费返佣：1.403538472,单号来源:11951,用户来源: 51905052, createdDate=2022-03-18 10:28:11, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-254.3698170731707317, preBalance=925.3480261994202899, postBalance=670.9782091262495582, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952开仓保证金-254.3698170731707317, createdDate=2022-03-18 10:28:15, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-8.3433300000000000, preBalance=670.9782091262495582, postBalance=662.6348791262495582, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952开仓手续费-8.3433300000000000, createdDate=2022-03-18 10:28:15, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-174.6352439024390243, preBalance=662.6348791262495582, postBalance=487.9996352238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11953, note=单号:11953开仓保证金-174.6352439024390243, createdDate=2022-03-18 10:28:18, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-5.7280360000000000, preBalance=487.9996352238105339, postBalance=482.2715992238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11953, note=单号:11953开仓手续费-5.7280360000000000, createdDate=2022-03-18 10:28:18, fromUserId=0, total=null), UserBillChain(userId=51905052, type=55, size=-7.0000000000000000, preBalance=482.2715992238105339, postBalance=475.2715992238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952增加保证金-7.0000000000000000, createdDate=2022-03-18 10:28:19, fromUserId=0, total=null), UserBillChain(userId=51905052, type=4, size=426.6505513633048780, preBalance=475.2715992238105339, postBalance=887.8498351871154119, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11954, note=单号:11954平仓收益412.5782359633048780, createdDate=2022-03-18 10:28:20, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-14.0723154000000000, preBalance=887.8498351871154119, postBalance=887.8498351871154119, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11954, note=单号:11954平仓手续费-14.0723154000000000, createdDate=2022-03-18 10:28:20, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=5.8403310000000000, preBalance=72748.3882934533333333, postBalance=72754.2286244533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11952, note=手续费返佣：5.840331,单号来源:11952,用户来源: 51905052, createdDate=2022-03-18 10:28:21, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.0096252000000000, preBalance=72754.2286244533333333, postBalance=72758.2382496533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11953, note=手续费返佣：4.0096252,单号来源:11953,用户来源: 51905052, createdDate=2022-03-18 10:28:21, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=9.8506207800000000, preBalance=72758.2382496533333333, postBalance=72768.0888704333333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11954, note=手续费返佣：9.85062078,单号来源:11954,用户来源: 51905052, createdDate=2022-03-18 10:28:22, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-144.4899623188405797, preBalance=887.8498351871154119, postBalance=743.3598728682748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11955, note=单号:11955开仓保证金-144.4899623188405797, createdDate=2022-03-18 10:28:23, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-3.9879229600000000, preBalance=743.3598728682748322, postBalance=739.3719499082748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11955, note=单号:11955开仓手续费-3.9879229600000000, createdDate=2022-03-18 10:28:23, fromUserId=0, total=null), UserBillChain(userId=51905052, type=55, size=-7.0000000000000000, preBalance=739.3719499082748322, postBalance=732.3719499082748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951增加保证金-7.0000000000000000, createdDate=2022-03-18 10:28:25, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-217.8478202898550724, preBalance=732.3719499082748322, postBalance=514.5241296184197598, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11957, note=单号:11957开仓保证金-217.8478202898550724, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-6.0125998400000000, preBalance=514.5241296184197598, postBalance=508.5115297784197598, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11957, note=单号:11957开仓手续费-6.0125998400000000, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=4, size=214.3604158550289855, preBalance=508.5115297784197598, postBalance=716.8750549934487453, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11956, note=单号:11956平仓收益208.3635252150289855, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-5.9968906400000000, preBalance=716.8750549934487453, postBalance=716.8750549934487453, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11956, note=单号:11956平仓手续费-5.9968906400000000, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-244.2513739130434782, preBalance=716.8750549934487453, postBalance=472.6236810804052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11958, note=单号:11958开仓保证金-244.2513739130434782, createdDate=2022-03-18 10:28:27, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-6.7413379200000000, preBalance=472.6236810804052671, postBalance=465.8823431604052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11958, note=单号:11958开仓手续费-6.7413379200000000, createdDate=2022-03-18 10:28:27, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=2.7915460720000000, preBalance=72768.0888704333333333, postBalance=72770.8804165053333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11955, note=手续费返佣：2.791546072,单号来源:11955,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.2088198880000000, preBalance=72770.8804165053333333, postBalance=72775.0892363933333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11957, note=手续费返佣：4.208819888,单号来源:11957,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.1978234480000000, preBalance=72775.0892363933333333, postBalance=72779.2870598413333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11956, note=手续费返佣：4.197823448,单号来源:11956,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.7189365440000000, preBalance=72779.2870598413333333, postBalance=72784.0059963853333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11958, note=手续费返佣：4.718936544,单号来源:11958,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-27.1423941176470588, preBalance=465.8823431604052671, postBalance=438.7399490427582083, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11961, note=单号:11961开仓保证金-27.1423941176470588, createdDate=2022-03-18 10:28:38, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-0.9228414000000000, preBalance=438.7399490427582083, postBalance=437.8171076427582083, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11961, note=单号:11961开仓手续费-0.9228414000000000, createdDate=2022-03-18 10:28:38, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.6459889800000000, preBalance=72784.0059963853333333, postBalance=72784.6519853653333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11961, note=手续费返佣：0.64598898,单号来源:11961,用户来源: 51905052, createdDate=2022-03-18 10:28:42, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=4, size=27.8947941176470588, preBalance=437.8171076427582083, postBalance=464.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11962, note=单号:11962平仓收益26.9716517576470588, createdDate=2022-03-18 10:30:58, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-0.9231423600000000, preBalance=464.7887594004052671, postBalance=464.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11962, note=单号:11962平仓手续费-0.9231423600000000, createdDate=2022-03-18 10:30:58, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.6461996520000000, preBalance=72784.6519853653333333, postBalance=72785.2981850173333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11962, note=手续费返佣：0.646199652,单号来源:11962,用户来源: 51905052, createdDate=2022-03-18 10:31:02, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=6, size=-51.0000000000000000, preBalance=464.7887594004052671, postBalance=413.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3924, note=转出：51.00000000, createdDate=2022-03-18 10:32:33, fromUserId=null, total=null), UserBillChain(userId=51905052, type=6, size=-34.0000000000000000, preBalance=413.7887594004052671, postBalance=379.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77490, note=用户ID:51905052, 转出34.0000000000000000USDT, createdDate=2022-03-18 10:32:39, fromUserId=null, total=null), UserBillChain(userId=51905052, type=5, size=11.0000000000000000, preBalance=379.7887594004052671, postBalance=390.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:11.0000, createdDate=2022-03-18 10:32:49, fromUserId=null, total=null), UserBillChain(userId=51905052, type=5, size=22.0000000000000000, preBalance=390.7887594004052671, postBalance=412.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77492, note=用户ID:51905052, 转入22USDT, createdDate=2022-03-18 10:32:58, fromUserId=null, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162232400000000, preBalance=412.7887594004052671, postBalance=412.7725361604052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11964, note=单号:11964开仓手续费-0.0162232400000000, createdDate=2022-03-18 10:37:28, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113562680000000, preBalance=72785.2981850173333333, postBalance=72785.3095412853333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11964, note=手续费返佣：0.011356268,单号来源:11964,用户来源: 51905052, createdDate=2022-03-18 10:37:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162247200000000, preBalance=412.7725361604052671, postBalance=412.7563114404052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11965, note=单号:11965开仓手续费-0.0162247200000000, createdDate=2022-03-18 10:40:44, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113573040000000, preBalance=72785.3095412853333333, postBalance=72785.3208985893333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11965, note=手续费返佣：0.011357304,单号来源:11965,用户来源: 51905052, createdDate=2022-03-18 10:40:52, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0324535200000000, preBalance=412.7563114404052671, postBalance=412.7238579204052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11966, note=单号:11966开仓手续费-0.0324535200000000, createdDate=2022-03-18 10:41:07, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0227174640000000, preBalance=72785.3208985893333333, postBalance=72785.3436160533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11966, note=手续费返佣：0.022717464,单号来源:11966,用户来源: 51905052, createdDate=2022-03-18 10:41:12, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162292800000000, preBalance=412.7238579204052671, postBalance=412.7076286404052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11967, note=单号:11967开仓手续费-0.0162292800000000, createdDate=2022-03-18 10:41:32, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113604960000000, preBalance=72785.3436160533333333, postBalance=72785.3549765493333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11967, note=手续费返佣：0.011360496,单号来源:11967,用户来源: 51905052, createdDate=2022-03-18 10:41:42, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0810554000000000, preBalance=412.7076286404052671, postBalance=412.6265732404052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11968, note=单号:11968开仓手续费-0.0810554000000000, createdDate=2022-03-18 10:43:48, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0567387800000000, preBalance=72785.3549765493333333, postBalance=72785.4117153293333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11968, note=手续费返佣：0.05673878,单号来源:11968,用户来源: 51905052, createdDate=2022-03-18 10:43:52, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162147600000000, preBalance=412.6265732404052671, postBalance=412.6103584804052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11969, note=单号:11969开仓手续费-0.0162147600000000, createdDate=2022-03-18 10:44:24, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113503320000000, preBalance=72785.4117153293333333, postBalance=72785.4230656613333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11969, note=手续费返佣：0.011350332,单号来源:11969,用户来源: 51905052, createdDate=2022-03-18 10:44:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162196400000000, preBalance=412.6103584804052671, postBalance=412.5941388404052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11963, note=单号:11963开仓手续费-0.0162196400000000, createdDate=2022-03-18 10:48:28, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113537480000000, preBalance=72785.4230656613333333, postBalance=72785.4344194093333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11963, note=手续费返佣：0.011353748,单号来源:11963,用户来源: 51905052, createdDate=2022-03-18 10:48:32, fromUserId=51905052, total=null)]
2022-03-18 10:52:38.472 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905052流水--------
2022-03-18 10:52:38.473 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-72.6469188405797101
2022-03-18 10:52:38.473 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11951' LIMIT 0,1 
2022-03-18 10:52:38.473 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:52:38.555 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:52:38.555 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:52:38.555 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:38.635 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:38.635 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-2.0050549600000000
2022-03-18 10:52:38.636 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11951' LIMIT 0,1000 
2022-03-18 10:52:38.636 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:38.717 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-18 10:52:38.718 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:52:38.718 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:38.804 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:38.805 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:38.805 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:38.885 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:38.886 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11951' and type=? limit 0,100 
2022-03-18 10:52:38.887 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:38.967 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:38.968 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11951,数据库:1.40353847,计算:1.403538
2022-03-18 10:52:38.968 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11951' and type=? limit 0,100 
2022-03-18 10:52:38.969 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:39.049 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:39.049 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11951,比列:0.300000,数据库:0.6015164880000000,计算得:0.601516
2022-03-18 10:52:39.049 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:1.4035384720000000
2022-03-18 10:52:39.050 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72746.9847549813333333,分佣金额:1.4035384720000000,之后余额:72748.3882934533333333
2022-03-18 10:52:39.050 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-254.3698170731707317
2022-03-18 10:52:39.050 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11952' LIMIT 0,1 
2022-03-18 10:52:39.050 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:52:39.131 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:52:39.131 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:52:39.131 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:39.211 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:39.212 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-8.3433300000000000
2022-03-18 10:52:39.212 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11952' LIMIT 0,1000 
2022-03-18 10:52:39.212 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:39.293 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-18 10:52:39.293 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:52:39.293 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:39.371 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:39.372 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:39.372 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:39.451 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:39.452 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11952' and type=? limit 0,100 
2022-03-18 10:52:39.452 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:39.532 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:39.532 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11952,数据库:5.84033100,计算:5.840331
2022-03-18 10:52:39.532 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11952' and type=? limit 0,100 
2022-03-18 10:52:39.533 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:39.612 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:39.613 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11952,比列:0.300000,数据库:2.5029990000000000,计算得:2.502999
2022-03-18 10:52:39.613 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-174.6352439024390243
2022-03-18 10:52:39.613 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11953' LIMIT 0,1 
2022-03-18 10:52:39.613 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:52:39.692 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:52:39.693 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:52:39.693 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:39.773 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:39.774 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11953) 
2022-03-18 10:52:39.774 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-18 10:52:39.855 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-18 10:52:39.856 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-5.7280360000000000
2022-03-18 10:52:39.857 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11953' LIMIT 0,1000 
2022-03-18 10:52:39.857 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:39.940 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:39.940 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:52:39.940 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:40.022 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:40.023 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905052,订单:11953,类型:51
2022-03-18 10:52:40.024 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:40.024 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:40.110 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:40.110 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11953' and type=? limit 0,100 
2022-03-18 10:52:40.111 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:40.201 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:40.201 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11953,数据库:4.00962520,计算:4.009625
2022-03-18 10:52:40.202 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11953' and type=? limit 0,100 
2022-03-18 10:52:40.202 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:40.282 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:40.283 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11953,比列:0.300000,数据库:1.7184108000000000,计算得:1.718410
2022-03-18 10:52:40.283 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-7.0000000000000000
2022-03-18 10:52:40.283 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:426.6505513633048780
2022-03-18 10:52:40.283 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 10:52:40.283 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:40.363 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:40.364 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:52:40.364 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:40.444 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:40.444 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 10:52:40.444 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:40.524 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:40.525 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:52:40.525 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:40.605 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:40.605 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,1 
2022-03-18 10:52:40.606 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 10:52:40.692 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 10:52:40.693 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11954,计算得:-2.373500
2022-03-18 10:52:40.693 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-14.0723154000000000
2022-03-18 10:52:40.693 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 10:52:40.693 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:40.776 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:40.776 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:52:40.777 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:40.855 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:40.856 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:40.856 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:40.936 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:40.937 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,100 
2022-03-18 10:52:40.937 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:41.021 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:41.022 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11954,数据库:9.85062078,计算:9.850620
2022-03-18 10:52:41.023 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,100 
2022-03-18 10:52:41.023 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:41.110 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:41.110 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11954,比列:0.300000,数据库:4.2216946200000000,计算得:4.221694
2022-03-18 10:52:41.110 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:5.8403310000000000
2022-03-18 10:52:41.110 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72748.3882934533333333,分佣金额:5.8403310000000000,之后余额:72754.2286244533333333
2022-03-18 10:52:41.110 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.0096252000000000
2022-03-18 10:52:41.111 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72754.2286244533333333,分佣金额:4.0096252000000000,之后余额:72758.2382496533333333
2022-03-18 10:52:41.111 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:9.8506207800000000
2022-03-18 10:52:41.111 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72758.2382496533333333,分佣金额:9.8506207800000000,之后余额:72768.0888704333333333
2022-03-18 10:52:41.111 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-144.4899623188405797
2022-03-18 10:52:41.111 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11955' LIMIT 0,1 
2022-03-18 10:52:41.112 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:52:41.195 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:52:41.196 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:52:41.196 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:41.279 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:41.279 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11955) 
2022-03-18 10:52:41.280 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-18 10:52:41.361 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-18 10:52:41.362 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-3.9879229600000000
2022-03-18 10:52:41.362 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11955' LIMIT 0,1000 
2022-03-18 10:52:41.362 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:41.445 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:41.446 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:52:41.446 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:41.527 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:41.528 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905052,订单:11955,类型:51
2022-03-18 10:52:41.528 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:41.528 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:41.609 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:41.610 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11955' and type=? limit 0,100 
2022-03-18 10:52:41.611 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:41.697 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:41.698 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11955,数据库:2.79154607,计算:2.791546
2022-03-18 10:52:41.698 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11955' and type=? limit 0,100 
2022-03-18 10:52:41.698 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:41.780 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:41.780 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11955,比列:0.300000,数据库:1.1963768880000000,计算得:1.196376
2022-03-18 10:52:41.780 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-7.0000000000000000
2022-03-18 10:52:41.780 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-217.8478202898550724
2022-03-18 10:52:41.780 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11957' LIMIT 0,1 
2022-03-18 10:52:41.780 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:52:41.868 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:52:41.869 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:52:41.869 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:41.947 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:41.948 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-6.0125998400000000
2022-03-18 10:52:41.948 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11957' LIMIT 0,1000 
2022-03-18 10:52:41.948 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:42.029 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:42.030 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:52:42.030 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:42.111 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:42.111 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:42.112 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:42.200 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:42.201 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11957' and type=? limit 0,100 
2022-03-18 10:52:42.201 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:42.282 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:42.282 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11957,数据库:4.20881988,计算:4.208819
2022-03-18 10:52:42.283 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11957' and type=? limit 0,100 
2022-03-18 10:52:42.283 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:42.363 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:42.363 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11957,比列:0.300000,数据库:1.8037799520000000,计算得:1.803779
2022-03-18 10:52:42.364 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:214.3604158550289855
2022-03-18 10:52:42.364 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 10:52:42.364 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:42.444 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:42.444 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:52:42.444 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:42.523 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:42.524 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 10:52:42.524 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:42.604 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:42.604 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:52:42.605 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:42.688 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:42.689 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,1 
2022-03-18 10:52:42.689 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 10:52:42.775 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 10:52:42.775 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11956,计算得:-9.781800
2022-03-18 10:52:42.776 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-5.9968906400000000
2022-03-18 10:52:42.776 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 10:52:42.777 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:42.856 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:42.857 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 10:52:42.857 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:42.939 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:42.939 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:42.940 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:43.020 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:43.021 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,100 
2022-03-18 10:52:43.021 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:43.104 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:43.104 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11956,数据库:4.19782344,计算:4.197823
2022-03-18 10:52:43.105 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,100 
2022-03-18 10:52:43.105 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:43.193 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:43.193 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11956,比列:0.300000,数据库:1.7990671920000000,计算得:1.799067
2022-03-18 10:52:43.193 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-244.2513739130434782
2022-03-18 10:52:43.193 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11958' LIMIT 0,1 
2022-03-18 10:52:43.193 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:52:43.272 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:52:43.273 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:52:43.273 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:43.353 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:43.353 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-6.7413379200000000
2022-03-18 10:52:43.354 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11958' LIMIT 0,1000 
2022-03-18 10:52:43.354 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:43.434 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:43.434 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 10:52:43.434 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:43.513 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:43.513 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:43.514 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:43.592 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:43.593 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11958' and type=? limit 0,100 
2022-03-18 10:52:43.593 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:43.672 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:43.673 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11958,数据库:4.71893654,计算:4.718936
2022-03-18 10:52:43.673 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11958' and type=? limit 0,100 
2022-03-18 10:52:43.674 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:43.754 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:43.754 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11958,比列:0.300000,数据库:2.0224013760000000,计算得:2.022401
2022-03-18 10:52:43.755 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:2.7915460720000000
2022-03-18 10:52:43.755 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72768.0888704333333333,分佣金额:2.7915460720000000,之后余额:72770.8804165053333333
2022-03-18 10:52:43.755 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.2088198880000000
2022-03-18 10:52:43.755 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72770.8804165053333333,分佣金额:4.2088198880000000,之后余额:72775.0892363933333333
2022-03-18 10:52:43.755 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.1978234480000000
2022-03-18 10:52:43.755 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72775.0892363933333333,分佣金额:4.1978234480000000,之后余额:72779.2870598413333333
2022-03-18 10:52:43.755 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.7189365440000000
2022-03-18 10:52:43.755 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72779.2870598413333333,分佣金额:4.7189365440000000,之后余额:72784.0059963853333333
2022-03-18 10:52:43.755 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.1423941176470588
2022-03-18 10:52:43.756 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11961' LIMIT 0,1 
2022-03-18 10:52:43.756 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 10:52:43.841 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 10:52:43.842 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:52:43.843 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:43.923 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:43.923 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9228414000000000
2022-03-18 10:52:43.924 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11961' LIMIT 0,1000 
2022-03-18 10:52:43.924 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:44.008 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:44.008 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:52:44.008 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:44.088 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:44.088 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:44.088 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:44.169 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:44.169 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11961' and type=? limit 0,100 
2022-03-18 10:52:44.169 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:44.250 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:44.250 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11961,数据库:0.64598898,计算:0.645988
2022-03-18 10:52:44.250 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11961' and type=? limit 0,100 
2022-03-18 10:52:44.250 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:44.330 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:44.330 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11961,比列:0.300000,数据库:0.2768524200000000,计算得:0.276852
2022-03-18 10:52:44.330 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.6459889800000000
2022-03-18 10:52:44.330 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72784.0059963853333333,分佣金额:0.6459889800000000,之后余额:72784.6519853653333333
2022-03-18 10:52:44.330 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:27.8947941176470588
2022-03-18 10:52:44.331 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11962' LIMIT 0,1000 
2022-03-18 10:52:44.331 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:44.411 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:44.411 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:52:44.411 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:44.491 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:44.491 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11962' LIMIT 0,1000 
2022-03-18 10:52:44.492 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:44.573 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:44.574 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:52:44.575 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:44.655 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:44.656 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11962' and type=? limit 0,1 
2022-03-18 10:52:44.656 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 10:52:44.736 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 10:52:44.736 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11962,计算得:0.752400
2022-03-18 10:52:44.737 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.9231423600000000
2022-03-18 10:52:44.737 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11962' LIMIT 0,1000 
2022-03-18 10:52:44.737 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:44.818 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:44.818 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:52:44.818 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:44.899 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:44.900 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:44.900 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:44.979 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:44.979 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11962' and type=? limit 0,100 
2022-03-18 10:52:44.980 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:45.061 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:45.062 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11962,数据库:0.64619965,计算:0.646199
2022-03-18 10:52:45.062 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11962' and type=? limit 0,100 
2022-03-18 10:52:45.063 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:45.147 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:45.148 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11962,比列:0.300000,数据库:0.2769427080000000,计算得:0.276942
2022-03-18 10:52:45.148 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.6461996520000000
2022-03-18 10:52:45.148 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72784.6519853653333333,分佣金额:0.6461996520000000,之后余额:72785.2981850173333333
2022-03-18 10:52:45.148 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-51.0000000000000000
2022-03-18 10:52:45.148 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-34.0000000000000000
2022-03-18 10:52:45.149 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:11.0000000000000000
2022-03-18 10:52:45.149 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:22.0000000000000000
2022-03-18 10:52:45.149 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162232400000000
2022-03-18 10:52:45.149 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11964' LIMIT 0,1000 
2022-03-18 10:52:45.150 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:45.230 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:45.231 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:52:45.231 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:45.310 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:45.311 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:45.311 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:45.389 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:45.390 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11964' and type=? limit 0,100 
2022-03-18 10:52:45.391 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:45.470 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:45.470 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11964,数据库:0.01135626,计算:0.011356
2022-03-18 10:52:45.471 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11964' and type=? limit 0,100 
2022-03-18 10:52:45.471 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:45.551 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:45.552 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11964,比列:0.300000,数据库:0.0048669720000000,计算得:0.004866
2022-03-18 10:52:45.552 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113562680000000
2022-03-18 10:52:45.552 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.2981850173333333,分佣金额:0.0113562680000000,之后余额:72785.3095412853333333
2022-03-18 10:52:45.552 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162247200000000
2022-03-18 10:52:45.552 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11965' LIMIT 0,1000 
2022-03-18 10:52:45.553 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:45.633 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:45.634 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:52:45.634 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:45.713 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:45.715 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:45.715 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:45.795 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:45.796 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11965' and type=? limit 0,100 
2022-03-18 10:52:45.796 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:45.878 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:45.878 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11965,数据库:0.01135730,计算:0.011357
2022-03-18 10:52:45.879 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11965' and type=? limit 0,100 
2022-03-18 10:52:45.879 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:45.962 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:45.962 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11965,比列:0.300000,数据库:0.0048674160000000,计算得:0.004867
2022-03-18 10:52:45.963 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113573040000000
2022-03-18 10:52:45.963 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.3095412853333333,分佣金额:0.0113573040000000,之后余额:72785.3208985893333333
2022-03-18 10:52:45.963 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0324535200000000
2022-03-18 10:52:45.964 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11966' LIMIT 0,1000 
2022-03-18 10:52:45.964 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:46.044 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:46.046 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:52:46.065 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:46.149 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:46.149 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:46.149 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:46.237 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:46.238 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11966' and type=? limit 0,100 
2022-03-18 10:52:46.239 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:46.319 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:46.320 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11966,数据库:0.02271746,计算:0.022717
2022-03-18 10:52:46.320 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11966' and type=? limit 0,100 
2022-03-18 10:52:46.321 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:46.400 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:46.400 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11966,比列:0.300000,数据库:0.0097360560000000,计算得:0.009736
2022-03-18 10:52:46.401 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0227174640000000
2022-03-18 10:52:46.401 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.3208985893333333,分佣金额:0.0227174640000000,之后余额:72785.3436160533333333
2022-03-18 10:52:46.401 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162292800000000
2022-03-18 10:52:46.401 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11967' LIMIT 0,1000 
2022-03-18 10:52:46.401 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:46.481 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:46.481 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:52:46.481 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:46.560 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:46.560 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:46.560 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:46.640 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:46.640 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11967' and type=? limit 0,100 
2022-03-18 10:52:46.640 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:46.722 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:46.722 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11967,数据库:0.01136049,计算:0.011360
2022-03-18 10:52:46.723 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11967' and type=? limit 0,100 
2022-03-18 10:52:46.723 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:46.803 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:46.804 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11967,比列:0.300000,数据库:0.0048687840000000,计算得:0.004868
2022-03-18 10:52:46.804 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113604960000000
2022-03-18 10:52:46.804 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.3436160533333333,分佣金额:0.0113604960000000,之后余额:72785.3549765493333333
2022-03-18 10:52:46.804 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0810554000000000
2022-03-18 10:52:46.804 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11968' LIMIT 0,1000 
2022-03-18 10:52:46.805 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:46.886 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:46.887 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:52:46.887 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:46.966 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:46.967 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:46.967 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:47.046 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:47.047 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11968' and type=? limit 0,100 
2022-03-18 10:52:47.047 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:47.127 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:47.128 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11968,数据库:0.05673878,计算:0.056738
2022-03-18 10:52:47.128 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11968' and type=? limit 0,100 
2022-03-18 10:52:47.129 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:47.217 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:47.217 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11968,比列:0.300000,数据库:0.0243166200000000,计算得:0.024316
2022-03-18 10:52:47.217 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0567387800000000
2022-03-18 10:52:47.217 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.3549765493333333,分佣金额:0.0567387800000000,之后余额:72785.4117153293333333
2022-03-18 10:52:47.217 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162147600000000
2022-03-18 10:52:47.217 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11969' LIMIT 0,1000 
2022-03-18 10:52:47.217 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:47.297 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:47.297 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:52:47.298 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:47.376 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:47.376 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:47.377 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:47.457 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:47.457 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11969' and type=? limit 0,100 
2022-03-18 10:52:47.458 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:47.536 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:47.536 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11969,数据库:0.01135033,计算:0.011350
2022-03-18 10:52:47.537 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11969' and type=? limit 0,100 
2022-03-18 10:52:47.537 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:47.617 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:47.617 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11969,比列:0.300000,数据库:0.0048644280000000,计算得:0.004864
2022-03-18 10:52:47.617 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113503320000000
2022-03-18 10:52:47.617 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.4117153293333333,分佣金额:0.0113503320000000,之后余额:72785.4230656613333333
2022-03-18 10:52:47.617 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162196400000000
2022-03-18 10:52:47.618 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11963' LIMIT 0,1000 
2022-03-18 10:52:47.618 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 10:52:47.698 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 10:52:47.699 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 10:52:47.700 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 10:52:47.778 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 10:52:47.779 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 10:52:47.779 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 10:52:47.858 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 10:52:47.859 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11963' and type=? limit 0,100 
2022-03-18 10:52:47.859 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 10:52:47.938 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:47.938 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11963,数据库:0.01135374,计算:0.011353
2022-03-18 10:52:47.939 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11963' and type=? limit 0,100 
2022-03-18 10:52:47.939 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 10:52:48.019 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 10:52:48.020 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11963,比列:0.300000,数据库:0.0048658920000000,计算得:0.004865
2022-03-18 10:52:48.020 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113537480000000
2022-03-18 10:52:48.020 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.4230656613333333,分佣金额:0.0113537480000000,之后余额:72785.4344194093333333
2022-03-18 10:52:48.020 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905052流水--------
2022-03-18 11:31:25.545 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=8m22s951ms).
2022-03-18 11:32:51.633 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=56s62ms).
2022-03-18 11:37:31.365 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m39s733ms).
2022-03-18 11:40:42.121 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-18 11:40:42.123 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-18 11:40:46.998 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 31598 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-18 11:40:47.001 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-18 11:40:48.006 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-18 11:40:48.009 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-18 11:40:48.026 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Elasticsearch repository interfaces.
2022-03-18 11:40:48.030 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-18 11:40:48.031 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-18 11:40:48.038 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-18 11:40:48.048 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-18 11:40:48.050 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-18 11:40:48.064 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-03-18 11:40:48.767 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-18 11:40:48.783 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-18 11:40:48.783 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-18 11:40:48.783 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-18 11:40:48.956 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-18 11:40:48.956 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1874 ms
2022-03-18 11:40:50.120 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-18 11:40:50.818 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-18 11:40:50.819 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-18 11:40:50.819 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-18 11:40:51.045 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-18 11:40:51.062 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-18 11:40:51.073 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 5.682 seconds (JVM running for 6.669)
2022-03-18 11:49:04.552 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 31723 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-18 11:49:04.556 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-18 11:49:04.892 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.zmj.demo.DemoApplication]; nested exception is org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'socketDomain' for bean class [com.zmj.demo.domain.websocket.SocketDomain] conflicts with existing, non-compatible bean definition of same name and class [com.zmj.demo.domain.dev1.SocketDomain]
2022-03-18 11:49:04.920 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.zmj.demo.DemoApplication]; nested exception is org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'socketDomain' for bean class [com.zmj.demo.domain.websocket.SocketDomain] conflicts with existing, non-compatible bean definition of same name and class [com.zmj.demo.domain.dev1.SocketDomain]
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:189)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:331)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:247)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:311)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:338)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1332)
	at com.zmj.demo.DemoApplication.main(DemoApplication.java:10)
Caused by: org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'socketDomain' for bean class [com.zmj.demo.domain.websocket.SocketDomain] conflicts with existing, non-compatible bean definition of same name and class [com.zmj.demo.domain.dev1.SocketDomain]
	at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.checkCandidate(ClassPathBeanDefinitionScanner.java:349)
	at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:287)
	at org.springframework.context.annotation.ComponentScanAnnotationParser.parse(ComponentScanAnnotationParser.java:132)
	at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:296)
	at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:250)
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:207)
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:175)
	... 13 common frames omitted
2022-03-18 11:50:20.227 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 31744 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-18 11:50:20.229 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-18 11:50:21.827 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.zmj.demo.DemoApplication]; nested exception is org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'socketDomain' for bean class [com.zmj.demo.domain.websocket.SocketDomain] conflicts with existing, non-compatible bean definition of same name and class [com.zmj.demo.domain.dev1.SocketDomain]
2022-03-18 11:50:21.833 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-03-18 11:50:21.852 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.zmj.demo.DemoApplication]; nested exception is org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'socketDomain' for bean class [com.zmj.demo.domain.websocket.SocketDomain] conflicts with existing, non-compatible bean definition of same name and class [com.zmj.demo.domain.dev1.SocketDomain]
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:189)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:331)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:247)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:311)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:338)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1332)
	at com.zmj.demo.DemoApplication.main(DemoApplication.java:12)
Caused by: org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'socketDomain' for bean class [com.zmj.demo.domain.websocket.SocketDomain] conflicts with existing, non-compatible bean definition of same name and class [com.zmj.demo.domain.dev1.SocketDomain]
	at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.checkCandidate(ClassPathBeanDefinitionScanner.java:349)
	at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:287)
	at org.springframework.context.annotation.ComponentScanAnnotationParser.parse(ComponentScanAnnotationParser.java:132)
	at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:296)
	at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:250)
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:207)
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:175)
	... 13 common frames omitted
2022-03-18 11:51:23.814 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 31768 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-18 11:51:23.818 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-18 11:51:24.854 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-18 11:51:24.857 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-18 11:51:24.884 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 0 Elasticsearch repository interfaces.
2022-03-18 11:51:24.891 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-18 11:51:24.891 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-18 11:51:24.900 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-18 11:51:24.914 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-18 11:51:24.916 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-18 11:51:24.941 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2022-03-18 11:51:25.597 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-18 11:51:25.610 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-18 11:51:25.610 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-18 11:51:25.611 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-18 11:51:25.745 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-18 11:51:25.746 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1862 ms
2022-03-18 11:51:26.926 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-18 11:51:27.361 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onOpen ------
2022-03-18 11:51:27.454 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"subed","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575489493} --------
2022-03-18 11:51:27.539 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575485693,"data":{"mp":40484.6,"ts":1647575485632}} --------
2022-03-18 11:51:27.628 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"subed","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575489581} --------
2022-03-18 11:51:27.628 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575489050,"data":{"mp":108.45,"ts":1647575488858}} --------
2022-03-18 11:51:27.640 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"subed","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575489581} --------
2022-03-18 11:51:27.641 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575488272,"data":{"mp":2775.54,"ts":1647575488141}} --------
2022-03-18 11:51:27.836 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-18 11:51:27.837 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-18 11:51:27.837 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-18 11:51:28.071 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-18 11:51:28.088 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-18 11:51:28.099 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 5.126 seconds (JVM running for 5.757)
2022-03-18 11:51:29.195 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575491139,"data":{"mp":40484.6,"ts":1647575490708}} --------
2022-03-18 11:51:31.039 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575493066,"data":{"mp":2775.66,"ts":1647575492855}} --------
2022-03-18 11:51:31.960 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575493906,"data":{"mp":108.46,"ts":1647575493863}} --------
2022-03-18 11:51:32.473 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575493520"} --------
2022-03-18 11:51:32.474 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575493520"}
2022-03-18 11:51:33.805 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575495840,"data":{"mp":40484.7,"ts":1647575495633}} --------
2022-03-18 11:51:36.467 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575498418,"data":{"mp":2775.69,"ts":1647575497901}} --------
2022-03-18 11:51:37.010 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575499050,"data":{"mp":108.46,"ts":1647575499006}} --------
2022-03-18 11:51:37.387 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575498524"} --------
2022-03-18 11:51:37.389 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575498524"}
2022-03-18 11:51:37.892 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-18 11:51:37.892 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-18 11:51:37.893 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-18 11:51:38.095 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-18 11:51:38.661 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575500703,"data":{"mp":40484.7,"ts":1647575500645}} --------
2022-03-18 11:51:39.602 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-18 11:51:39.614 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-18 11:51:39.644 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905052(String)
2022-03-18 11:51:39.791 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-18 11:51:39.801 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905052' AND type=4 AND `size` = '0') 
2022-03-18 11:51:39.802 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-18 11:51:39.895 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-18 11:51:39.896 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:39.896 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-18 11:51:39.985 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-18 11:51:39.985 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:412.5941388404052671,hold:0E-16
2022-03-18 11:51:39.985 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-587.4058611595947329,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:412.5941388404052671,操作后，数据库存储的总金额:412.5941388404052671
2022-03-18 11:51:39.987 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:39.988 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:40.076 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:40.086 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) 
2022-03-18 11:51:40.087 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905052(String)
2022-03-18 11:51:40.175 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:40.175 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:40.176 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:40.267 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:40.268 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:72785.4344194093333333,hold:0E-16
2022-03-18 11:51:40.268 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:72746.98475498133,操作后，账户变化金额:38.4496644280000000,操作后，计算剩余的金额:72785.4344194093300000,操作后，数据库存储的总金额:72785.4344194093333333
2022-03-18 11:51:40.288 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-18 11:51:40.289 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905052(String)
2022-03-18 11:51:40.378 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-18 11:51:40.379 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:40.380 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-18 11:51:40.471 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-18 11:51:40.472 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905052' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-18 11:51:40.473 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-18 11:51:40.562 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-18 11:51:40.563 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:52.0000000000000000
2022-03-18 11:51:40.563 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:0.0,操作后，账户变化金额:-52.0000000000000000,操作后，计算剩余的金额:52.0000000000000000,操作后，数据库存储的总金额:52.0000000000000000
2022-03-18 11:51:40.564 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:40.565 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-18 11:51:40.658 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-18 11:51:40.659 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-18 11:51:40.659 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-18 11:51:40.751 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-18 11:51:40.751 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905052,合伙人:[{"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-18 11:51:40.752 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905052' and created_date>='' 
2022-03-18 11:51:40.753 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-18 11:51:40.966 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 50
2022-03-18 11:51:40.966 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905052,流水:[UserBillChain(userId=51905052, type=3, size=-72.6469188405797101, preBalance=1000.0000000000000000, postBalance=927.3530811594202899, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951开仓保证金-72.6469188405797101, createdDate=2022-03-18 10:28:10, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-2.0050549600000000, preBalance=927.3530811594202899, postBalance=925.3480261994202899, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951开仓手续费-2.0050549600000000, createdDate=2022-03-18 10:28:10, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=1.4035384720000000, preBalance=72746.9847549813333333, postBalance=72748.3882934533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11951, note=手续费返佣：1.403538472,单号来源:11951,用户来源: 51905052, createdDate=2022-03-18 10:28:11, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-254.3698170731707317, preBalance=925.3480261994202899, postBalance=670.9782091262495582, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952开仓保证金-254.3698170731707317, createdDate=2022-03-18 10:28:15, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-8.3433300000000000, preBalance=670.9782091262495582, postBalance=662.6348791262495582, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952开仓手续费-8.3433300000000000, createdDate=2022-03-18 10:28:15, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-174.6352439024390243, preBalance=662.6348791262495582, postBalance=487.9996352238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11953, note=单号:11953开仓保证金-174.6352439024390243, createdDate=2022-03-18 10:28:18, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-5.7280360000000000, preBalance=487.9996352238105339, postBalance=482.2715992238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11953, note=单号:11953开仓手续费-5.7280360000000000, createdDate=2022-03-18 10:28:18, fromUserId=0, total=null), UserBillChain(userId=51905052, type=55, size=-7.0000000000000000, preBalance=482.2715992238105339, postBalance=475.2715992238105339, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11952, note=单号:11952增加保证金-7.0000000000000000, createdDate=2022-03-18 10:28:19, fromUserId=0, total=null), UserBillChain(userId=51905052, type=4, size=426.6505513633048780, preBalance=475.2715992238105339, postBalance=887.8498351871154119, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11954, note=单号:11954平仓收益412.5782359633048780, createdDate=2022-03-18 10:28:20, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-14.0723154000000000, preBalance=887.8498351871154119, postBalance=887.8498351871154119, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11954, note=单号:11954平仓手续费-14.0723154000000000, createdDate=2022-03-18 10:28:20, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=5.8403310000000000, preBalance=72748.3882934533333333, postBalance=72754.2286244533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11952, note=手续费返佣：5.840331,单号来源:11952,用户来源: 51905052, createdDate=2022-03-18 10:28:21, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.0096252000000000, preBalance=72754.2286244533333333, postBalance=72758.2382496533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11953, note=手续费返佣：4.0096252,单号来源:11953,用户来源: 51905052, createdDate=2022-03-18 10:28:21, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=9.8506207800000000, preBalance=72758.2382496533333333, postBalance=72768.0888704333333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11954, note=手续费返佣：9.85062078,单号来源:11954,用户来源: 51905052, createdDate=2022-03-18 10:28:22, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-144.4899623188405797, preBalance=887.8498351871154119, postBalance=743.3598728682748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11955, note=单号:11955开仓保证金-144.4899623188405797, createdDate=2022-03-18 10:28:23, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-3.9879229600000000, preBalance=743.3598728682748322, postBalance=739.3719499082748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11955, note=单号:11955开仓手续费-3.9879229600000000, createdDate=2022-03-18 10:28:23, fromUserId=0, total=null), UserBillChain(userId=51905052, type=55, size=-7.0000000000000000, preBalance=739.3719499082748322, postBalance=732.3719499082748322, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11951, note=单号:11951增加保证金-7.0000000000000000, createdDate=2022-03-18 10:28:25, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-217.8478202898550724, preBalance=732.3719499082748322, postBalance=514.5241296184197598, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11957, note=单号:11957开仓保证金-217.8478202898550724, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-6.0125998400000000, preBalance=514.5241296184197598, postBalance=508.5115297784197598, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11957, note=单号:11957开仓手续费-6.0125998400000000, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=4, size=214.3604158550289855, preBalance=508.5115297784197598, postBalance=716.8750549934487453, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11956, note=单号:11956平仓收益208.3635252150289855, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-5.9968906400000000, preBalance=716.8750549934487453, postBalance=716.8750549934487453, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11956, note=单号:11956平仓手续费-5.9968906400000000, createdDate=2022-03-18 10:28:26, fromUserId=0, total=null), UserBillChain(userId=51905052, type=3, size=-244.2513739130434782, preBalance=716.8750549934487453, postBalance=472.6236810804052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11958, note=单号:11958开仓保证金-244.2513739130434782, createdDate=2022-03-18 10:28:27, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-6.7413379200000000, preBalance=472.6236810804052671, postBalance=465.8823431604052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11958, note=单号:11958开仓手续费-6.7413379200000000, createdDate=2022-03-18 10:28:27, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=2.7915460720000000, preBalance=72768.0888704333333333, postBalance=72770.8804165053333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11955, note=手续费返佣：2.791546072,单号来源:11955,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.2088198880000000, preBalance=72770.8804165053333333, postBalance=72775.0892363933333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11957, note=手续费返佣：4.208819888,单号来源:11957,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.1978234480000000, preBalance=72775.0892363933333333, postBalance=72779.2870598413333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11956, note=手续费返佣：4.197823448,单号来源:11956,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=16, size=4.7189365440000000, preBalance=72779.2870598413333333, postBalance=72784.0059963853333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11958, note=手续费返佣：4.718936544,单号来源:11958,用户来源: 51905052, createdDate=2022-03-18 10:28:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=3, size=-27.1423941176470588, preBalance=465.8823431604052671, postBalance=438.7399490427582083, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11961, note=单号:11961开仓保证金-27.1423941176470588, createdDate=2022-03-18 10:28:38, fromUserId=0, total=null), UserBillChain(userId=51905052, type=51, size=-0.9228414000000000, preBalance=438.7399490427582083, postBalance=437.8171076427582083, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11961, note=单号:11961开仓手续费-0.9228414000000000, createdDate=2022-03-18 10:28:38, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.6459889800000000, preBalance=72784.0059963853333333, postBalance=72784.6519853653333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11961, note=手续费返佣：0.64598898,单号来源:11961,用户来源: 51905052, createdDate=2022-03-18 10:28:42, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=4, size=27.8947941176470588, preBalance=437.8171076427582083, postBalance=464.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11962, note=单号:11962平仓收益26.9716517576470588, createdDate=2022-03-18 10:30:58, fromUserId=0, total=null), UserBillChain(userId=51905052, type=52, size=-0.9231423600000000, preBalance=464.7887594004052671, postBalance=464.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11962, note=单号:11962平仓手续费-0.9231423600000000, createdDate=2022-03-18 10:30:58, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.6461996520000000, preBalance=72784.6519853653333333, postBalance=72785.2981850173333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11962, note=手续费返佣：0.646199652,单号来源:11962,用户来源: 51905052, createdDate=2022-03-18 10:31:02, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=6, size=-51.0000000000000000, preBalance=464.7887594004052671, postBalance=413.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3924, note=转出：51.00000000, createdDate=2022-03-18 10:32:33, fromUserId=null, total=null), UserBillChain(userId=51905052, type=6, size=-34.0000000000000000, preBalance=413.7887594004052671, postBalance=379.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77490, note=用户ID:51905052, 转出34.0000000000000000USDT, createdDate=2022-03-18 10:32:39, fromUserId=null, total=null), UserBillChain(userId=51905052, type=5, size=11.0000000000000000, preBalance=379.7887594004052671, postBalance=390.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:11.0000, createdDate=2022-03-18 10:32:49, fromUserId=null, total=null), UserBillChain(userId=51905052, type=5, size=22.0000000000000000, preBalance=390.7887594004052671, postBalance=412.7887594004052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77492, note=用户ID:51905052, 转入22USDT, createdDate=2022-03-18 10:32:58, fromUserId=null, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162232400000000, preBalance=412.7887594004052671, postBalance=412.7725361604052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11964, note=单号:11964开仓手续费-0.0162232400000000, createdDate=2022-03-18 10:37:28, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113562680000000, preBalance=72785.2981850173333333, postBalance=72785.3095412853333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11964, note=手续费返佣：0.011356268,单号来源:11964,用户来源: 51905052, createdDate=2022-03-18 10:37:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162247200000000, preBalance=412.7725361604052671, postBalance=412.7563114404052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11965, note=单号:11965开仓手续费-0.0162247200000000, createdDate=2022-03-18 10:40:44, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113573040000000, preBalance=72785.3095412853333333, postBalance=72785.3208985893333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11965, note=手续费返佣：0.011357304,单号来源:11965,用户来源: 51905052, createdDate=2022-03-18 10:40:52, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0324535200000000, preBalance=412.7563114404052671, postBalance=412.7238579204052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11966, note=单号:11966开仓手续费-0.0324535200000000, createdDate=2022-03-18 10:41:07, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0227174640000000, preBalance=72785.3208985893333333, postBalance=72785.3436160533333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11966, note=手续费返佣：0.022717464,单号来源:11966,用户来源: 51905052, createdDate=2022-03-18 10:41:12, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162292800000000, preBalance=412.7238579204052671, postBalance=412.7076286404052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11967, note=单号:11967开仓手续费-0.0162292800000000, createdDate=2022-03-18 10:41:32, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113604960000000, preBalance=72785.3436160533333333, postBalance=72785.3549765493333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11967, note=手续费返佣：0.011360496,单号来源:11967,用户来源: 51905052, createdDate=2022-03-18 10:41:42, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0810554000000000, preBalance=412.7076286404052671, postBalance=412.6265732404052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11968, note=单号:11968开仓手续费-0.0810554000000000, createdDate=2022-03-18 10:43:48, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0567387800000000, preBalance=72785.3549765493333333, postBalance=72785.4117153293333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11968, note=手续费返佣：0.05673878,单号来源:11968,用户来源: 51905052, createdDate=2022-03-18 10:43:52, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162147600000000, preBalance=412.6265732404052671, postBalance=412.6103584804052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11969, note=单号:11969开仓手续费-0.0162147600000000, createdDate=2022-03-18 10:44:24, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113503320000000, preBalance=72785.4117153293333333, postBalance=72785.4230656613333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11969, note=手续费返佣：0.011350332,单号来源:11969,用户来源: 51905052, createdDate=2022-03-18 10:44:32, fromUserId=51905052, total=null), UserBillChain(userId=51905052, type=51, size=-0.0162196400000000, preBalance=412.6103584804052671, postBalance=412.5941388404052671, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11963, note=单号:11963开仓手续费-0.0162196400000000, createdDate=2022-03-18 10:48:28, fromUserId=0, total=null), UserBillChain(userId=51905052, type=16, size=0.0113537480000000, preBalance=72785.4230656613333333, postBalance=72785.4344194093333333, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11963, note=手续费返佣：0.011353748,单号来源:11963,用户来源: 51905052, createdDate=2022-03-18 10:48:32, fromUserId=51905052, total=null)]
2022-03-18 11:51:40.968 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905052流水--------
2022-03-18 11:51:40.968 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-72.6469188405797101
2022-03-18 11:51:40.969 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11951' LIMIT 0,1 
2022-03-18 11:51:40.970 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 11:51:41.064 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 11:51:41.065 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 11:51:41.066 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:41.156 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:41.157 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-2.0050549600000000
2022-03-18 11:51:41.159 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11951' LIMIT 0,1000 
2022-03-18 11:51:41.159 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:41.235 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575503273,"data":{"mp":2775.71,"ts":1647575502845}} --------
2022-03-18 11:51:41.257 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-18 11:51:41.258 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 11:51:41.259 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:41.352 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:41.355 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:41.356 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:41.448 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:41.450 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11951' and type=? limit 0,100 
2022-03-18 11:51:41.451 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:41.547 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:41.548 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11951,数据库:1.40353847,计算:1.403538
2022-03-18 11:51:41.549 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11951' and type=? limit 0,100 
2022-03-18 11:51:41.549 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:41.641 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:41.641 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11951,比列:0.300000,数据库:0.6015164880000000,计算得:0.601516
2022-03-18 11:51:41.642 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:1.4035384720000000
2022-03-18 11:51:41.642 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72746.9847549813333333,分佣金额:1.4035384720000000,之后余额:72748.3882934533333333
2022-03-18 11:51:41.642 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-254.3698170731707317
2022-03-18 11:51:41.643 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11952' LIMIT 0,1 
2022-03-18 11:51:41.643 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 11:51:41.734 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 11:51:41.735 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 11:51:41.736 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:41.827 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:41.828 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-8.3433300000000000
2022-03-18 11:51:41.829 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11952' LIMIT 0,1000 
2022-03-18 11:51:41.830 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:41.924 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-18 11:51:41.926 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 11:51:41.926 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:42.017 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:42.020 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:42.020 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:42.110 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:42.111 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11952' and type=? limit 0,100 
2022-03-18 11:51:42.112 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:42.156 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575504201,"data":{"mp":108.46,"ts":1647575504156}} --------
2022-03-18 11:51:42.204 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:42.205 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11952,数据库:5.84033100,计算:5.840331
2022-03-18 11:51:42.206 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11952' and type=? limit 0,100 
2022-03-18 11:51:42.207 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:42.298 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:42.299 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11952,比列:0.300000,数据库:2.5029990000000000,计算得:2.502999
2022-03-18 11:51:42.299 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-174.6352439024390243
2022-03-18 11:51:42.300 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11953' LIMIT 0,1 
2022-03-18 11:51:42.300 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 11:51:42.363 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575503528"} --------
2022-03-18 11:51:42.363 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575503528"}
2022-03-18 11:51:42.390 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 11:51:42.391 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 11:51:42.392 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:42.481 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:42.483 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11953) 
2022-03-18 11:51:42.484 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-18 11:51:42.582 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-18 11:51:42.585 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-5.7280360000000000
2022-03-18 11:51:42.585 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11953' LIMIT 0,1000 
2022-03-18 11:51:42.586 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:42.676 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:42.677 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 11:51:42.677 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:42.766 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:42.766 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905052,订单:11953,类型:51
2022-03-18 11:51:42.767 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:42.767 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:42.856 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:42.857 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11953' and type=? limit 0,100 
2022-03-18 11:51:42.857 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:42.950 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:42.951 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11953,数据库:4.00962520,计算:4.009625
2022-03-18 11:51:42.952 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11953' and type=? limit 0,100 
2022-03-18 11:51:42.952 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:43.046 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:43.047 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11953,比列:0.300000,数据库:1.7184108000000000,计算得:1.718410
2022-03-18 11:51:43.048 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-7.0000000000000000
2022-03-18 11:51:43.048 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:426.6505513633048780
2022-03-18 11:51:43.049 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 11:51:43.049 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:43.145 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:43.147 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 11:51:43.147 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:43.244 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:43.246 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 11:51:43.247 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:43.337 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:43.338 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 11:51:43.338 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:43.428 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:43.430 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,1 
2022-03-18 11:51:43.430 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 11:51:43.525 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 11:51:43.526 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11954,计算得:-2.373500
2022-03-18 11:51:43.526 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-14.0723154000000000
2022-03-18 11:51:43.528 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11954' LIMIT 0,1000 
2022-03-18 11:51:43.528 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:43.619 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:43.620 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 11:51:43.621 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:43.711 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:43.713 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:43.714 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:43.811 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:43.812 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,100 
2022-03-18 11:51:43.813 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:43.914 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:43.915 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11954,数据库:9.85062078,计算:9.850620
2022-03-18 11:51:43.916 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11954' and type=? limit 0,100 
2022-03-18 11:51:43.916 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:44.014 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:44.014 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11954,比列:0.300000,数据库:4.2216946200000000,计算得:4.221694
2022-03-18 11:51:44.014 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:5.8403310000000000
2022-03-18 11:51:44.015 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72748.3882934533333333,分佣金额:5.8403310000000000,之后余额:72754.2286244533333333
2022-03-18 11:51:44.015 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.0096252000000000
2022-03-18 11:51:44.015 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72754.2286244533333333,分佣金额:4.0096252000000000,之后余额:72758.2382496533333333
2022-03-18 11:51:44.015 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:9.8506207800000000
2022-03-18 11:51:44.016 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72758.2382496533333333,分佣金额:9.8506207800000000,之后余额:72768.0888704333333333
2022-03-18 11:51:44.016 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-144.4899623188405797
2022-03-18 11:51:44.016 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11955' LIMIT 0,1 
2022-03-18 11:51:44.017 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 11:51:44.085 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575506128,"data":{"mp":40484.7,"ts":1647575505629}} --------
2022-03-18 11:51:44.106 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 11:51:44.107 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 11:51:44.107 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:44.196 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:44.197 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11955) 
2022-03-18 11:51:44.198 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-18 11:51:44.294 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-18 11:51:44.295 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-3.9879229600000000
2022-03-18 11:51:44.297 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11955' LIMIT 0,1000 
2022-03-18 11:51:44.297 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:44.387 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:44.389 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 11:51:44.389 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:44.481 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:44.482 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905052,订单:11955,类型:51
2022-03-18 11:51:44.484 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:44.484 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:44.583 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:44.585 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11955' and type=? limit 0,100 
2022-03-18 11:51:44.585 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:44.684 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:44.685 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11955,数据库:2.79154607,计算:2.791546
2022-03-18 11:51:44.686 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11955' and type=? limit 0,100 
2022-03-18 11:51:44.686 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:44.783 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:44.783 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11955,比列:0.300000,数据库:1.1963768880000000,计算得:1.196376
2022-03-18 11:51:44.783 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-7.0000000000000000
2022-03-18 11:51:44.784 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-217.8478202898550724
2022-03-18 11:51:44.784 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11957' LIMIT 0,1 
2022-03-18 11:51:44.784 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 11:51:44.879 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 11:51:44.880 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 11:51:44.881 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:44.972 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:44.972 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-6.0125998400000000
2022-03-18 11:51:44.973 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11957' LIMIT 0,1000 
2022-03-18 11:51:44.974 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:45.070 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:45.071 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 11:51:45.072 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:45.163 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:45.165 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:45.165 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:45.255 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:45.256 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11957' and type=? limit 0,100 
2022-03-18 11:51:45.256 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:45.349 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:45.349 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11957,数据库:4.20881988,计算:4.208819
2022-03-18 11:51:45.350 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11957' and type=? limit 0,100 
2022-03-18 11:51:45.352 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:45.443 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:45.443 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11957,比列:0.300000,数据库:1.8037799520000000,计算得:1.803779
2022-03-18 11:51:45.443 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:214.3604158550289855
2022-03-18 11:51:45.444 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 11:51:45.445 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:45.542 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:45.543 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 11:51:45.544 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:45.640 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:45.642 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 11:51:45.642 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:45.736 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:45.737 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 11:51:45.737 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:45.832 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:45.833 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,1 
2022-03-18 11:51:45.834 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 11:51:45.928 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 11:51:45.929 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11956,计算得:-9.781800
2022-03-18 11:51:45.930 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-5.9968906400000000
2022-03-18 11:51:45.931 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11956' LIMIT 0,1000 
2022-03-18 11:51:45.931 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:46.022 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575508063,"data":{"mp":2775.73,"ts":1647575507845}} --------
2022-03-18 11:51:46.024 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:46.025 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-18 11:51:46.025 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:46.116 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:46.118 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:46.118 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:46.213 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:46.214 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,100 
2022-03-18 11:51:46.215 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:46.313 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:46.314 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11956,数据库:4.19782344,计算:4.197823
2022-03-18 11:51:46.315 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11956' and type=? limit 0,100 
2022-03-18 11:51:46.316 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:46.410 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:46.410 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11956,比列:0.300000,数据库:1.7990671920000000,计算得:1.799067
2022-03-18 11:51:46.411 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-244.2513739130434782
2022-03-18 11:51:46.411 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11958' LIMIT 0,1 
2022-03-18 11:51:46.412 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 11:51:46.509 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 11:51:46.510 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 11:51:46.510 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:46.603 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:46.603 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-6.7413379200000000
2022-03-18 11:51:46.604 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11958' LIMIT 0,1000 
2022-03-18 11:51:46.605 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:46.705 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:46.706 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-18 11:51:46.706 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:46.800 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:46.801 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:46.802 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:46.893 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:46.894 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11958' and type=? limit 0,100 
2022-03-18 11:51:46.895 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:46.945 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575508989,"data":{"mp":108.46,"ts":1647575508940}} --------
2022-03-18 11:51:46.997 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:46.997 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11958,数据库:4.71893654,计算:4.718936
2022-03-18 11:51:46.998 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11958' and type=? limit 0,100 
2022-03-18 11:51:46.998 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:47.091 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:47.091 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11958,比列:0.300000,数据库:2.0224013760000000,计算得:2.022401
2022-03-18 11:51:47.092 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:2.7915460720000000
2022-03-18 11:51:47.092 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72768.0888704333333333,分佣金额:2.7915460720000000,之后余额:72770.8804165053333333
2022-03-18 11:51:47.092 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.2088198880000000
2022-03-18 11:51:47.092 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72770.8804165053333333,分佣金额:4.2088198880000000,之后余额:72775.0892363933333333
2022-03-18 11:51:47.092 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.1978234480000000
2022-03-18 11:51:47.092 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72775.0892363933333333,分佣金额:4.1978234480000000,之后余额:72779.2870598413333333
2022-03-18 11:51:47.092 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:4.7189365440000000
2022-03-18 11:51:47.093 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72779.2870598413333333,分佣金额:4.7189365440000000,之后余额:72784.0059963853333333
2022-03-18 11:51:47.093 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.1423941176470588
2022-03-18 11:51:47.093 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `type` IS NULL AND `order_id` = '11961' LIMIT 0,1 
2022-03-18 11:51:47.094 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-18 11:51:47.183 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-18 11:51:47.184 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 11:51:47.185 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:47.274 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:47.275 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9228414000000000
2022-03-18 11:51:47.276 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11961' LIMIT 0,1000 
2022-03-18 11:51:47.276 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:47.362 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575508532"} --------
2022-03-18 11:51:47.363 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575508532"}
2022-03-18 11:51:47.366 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:47.367 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 11:51:47.367 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:47.459 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:47.461 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:47.462 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:47.551 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:47.551 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11961' and type=? limit 0,100 
2022-03-18 11:51:47.552 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:47.648 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:47.649 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11961,数据库:0.64598898,计算:0.645988
2022-03-18 11:51:47.650 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11961' and type=? limit 0,100 
2022-03-18 11:51:47.650 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:47.748 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:47.748 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11961,比列:0.300000,数据库:0.2768524200000000,计算得:0.276852
2022-03-18 11:51:47.749 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.6459889800000000
2022-03-18 11:51:47.749 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72784.0059963853333333,分佣金额:0.6459889800000000,之后余额:72784.6519853653333333
2022-03-18 11:51:47.749 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:27.8947941176470588
2022-03-18 11:51:47.750 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11962' LIMIT 0,1000 
2022-03-18 11:51:47.750 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:48.138 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:48.139 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 11:51:48.139 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:48.240 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:48.241 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11962' LIMIT 0,1000 
2022-03-18 11:51:48.242 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:48.339 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:48.340 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 11:51:48.340 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:48.432 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:48.433 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11962' and type=? limit 0,1 
2022-03-18 11:51:48.434 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-18 11:51:48.526 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-18 11:51:48.527 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905052,默认合伙人:51904446,交易类型:4,订单:11962,计算得:0.752400
2022-03-18 11:51:48.527 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.9231423600000000
2022-03-18 11:51:48.527 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11962' LIMIT 0,1000 
2022-03-18 11:51:48.528 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:48.618 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:48.619 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 11:51:48.619 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:48.708 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575510749,"data":{"mp":40484.7,"ts":1647575510643}} --------
2022-03-18 11:51:48.718 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:48.719 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:48.720 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:48.813 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:48.814 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11962' and type=? limit 0,100 
2022-03-18 11:51:48.814 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:48.907 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:48.908 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:52,订单:11962,数据库:0.64619965,计算:0.646199
2022-03-18 11:51:48.908 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11962' and type=? limit 0,100 
2022-03-18 11:51:48.909 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:48.999 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:48.999 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:52,订单:11962,比列:0.300000,数据库:0.2769427080000000,计算得:0.276942
2022-03-18 11:51:49.000 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.6461996520000000
2022-03-18 11:51:49.000 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72784.6519853653333333,分佣金额:0.6461996520000000,之后余额:72785.2981850173333333
2022-03-18 11:51:49.000 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-51.0000000000000000
2022-03-18 11:51:49.000 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-34.0000000000000000
2022-03-18 11:51:49.000 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:11.0000000000000000
2022-03-18 11:51:49.000 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:22.0000000000000000
2022-03-18 11:51:49.001 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162232400000000
2022-03-18 11:51:49.001 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11964' LIMIT 0,1000 
2022-03-18 11:51:49.002 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:49.092 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:49.093 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 11:51:49.093 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:49.183 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:49.184 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:49.185 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:49.277 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:49.277 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11964' and type=? limit 0,100 
2022-03-18 11:51:49.278 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:49.367 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:49.367 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11964,数据库:0.01135626,计算:0.011356
2022-03-18 11:51:49.368 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11964' and type=? limit 0,100 
2022-03-18 11:51:49.368 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:49.458 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:49.459 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11964,比列:0.300000,数据库:0.0048669720000000,计算得:0.004866
2022-03-18 11:51:49.459 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113562680000000
2022-03-18 11:51:49.459 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.2981850173333333,分佣金额:0.0113562680000000,之后余额:72785.3095412853333333
2022-03-18 11:51:49.459 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162247200000000
2022-03-18 11:51:49.459 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11965' LIMIT 0,1000 
2022-03-18 11:51:49.460 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:49.549 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:49.550 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 11:51:49.551 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:49.640 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:49.641 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:49.642 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:49.731 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:49.732 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11965' and type=? limit 0,100 
2022-03-18 11:51:49.733 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:49.827 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:49.828 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11965,数据库:0.01135730,计算:0.011357
2022-03-18 11:51:49.829 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11965' and type=? limit 0,100 
2022-03-18 11:51:49.830 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:49.923 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:49.924 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11965,比列:0.300000,数据库:0.0048674160000000,计算得:0.004867
2022-03-18 11:51:49.924 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113573040000000
2022-03-18 11:51:49.924 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.3095412853333333,分佣金额:0.0113573040000000,之后余额:72785.3208985893333333
2022-03-18 11:51:49.925 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0324535200000000
2022-03-18 11:51:49.925 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11966' LIMIT 0,1000 
2022-03-18 11:51:49.925 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:50.018 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:50.019 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 11:51:50.019 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:50.109 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:50.111 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:50.111 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:50.209 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:50.210 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11966' and type=? limit 0,100 
2022-03-18 11:51:50.210 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:50.301 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:50.301 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11966,数据库:0.02271746,计算:0.022717
2022-03-18 11:51:50.302 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11966' and type=? limit 0,100 
2022-03-18 11:51:50.302 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:50.394 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:50.394 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11966,比列:0.300000,数据库:0.0097360560000000,计算得:0.009736
2022-03-18 11:51:50.395 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0227174640000000
2022-03-18 11:51:50.395 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.3208985893333333,分佣金额:0.0227174640000000,之后余额:72785.3436160533333333
2022-03-18 11:51:50.395 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162292800000000
2022-03-18 11:51:50.396 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11967' LIMIT 0,1000 
2022-03-18 11:51:50.396 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:50.487 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:50.488 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 11:51:50.488 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:50.579 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:50.580 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:50.581 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:50.670 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:50.671 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11967' and type=? limit 0,100 
2022-03-18 11:51:50.673 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:50.773 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:50.774 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11967,数据库:0.01136049,计算:0.011360
2022-03-18 11:51:50.775 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11967' and type=? limit 0,100 
2022-03-18 11:51:50.776 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:50.868 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:50.868 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11967,比列:0.300000,数据库:0.0048687840000000,计算得:0.004868
2022-03-18 11:51:50.869 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113604960000000
2022-03-18 11:51:50.869 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.3436160533333333,分佣金额:0.0113604960000000,之后余额:72785.3549765493333333
2022-03-18 11:51:50.869 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0810554000000000
2022-03-18 11:51:50.869 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11968' LIMIT 0,1000 
2022-03-18 11:51:50.870 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:50.960 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:50.961 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 11:51:50.961 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:51.056 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:51.058 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:51.059 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:51.150 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:51.152 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11968' and type=? limit 0,100 
2022-03-18 11:51:51.153 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:51.249 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:51.249 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11968,数据库:0.05673878,计算:0.056738
2022-03-18 11:51:51.250 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11968' and type=? limit 0,100 
2022-03-18 11:51:51.250 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:51.283 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575513320,"data":{"mp":2775.74,"ts":1647575512847}} --------
2022-03-18 11:51:51.349 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:51.350 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11968,比列:0.300000,数据库:0.0243166200000000,计算得:0.024316
2022-03-18 11:51:51.350 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0567387800000000
2022-03-18 11:51:51.350 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.3549765493333333,分佣金额:0.0567387800000000,之后余额:72785.4117153293333333
2022-03-18 11:51:51.350 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162147600000000
2022-03-18 11:51:51.350 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11969' LIMIT 0,1000 
2022-03-18 11:51:51.351 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:51.442 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:51.443 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 11:51:51.444 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:51.532 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:51.533 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:51.533 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:51.630 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:51.631 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11969' and type=? limit 0,100 
2022-03-18 11:51:51.632 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:51.725 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:51.726 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11969,数据库:0.01135033,计算:0.011350
2022-03-18 11:51:51.727 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11969' and type=? limit 0,100 
2022-03-18 11:51:51.727 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:51.830 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:51.830 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11969,比列:0.300000,数据库:0.0048644280000000,计算得:0.004864
2022-03-18 11:51:51.830 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113503320000000
2022-03-18 11:51:51.831 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.4117153293333333,分佣金额:0.0113503320000000,之后余额:72785.4230656613333333
2022-03-18 11:51:51.831 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0162196400000000
2022-03-18 11:51:51.831 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905052' AND `order_id` = '11963' LIMIT 0,1000 
2022-03-18 11:51:51.832 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-18 11:51:51.924 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-18 11:51:51.925 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-18 11:51:51.925 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-18 11:51:51.981 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575514024,"data":{"mp":108.46,"ts":1647575513939}} --------
2022-03-18 11:51:52.016 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-18 11:51:52.016 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-18 11:51:52.017 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-18 11:51:52.105 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-18 11:51:52.106 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11963' and type=? limit 0,100 
2022-03-18 11:51:52.107 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-18 11:51:52.197 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:52.197 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --只有默认合伙人--用户不返回手续费--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905052,交易类型:51,订单:11963,数据库:0.01135374,计算:0.011353
2022-03-18 11:51:52.198 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11963' and type=? limit 0,100 
2022-03-18 11:51:52.199 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-18 11:51:52.289 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-18 11:51:52.290 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--只有默认合伙人--用户不返回手续费--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905052,合伙人:51904446,交易类型:51,订单:11963,比列:0.300000,数据库:0.0048658920000000,计算得:0.004865
2022-03-18 11:51:52.290 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0113537480000000
2022-03-18 11:51:52.290 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905052,类型:16,之前余额:72785.4230656613333333,分佣金额:0.0113537480000000,之后余额:72785.4344194093333333
2022-03-18 11:51:52.290 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905052流水--------
2022-03-18 11:51:52.368 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575513535"} --------
2022-03-18 11:51:52.369 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575513535"}
2022-03-18 11:51:54.189 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575516135,"data":{"mp":40482.9,"ts":1647575515628}} --------
2022-03-18 11:51:56.127 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575518069,"data":{"mp":2775.59,"ts":1647575517853}} --------
2022-03-18 11:51:57.307 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575519351,"data":{"mp":108.46,"ts":1647575519055}} --------
2022-03-18 11:51:57.364 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575518539"} --------
2022-03-18 11:51:57.364 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575518539"}
2022-03-18 11:51:58.753 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575520795,"data":{"mp":40480.3,"ts":1647575520628}} --------
2022-03-18 11:52:01.325 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575523368,"data":{"mp":2775.49,"ts":1647575522855}} --------
2022-03-18 11:52:02.069 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575524113,"data":{"mp":108.46,"ts":1647575523897}} --------
2022-03-18 11:52:02.362 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575523542"} --------
2022-03-18 11:52:02.363 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575523542"}
2022-03-18 11:52:03.654 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575525698,"data":{"mp":40477.8,"ts":1647575525638}} --------
2022-03-18 11:52:06.234 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575528277,"data":{"mp":2775.4,"ts":1647575527880}} --------
2022-03-18 11:52:06.868 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575528911,"data":{"mp":108.46,"ts":1647575528867}} --------
2022-03-18 11:52:07.392 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575528545"} --------
2022-03-18 11:52:07.393 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575528545"}
2022-03-18 11:52:09.164 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575531163,"data":{"mp":40475.3,"ts":1647575530628}} --------
2022-03-18 11:52:11.078 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575533094,"data":{"mp":2775.32,"ts":1647575532915}} --------
2022-03-18 11:52:12.153 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575534196,"data":{"mp":108.46,"ts":1647575534152}} --------
2022-03-18 11:52:12.362 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575533548"} --------
2022-03-18 11:52:12.363 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575533548"}
2022-03-18 11:52:14.050 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575536049,"data":{"mp":40473.6,"ts":1647575535658}} --------
2022-03-18 11:52:15.993 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575537982,"data":{"mp":2775.27,"ts":1647575537845}} --------
2022-03-18 11:52:17.019 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575539004,"data":{"mp":108.46,"ts":1647575538960}} --------
2022-03-18 11:52:17.429 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575538551"} --------
2022-03-18 11:52:17.430 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575538551"}
2022-03-18 11:52:18.965 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575540988,"data":{"mp":40472.5,"ts":1647575540629}} --------
2022-03-18 11:52:21.014 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575542942,"data":{"mp":2775.23,"ts":1647575542894}} --------
2022-03-18 11:52:22.037 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575543987,"data":{"mp":108.46,"ts":1647575543943}} --------
2022-03-18 11:52:22.451 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575543554"} --------
2022-03-18 11:52:22.451 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575543554"}
2022-03-18 11:52:23.711 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575545754,"data":{"mp":40471.8,"ts":1647575545627}} --------
2022-03-18 11:52:26.288 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575548329,"data":{"mp":2775.21,"ts":1647575547891}} --------
2022-03-18 11:52:26.952 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575548923,"data":{"mp":108.43,"ts":1647575548877}} --------
2022-03-18 11:52:27.366 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575548558"} --------
2022-03-18 11:52:27.366 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575548558"}
2022-03-18 11:52:28.671 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575550712,"data":{"mp":40471.3,"ts":1647575550626}} --------
2022-03-18 11:52:31.352 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575553289,"data":{"mp":2775.2,"ts":1647575552845}} --------
2022-03-18 11:52:31.924 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ltcusdt_mark_price","ts":1647575553961,"data":{"mp":108.41,"ts":1647575553916}} --------
2022-03-18 11:52:32.358 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1647575553561"} --------
2022-03-18 11:52:32.359 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1647575553561"}
2022-03-18 11:52:33.638 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_btcusdt_mark_price","ts":1647575555687,"data":{"mp":40471.8,"ts":1647575555625}} --------
2022-03-18 11:52:36.223 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_ethusdt_mark_price","ts":1647575558275,"data":{"mp":2775.19,"ts":1647575557845}} --------
