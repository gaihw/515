2022-03-17 09:57:03.716 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5006 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 09:57:08.727 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 23347 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 09:57:08.728 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 09:57:09.889 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 09:57:09.893 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 09:57:09.919 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 09:57:09.925 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 09:57:09.926 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 09:57:09.935 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 09:57:09.954 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 09:57:09.956 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 09:57:09.981 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2022-03-17 09:57:10.811 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 09:57:10.832 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 09:57:10.833 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 09:57:10.834 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 09:57:10.995 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 09:57:10.995 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2196 ms
2022-03-17 09:57:12.550 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 09:57:13.626 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 09:57:13.628 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 09:57:13.628 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 09:57:13.920 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 09:57:13.937 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 09:57:13.949 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 26.032 seconds (JVM running for 26.77)
2022-03-17 10:01:46.961 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5005 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 10:01:51.972 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 23387 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 10:01:51.973 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 10:01:52.777 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 10:01:52.779 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 10:01:52.805 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 10:01:52.809 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 10:01:52.810 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 10:01:52.818 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 10:01:52.830 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 10:01:52.831 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 10:01:52.848 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-03-17 10:01:53.462 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 10:01:53.474 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 10:01:53.475 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 10:01:53.475 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 10:01:53.603 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 10:01:53.603 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1573 ms
2022-03-17 10:01:54.679 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 10:01:55.408 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 10:01:55.409 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 10:01:55.410 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 10:01:55.640 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 10:01:55.656 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 10:01:55.667 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.244 seconds (JVM running for 24.741)
2022-03-17 10:02:12.107 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 10:02:12.108 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 10:02:12.110 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 10:02:12.378 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 10:02:13.587 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 10:02:13.603 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_intgr`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_intgr`.`intgr_message` WHERE `template_params` LIKE '%code%' LIMIT 0,1000) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 10:02:13.641 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==> Parameters: 
2022-03-17 10:02:13.828 [http-nio-10090-exec-2] ERROR o.a.c.c.C.[.[localhost].[/].[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'
### The error may exist in com/zmj/demo/dao/test/SmsEmailCode.java (best guess)
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_intgr`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_intgr`.`intgr_message` WHERE `template_params` LIKE '%code%' LIMIT 0,1000) ORDER BY `id` DESC LIMIT 0,10
### Cause: java.sql.SQLSyntaxErrorException: This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'] with root cause
java.sql.SQLSyntaxErrorException: This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy101.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:63)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:324)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:148)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
	at com.sun.proxy.$Proxy61.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:230)
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:137)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:75)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:59)
	at com.sun.proxy.$Proxy88.getList(Unknown Source)
	at com.zmj.demo.service.impl.ToolServiceImpl.getList(ToolServiceImpl.java:79)
	at com.zmj.demo.controller.ToolController.getList(ToolController.java:28)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:626)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
2022-03-17 10:02:15.312 [http-nio-10090-exec-4] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2022-03-17 10:02:16.316 [http-nio-10090-exec-4] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2022-03-17 10:02:16.317 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_cfd`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_cfd`.`intgr_message` WHERE `template_params` LIKE '%code%' LIMIT 0,1000) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 10:02:16.318 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - ==> Parameters: 
2022-03-17 10:02:16.407 [http-nio-10090-exec-4] ERROR o.a.c.c.C.[.[localhost].[/].[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'
### The error may exist in com/zmj/demo/dao/dev1/SmsEmailCodeDao.java (best guess)
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_cfd`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_cfd`.`intgr_message` WHERE `template_params` LIKE '%code%' LIMIT 0,1000) ORDER BY `id` DESC LIMIT 0,10
### Cause: java.sql.SQLSyntaxErrorException: This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'] with root cause
java.sql.SQLSyntaxErrorException: This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy101.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:63)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:324)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:148)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
	at com.sun.proxy.$Proxy61.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:230)
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:137)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:75)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:59)
	at com.sun.proxy.$Proxy89.getSmsList(Unknown Source)
	at com.zmj.demo.service.impl.ToolServiceImpl.getList(ToolServiceImpl.java:81)
	at com.zmj.demo.controller.ToolController.getList(ToolController.java:28)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:626)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
2022-03-17 10:03:41.731 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 10:03:41.741 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 10:03:41.742 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2022-03-17 10:03:41.745 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2022-03-17 10:04:00.455 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5006 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 10:04:05.465 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 23412 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 10:04:05.466 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 10:04:06.247 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 10:04:06.249 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 10:04:06.268 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 10:04:06.272 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 10:04:06.273 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 10:04:06.280 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 10:04:06.290 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 10:04:06.291 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 10:04:06.304 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2022-03-17 10:04:06.938 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 10:04:06.951 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 10:04:06.951 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 10:04:06.951 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 10:04:07.072 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 10:04:07.072 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1550 ms
2022-03-17 10:04:08.141 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 10:04:08.882 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 10:04:08.883 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 10:04:08.883 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 10:04:09.110 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 10:04:09.126 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 10:04:09.136 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.209 seconds (JVM running for 24.691)
2022-03-17 10:04:14.592 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 10:04:14.593 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 10:04:14.595 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 10:04:14.832 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 10:04:15.879 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 10:04:15.892 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_intgr`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_intgr`.`intgr_message` WHERE `template_params` LIKE '%code%' ) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 10:04:15.925 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==> Parameters: 
2022-03-17 10:04:16.380 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - <==      Total: 10
2022-03-17 10:04:24.177 [http-nio-10090-exec-3] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2022-03-17 10:04:25.120 [http-nio-10090-exec-3] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2022-03-17 10:04:25.121 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_cfd`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_cfd`.`intgr_message` WHERE `template_params` LIKE '%code%' ) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 10:04:25.122 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - ==> Parameters: 
2022-03-17 10:04:25.445 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - <==      Total: 10
2022-03-17 10:05:46.563 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_intgr`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_intgr`.`intgr_message` WHERE `template_params` LIKE '%code%' ) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 10:05:46.564 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==> Parameters: 
2022-03-17 10:05:46.957 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - <==      Total: 10
2022-03-17 10:05:47.683 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_cfd`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_cfd`.`intgr_message` WHERE `template_params` LIKE '%code%' ) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 10:05:47.684 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - ==> Parameters: 
2022-03-17 10:05:48.092 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - <==      Total: 10
2022-03-17 10:05:49.745 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_intgr`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_intgr`.`intgr_message` WHERE `template_params` LIKE '%code%' ) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 10:05:49.746 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==> Parameters: 
2022-03-17 10:05:50.110 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - <==      Total: 10
2022-03-17 10:05:50.922 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_cfd`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_cfd`.`intgr_message` WHERE `template_params` LIKE '%code%' ) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 10:05:50.923 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - ==> Parameters: 
2022-03-17 10:05:51.239 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - <==      Total: 10
2022-03-17 10:05:53.057 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_intgr`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_intgr`.`intgr_message` WHERE `template_params` LIKE '%code%' ) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 10:05:53.058 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==> Parameters: 
2022-03-17 10:05:53.511 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - <==      Total: 10
2022-03-17 10:12:08.995 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:12:08.997 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 10:12:09.081 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 10:12:09.082 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:12:09.082 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:12:09.165 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:12:09.280 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:[UserBalanceChain(userId=51905058, currencyId=6, balance=100.0000000000000000, hold=0E-16)],user_partner_balance:[]
2022-03-17 10:12:18.123 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38,59) 
2022-03-17 10:12:18.124 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 10:12:18.209 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 10:12:18.210 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 10:12:18.211 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 10:12:18.294 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 10:12:18.295 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:12:18.295 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 10:12:18.382 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 10:12:18.382 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:92.3739072400000000,hold:0E-16
2022-03-17 10:12:18.383 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-7.6260927600000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:92.3739072400000000,操作后，数据库存储的总金额:92.3739072400000000
2022-03-17 10:12:18.385 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:12:18.385 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:12:18.467 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:12:18.468 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 10:12:18.468 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:12:18.469 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:12:18.556 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:12:18.557 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:12:18.558 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:12:18.644 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:12:18.645 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:12:18.646 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:12:18.733 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:12:18.736 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:12:18.737 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:12:18.826 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:12:18.826 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:12:18.827 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:12:18.910 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:12:18.911 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 10:12:18.912 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:12:19.000 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:12:19.001 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 10:12:19.002 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 10:12:19.003 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 10:12:19.096 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 3
2022-03-17 10:12:19.097 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-1.6309695600000000, preBalance=100.0000000000000000, postBalance=98.3690304400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8751, note=单号:8751开仓手续费-1.6309695600000000, createdDate=2022-03-17 10:08:58, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-4.3659000000000000, preBalance=98.3690304400000000, postBalance=92.3739072400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8753, note=单号:8753平仓收益-5.9951232000000000, createdDate=2022-03-17 10:10:47, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-1.6292232000000000, preBalance=92.3739072400000000, postBalance=92.3739072400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8753, note=单号:8753平仓手续费-1.6292232000000000, createdDate=2022-03-17 10:10:48, fromUserId=0, total=null)]
2022-03-17 10:12:19.098 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:12:19.098 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.6309695600000000
2022-03-17 10:12:19.111 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8751' LIMIT 0,1000 
2022-03-17 10:12:19.111 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:12:19.199 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:12:19.200 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:12:19.201 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:12:19.284 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:12:19.361 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:12:19.361 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:12:19.449 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:12:19.449 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:12:19.450 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:12:19.538 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:12:19.539 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:12:19.540 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:12:19.623 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:12:19.624 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:12:19.624 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:12:19.710 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:12:19.711 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:12:19.711 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:12:19.795 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:12:19.797 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8751' and type=? limit 0,100 
2022-03-17 10:12:19.798 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:12:19.888 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:12:19.888 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8751,比列:0.300000,数据库:0.48929086,计算:-0.489290
2022-03-17 10:12:19.889 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8751' and type=? limit 0,100 
2022-03-17 10:12:19.890 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:12:19.975 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:12:19.975 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8751,比列:0.200000,数据库:0.32619391,计算:-0.326193
2022-03-17 10:12:19.976 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8751' and type=? limit 0,100 
2022-03-17 10:12:19.977 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:12:20.061 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:12:20.061 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8751,比列:0.300000,数据库:0.48929086,计算:-0.489290
2022-03-17 10:12:20.062 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8751' and type=? limit 0,100 
2022-03-17 10:12:20.063 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:12:20.152 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:12:20.153 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8751,比列:0.100000,数据库:0.16309695,计算:-0.163096
2022-03-17 10:12:20.154 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8751' and type=? limit 0,100 
2022-03-17 10:12:20.155 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:12:20.239 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:12:20.240 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8751,比列:0.100000,数据库:0.16309695,计算:-0.163096
2022-03-17 10:12:20.240 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-4.3659000000000000
2022-03-17 10:12:20.241 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8753' LIMIT 0,1000 
2022-03-17 10:12:20.241 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:12:20.329 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:12:20.330 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:12:20.330 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:12:20.413 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:12:20.415 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8753' LIMIT 0,1000 
2022-03-17 10:12:20.415 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:12:20.500 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:12:20.501 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:12:20.502 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:12:20.584 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:12:20.586 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,1 
2022-03-17 10:12:20.587 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51905047(String), 27(Integer)
2022-03-17 10:12:20.673 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:12:20.674 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51905047,交易类型:4,订单:8753,比例:0.7,数据库:3.05613000,计算得:3.056130
2022-03-17 10:12:20.675 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,1 
2022-03-17 10:12:20.675 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 10:12:20.763 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:12:20.764 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8753,数据库:1.30977000,计算得:1.309770
2022-03-17 10:12:20.764 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.6292232000000000
2022-03-17 10:12:20.766 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8753' LIMIT 0,1000 
2022-03-17 10:12:20.767 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:12:20.861 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:12:20.862 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:12:20.862 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:12:20.947 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:12:20.949 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:12:20.949 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:12:21.037 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:12:21.039 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:12:21.039 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:12:21.129 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:12:21.130 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:12:21.130 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:12:21.214 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:12:21.214 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:12:21.215 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:12:21.297 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:12:21.298 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:12:21.299 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:12:21.395 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:12:21.396 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,100 
2022-03-17 10:12:21.396 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:12:21.481 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:12:21.482 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8753,比列:0.300000,数据库:0.48876696,计算:-0.488766
2022-03-17 10:12:21.484 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,100 
2022-03-17 10:12:21.484 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:12:21.569 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:12:21.569 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8753,比列:0.200000,数据库:0.32584464,计算:-0.325844
2022-03-17 10:12:21.570 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,100 
2022-03-17 10:12:21.571 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:12:21.674 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:12:21.674 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8753,比列:0.300000,数据库:0.48876696,计算:-0.488766
2022-03-17 10:12:21.675 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,100 
2022-03-17 10:12:21.676 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:12:21.765 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:12:21.766 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8753,比列:0.100000,数据库:0.16292232,计算:-0.162922
2022-03-17 10:12:21.767 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,100 
2022-03-17 10:12:21.768 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:12:21.852 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:12:21.853 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8753,比列:0.100000,数据库:0.16292232,计算:-0.162922
2022-03-17 10:12:21.853 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:14:38.407 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38,59) 
2022-03-17 10:14:38.408 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 10:14:38.503 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 10:14:38.504 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 10:14:38.505 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 10:14:38.588 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 10:14:38.588 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:14:38.589 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 10:14:38.672 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 10:14:38.672 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:-901.7047937600000000,hold:0E-16
2022-03-17 10:14:38.672 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-1001.7047937600000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:-901.7047937600000000,操作后，数据库存储的总金额:-901.7047937600000000
2022-03-17 10:14:38.673 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:14:38.673 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:38.757 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:14:38.757 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 10:14:38.760 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:14:38.760 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:14:38.846 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:14:38.847 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:14:38.848 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:14:38.945 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:14:38.945 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:14:38.946 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:14:39.032 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:14:39.033 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:14:39.033 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:14:39.116 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:14:39.116 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:14:39.116 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:14:39.201 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:14:39.202 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 10:14:39.202 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:14:39.286 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:14:39.286 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 10:14:39.287 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 10:14:39.287 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 10:14:39.381 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 6
2022-03-17 10:14:39.382 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-1.6309695600000000, preBalance=100.0000000000000000, postBalance=98.3690304400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8751, note=单号:8751开仓手续费-1.6309695600000000, createdDate=2022-03-17 10:08:58, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-4.3659000000000000, preBalance=98.3690304400000000, postBalance=92.3739072400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8753, note=单号:8753平仓收益-5.9951232000000000, createdDate=2022-03-17 10:10:47, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-1.6292232000000000, preBalance=92.3739072400000000, postBalance=92.3739072400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8753, note=单号:8753平仓手续费-1.6292232000000000, createdDate=2022-03-17 10:10:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-1.6286648400000000, preBalance=92.3739072400000000, postBalance=90.7452424000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8754, note=单号:8754开仓手续费-1.6286648400000000, createdDate=2022-03-17 10:13:28, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-990.8217000000000000, preBalance=90.7452424000000000, postBalance=-901.7047937600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8755, note=单号:8755平仓收益-992.4500361600000000, createdDate=2022-03-17 10:13:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-1.6283361600000000, preBalance=-901.7047937600000000, postBalance=-901.7047937600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8755, note=单号:8755平仓手续费-1.6283361600000000, createdDate=2022-03-17 10:13:48, fromUserId=0, total=null)]
2022-03-17 10:14:39.382 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:14:39.382 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.6309695600000000
2022-03-17 10:14:39.383 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8751' LIMIT 0,1000 
2022-03-17 10:14:39.383 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:14:39.469 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:14:39.470 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:14:39.470 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:14:39.566 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:14:39.567 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:14:39.567 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:39.652 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:39.653 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:14:39.653 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:39.737 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:39.737 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:14:39.740 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:39.851 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:39.852 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:14:39.852 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:39.939 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:39.939 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:14:39.939 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:40.024 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:14:40.025 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8751' and type=? limit 0,100 
2022-03-17 10:14:40.026 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:14:40.123 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:40.123 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8751,比列:0.300000,数据库:0.48929086,计算:-0.489290
2022-03-17 10:14:40.124 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8751' and type=? limit 0,100 
2022-03-17 10:14:40.125 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:14:40.210 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:40.211 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8751,比列:0.200000,数据库:0.32619391,计算:-0.326193
2022-03-17 10:14:40.212 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8751' and type=? limit 0,100 
2022-03-17 10:14:40.213 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:14:40.298 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:40.299 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8751,比列:0.300000,数据库:0.48929086,计算:-0.489290
2022-03-17 10:14:40.300 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8751' and type=? limit 0,100 
2022-03-17 10:14:40.301 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:14:40.385 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:40.386 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8751,比列:0.100000,数据库:0.16309695,计算:-0.163096
2022-03-17 10:14:40.387 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8751' and type=? limit 0,100 
2022-03-17 10:14:40.387 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:14:40.470 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:40.471 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8751,比列:0.100000,数据库:0.16309695,计算:-0.163096
2022-03-17 10:14:40.471 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-4.3659000000000000
2022-03-17 10:14:40.472 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8753' LIMIT 0,1000 
2022-03-17 10:14:40.472 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:14:40.556 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:14:40.556 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:14:40.557 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:14:40.656 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:14:40.657 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8753' LIMIT 0,1000 
2022-03-17 10:14:40.657 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:14:40.741 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:14:40.742 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:14:40.743 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:14:41.001 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:14:41.002 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,1 
2022-03-17 10:14:41.003 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51905047(String), 27(Integer)
2022-03-17 10:14:41.116 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:14:41.116 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51905047,交易类型:4,订单:8753,比例:0.7,数据库:3.05613000,计算得:3.056130
2022-03-17 10:14:41.117 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,1 
2022-03-17 10:14:41.118 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 10:14:41.206 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:14:41.207 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8753,数据库:1.30977000,计算得:1.309770
2022-03-17 10:14:41.207 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.6292232000000000
2022-03-17 10:14:41.208 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8753' LIMIT 0,1000 
2022-03-17 10:14:41.208 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:14:41.911 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:14:41.912 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:14:41.912 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:14:41.995 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:14:41.996 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:14:41.996 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:42.089 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:42.091 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:14:42.091 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:42.174 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:42.175 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:14:42.175 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:42.259 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:42.260 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:14:42.260 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:42.343 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:42.344 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:14:42.344 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:42.431 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:14:42.432 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,100 
2022-03-17 10:14:42.432 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:14:42.516 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:42.516 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8753,比列:0.300000,数据库:0.48876696,计算:-0.488766
2022-03-17 10:14:42.517 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,100 
2022-03-17 10:14:42.517 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:14:42.600 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:42.601 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8753,比列:0.200000,数据库:0.32584464,计算:-0.325844
2022-03-17 10:14:42.602 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,100 
2022-03-17 10:14:42.602 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:14:42.686 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:42.686 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8753,比列:0.300000,数据库:0.48876696,计算:-0.488766
2022-03-17 10:14:42.687 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,100 
2022-03-17 10:14:42.688 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:14:42.773 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:42.774 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8753,比列:0.100000,数据库:0.16292232,计算:-0.162922
2022-03-17 10:14:42.775 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8753' and type=? limit 0,100 
2022-03-17 10:14:42.775 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:14:42.861 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:42.861 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8753,比列:0.100000,数据库:0.16292232,计算:-0.162922
2022-03-17 10:14:42.862 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.6286648400000000
2022-03-17 10:14:42.862 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8754' LIMIT 0,1000 
2022-03-17 10:14:42.863 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:14:42.948 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:14:42.949 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:14:42.949 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:14:43.033 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:14:43.034 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:14:43.034 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:43.119 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:43.120 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:14:43.120 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:43.220 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:43.221 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:14:43.221 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:43.306 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:43.307 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:14:43.307 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:43.390 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:43.391 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:14:43.391 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:43.481 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:14:43.482 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8754' and type=? limit 0,100 
2022-03-17 10:14:43.482 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:14:43.567 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:43.567 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8754,比列:0.300000,数据库:0.48859945,计算:-0.488599
2022-03-17 10:14:43.568 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8754' and type=? limit 0,100 
2022-03-17 10:14:43.569 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:14:43.657 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:43.658 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8754,比列:0.200000,数据库:0.32573296,计算:-0.325732
2022-03-17 10:14:43.659 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8754' and type=? limit 0,100 
2022-03-17 10:14:43.659 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:14:43.749 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:43.749 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8754,比列:0.300000,数据库:0.48859945,计算:-0.488599
2022-03-17 10:14:43.750 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8754' and type=? limit 0,100 
2022-03-17 10:14:43.751 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:14:43.837 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:43.838 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8754,比列:0.100000,数据库:0.16286648,计算:-0.162866
2022-03-17 10:14:43.838 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8754' and type=? limit 0,100 
2022-03-17 10:14:43.838 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:14:43.925 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:43.926 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8754,比列:0.100000,数据库:0.16286648,计算:-0.162866
2022-03-17 10:14:43.926 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-990.8217000000000000
2022-03-17 10:14:43.927 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8755' LIMIT 0,1000 
2022-03-17 10:14:43.927 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:14:44.027 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:14:44.028 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:14:44.028 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:14:44.132 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:14:44.133 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8755' LIMIT 0,1000 
2022-03-17 10:14:44.134 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:14:44.230 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:14:44.231 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:14:44.232 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:14:44.316 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:14:44.318 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8755' and type=? limit 0,1 
2022-03-17 10:14:44.318 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51905047(String), 27(Integer)
2022-03-17 10:14:44.402 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:14:44.402 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51905047,交易类型:4,订单:8755,比例:0.7,数据库:693.57519000,计算得:693.575190
2022-03-17 10:14:44.403 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8755' and type=? limit 0,1 
2022-03-17 10:14:44.404 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 10:14:44.493 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:14:44.493 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8755,数据库:297.24651000,计算得:297.246510
2022-03-17 10:14:44.494 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.6283361600000000
2022-03-17 10:14:44.495 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8755' LIMIT 0,1000 
2022-03-17 10:14:44.495 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:14:44.580 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:14:44.580 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:14:44.581 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:14:44.663 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:14:44.664 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:14:44.665 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:44.749 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:44.749 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:14:44.750 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:44.832 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:44.833 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:14:44.833 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:44.917 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:44.918 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:14:44.918 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:45.002 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:14:45.003 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:14:45.003 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:14:45.087 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:14:45.088 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8755' and type=? limit 0,100 
2022-03-17 10:14:45.089 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:14:45.173 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:45.173 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8755,比列:0.300000,数据库:0.48850084,计算:-0.488500
2022-03-17 10:14:45.174 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8755' and type=? limit 0,100 
2022-03-17 10:14:45.174 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:14:45.266 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:45.266 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8755,比列:0.200000,数据库:0.32566723,计算:-0.325667
2022-03-17 10:14:45.267 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8755' and type=? limit 0,100 
2022-03-17 10:14:45.267 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:14:45.371 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:45.371 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8755,比列:0.300000,数据库:0.48850084,计算:-0.488500
2022-03-17 10:14:45.372 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8755' and type=? limit 0,100 
2022-03-17 10:14:45.373 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:14:45.736 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:45.736 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8755,比列:0.100000,数据库:0.16283361,计算:-0.162833
2022-03-17 10:14:45.736 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8755' and type=? limit 0,100 
2022-03-17 10:14:45.737 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:14:45.836 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:14:45.836 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8755,比列:0.100000,数据库:0.16283361,计算:-0.162833
2022-03-17 10:14:45.836 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:28:26.756 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3m10s683ms).
2022-03-17 10:28:36.023 [HikariPool-2 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Thread starvation or clock leap detected (housekeeper delta=3m10s692ms).
2022-03-17 10:33:50.262 [http-nio-10090-exec-5] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5bc8ad87 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2022-03-17 10:33:55.269 [http-nio-10090-exec-5] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7e5c2896 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2022-03-17 10:34:00.274 [http-nio-10090-exec-5] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5bcae5c0 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2022-03-17 10:34:05.282 [http-nio-10090-exec-5] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@2eab4dcb (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2022-03-17 10:34:10.289 [http-nio-10090-exec-5] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@72c77ccf (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2022-03-17 10:34:15.297 [http-nio-10090-exec-5] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@51d21ede (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2022-03-17 10:34:15.298 [http-nio-10090-exec-5] ERROR com.zmj.demo.service.impl.ToolServiceImpl - [Ljava.lang.StackTraceElement;@6f73d0b7
2022-03-17 10:34:15.332 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 10:34:15.337 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 10:34:15.339 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2022-03-17 10:34:16.151 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2022-03-17 10:34:34.301 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5006 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 10:34:39.315 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 23739 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 10:34:39.316 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 10:34:40.277 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 10:34:40.280 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 10:34:40.306 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 10:34:40.311 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 10:34:40.312 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 10:34:40.324 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 10:34:40.335 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 10:34:40.338 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 10:34:40.357 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2022-03-17 10:34:41.168 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 10:34:41.184 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 10:34:41.185 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 10:34:41.186 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 10:34:41.361 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 10:34:41.361 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1981 ms
2022-03-17 10:34:42.753 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 10:34:43.759 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 10:34:43.761 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 10:34:43.761 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 10:34:44.052 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 10:34:44.075 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 10:34:44.088 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 25.428 seconds (JVM running for 26.023)
2022-03-17 10:34:48.014 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 10:34:48.015 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 10:34:48.016 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 10:34:48.402 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 10:34:49.581 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 10:34:49.593 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38,59) 
2022-03-17 10:34:49.625 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 10:34:49.749 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 10:34:49.755 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 10:34:49.756 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 10:34:49.847 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 10:34:49.848 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:34:49.848 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 10:34:49.941 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 10:34:49.942 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:97.4742042000000000,hold:0E-16
2022-03-17 10:34:49.944 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-2.5257958000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:97.4742042000000000,操作后，数据库存储的总金额:97.4742042000000000
2022-03-17 10:34:49.945 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:34:49.946 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:34:50.031 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:34:50.032 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 10:34:50.033 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:34:50.034 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:34:50.125 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:34:50.127 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:34:50.127 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:34:50.227 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:34:50.228 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:34:50.229 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:34:50.317 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:34:50.318 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:34:50.319 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:34:50.407 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:34:50.408 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:34:50.409 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:34:50.499 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:34:50.500 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 10:34:50.501 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:34:50.589 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:34:50.590 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 10:34:50.591 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 10:34:50.592 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 10:34:50.685 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 2
2022-03-17 10:34:50.686 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-1.6237980000000000, preBalance=100.0000000000000000, postBalance=98.3762020000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8756, note=单号:8756开仓手续费-1.6237980000000000, createdDate=2022-03-17 10:31:38, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.9019978000000000, preBalance=98.3762020000000000, postBalance=97.4742042000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8757, note=单号:8757开仓手续费-0.9019978000000000, createdDate=2022-03-17 10:31:58, fromUserId=0, total=null)]
2022-03-17 10:34:50.687 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:34:50.687 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.6237980000000000
2022-03-17 10:34:50.696 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8756' LIMIT 0,1000 
2022-03-17 10:34:50.696 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:34:50.787 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:34:50.789 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:34:50.790 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:34:50.876 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:34:50.939 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:34:50.939 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:34:51.027 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:34:51.029 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:34:51.029 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:34:51.117 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:34:51.118 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:34:51.120 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:34:51.209 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:34:51.211 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:34:51.211 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:34:51.298 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:34:51.300 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:34:51.301 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:34:51.387 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:34:51.390 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8756' and type=? limit 0,100 
2022-03-17 10:34:51.391 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:34:51.480 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:34:51.480 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8756,比列:0.300000,数据库:0.48713940,计算:-0.487139
2022-03-17 10:34:51.482 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8756' and type=? limit 0,100 
2022-03-17 10:34:51.482 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:34:51.571 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:34:51.572 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8756,比列:0.200000,数据库:0.32475960,计算:-0.324759
2022-03-17 10:34:51.573 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8756' and type=? limit 0,100 
2022-03-17 10:34:51.573 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:34:51.666 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:34:51.666 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8756,比列:0.300000,数据库:0.48713940,计算:-0.487139
2022-03-17 10:34:51.668 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8756' and type=? limit 0,100 
2022-03-17 10:34:51.669 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:34:51.757 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:34:51.758 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8756,比列:0.100000,数据库:0.16237980,计算:-0.162379
2022-03-17 10:34:51.759 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8756' and type=? limit 0,100 
2022-03-17 10:34:51.760 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:34:51.848 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:34:51.849 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8756,比列:0.100000,数据库:0.16237980,计算:-0.162379
2022-03-17 10:34:51.849 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9019978000000000
2022-03-17 10:34:51.850 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8757' LIMIT 0,1000 
2022-03-17 10:34:51.850 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:34:51.940 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:34:51.941 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:34:51.942 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:34:52.028 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:34:52.031 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:34:52.031 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:34:52.119 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:34:52.121 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:34:52.122 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:34:52.212 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:34:52.212 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:34:52.213 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:34:52.300 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:34:52.302 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:34:52.302 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:34:52.399 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:34:52.400 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:34:52.401 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:34:52.491 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:34:52.493 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8757' and type=? limit 0,100 
2022-03-17 10:34:52.493 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:34:52.582 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:34:52.582 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8757,比列:0.300000,数据库:0.27059934,计算:-0.270599
2022-03-17 10:34:52.583 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8757' and type=? limit 0,100 
2022-03-17 10:34:52.584 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:34:52.674 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:34:52.675 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8757,比列:0.200000,数据库:0.18039956,计算:-0.180399
2022-03-17 10:34:52.676 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8757' and type=? limit 0,100 
2022-03-17 10:34:52.676 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:34:52.765 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:34:52.767 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8757,比列:0.300000,数据库:0.27059934,计算:-0.270599
2022-03-17 10:34:52.768 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8757' and type=? limit 0,100 
2022-03-17 10:34:52.768 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:34:52.856 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:34:52.857 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8757,比列:0.100000,数据库:0.09019978,计算:-0.090199
2022-03-17 10:34:52.857 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8757' and type=? limit 0,100 
2022-03-17 10:34:52.858 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:34:52.948 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:34:52.948 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8757,比列:0.100000,数据库:0.09019978,计算:-0.090199
2022-03-17 10:34:52.949 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:35:56.771 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38,59) 
2022-03-17 10:35:56.771 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 10:35:56.859 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 10:35:56.860 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 10:35:56.861 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 10:35:56.946 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 10:35:56.947 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:35:56.947 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 10:35:57.032 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 10:35:57.033 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:0E-16,hold:0E-16
2022-03-17 10:35:57.034 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-10.3899554000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:89.6100446000000000,操作后，数据库存储的总金额:0E-16
2022-03-17 10:35:57.034 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:35:57.035 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:35:57.120 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:35:57.122 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 10:35:57.122 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:35:57.123 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:35:57.220 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:35:57.221 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:35:57.221 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:35:57.307 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:35:57.308 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:35:57.308 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:35:57.396 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:35:57.397 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:35:57.398 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:35:57.485 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:35:57.486 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:35:57.486 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:35:57.576 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:35:57.577 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 10:35:57.577 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:35:57.666 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:35:57.666 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 10:35:57.667 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 10:35:57.667 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 10:35:57.758 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 7
2022-03-17 10:35:57.759 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-1.6237980000000000, preBalance=100.0000000000000000, postBalance=98.3762020000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8756, note=单号:8756开仓手续费-1.6237980000000000, createdDate=2022-03-17 10:31:38, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.9019978000000000, preBalance=98.3762020000000000, postBalance=97.4742042000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8757, note=单号:8757开仓手续费-0.9019978000000000, createdDate=2022-03-17 10:31:58, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-3.6135000000000000, preBalance=97.4742042000000000, postBalance=92.2383516000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8758, note=单号:8758平仓收益-5.2358526000000000, createdDate=2022-03-17 10:35:19, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-1.7270000000000000, preBalance=92.2383516000000000, postBalance=89.6100446000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8759, note=单号:8759平仓收益-2.6283070000000000, createdDate=2022-03-17 10:35:19, fromUserId=0, total=null), UserBillChain(userId=51905058, type=59, size=-89.6100446000000000, preBalance=89.6100446000000000, postBalance=0E-16, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=0, parentId=0, sourceId=8759, note=订单:8759爆仓剩余返还给默认合伙人,amount:-89.6100446000000000, createdDate=2022-03-17 10:35:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-1.6223526000000000, preBalance=0E-16, postBalance=0E-16, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8758, note=单号:8758平仓手续费-1.6223526000000000, createdDate=2022-03-17 10:35:28, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.9013070000000000, preBalance=0E-16, postBalance=0E-16, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8759, note=单号:8759平仓手续费-0.9013070000000000, createdDate=2022-03-17 10:35:28, fromUserId=0, total=null)]
2022-03-17 10:35:57.759 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:35:57.759 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.6237980000000000
2022-03-17 10:35:57.759 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8756' LIMIT 0,1000 
2022-03-17 10:35:57.760 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:35:57.849 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:35:57.850 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:35:57.851 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:35:57.937 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:35:57.938 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:35:57.939 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:35:58.025 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:35:58.026 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:35:58.027 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:35:58.113 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:35:58.114 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:35:58.114 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:35:58.200 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:35:58.200 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:35:58.200 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:35:58.287 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:35:58.288 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:35:58.288 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:35:58.379 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:35:58.380 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8756' and type=? limit 0,100 
2022-03-17 10:35:58.381 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:35:58.473 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:35:58.473 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8756,比列:0.300000,数据库:0.48713940,计算:-0.487139
2022-03-17 10:35:58.474 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8756' and type=? limit 0,100 
2022-03-17 10:35:58.475 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:35:58.565 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:35:58.565 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8756,比列:0.200000,数据库:0.32475960,计算:-0.324759
2022-03-17 10:35:58.566 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8756' and type=? limit 0,100 
2022-03-17 10:35:58.567 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:35:58.661 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:35:58.662 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8756,比列:0.300000,数据库:0.48713940,计算:-0.487139
2022-03-17 10:35:58.663 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8756' and type=? limit 0,100 
2022-03-17 10:35:58.664 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:35:58.753 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:35:58.753 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8756,比列:0.100000,数据库:0.16237980,计算:-0.162379
2022-03-17 10:35:58.755 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8756' and type=? limit 0,100 
2022-03-17 10:35:58.755 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:35:58.848 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:35:58.848 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8756,比列:0.100000,数据库:0.16237980,计算:-0.162379
2022-03-17 10:35:58.848 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9019978000000000
2022-03-17 10:35:58.849 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8757' LIMIT 0,1000 
2022-03-17 10:35:58.849 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:35:58.940 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:35:58.941 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:35:58.941 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:35:59.027 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:35:59.029 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:35:59.029 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:35:59.118 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:35:59.119 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:35:59.119 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:35:59.208 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:35:59.209 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:35:59.210 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:35:59.296 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:35:59.297 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:35:59.297 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:35:59.385 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:35:59.387 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:35:59.387 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:35:59.475 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:35:59.477 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8757' and type=? limit 0,100 
2022-03-17 10:35:59.478 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:35:59.564 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:35:59.565 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8757,比列:0.300000,数据库:0.27059934,计算:-0.270599
2022-03-17 10:35:59.566 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8757' and type=? limit 0,100 
2022-03-17 10:35:59.566 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:35:59.653 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:35:59.653 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8757,比列:0.200000,数据库:0.18039956,计算:-0.180399
2022-03-17 10:35:59.654 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8757' and type=? limit 0,100 
2022-03-17 10:35:59.655 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:35:59.741 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:35:59.742 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8757,比列:0.300000,数据库:0.27059934,计算:-0.270599
2022-03-17 10:35:59.742 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8757' and type=? limit 0,100 
2022-03-17 10:35:59.743 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:35:59.830 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:35:59.831 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8757,比列:0.100000,数据库:0.09019978,计算:-0.090199
2022-03-17 10:35:59.832 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8757' and type=? limit 0,100 
2022-03-17 10:35:59.832 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:35:59.928 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:35:59.929 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8757,比列:0.100000,数据库:0.09019978,计算:-0.090199
2022-03-17 10:35:59.929 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-3.6135000000000000
2022-03-17 10:35:59.930 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8758' LIMIT 0,1000 
2022-03-17 10:35:59.930 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:36:00.016 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:36:00.017 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:36:00.018 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:36:00.105 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:36:00.106 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8758' LIMIT 0,1000 
2022-03-17 10:36:00.107 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:36:00.197 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:36:00.198 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:36:00.198 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:36:00.285 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:36:00.287 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8758' and type=? limit 0,1 
2022-03-17 10:36:00.287 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51905047(String), 27(Integer)
2022-03-17 10:36:00.389 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:36:00.390 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51905047,交易类型:4,订单:8758,比例:0.7,数据库:2.52945000,计算得:2.529450
2022-03-17 10:36:00.391 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8758' and type=? limit 0,1 
2022-03-17 10:36:00.391 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 10:36:00.486 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:36:00.487 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8758,数据库:1.08405000,计算得:1.084050
2022-03-17 10:36:00.488 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-1.7270000000000000
2022-03-17 10:36:00.489 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8759' LIMIT 0,1000 
2022-03-17 10:36:00.489 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:36:00.577 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:36:00.578 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:36:00.578 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:36:00.663 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:36:00.664 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8759' LIMIT 0,1000 
2022-03-17 10:36:00.665 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:36:00.751 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:36:00.752 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:36:00.752 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:36:00.844 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:36:00.846 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8759' and type=? limit 0,1 
2022-03-17 10:36:00.846 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51905047(String), 27(Integer)
2022-03-17 10:36:00.938 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:36:00.938 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51905047,交易类型:4,订单:8759,比例:0.7,数据库:1.20890000,计算得:1.208900
2022-03-17 10:36:00.939 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8759' and type=? limit 0,1 
2022-03-17 10:36:00.940 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 10:36:01.027 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:36:01.028 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8759,数据库:0.51810000,计算得:0.518100
2022-03-17 10:36:01.028 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 爆仓剩余金额，返回给默认合伙人:-89.6100446000000000
2022-03-17 10:36:01.030 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8759' and type=? limit 0,1 
2022-03-17 10:36:01.030 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 59(Integer)
2022-03-17 10:36:01.119 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:36:01.120 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 爆仓剩余金额，返回给默认合伙人--->用户:51905058,类型:59,爆仓剩余金额:-89.6100446000000000,返还金额:89.6100446000000000
2022-03-17 10:36:01.120 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.6223526000000000
2022-03-17 10:36:01.121 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8758' LIMIT 0,1000 
2022-03-17 10:36:01.121 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:36:01.214 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:36:01.215 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:36:01.216 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:36:01.304 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:36:01.305 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:36:01.306 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:36:01.391 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:36:01.392 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:36:01.392 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:36:01.480 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:36:01.480 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:36:01.481 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:36:01.568 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:36:01.569 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:36:01.570 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:36:01.657 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:36:01.658 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:36:01.658 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:36:01.743 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:36:01.745 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8758' and type=? limit 0,100 
2022-03-17 10:36:01.745 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:36:01.832 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:36:01.832 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8758,比列:0.300000,数据库:0.48670578,计算:-0.486705
2022-03-17 10:36:01.833 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8758' and type=? limit 0,100 
2022-03-17 10:36:01.833 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:36:01.922 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:36:01.922 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8758,比列:0.200000,数据库:0.32447052,计算:-0.324470
2022-03-17 10:36:01.923 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8758' and type=? limit 0,100 
2022-03-17 10:36:01.924 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:36:02.013 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:36:02.013 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8758,比列:0.300000,数据库:0.48670578,计算:-0.486705
2022-03-17 10:36:02.014 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8758' and type=? limit 0,100 
2022-03-17 10:36:02.015 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:36:02.103 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:36:02.104 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8758,比列:0.100000,数据库:0.16223526,计算:-0.162235
2022-03-17 10:36:02.105 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8758' and type=? limit 0,100 
2022-03-17 10:36:02.106 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:36:02.194 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:36:02.195 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8758,比列:0.100000,数据库:0.16223526,计算:-0.162235
2022-03-17 10:36:02.195 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.9013070000000000
2022-03-17 10:36:02.196 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8759' LIMIT 0,1000 
2022-03-17 10:36:02.196 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:36:02.286 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:36:02.287 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:36:02.287 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:36:02.386 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:36:02.387 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:36:02.388 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:36:02.488 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:36:02.489 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:36:02.490 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:36:02.583 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:36:02.584 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:36:02.584 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:36:02.672 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:36:02.673 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:36:02.674 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:36:02.766 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:36:02.767 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:36:02.767 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:36:02.854 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:36:02.854 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8759' and type=? limit 0,100 
2022-03-17 10:36:02.855 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:36:02.945 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:36:02.946 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8759,比列:0.300000,数据库:0.27039210,计算:-0.270392
2022-03-17 10:36:02.946 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8759' and type=? limit 0,100 
2022-03-17 10:36:02.946 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:36:03.033 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:36:03.034 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8759,比列:0.200000,数据库:0.18026140,计算:-0.180261
2022-03-17 10:36:03.035 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8759' and type=? limit 0,100 
2022-03-17 10:36:03.035 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:36:03.121 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:36:03.122 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8759,比列:0.300000,数据库:0.27039210,计算:-0.270392
2022-03-17 10:36:03.122 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8759' and type=? limit 0,100 
2022-03-17 10:36:03.123 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:36:03.209 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:36:03.210 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8759,比列:0.100000,数据库:0.09013070,计算:-0.090130
2022-03-17 10:36:03.211 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8759' and type=? limit 0,100 
2022-03-17 10:36:03.211 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:36:03.298 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:36:03.298 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8759,比列:0.100000,数据库:0.09013070,计算:-0.090130
2022-03-17 10:36:03.298 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:38:47.045 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38,59) 
2022-03-17 10:38:47.046 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 10:38:47.131 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 10:38:47.132 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 10:38:47.133 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 10:38:47.217 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 10:38:47.218 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:38:47.219 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 10:38:47.304 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 10:38:47.305 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:0E-16,hold:0E-16
2022-03-17 10:38:47.305 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-100.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:0E-16,操作后，数据库存储的总金额:0E-16
2022-03-17 10:38:47.306 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:38:47.306 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:38:47.392 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:38:47.393 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 10:38:47.393 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:38:47.394 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:38:47.481 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:38:47.481 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:38:47.482 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:38:47.569 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:38:47.569 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:38:47.570 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:38:47.657 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:38:47.658 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:38:47.658 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:38:47.748 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:38:47.749 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:38:47.749 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:38:47.836 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:38:47.837 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 10:38:47.838 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:38:47.928 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:38:47.928 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 10:38:47.928 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 10:38:47.928 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 10:38:48.018 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 5
2022-03-17 10:38:48.019 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-1.6237584000000000, preBalance=100.0000000000000000, postBalance=98.3762416000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8760, note=单号:8760开仓手续费-1.6237584000000000, createdDate=2022-03-17 10:37:38, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-989.3070000000000000, preBalance=98.3762416000000000, postBalance=-892.5547940000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8761, note=单号:8761平仓收益-990.9310356000000000, createdDate=2022-03-17 10:38:22, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-1.6240356000000000, preBalance=-892.5547940000000000, postBalance=-892.5547940000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8761, note=单号:8761平仓手续费-1.6240356000000000, createdDate=2022-03-17 10:38:28, fromUserId=0, total=null), UserBillChain(userId=51905058, type=54, size=624.7883558000000000, preBalance=-892.5547940000000000, postBalance=-267.7664382000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8761, note=单号:8761穿仓回补624.7883558000000000, createdDate=2022-03-17 10:38:31, fromUserId=51905047, total=null), UserBillChain(userId=51905058, type=54, size=267.7664382000000000, preBalance=-267.7664382000000000, postBalance=0E-16, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8761, note=单号:8761穿仓回补267.7664382000000000, createdDate=2022-03-17 10:38:31, fromUserId=51904446, total=null)]
2022-03-17 10:38:48.020 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:38:48.020 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.6237584000000000
2022-03-17 10:38:48.021 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8760' LIMIT 0,1000 
2022-03-17 10:38:48.021 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:38:48.110 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:38:48.111 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:38:48.111 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:38:48.197 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:38:48.198 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:38:48.199 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:38:48.285 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:38:48.286 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:38:48.287 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:38:48.373 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:38:48.374 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:38:48.374 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:38:48.460 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:38:48.461 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:38:48.462 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:38:48.549 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:38:48.550 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:38:48.550 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:38:48.643 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:38:48.644 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8760' and type=? limit 0,100 
2022-03-17 10:38:48.644 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:38:48.731 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:38:48.732 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8760,比列:0.300000,数据库:0.48712752,计算:-0.487127
2022-03-17 10:38:48.733 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8760' and type=? limit 0,100 
2022-03-17 10:38:48.734 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:38:48.821 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:38:48.822 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8760,比列:0.200000,数据库:0.32475168,计算:-0.324751
2022-03-17 10:38:48.824 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8760' and type=? limit 0,100 
2022-03-17 10:38:48.824 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:38:48.911 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:38:48.912 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8760,比列:0.300000,数据库:0.48712752,计算:-0.487127
2022-03-17 10:38:48.913 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8760' and type=? limit 0,100 
2022-03-17 10:38:48.914 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:38:49.004 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:38:49.005 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8760,比列:0.100000,数据库:0.16237584,计算:-0.162375
2022-03-17 10:38:49.006 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8760' and type=? limit 0,100 
2022-03-17 10:38:49.006 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:38:49.097 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:38:49.097 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8760,比列:0.100000,数据库:0.16237584,计算:-0.162375
2022-03-17 10:38:49.097 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-989.3070000000000000
2022-03-17 10:38:49.098 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8761' LIMIT 0,1000 
2022-03-17 10:38:49.098 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:38:49.188 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:38:49.189 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:38:49.189 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:38:49.274 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:38:49.275 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8761' LIMIT 0,1000 
2022-03-17 10:38:49.276 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:38:49.362 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:38:49.364 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:38:49.365 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:38:49.480 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:38:49.481 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8761' and type=? limit 0,1 
2022-03-17 10:38:49.482 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51905047(String), 27(Integer)
2022-03-17 10:38:49.569 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:38:49.570 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51905047,交易类型:4,订单:8761,比例:0.7,数据库:692.51490000,计算得:692.514900
2022-03-17 10:38:49.571 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8761' and type=? limit 0,1 
2022-03-17 10:38:49.572 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 10:38:49.662 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:38:49.662 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8761,数据库:296.79210000,计算得:296.792100
2022-03-17 10:38:49.662 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.6240356000000000
2022-03-17 10:38:49.663 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8761' LIMIT 0,1000 
2022-03-17 10:38:49.663 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:38:49.749 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:38:49.750 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:38:49.750 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:38:49.837 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:38:49.839 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:38:49.839 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:38:49.929 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:38:49.930 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:38:49.930 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:38:50.016 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:38:50.017 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:38:50.017 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:38:50.107 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:38:50.107 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:38:50.107 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:38:50.192 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:38:50.193 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:38:50.193 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:38:50.281 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:38:50.282 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8761' and type=? limit 0,100 
2022-03-17 10:38:50.283 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:38:50.371 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:38:50.371 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8761,比列:0.300000,数据库:0.48721068,计算:-0.487210
2022-03-17 10:38:50.373 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8761' and type=? limit 0,100 
2022-03-17 10:38:50.373 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:38:50.462 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:38:50.462 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8761,比列:0.200000,数据库:0.32480712,计算:-0.324807
2022-03-17 10:38:50.463 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8761' and type=? limit 0,100 
2022-03-17 10:38:50.464 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:38:50.565 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:38:50.566 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8761,比列:0.300000,数据库:0.48721068,计算:-0.487210
2022-03-17 10:38:50.567 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8761' and type=? limit 0,100 
2022-03-17 10:38:50.568 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:38:50.659 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:38:50.660 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8761,比列:0.100000,数据库:0.16240356,计算:-0.162403
2022-03-17 10:38:50.660 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8761' and type=? limit 0,100 
2022-03-17 10:38:50.661 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:38:50.748 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:38:50.749 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8761,比列:0.100000,数据库:0.16240356,计算:-0.162403
2022-03-17 10:38:50.749 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 穿仓回补（给用户加钱到0）给用户:624.7883558000000000
2022-03-17 10:38:50.750 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8761' and type=? limit 0,1 
2022-03-17 10:38:50.750 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51905047(String), 38(Integer)
2022-03-17 10:38:50.837 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:38:50.838 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.PositionsCalc - partnerBack--合伙人--穿仓回退--->用户:51905058,合伙人:51905047,交易类型:54,订单:8761,数据库:1525.66469446,计算得:624.788355
2022-03-17 10:38:50.839 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 穿仓回补（给用户加钱到0）给用户:267.7664382000000000
2022-03-17 10:38:50.840 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8761' and type=? limit 0,1 
2022-03-17 10:38:50.840 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 38(Integer)
2022-03-17 10:38:50.928 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:38:50.929 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.PositionsCalc - partnerBack--合伙人--穿仓回退--->用户:51905058,合伙人:51904446,交易类型:54,订单:8761,数据库:-2150.45305026,计算得:267.766438
2022-03-17 10:38:50.929 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:39:39.170 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38,59) 
2022-03-17 10:39:39.171 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 10:39:39.257 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 10:39:39.258 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 10:39:39.259 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 10:39:39.344 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 10:39:39.345 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:39:39.345 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 10:39:39.432 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 10:39:39.433 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:94.1231819900000000,hold:0E-16
2022-03-17 10:39:39.433 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-5.8768180100000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:94.1231819900000000,操作后，数据库存储的总金额:94.1231819900000000
2022-03-17 10:39:39.433 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:39:39.434 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:39.521 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:39:39.522 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 10:39:39.522 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:39:39.522 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:39:39.613 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:39:39.614 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:39:39.614 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:39:39.707 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:39:39.708 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:39:39.708 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:39:39.795 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:39:39.796 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:39:39.796 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:39:39.882 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:39:39.883 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:39:39.883 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:39:39.971 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:39:39.972 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 10:39:39.972 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:39:40.060 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:39:40.060 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 10:39:40.061 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 10:39:40.061 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 10:39:40.150 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 7
2022-03-17 10:39:40.150 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-0.8691109600000000, preBalance=100.0000000000000000, postBalance=99.1308890400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8762, note=单号:8762开仓手续费-0.8691109600000000, createdDate=2022-03-17 10:39:29, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-1.0003829200000000, preBalance=99.1308890400000000, postBalance=98.1305061200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8763, note=单号:8763开仓手续费-1.0003829200000000, createdDate=2022-03-17 10:39:29, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0653000100000000, preBalance=98.1305061200000000, postBalance=96.1957383500000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8765, note=单号:8765平仓收益-1.9347677700000000, createdDate=2022-03-17 10:39:34, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0063000000000000, preBalance=96.1957383500000000, postBalance=95.1563089100000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8766, note=单号:8766平仓收益-1.0394294400000000, createdDate=2022-03-17 10:39:34, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-1.0331269200000000, preBalance=95.1563089100000000, postBalance=94.1231819900000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8764, note=单号:8764开仓手续费-1.0331269200000000, createdDate=2022-03-17 10:39:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-1.8694677600000000, preBalance=94.1231819900000000, postBalance=94.1231819900000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8765, note=单号:8765平仓手续费-1.8694677600000000, createdDate=2022-03-17 10:39:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-1.0331294400000000, preBalance=94.1231819900000000, postBalance=94.1231819900000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8766, note=单号:8766平仓手续费-1.0331294400000000, createdDate=2022-03-17 10:39:39, fromUserId=0, total=null)]
2022-03-17 10:39:40.151 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:39:40.151 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8691109600000000
2022-03-17 10:39:40.151 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8762' LIMIT 0,1000 
2022-03-17 10:39:40.151 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:39:40.244 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:39:40.245 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:39:40.245 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:39:40.331 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:39:40.332 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:39:40.332 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:40.421 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:40.422 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:39:40.422 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:40.509 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:40.509 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:39:40.510 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:40.598 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:40.598 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:39:40.599 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:40.685 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:40.685 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:39:40.685 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:40.771 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:39:40.772 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8762' and type=? limit 0,100 
2022-03-17 10:39:40.772 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:39:40.859 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:40.860 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8762,比列:0.300000,数据库:0.26073328,计算:-0.260733
2022-03-17 10:39:40.860 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8762' and type=? limit 0,100 
2022-03-17 10:39:40.861 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:39:40.948 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:40.949 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8762,比列:0.200000,数据库:0.17382219,计算:-0.173822
2022-03-17 10:39:40.950 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8762' and type=? limit 0,100 
2022-03-17 10:39:40.950 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:39:41.037 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:41.037 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8762,比列:0.300000,数据库:0.26073328,计算:-0.260733
2022-03-17 10:39:41.038 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8762' and type=? limit 0,100 
2022-03-17 10:39:41.039 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:39:41.126 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:41.126 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8762,比列:0.100000,数据库:0.08691109,计算:-0.086911
2022-03-17 10:39:41.127 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8762' and type=? limit 0,100 
2022-03-17 10:39:41.127 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:39:41.216 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:41.216 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8762,比列:0.100000,数据库:0.08691109,计算:-0.086911
2022-03-17 10:39:41.216 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0003829200000000
2022-03-17 10:39:41.217 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8763' LIMIT 0,1000 
2022-03-17 10:39:41.217 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:39:41.310 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:39:41.311 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:39:41.311 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:39:41.397 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:39:41.398 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:39:41.398 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:41.484 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:41.484 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:39:41.484 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:41.572 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:41.573 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:39:41.574 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:41.660 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:41.660 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:39:41.661 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:41.748 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:41.749 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:39:41.749 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:41.840 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:39:41.841 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8763' and type=? limit 0,100 
2022-03-17 10:39:41.842 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:39:41.928 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:41.928 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8763,比列:0.300000,数据库:0.30011487,计算:-0.300114
2022-03-17 10:39:41.929 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8763' and type=? limit 0,100 
2022-03-17 10:39:41.930 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:39:42.016 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:42.017 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8763,比列:0.200000,数据库:0.20007658,计算:-0.200076
2022-03-17 10:39:42.018 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8763' and type=? limit 0,100 
2022-03-17 10:39:42.018 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:39:42.105 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:42.105 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8763,比列:0.300000,数据库:0.30011487,计算:-0.300114
2022-03-17 10:39:42.106 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8763' and type=? limit 0,100 
2022-03-17 10:39:42.106 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:39:42.192 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:42.193 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8763,比列:0.100000,数据库:0.10003829,计算:-0.100038
2022-03-17 10:39:42.193 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8763' and type=? limit 0,100 
2022-03-17 10:39:42.194 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:39:42.289 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:42.289 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8763,比列:0.100000,数据库:0.10003829,计算:-0.100038
2022-03-17 10:39:42.289 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0653000100000000
2022-03-17 10:39:42.290 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8765' LIMIT 0,1000 
2022-03-17 10:39:42.290 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:39:42.378 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:39:42.379 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:39:42.379 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:39:42.465 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:39:42.466 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8765' LIMIT 0,1000 
2022-03-17 10:39:42.466 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:39:42.558 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:39:42.559 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:39:42.559 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:39:42.648 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:39:42.649 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8765' and type=? limit 0,1 
2022-03-17 10:39:42.650 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51905047(String), 27(Integer)
2022-03-17 10:39:42.737 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:39:42.737 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51905047,交易类型:4,订单:8765,比例:0.7,数据库:0.04571000,计算得:0.045710
2022-03-17 10:39:42.738 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8765' and type=? limit 0,1 
2022-03-17 10:39:42.738 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 10:39:42.826 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:39:42.827 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8765,数据库:0.01959000,计算得:0.019590
2022-03-17 10:39:42.827 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0063000000000000
2022-03-17 10:39:42.827 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8766' LIMIT 0,1000 
2022-03-17 10:39:42.827 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:39:42.916 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:39:42.917 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:39:42.918 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:39:43.009 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:39:43.010 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8766' LIMIT 0,1000 
2022-03-17 10:39:43.010 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:39:43.097 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:39:43.098 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:39:43.098 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:39:43.183 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:39:43.184 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8766' and type=? limit 0,1 
2022-03-17 10:39:43.185 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51905047(String), 27(Integer)
2022-03-17 10:39:43.272 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:39:43.272 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51905047,交易类型:4,订单:8766,比例:0.7,数据库:0.00441000,计算得:0.004410
2022-03-17 10:39:43.273 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8766' and type=? limit 0,1 
2022-03-17 10:39:43.274 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 10:39:43.360 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:39:43.360 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8766,数据库:0.00189000,计算得:0.001890
2022-03-17 10:39:43.360 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0331269200000000
2022-03-17 10:39:43.361 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8764' LIMIT 0,1000 
2022-03-17 10:39:43.361 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:39:43.449 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:39:43.450 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:39:43.450 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:39:43.536 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:39:43.538 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:39:43.538 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:43.624 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:43.625 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:39:43.625 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:43.710 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:43.711 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:39:43.712 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:43.798 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:43.799 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:39:43.799 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:43.887 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:43.888 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:39:43.888 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:43.974 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:39:43.975 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8764' and type=? limit 0,100 
2022-03-17 10:39:43.975 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:39:44.063 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:44.064 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8764,比列:0.300000,数据库:0.30993807,计算:-0.309938
2022-03-17 10:39:44.065 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8764' and type=? limit 0,100 
2022-03-17 10:39:44.065 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:39:44.151 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:44.151 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8764,比列:0.200000,数据库:0.20662538,计算:-0.206625
2022-03-17 10:39:44.152 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8764' and type=? limit 0,100 
2022-03-17 10:39:44.152 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:39:44.238 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:44.239 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8764,比列:0.300000,数据库:0.30993807,计算:-0.309938
2022-03-17 10:39:44.240 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8764' and type=? limit 0,100 
2022-03-17 10:39:44.240 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:39:44.327 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:44.327 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8764,比列:0.100000,数据库:0.10331269,计算:-0.103312
2022-03-17 10:39:44.328 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8764' and type=? limit 0,100 
2022-03-17 10:39:44.329 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:39:44.418 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:44.419 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8764,比列:0.100000,数据库:0.10331269,计算:-0.103312
2022-03-17 10:39:44.419 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.8694677600000000
2022-03-17 10:39:44.419 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8765' LIMIT 0,1000 
2022-03-17 10:39:44.420 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:39:44.507 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:39:44.508 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:39:44.508 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:39:44.595 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:39:44.596 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:39:44.596 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:44.682 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:44.682 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:39:44.683 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:44.769 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:44.770 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:39:44.770 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:44.859 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:44.860 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:39:44.860 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:44.949 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:44.950 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:39:44.950 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:45.036 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:39:45.037 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8765' and type=? limit 0,100 
2022-03-17 10:39:45.037 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:39:45.125 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:45.126 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8765,比列:0.300000,数据库:0.56084032,计算:-0.560840
2022-03-17 10:39:45.127 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8765' and type=? limit 0,100 
2022-03-17 10:39:45.127 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:39:45.215 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:45.215 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8765,比列:0.200000,数据库:0.37389355,计算:-0.373893
2022-03-17 10:39:45.216 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8765' and type=? limit 0,100 
2022-03-17 10:39:45.217 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:39:45.305 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:45.305 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8765,比列:0.300000,数据库:0.56084032,计算:-0.560840
2022-03-17 10:39:45.306 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8765' and type=? limit 0,100 
2022-03-17 10:39:45.306 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:39:45.394 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:45.394 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8765,比列:0.100000,数据库:0.18694677,计算:-0.186946
2022-03-17 10:39:45.396 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8765' and type=? limit 0,100 
2022-03-17 10:39:45.396 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:39:45.484 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:45.484 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8765,比列:0.100000,数据库:0.18694677,计算:-0.186946
2022-03-17 10:39:45.485 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0331294400000000
2022-03-17 10:39:45.485 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8766' LIMIT 0,1000 
2022-03-17 10:39:45.485 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:39:45.572 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:39:45.573 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:39:45.573 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:39:45.658 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:39:45.659 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:39:45.659 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:45.746 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:45.747 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:39:45.747 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:45.833 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:45.833 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:39:45.834 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:45.919 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:45.920 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:39:45.920 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:46.007 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:39:46.008 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:39:46.008 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:39:46.093 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:39:46.093 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8766' and type=? limit 0,100 
2022-03-17 10:39:46.093 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:39:46.180 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:46.180 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8766,比列:0.300000,数据库:0.30993883,计算:-0.309938
2022-03-17 10:39:46.181 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8766' and type=? limit 0,100 
2022-03-17 10:39:46.181 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:39:46.269 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:46.269 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8766,比列:0.200000,数据库:0.20662588,计算:-0.206625
2022-03-17 10:39:46.270 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8766' and type=? limit 0,100 
2022-03-17 10:39:46.270 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:39:46.358 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:46.359 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8766,比列:0.300000,数据库:0.30993883,计算:-0.309938
2022-03-17 10:39:46.359 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8766' and type=? limit 0,100 
2022-03-17 10:39:46.360 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:39:46.446 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:46.447 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8766,比列:0.100000,数据库:0.10331294,计算:-0.103312
2022-03-17 10:39:46.448 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8766' and type=? limit 0,100 
2022-03-17 10:39:46.448 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:39:46.544 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:39:46.545 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8766,比列:0.100000,数据库:0.10331294,计算:-0.103312
2022-03-17 10:39:46.545 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:51:07.476 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38,59) 
2022-03-17 10:51:07.477 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 10:51:07.565 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 10:51:07.566 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 10:51:07.566 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 10:51:07.651 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 10:51:07.652 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:51:07.652 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 10:51:07.737 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 10:51:07.737 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:99.7463074400000000,hold:0E-16
2022-03-17 10:51:07.737 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-0.2536925600000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:99.7463074400000000,操作后，数据库存储的总金额:99.7463074400000000
2022-03-17 10:51:07.737 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:51:07.737 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:51:07.823 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:51:07.824 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 10:51:07.825 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:51:07.825 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:51:07.919 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:51:07.919 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:51:07.919 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:51:08.005 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:51:08.006 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:51:08.007 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:51:08.095 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:51:08.095 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:51:08.096 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:51:08.182 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:51:08.182 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:51:08.182 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:51:08.268 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:51:08.268 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 10:51:08.269 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 10:51:08.355 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 10:51:08.355 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 10:51:08.356 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 10:51:08.356 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 10:51:08.442 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 3
2022-03-17 10:51:08.443 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=4, size=0.1078000000000000, preBalance=100.0000000000000000, postBalance=99.9270321600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8779, note=单号:8779平仓收益-0.0729678400000000, createdDate=2022-03-17 10:50:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.1807247200000000, preBalance=99.9270321600000000, postBalance=99.7463074400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8778, note=单号:8778开仓手续费-0.1807247200000000, createdDate=2022-03-17 10:50:19, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.1807678400000000, preBalance=99.7463074400000000, postBalance=99.7463074400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8779, note=单号:8779平仓手续费-0.1807678400000000, createdDate=2022-03-17 10:50:19, fromUserId=0, total=null)]
2022-03-17 10:51:08.443 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:51:08.443 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.1078000000000000
2022-03-17 10:51:08.444 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8779' LIMIT 0,1000 
2022-03-17 10:51:08.444 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:51:08.532 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:51:08.532 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:51:08.533 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:51:08.618 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:51:08.619 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8779' LIMIT 0,1000 
2022-03-17 10:51:08.620 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:51:08.706 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:51:08.706 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:51:08.707 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:51:08.792 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:51:08.792 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8779' and type=? limit 0,1 
2022-03-17 10:51:08.793 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 10:51:08.883 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 10:51:08.883 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8779,数据库:-0.10780000,计算得:0.107800
2022-03-17 10:51:08.884 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1807247200000000
2022-03-17 10:51:08.884 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8778' LIMIT 0,1000 
2022-03-17 10:51:08.885 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:51:08.977 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:51:08.978 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:51:08.978 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:51:09.064 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:51:09.065 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:51:09.066 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:51:09.158 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:51:09.158 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:51:09.158 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:51:09.247 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:51:09.247 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:51:09.248 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:51:09.333 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:51:09.334 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:51:09.334 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:51:09.421 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:51:09.422 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:51:09.422 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:51:09.509 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:51:09.510 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8778' and type=? limit 0,100 
2022-03-17 10:51:09.510 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:51:09.596 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:51:09.596 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8778,比列:0.300000,数据库:0.05421741,计算:-0.054217
2022-03-17 10:51:09.597 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8778' and type=? limit 0,100 
2022-03-17 10:51:09.597 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:51:09.684 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:51:09.684 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8778,比列:0.200000,数据库:0.03614494,计算:-0.036144
2022-03-17 10:51:09.685 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8778' and type=? limit 0,100 
2022-03-17 10:51:09.686 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:51:09.772 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:51:09.772 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8778,比列:0.300000,数据库:0.05421741,计算:-0.054217
2022-03-17 10:51:09.773 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8778' and type=? limit 0,100 
2022-03-17 10:51:09.773 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:51:09.860 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:51:09.860 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8778,比列:0.100000,数据库:0.01807247,计算:-0.018072
2022-03-17 10:51:09.861 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8778' and type=? limit 0,100 
2022-03-17 10:51:09.862 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:51:09.950 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:51:09.950 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8778,比列:0.100000,数据库:0.01807247,计算:-0.018072
2022-03-17 10:51:09.950 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1807678400000000
2022-03-17 10:51:09.951 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8779' LIMIT 0,1000 
2022-03-17 10:51:09.951 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 10:51:10.037 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 10:51:10.037 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 10:51:10.037 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 10:51:10.124 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 10:51:10.125 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 10:51:10.126 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:51:10.212 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:51:10.213 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 10:51:10.213 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:51:10.298 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:51:10.299 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 10:51:10.300 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:51:10.385 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:51:10.385 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 10:51:10.385 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:51:10.474 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 10:51:10.475 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 10:51:10.475 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 10:51:10.561 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 10:51:10.562 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8779' and type=? limit 0,100 
2022-03-17 10:51:10.562 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 10:51:10.648 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:51:10.649 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8779,比列:0.300000,数据库:0.05423035,计算:-0.054230
2022-03-17 10:51:10.650 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8779' and type=? limit 0,100 
2022-03-17 10:51:10.650 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 10:51:10.737 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:51:10.738 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8779,比列:0.200000,数据库:0.03615356,计算:-0.036153
2022-03-17 10:51:10.738 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8779' and type=? limit 0,100 
2022-03-17 10:51:10.738 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 10:51:10.823 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:51:10.835 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8779,比列:0.300000,数据库:0.05423035,计算:-0.054230
2022-03-17 10:51:10.836 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8779' and type=? limit 0,100 
2022-03-17 10:51:10.837 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 10:51:10.923 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:51:10.923 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8779,比列:0.100000,数据库:0.01807678,计算:-0.018076
2022-03-17 10:51:10.924 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8779' and type=? limit 0,100 
2022-03-17 10:51:10.924 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 10:51:11.009 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 10:51:11.010 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8779,比列:0.100000,数据库:0.01807678,计算:-0.018076
2022-03-17 10:51:11.010 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 10:53:53.271 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 10:53:53.281 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 10:54:13.064 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5004 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 10:54:18.078 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 23889 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 10:54:18.079 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 10:54:19.011 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 10:54:19.014 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 10:54:19.039 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 10:54:19.045 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 10:54:19.046 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 10:54:19.056 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 10:54:19.070 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 10:54:19.072 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 10:54:19.094 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2022-03-17 10:54:19.860 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 10:54:19.873 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 10:54:19.874 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 10:54:19.875 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 10:54:20.021 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 10:54:20.022 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1882 ms
2022-03-17 10:54:21.341 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 10:54:22.133 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 10:54:22.148 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 10:54:22.149 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 10:54:22.457 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 10:54:22.473 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 10:54:22.484 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 25.097 seconds (JVM running for 25.793)
2022-03-17 11:09:16.216 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 11:09:16.218 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 11:09:16.221 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2022-03-17 11:09:16.562 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 11:09:17.760 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 11:09:17.772 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' LIMIT 0,1000 
2022-03-17 11:09:17.803 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==> Parameters: 
2022-03-17 11:09:17.923 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - <==      Total: 2
2022-03-17 11:09:17.929 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:09:17.929 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 11:09:18.017 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 11:09:18.107 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:18.108 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:18.209 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:18.211 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:18.211 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:18.303 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:18.304 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:18.304 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:18.396 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:18.412 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:18.413 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:18.501 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:18.502 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:18.503 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:18.599 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:18.603 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:18.603 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:18.694 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:18.695 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 风险率:3441.460266
2022-03-17 11:09:18.696 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:18.696 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:18.785 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:18.787 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '99' LIMIT 0,1 
2022-03-17 11:09:18.787 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:09:18.875 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:09:18.875 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,保证金0.829492,浮动盈亏:-0.172300,浮动盈亏比:-20.771751
2022-03-17 11:09:18.875 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,强平价:-8445.653844
2022-03-17 11:09:18.876 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:18.876 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:18.964 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:18.965 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '100' LIMIT 0,1 
2022-03-17 11:09:18.965 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:09:19.061 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:09:19.062 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,保证金2.050860,浮动盈亏:-0.217500,浮动盈亏比:-10.605307
2022-03-17 11:09:19.063 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,强平价:21205.958463
2022-03-17 11:09:31.375 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' LIMIT 0,1000 
2022-03-17 11:09:31.375 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==> Parameters: 
2022-03-17 11:09:31.468 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - <==      Total: 2
2022-03-17 11:09:31.470 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:09:31.470 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 11:09:31.562 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 11:09:31.574 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:31.574 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:31.664 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:31.665 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:31.666 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:31.756 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:31.758 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:31.758 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:31.846 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:31.847 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:31.847 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:31.936 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:31.936 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:31.936 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:32.025 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:32.026 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:32.027 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:32.114 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:32.115 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 风险率:3441.460266
2022-03-17 11:09:32.117 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:32.117 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:32.204 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:32.205 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '99' LIMIT 0,1 
2022-03-17 11:09:32.205 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:09:32.294 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:09:32.295 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,保证金0.829492,浮动盈亏:-0.172300,浮动盈亏比:-20.771751
2022-03-17 11:09:32.295 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,强平价:-8445.653844
2022-03-17 11:09:32.296 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:09:32.296 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:09:32.386 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:09:32.387 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '100' LIMIT 0,1 
2022-03-17 11:09:32.387 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:09:32.475 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:09:32.475 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,保证金2.050860,浮动盈亏:-0.217500,浮动盈亏比:-10.605307
2022-03-17 11:09:32.476 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,强平价:21205.958463
2022-03-17 11:10:51.524 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' LIMIT 0,1000 
2022-03-17 11:10:51.527 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==> Parameters: 
2022-03-17 11:10:51.617 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - <==      Total: 2
2022-03-17 11:10:51.618 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:10:51.619 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 11:10:51.709 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 11:10:51.732 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:51.732 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:51.821 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:51.835 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:51.835 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:51.927 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:51.928 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:51.928 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:52.017 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:52.018 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:52.019 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:52.107 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:52.107 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:52.108 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:52.196 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:52.198 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:52.198 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:52.286 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:52.287 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 风险率:3444.570997
2022-03-17 11:10:52.287 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:52.288 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:52.378 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:52.379 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '99' LIMIT 0,1 
2022-03-17 11:10:52.380 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:10:52.476 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:10:52.477 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,保证金0.829492,浮动盈亏:-0.146700,浮动盈亏比:-17.685524
2022-03-17 11:10:52.478 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,强平价:-8477.653844
2022-03-17 11:10:52.479 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:52.479 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:52.568 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:52.569 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '100' LIMIT 0,1 
2022-03-17 11:10:52.569 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:10:52.658 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:10:52.659 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,保证金2.050860,浮动盈亏:-0.153500,浮动盈亏比:-7.484664
2022-03-17 11:10:52.660 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,强平价:21200.838463
2022-03-17 11:10:58.867 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' LIMIT 0,1000 
2022-03-17 11:10:58.868 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==> Parameters: 
2022-03-17 11:10:58.970 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - <==      Total: 2
2022-03-17 11:10:58.971 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:10:58.971 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 11:10:59.062 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 11:10:59.088 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:59.088 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:59.195 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:59.196 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:59.197 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:59.293 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:59.294 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:59.294 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:59.383 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:59.383 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:59.384 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:59.473 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:59.475 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:59.475 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:59.567 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:59.568 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:59.569 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:59.659 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:59.661 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 风险率:3441.946318
2022-03-17 11:10:59.662 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:59.663 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:59.753 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:59.754 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '99' LIMIT 0,1 
2022-03-17 11:10:59.755 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:10:59.845 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:10:59.846 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,保证金0.829492,浮动盈亏:-0.168300,浮动盈亏比:-20.289528
2022-03-17 11:10:59.847 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,强平价:-8450.653844
2022-03-17 11:10:59.848 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:10:59.848 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:10:59.936 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:10:59.937 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '100' LIMIT 0,1 
2022-03-17 11:10:59.938 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:11:00.027 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:11:00.028 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,保证金2.050860,浮动盈亏:-0.207500,浮动盈亏比:-10.117706
2022-03-17 11:11:00.029 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,强平价:21205.158463
2022-03-17 11:11:09.343 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' LIMIT 0,1000 
2022-03-17 11:11:09.343 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==> Parameters: 
2022-03-17 11:11:09.433 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - <==      Total: 2
2022-03-17 11:11:09.434 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:11:09.434 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 11:11:09.523 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 11:11:09.548 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:09.548 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:09.636 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:09.637 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:09.637 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:09.726 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:09.727 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:09.728 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:09.815 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:09.816 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:09.816 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:09.908 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:09.910 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:09.910 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:09.998 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:09.998 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:09.998 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:10.087 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:10.088 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 风险率:3440.877004
2022-03-17 11:11:10.089 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:10.089 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:10.180 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:10.181 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '99' LIMIT 0,1 
2022-03-17 11:11:10.182 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:11:10.276 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:11:10.277 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,保证金0.829492,浮动盈亏:-0.177100,浮动盈亏比:-21.350418
2022-03-17 11:11:10.278 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,强平价:-8439.653844
2022-03-17 11:11:10.278 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:10.279 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:10.366 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:10.367 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '100' LIMIT 0,1 
2022-03-17 11:11:10.367 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:11:10.455 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:11:10.456 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,保证金2.050860,浮动盈亏:-0.229500,浮动盈亏比:-11.190427
2022-03-17 11:11:10.456 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,强平价:21206.918463
2022-03-17 11:11:32.871 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' LIMIT 0,1000 
2022-03-17 11:11:32.872 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==> Parameters: 
2022-03-17 11:11:32.961 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - <==      Total: 2
2022-03-17 11:11:32.962 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:11:32.962 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 11:11:33.050 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 11:11:33.065 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:33.065 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:33.154 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:33.154 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:33.154 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:33.265 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:33.266 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:33.266 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:33.356 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:33.357 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:33.357 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:33.447 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:33.448 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:33.448 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:33.536 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:33.537 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:33.537 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:33.625 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:33.626 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 风险率:3441.727595
2022-03-17 11:11:33.627 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:33.627 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:33.716 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:33.716 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '99' LIMIT 0,1 
2022-03-17 11:11:33.717 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:11:33.804 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:11:33.805 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,保证金0.829492,浮动盈亏:-0.170100,浮动盈亏比:-20.506528
2022-03-17 11:11:33.806 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,强平价:-8448.403844
2022-03-17 11:11:33.806 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:33.806 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:33.894 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:33.895 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '100' LIMIT 0,1 
2022-03-17 11:11:33.896 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:11:33.987 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:11:33.988 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,保证金2.050860,浮动盈亏:-0.212000,浮动盈亏比:-10.337126
2022-03-17 11:11:33.989 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,强平价:21205.518463
2022-03-17 11:11:42.789 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' LIMIT 0,1000 
2022-03-17 11:11:42.790 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - ==> Parameters: 
2022-03-17 11:11:42.879 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.position - <==      Total: 2
2022-03-17 11:11:42.880 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:11:42.881 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 11:11:42.971 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 11:11:43.000 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:43.000 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:43.089 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:43.090 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:43.090 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:43.179 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:43.180 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:43.180 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:43.270 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:43.271 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:43.272 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:43.361 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:43.362 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:43.362 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:43.450 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:43.451 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:43.451 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:43.543 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:43.544 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 风险率:3441.994923
2022-03-17 11:11:43.545 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:43.546 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:43.636 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:43.637 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '99' LIMIT 0,1 
2022-03-17 11:11:43.638 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:11:43.730 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:11:43.731 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,保证金0.829492,浮动盈亏:-0.167900,浮动盈亏比:-20.241306
2022-03-17 11:11:43.732 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:99,强平价:-8451.153844
2022-03-17 11:11:43.732 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:11:43.732 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:11:43.821 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:11:43.822 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost FROM `bib_cfd`.`position` WHERE `user_id` = '51905058' AND `symbol` LIKE '%btcusdt%' AND `direction` = 'SHORT' AND `leverage` = '100' LIMIT 0,1 
2022-03-17 11:11:43.822 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - ==> Parameters: 
2022-03-17 11:11:43.921 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.samePosition - <==      Total: 0
2022-03-17 11:11:43.922 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,保证金2.050860,浮动盈亏:-0.206500,浮动盈亏比:-10.068946
2022-03-17 11:11:43.922 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 无对冲单--->用户ID:51905058,币种:btcusdt,方向:LONG,杠杆:100,强平价:21205.078463
2022-03-17 11:27:55.985 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m7s964ms).
2022-03-17 11:36:42.883 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=8m46s912ms).
2022-03-17 11:55:31.778 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38,59) 
2022-03-17 11:55:31.781 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 11:55:31.881 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 11:55:31.882 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 11:55:31.882 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 11:55:31.975 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 11:55:31.976 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:55:31.976 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 11:55:32.065 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 11:55:32.066 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:98.4940454700000000,hold:0E-16
2022-03-17 11:55:32.066 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-1.5059545300000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:98.4940454700000000,操作后，数据库存储的总金额:98.4940454700000000
2022-03-17 11:55:32.067 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:55:32.067 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:32.161 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:55:32.162 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 11:55:32.163 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:55:32.164 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 11:55:32.256 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 11:55:32.257 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:55:32.257 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 11:55:32.347 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 11:55:32.347 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:55:32.347 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 11:55:32.439 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 11:55:32.440 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:55:32.440 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 11:55:32.533 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 11:55:32.533 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:55:32.533 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 11:55:32.629 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 11:55:32.630 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 11:55:32.631 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 11:55:32.723 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 11:55:32.723 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 11:55:32.724 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 11:55:32.724 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 11:55:32.822 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 12
2022-03-17 11:55:32.822 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-0.0163989600000000, preBalance=100.0000000000000000, postBalance=99.9836010400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8795, note=单号:8795开仓手续费-0.0163989600000000, createdDate=2022-03-17 11:54:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0163991200000000, preBalance=99.9836010400000000, postBalance=99.9672019200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8796, note=单号:8796开仓手续费-0.0163991200000000, createdDate=2022-03-17 11:54:30, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0819830000000000, preBalance=99.9672019200000000, postBalance=99.8852189200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8797, note=单号:8797开仓手续费-0.0819830000000000, createdDate=2022-03-17 11:54:40, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0491930400000000, preBalance=99.8852189200000000, postBalance=99.8360258800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8798, note=单号:8798开仓手续费-0.0491930400000000, createdDate=2022-03-17 11:54:50, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.5411696400000000, preBalance=99.8360258800000000, postBalance=99.2948562400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8799, note=单号:8799开仓手续费-0.5411696400000000, createdDate=2022-03-17 11:55:00, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0983954400000000, preBalance=99.2948562400000000, postBalance=99.1964608000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8800, note=单号:8800开仓手续费-0.0983954400000000, createdDate=2022-03-17 11:55:10, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.0803999900000000, preBalance=99.1964608000000000, postBalance=98.6373278700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8801, note=单号:8801平仓收益-0.5591329300000000, createdDate=2022-03-17 11:55:11, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0040000000000000, preBalance=98.6373278700000000, postBalance=98.6005313900000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8802, note=单号:8802平仓收益-0.0367964800000000, createdDate=2022-03-17 11:55:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.0247000000000000, preBalance=98.6005313900000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8803, note=单号:8803平仓收益-0.1064859200000000, createdDate=2022-03-17 11:55:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.6395329200000000, preBalance=98.4940454700000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8801, note=单号:8801平仓手续费-0.6395329200000000, createdDate=2022-03-17 11:55:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0327964800000000, preBalance=98.4940454700000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8802, note=单号:8802平仓手续费-0.0327964800000000, createdDate=2022-03-17 11:55:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.1311859200000000, preBalance=98.4940454700000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8803, note=单号:8803平仓手续费-0.1311859200000000, createdDate=2022-03-17 11:55:20, fromUserId=0, total=null)]
2022-03-17 11:55:32.823 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 11:55:32.823 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163989600000000
2022-03-17 11:55:32.831 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8795' LIMIT 0,1000 
2022-03-17 11:55:32.831 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:32.923 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:32.924 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:32.924 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:33.014 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:33.083 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:55:33.083 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:33.177 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:33.179 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:55:33.179 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:33.270 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:33.271 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:55:33.271 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:33.363 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:33.364 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:55:33.365 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:33.454 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:33.467 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:55:33.468 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:33.556 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:55:33.557 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 11:55:33.557 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:55:33.648 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:33.649 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8795,比列:0.300000,数据库:0.00491968,计算:-0.004919
2022-03-17 11:55:33.650 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 11:55:33.650 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:55:33.741 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:33.742 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8795,比列:0.200000,数据库:0.00327979,计算:-0.003279
2022-03-17 11:55:33.743 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 11:55:33.744 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:55:33.835 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:33.835 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8795,比列:0.300000,数据库:0.00491968,计算:-0.004919
2022-03-17 11:55:33.835 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 11:55:33.836 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:55:33.930 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:33.930 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8795,比列:0.100000,数据库:0.00163989,计算:-0.001639
2022-03-17 11:55:33.931 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 11:55:33.931 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:55:34.023 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:34.023 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8795,比列:0.100000,数据库:0.00163989,计算:-0.001639
2022-03-17 11:55:34.023 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163991200000000
2022-03-17 11:55:34.024 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8796' LIMIT 0,1000 
2022-03-17 11:55:34.024 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:34.114 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:34.114 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:34.114 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:34.204 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:34.205 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:55:34.205 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:34.296 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:34.297 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:55:34.297 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:34.387 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:34.388 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:55:34.388 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:34.477 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:34.478 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:55:34.478 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:34.571 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:34.572 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:55:34.572 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:34.662 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:55:34.664 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 11:55:34.664 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:55:34.755 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:34.756 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8796,比列:0.300000,数据库:0.00491973,计算:-0.004919
2022-03-17 11:55:34.757 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 11:55:34.757 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:55:34.851 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:34.852 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8796,比列:0.200000,数据库:0.00327982,计算:-0.003279
2022-03-17 11:55:34.852 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 11:55:34.853 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:55:34.945 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:34.945 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8796,比列:0.300000,数据库:0.00491973,计算:-0.004919
2022-03-17 11:55:34.946 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 11:55:34.946 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:55:35.036 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:35.037 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8796,比列:0.100000,数据库:0.00163991,计算:-0.001639
2022-03-17 11:55:35.037 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 11:55:35.038 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:55:35.132 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:35.133 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8796,比列:0.100000,数据库:0.00163991,计算:-0.001639
2022-03-17 11:55:35.133 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0819830000000000
2022-03-17 11:55:35.133 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8797' LIMIT 0,1000 
2022-03-17 11:55:35.134 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:35.224 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:35.225 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:35.225 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:35.316 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:35.321 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:55:35.322 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:35.413 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:35.414 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:55:35.414 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:35.504 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:35.504 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:55:35.505 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:35.596 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:35.597 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:55:35.598 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:35.689 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:35.689 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:55:35.689 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:35.790 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:55:35.791 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 11:55:35.791 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:55:35.881 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:35.882 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8797,比列:0.300000,数据库:0.02459490,计算:-0.024594
2022-03-17 11:55:35.883 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 11:55:35.884 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:55:35.975 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:35.975 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8797,比列:0.200000,数据库:0.01639660,计算:-0.016396
2022-03-17 11:55:35.976 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 11:55:35.976 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:55:36.067 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:36.067 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8797,比列:0.300000,数据库:0.02459490,计算:-0.024594
2022-03-17 11:55:36.067 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 11:55:36.067 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:55:36.158 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:36.158 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8797,比列:0.100000,数据库:0.00819830,计算:-0.008198
2022-03-17 11:55:36.159 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 11:55:36.159 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:55:36.253 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:36.253 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8797,比列:0.100000,数据库:0.00819830,计算:-0.008198
2022-03-17 11:55:36.253 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0491930400000000
2022-03-17 11:55:36.254 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8798' LIMIT 0,1000 
2022-03-17 11:55:36.254 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:36.346 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:36.347 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:36.347 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:36.437 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:36.438 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:55:36.438 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:36.529 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:36.530 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:55:36.530 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:36.620 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:36.620 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:55:36.621 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:36.710 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:36.710 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:55:36.711 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:36.802 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:36.803 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:55:36.803 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:36.901 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:55:36.902 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 11:55:36.903 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:55:36.994 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:36.994 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8798,比列:0.300000,数据库:0.01475791,计算:-0.014757
2022-03-17 11:55:36.994 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 11:55:36.995 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:55:37.085 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:37.085 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8798,比列:0.200000,数据库:0.00983860,计算:-0.009838
2022-03-17 11:55:37.086 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 11:55:37.086 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:55:37.177 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:37.177 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8798,比列:0.300000,数据库:0.01475791,计算:-0.014757
2022-03-17 11:55:37.178 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 11:55:37.178 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:55:37.270 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:37.270 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8798,比列:0.100000,数据库:0.00491930,计算:-0.004919
2022-03-17 11:55:37.271 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 11:55:37.271 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:55:37.362 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:37.362 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8798,比列:0.100000,数据库:0.00491930,计算:-0.004919
2022-03-17 11:55:37.362 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5411696400000000
2022-03-17 11:55:37.363 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8799' LIMIT 0,1000 
2022-03-17 11:55:37.363 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:37.461 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:37.462 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:37.462 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:37.551 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:37.552 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:55:37.552 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:37.643 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:37.643 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:55:37.644 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:37.733 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:37.734 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:55:37.734 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:37.829 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:37.829 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:55:37.830 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:37.920 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:37.920 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:55:37.920 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:38.012 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:55:38.013 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 11:55:38.013 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:55:38.113 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:38.113 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8799,比列:0.300000,数据库:0.16235089,计算:-0.162350
2022-03-17 11:55:38.114 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 11:55:38.114 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:55:38.206 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:38.206 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8799,比列:0.200000,数据库:0.10823392,计算:-0.108233
2022-03-17 11:55:38.207 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 11:55:38.207 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:55:38.297 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:38.297 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8799,比列:0.300000,数据库:0.16235089,计算:-0.162350
2022-03-17 11:55:38.297 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 11:55:38.298 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:55:38.389 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:38.389 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8799,比列:0.100000,数据库:0.05411696,计算:-0.054116
2022-03-17 11:55:38.390 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 11:55:38.390 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:55:38.480 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:38.481 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8799,比列:0.100000,数据库:0.05411696,计算:-0.054116
2022-03-17 11:55:38.481 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0983954400000000
2022-03-17 11:55:38.482 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8800' LIMIT 0,1000 
2022-03-17 11:55:38.482 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:38.573 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:38.573 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:38.573 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:38.663 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:38.663 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:55:38.664 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:38.754 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:38.755 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:55:38.755 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:38.847 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:38.847 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:55:38.847 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:38.936 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:38.937 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:55:38.937 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:39.026 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:39.027 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:55:39.028 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:39.116 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:55:39.117 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 11:55:39.117 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:55:39.208 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:39.208 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8800,比列:0.300000,数据库:0.02951863,计算:-0.029518
2022-03-17 11:55:39.209 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 11:55:39.209 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:55:39.299 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:39.299 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8800,比列:0.200000,数据库:0.01967908,计算:-0.019679
2022-03-17 11:55:39.299 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 11:55:39.299 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:55:39.388 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:39.388 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8800,比列:0.300000,数据库:0.02951863,计算:-0.029518
2022-03-17 11:55:39.389 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 11:55:39.389 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:55:39.479 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:39.479 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8800,比列:0.100000,数据库:0.00983954,计算:-0.009839
2022-03-17 11:55:39.480 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 11:55:39.480 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:55:39.571 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:39.572 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8800,比列:0.100000,数据库:0.00983954,计算:-0.009839
2022-03-17 11:55:39.572 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.0803999900000000
2022-03-17 11:55:39.572 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8801' LIMIT 0,1000 
2022-03-17 11:55:39.572 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:39.662 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:39.662 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:39.663 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:39.752 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:39.753 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8801' LIMIT 0,1000 
2022-03-17 11:55:39.754 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:39.850 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:39.850 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:39.850 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:39.945 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:39.946 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,1 
2022-03-17 11:55:39.947 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 11:55:40.038 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 11:55:40.038 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8801,数据库:-0.08039999,计算得:0.080399
2022-03-17 11:55:40.038 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0040000000000000
2022-03-17 11:55:40.039 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8802' LIMIT 0,1000 
2022-03-17 11:55:40.039 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:40.129 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:40.129 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:40.129 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:40.220 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:40.221 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8802' LIMIT 0,1000 
2022-03-17 11:55:40.221 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:40.311 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:40.312 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:40.312 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:40.401 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:40.401 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,1 
2022-03-17 11:55:40.401 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 11:55:40.492 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 11:55:40.493 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8802,数据库:0.00400000,计算得:-0.004000
2022-03-17 11:55:40.493 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.0247000000000000
2022-03-17 11:55:40.493 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8803' LIMIT 0,1000 
2022-03-17 11:55:40.493 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:40.582 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:40.583 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:40.583 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:40.672 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:40.673 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8803' LIMIT 0,1000 
2022-03-17 11:55:40.673 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:40.768 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:40.769 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:40.769 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:40.867 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:40.868 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,1 
2022-03-17 11:55:40.869 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 11:55:40.970 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 11:55:40.971 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8803,数据库:-0.02470000,计算得:0.024700
2022-03-17 11:55:40.971 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6395329200000000
2022-03-17 11:55:40.971 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8801' LIMIT 0,1000 
2022-03-17 11:55:40.971 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:41.063 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:41.064 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:41.064 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:41.154 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:41.155 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:55:41.155 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:41.245 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:41.245 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:55:41.246 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:41.335 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:41.336 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:55:41.336 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:41.427 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:41.427 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:55:41.428 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:41.517 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:41.517 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:55:41.517 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:41.606 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:55:41.607 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 11:55:41.608 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:55:41.698 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:41.698 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8801,比列:0.300000,数据库:0.19185987,计算:-0.191859
2022-03-17 11:55:41.699 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 11:55:41.699 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:55:41.790 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:41.790 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8801,比列:0.200000,数据库:0.12790658,计算:-0.127906
2022-03-17 11:55:41.791 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 11:55:41.791 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:55:41.881 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:41.881 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8801,比列:0.300000,数据库:0.19185987,计算:-0.191859
2022-03-17 11:55:41.882 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 11:55:41.882 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:55:41.973 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:41.973 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8801,比列:0.100000,数据库:0.06395329,计算:-0.063953
2022-03-17 11:55:41.973 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 11:55:41.974 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:55:42.063 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:42.063 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8801,比列:0.100000,数据库:0.06395329,计算:-0.063953
2022-03-17 11:55:42.063 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0327964800000000
2022-03-17 11:55:42.064 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8802' LIMIT 0,1000 
2022-03-17 11:55:42.064 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:42.154 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:42.154 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:42.154 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:42.243 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:42.244 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:55:42.244 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:42.335 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:42.336 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:55:42.336 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:42.427 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:42.441 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:55:42.442 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:42.532 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:42.532 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:55:42.532 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:42.623 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:42.623 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:55:42.623 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:42.713 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:55:42.714 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 11:55:42.714 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:55:42.809 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:42.810 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8802,比列:0.300000,数据库:0.00983894,计算:-0.009838
2022-03-17 11:55:42.810 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 11:55:42.810 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:55:42.905 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:42.905 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8802,比列:0.200000,数据库:0.00655929,计算:-0.006559
2022-03-17 11:55:42.906 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 11:55:42.906 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:55:42.997 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:42.998 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8802,比列:0.300000,数据库:0.00983894,计算:-0.009838
2022-03-17 11:55:42.998 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 11:55:42.998 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:55:43.089 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:43.090 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8802,比列:0.100000,数据库:0.00327964,计算:-0.003279
2022-03-17 11:55:43.091 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 11:55:43.092 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:55:43.184 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:43.184 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8802,比列:0.100000,数据库:0.00327964,计算:-0.003279
2022-03-17 11:55:43.184 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1311859200000000
2022-03-17 11:55:43.184 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8803' LIMIT 0,1000 
2022-03-17 11:55:43.185 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:55:43.276 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:55:43.276 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:55:43.277 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:55:43.366 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:55:43.367 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:55:43.367 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:43.457 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:43.458 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:55:43.458 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:43.547 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:43.547 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:55:43.548 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:43.637 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:43.638 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:55:43.638 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:43.728 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:55:43.729 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:55:43.729 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:55:43.818 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:55:43.819 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 11:55:43.819 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:55:43.909 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:43.910 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8803,比列:0.300000,数据库:0.03935577,计算:-0.039355
2022-03-17 11:55:43.910 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 11:55:43.910 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:55:44.002 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:44.002 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8803,比列:0.200000,数据库:0.02623718,计算:-0.026237
2022-03-17 11:55:44.003 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 11:55:44.003 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:55:44.094 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:44.094 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8803,比列:0.300000,数据库:0.03935577,计算:-0.039355
2022-03-17 11:55:44.095 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 11:55:44.095 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:55:44.185 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:44.186 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8803,比列:0.100000,数据库:0.01311859,计算:-0.013118
2022-03-17 11:55:44.186 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 11:55:44.186 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:55:44.277 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:55:44.278 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8803,比列:0.100000,数据库:0.01311859,计算:-0.013118
2022-03-17 11:55:44.278 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 11:56:12.267 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38,59) 
2022-03-17 11:56:12.268 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 11:56:12.358 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 11:56:12.358 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 11:56:12.359 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 11:56:12.449 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 11:56:12.450 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:12.451 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 11:56:12.541 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 11:56:12.541 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:0E-16,hold:0E-16
2022-03-17 11:56:12.542 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-3.1532688100000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:96.8467311900000000,操作后，数据库存储的总金额:0E-16
2022-03-17 11:56:12.542 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:12.543 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:12.634 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:56:12.634 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 11:56:12.635 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:12.635 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 11:56:12.726 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 11:56:12.727 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:56:12.728 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 11:56:12.819 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 11:56:12.820 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:56:12.820 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 11:56:12.914 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 11:56:12.914 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:56:12.915 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 11:56:13.006 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 11:56:13.007 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:56:13.008 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 11:56:13.099 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 11:56:13.100 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 11:56:13.100 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 11:56:13.192 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 11:56:13.192 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 11:56:13.193 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 11:56:13.194 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 11:56:13.291 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 16
2022-03-17 11:56:13.292 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-0.0163989600000000, preBalance=100.0000000000000000, postBalance=99.9836010400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8795, note=单号:8795开仓手续费-0.0163989600000000, createdDate=2022-03-17 11:54:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0163991200000000, preBalance=99.9836010400000000, postBalance=99.9672019200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8796, note=单号:8796开仓手续费-0.0163991200000000, createdDate=2022-03-17 11:54:30, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0819830000000000, preBalance=99.9672019200000000, postBalance=99.8852189200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8797, note=单号:8797开仓手续费-0.0819830000000000, createdDate=2022-03-17 11:54:40, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0491930400000000, preBalance=99.8852189200000000, postBalance=99.8360258800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8798, note=单号:8798开仓手续费-0.0491930400000000, createdDate=2022-03-17 11:54:50, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.5411696400000000, preBalance=99.8360258800000000, postBalance=99.2948562400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8799, note=单号:8799开仓手续费-0.5411696400000000, createdDate=2022-03-17 11:55:00, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0983954400000000, preBalance=99.2948562400000000, postBalance=99.1964608000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8800, note=单号:8800开仓手续费-0.0983954400000000, createdDate=2022-03-17 11:55:10, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.0803999900000000, preBalance=99.1964608000000000, postBalance=98.6373278700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8801, note=单号:8801平仓收益-0.5591329300000000, createdDate=2022-03-17 11:55:11, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0040000000000000, preBalance=98.6373278700000000, postBalance=98.6005313900000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8802, note=单号:8802平仓收益-0.0367964800000000, createdDate=2022-03-17 11:55:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.0247000000000000, preBalance=98.6005313900000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8803, note=单号:8803平仓收益-0.1064859200000000, createdDate=2022-03-17 11:55:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.6395329200000000, preBalance=98.4940454700000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8801, note=单号:8801平仓手续费-0.6395329200000000, createdDate=2022-03-17 11:55:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0327964800000000, preBalance=98.4940454700000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8802, note=单号:8802平仓手续费-0.0327964800000000, createdDate=2022-03-17 11:55:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.1311859200000000, preBalance=98.4940454700000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8803, note=单号:8803平仓手续费-0.1311859200000000, createdDate=2022-03-17 11:55:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8364020400000000, preBalance=98.4940454700000000, postBalance=97.6576434300000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8804, note=单号:8804开仓手续费-0.8364020400000000, createdDate=2022-03-17 11:56:00, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.0255000000000000, preBalance=97.6576434300000000, postBalance=96.8467311900000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8805, note=单号:8805平仓收益-0.8109122400000000, createdDate=2022-03-17 11:56:04, fromUserId=0, total=null), UserBillChain(userId=51905058, type=59, size=-96.8467311900000000, preBalance=96.8467311900000000, postBalance=0E-16, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=0, parentId=0, sourceId=8805, note=订单:8805爆仓剩余返还给默认合伙人,amount:-96.8467311900000000, createdDate=2022-03-17 11:56:05, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8364122400000000, preBalance=0E-16, postBalance=0E-16, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8805, note=单号:8805平仓手续费-0.8364122400000000, createdDate=2022-03-17 11:56:10, fromUserId=0, total=null)]
2022-03-17 11:56:13.292 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 11:56:13.292 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163989600000000
2022-03-17 11:56:13.293 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8795' LIMIT 0,1000 
2022-03-17 11:56:13.293 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:13.390 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:13.391 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:13.391 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:13.481 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:13.482 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:56:13.482 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:13.574 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:13.574 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:56:13.575 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:13.668 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:13.669 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:56:13.670 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:13.760 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:13.761 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:56:13.762 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:13.854 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:13.855 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:13.855 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:13.945 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:56:13.947 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 11:56:13.947 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:56:14.038 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:14.039 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8795,比列:0.300000,数据库:0.00491968,计算:-0.004919
2022-03-17 11:56:14.039 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 11:56:14.040 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:56:14.131 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:14.131 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8795,比列:0.200000,数据库:0.00327979,计算:-0.003279
2022-03-17 11:56:14.132 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 11:56:14.133 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:56:14.225 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:14.225 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8795,比列:0.300000,数据库:0.00491968,计算:-0.004919
2022-03-17 11:56:14.226 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 11:56:14.227 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:56:14.317 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:14.318 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8795,比列:0.100000,数据库:0.00163989,计算:-0.001639
2022-03-17 11:56:14.319 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 11:56:14.319 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:56:14.412 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:14.412 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8795,比列:0.100000,数据库:0.00163989,计算:-0.001639
2022-03-17 11:56:14.413 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163991200000000
2022-03-17 11:56:14.414 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8796' LIMIT 0,1000 
2022-03-17 11:56:14.414 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:14.508 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:14.508 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:14.508 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:14.599 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:14.600 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:56:14.600 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:14.690 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:14.691 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:56:14.692 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:14.781 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:14.782 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:56:14.782 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:14.877 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:14.878 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:56:14.879 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:14.969 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:14.969 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:14.970 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:15.059 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:56:15.060 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 11:56:15.061 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:56:15.152 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:15.153 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8796,比列:0.300000,数据库:0.00491973,计算:-0.004919
2022-03-17 11:56:15.153 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 11:56:15.154 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:56:15.246 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:15.246 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8796,比列:0.200000,数据库:0.00327982,计算:-0.003279
2022-03-17 11:56:15.248 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 11:56:15.248 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:56:15.340 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:15.340 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8796,比列:0.300000,数据库:0.00491973,计算:-0.004919
2022-03-17 11:56:15.341 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 11:56:15.341 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:56:15.432 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:15.433 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8796,比列:0.100000,数据库:0.00163991,计算:-0.001639
2022-03-17 11:56:15.433 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 11:56:15.434 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:56:15.525 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:15.526 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8796,比列:0.100000,数据库:0.00163991,计算:-0.001639
2022-03-17 11:56:15.526 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0819830000000000
2022-03-17 11:56:15.527 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8797' LIMIT 0,1000 
2022-03-17 11:56:15.528 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:15.618 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:15.619 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:15.619 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:15.710 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:15.712 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:56:15.713 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:15.815 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:15.817 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:56:15.817 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:15.909 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:15.910 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:56:15.910 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:16.000 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:16.000 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:56:16.000 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:16.095 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:16.096 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:16.096 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:16.189 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:56:16.190 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 11:56:16.191 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:56:16.282 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:16.283 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8797,比列:0.300000,数据库:0.02459490,计算:-0.024594
2022-03-17 11:56:16.284 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 11:56:16.285 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:56:16.376 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:16.377 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8797,比列:0.200000,数据库:0.01639660,计算:-0.016396
2022-03-17 11:56:16.378 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 11:56:16.378 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:56:16.469 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:16.469 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8797,比列:0.300000,数据库:0.02459490,计算:-0.024594
2022-03-17 11:56:16.470 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 11:56:16.470 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:56:16.560 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:16.561 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8797,比列:0.100000,数据库:0.00819830,计算:-0.008198
2022-03-17 11:56:16.562 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 11:56:16.562 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:56:16.652 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:16.653 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8797,比列:0.100000,数据库:0.00819830,计算:-0.008198
2022-03-17 11:56:16.653 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0491930400000000
2022-03-17 11:56:16.654 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8798' LIMIT 0,1000 
2022-03-17 11:56:16.654 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:16.745 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:16.746 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:16.746 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:16.839 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:16.839 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:56:16.839 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:16.929 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:16.929 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:56:16.929 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:17.027 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:17.027 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:56:17.028 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:17.121 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:17.122 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:56:17.122 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:17.213 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:17.213 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:17.213 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:17.306 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:56:17.307 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 11:56:17.308 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:56:17.398 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:17.398 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8798,比列:0.300000,数据库:0.01475791,计算:-0.014757
2022-03-17 11:56:17.399 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 11:56:17.399 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:56:17.492 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:17.492 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8798,比列:0.200000,数据库:0.00983860,计算:-0.009838
2022-03-17 11:56:17.493 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 11:56:17.494 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:56:17.587 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:17.587 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8798,比列:0.300000,数据库:0.01475791,计算:-0.014757
2022-03-17 11:56:17.588 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 11:56:17.589 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:56:17.680 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:17.680 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8798,比列:0.100000,数据库:0.00491930,计算:-0.004919
2022-03-17 11:56:17.681 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 11:56:17.682 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:56:17.773 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:17.774 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8798,比列:0.100000,数据库:0.00491930,计算:-0.004919
2022-03-17 11:56:17.774 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5411696400000000
2022-03-17 11:56:17.775 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8799' LIMIT 0,1000 
2022-03-17 11:56:17.775 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:17.867 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:17.868 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:17.868 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:17.960 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:17.962 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:56:17.962 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:18.052 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:18.053 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:56:18.054 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:18.146 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:18.147 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:56:18.148 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:18.241 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:18.242 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:56:18.243 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:18.333 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:18.334 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:18.334 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:18.424 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:56:18.424 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 11:56:18.425 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:56:18.516 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:18.517 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8799,比列:0.300000,数据库:0.16235089,计算:-0.162350
2022-03-17 11:56:18.518 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 11:56:18.518 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:56:18.611 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:18.611 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8799,比列:0.200000,数据库:0.10823392,计算:-0.108233
2022-03-17 11:56:18.613 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 11:56:18.613 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:56:18.704 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:18.705 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8799,比列:0.300000,数据库:0.16235089,计算:-0.162350
2022-03-17 11:56:18.706 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 11:56:18.706 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:56:18.798 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:18.799 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8799,比列:0.100000,数据库:0.05411696,计算:-0.054116
2022-03-17 11:56:18.800 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 11:56:18.800 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:56:18.899 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:18.899 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8799,比列:0.100000,数据库:0.05411696,计算:-0.054116
2022-03-17 11:56:18.900 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0983954400000000
2022-03-17 11:56:18.901 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8800' LIMIT 0,1000 
2022-03-17 11:56:18.901 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:18.992 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:18.992 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:18.992 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:19.082 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:19.083 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:56:19.084 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:19.178 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:19.193 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:56:19.193 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:19.284 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:19.285 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:56:19.286 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:19.377 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:19.378 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:56:19.378 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:19.474 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:19.475 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:19.475 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:19.568 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:56:19.569 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 11:56:19.570 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:56:19.662 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:19.662 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8800,比列:0.300000,数据库:0.02951863,计算:-0.029518
2022-03-17 11:56:19.663 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 11:56:19.663 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:56:19.754 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:19.754 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8800,比列:0.200000,数据库:0.01967908,计算:-0.019679
2022-03-17 11:56:19.755 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 11:56:19.756 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:56:19.847 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:19.848 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8800,比列:0.300000,数据库:0.02951863,计算:-0.029518
2022-03-17 11:56:19.849 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 11:56:19.849 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:56:19.941 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:19.942 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8800,比列:0.100000,数据库:0.00983954,计算:-0.009839
2022-03-17 11:56:19.943 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 11:56:19.944 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:56:20.035 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:20.036 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8800,比列:0.100000,数据库:0.00983954,计算:-0.009839
2022-03-17 11:56:20.036 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.0803999900000000
2022-03-17 11:56:20.037 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8801' LIMIT 0,1000 
2022-03-17 11:56:20.037 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:20.128 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:20.129 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:20.130 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:20.220 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:20.221 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8801' LIMIT 0,1000 
2022-03-17 11:56:20.221 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:20.312 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:20.313 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:20.313 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:20.404 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:20.405 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,1 
2022-03-17 11:56:20.406 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 11:56:20.497 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 11:56:20.497 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8801,数据库:-0.08039999,计算得:0.080399
2022-03-17 11:56:20.498 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0040000000000000
2022-03-17 11:56:20.499 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8802' LIMIT 0,1000 
2022-03-17 11:56:20.499 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:20.589 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:20.589 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:20.590 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:20.684 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:20.685 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8802' LIMIT 0,1000 
2022-03-17 11:56:20.686 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:20.781 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:20.781 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:20.782 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:20.873 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:20.875 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,1 
2022-03-17 11:56:20.875 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 11:56:20.968 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 11:56:20.968 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8802,数据库:0.00400000,计算得:-0.004000
2022-03-17 11:56:20.969 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.0247000000000000
2022-03-17 11:56:20.970 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8803' LIMIT 0,1000 
2022-03-17 11:56:20.970 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:21.066 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:21.067 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:21.068 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:21.158 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:21.159 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8803' LIMIT 0,1000 
2022-03-17 11:56:21.159 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:21.255 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:21.255 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:21.256 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:21.362 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:21.363 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,1 
2022-03-17 11:56:21.364 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 11:56:21.455 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 11:56:21.455 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8803,数据库:-0.02470000,计算得:0.024700
2022-03-17 11:56:21.455 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6395329200000000
2022-03-17 11:56:21.456 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8801' LIMIT 0,1000 
2022-03-17 11:56:21.457 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:22.029 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:22.030 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:22.030 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:22.120 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:22.121 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:56:22.121 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:22.212 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:22.213 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:56:22.213 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:22.304 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:22.305 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:56:22.305 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:22.397 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:22.398 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:56:22.398 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:22.489 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:22.490 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:22.490 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:22.581 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:56:22.582 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 11:56:22.583 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:56:22.677 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:22.678 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8801,比列:0.300000,数据库:0.19185987,计算:-0.191859
2022-03-17 11:56:22.679 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 11:56:22.679 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:56:22.771 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:22.772 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8801,比列:0.200000,数据库:0.12790658,计算:-0.127906
2022-03-17 11:56:22.773 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 11:56:22.773 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:56:22.868 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:22.869 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8801,比列:0.300000,数据库:0.19185987,计算:-0.191859
2022-03-17 11:56:22.870 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 11:56:22.870 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:56:22.963 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:22.963 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8801,比列:0.100000,数据库:0.06395329,计算:-0.063953
2022-03-17 11:56:22.964 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 11:56:22.965 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:56:23.057 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:23.057 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8801,比列:0.100000,数据库:0.06395329,计算:-0.063953
2022-03-17 11:56:23.058 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0327964800000000
2022-03-17 11:56:23.059 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8802' LIMIT 0,1000 
2022-03-17 11:56:23.059 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:23.151 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:23.152 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:23.152 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:23.242 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:23.243 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:56:23.244 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:23.334 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:23.335 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:56:23.335 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:23.425 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:23.425 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:56:23.426 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:23.516 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:23.517 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:56:23.517 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:23.610 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:23.610 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:23.611 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:23.701 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:56:23.702 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 11:56:23.702 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:56:23.794 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:23.794 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8802,比列:0.300000,数据库:0.00983894,计算:-0.009838
2022-03-17 11:56:23.795 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 11:56:23.795 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:56:23.893 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:23.893 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8802,比列:0.200000,数据库:0.00655929,计算:-0.006559
2022-03-17 11:56:23.895 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 11:56:23.895 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:56:23.993 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:23.993 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8802,比列:0.300000,数据库:0.00983894,计算:-0.009838
2022-03-17 11:56:23.995 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 11:56:23.995 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:56:24.085 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:24.086 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8802,比列:0.100000,数据库:0.00327964,计算:-0.003279
2022-03-17 11:56:24.087 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 11:56:24.088 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:56:24.180 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:24.181 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8802,比列:0.100000,数据库:0.00327964,计算:-0.003279
2022-03-17 11:56:24.181 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1311859200000000
2022-03-17 11:56:24.182 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8803' LIMIT 0,1000 
2022-03-17 11:56:24.183 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:24.274 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:24.274 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:24.275 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:24.364 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:24.365 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:56:24.366 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:24.456 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:24.457 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:56:24.457 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:24.547 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:24.548 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:56:24.548 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:24.640 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:24.640 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:56:24.641 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:24.732 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:24.733 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:24.733 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:24.824 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:56:24.825 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 11:56:24.826 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:56:24.917 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:24.917 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8803,比列:0.300000,数据库:0.03935577,计算:-0.039355
2022-03-17 11:56:24.918 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 11:56:24.919 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:56:25.022 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:25.022 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8803,比列:0.200000,数据库:0.02623718,计算:-0.026237
2022-03-17 11:56:25.023 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 11:56:25.024 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:56:25.114 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:25.115 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8803,比列:0.300000,数据库:0.03935577,计算:-0.039355
2022-03-17 11:56:25.116 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 11:56:25.116 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:56:25.207 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:25.208 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8803,比列:0.100000,数据库:0.01311859,计算:-0.013118
2022-03-17 11:56:25.209 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 11:56:25.210 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:56:25.302 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:25.302 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8803,比列:0.100000,数据库:0.01311859,计算:-0.013118
2022-03-17 11:56:25.303 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8364020400000000
2022-03-17 11:56:25.303 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8804' LIMIT 0,1000 
2022-03-17 11:56:25.304 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:25.396 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:25.396 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:25.397 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:25.489 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:25.489 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:56:25.490 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:25.580 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:25.581 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:56:25.581 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:25.672 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:25.673 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:56:25.673 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:25.766 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:25.767 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:56:25.768 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:25.858 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:25.858 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:25.858 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:25.950 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:56:25.951 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 11:56:25.951 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:56:26.043 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:26.043 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8804,比列:0.300000,数据库:0.25092061,计算:-0.250920
2022-03-17 11:56:26.045 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 11:56:26.045 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:56:26.136 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:26.137 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8804,比列:0.200000,数据库:0.16728040,计算:-0.167280
2022-03-17 11:56:26.137 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 11:56:26.138 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:56:26.231 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:26.231 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8804,比列:0.300000,数据库:0.25092061,计算:-0.250920
2022-03-17 11:56:26.232 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 11:56:26.232 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:56:26.324 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:26.324 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8804,比列:0.100000,数据库:0.08364020,计算:-0.083640
2022-03-17 11:56:26.325 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 11:56:26.326 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:56:26.418 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:26.419 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8804,比列:0.100000,数据库:0.08364020,计算:-0.083640
2022-03-17 11:56:26.419 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.0255000000000000
2022-03-17 11:56:26.420 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8805' LIMIT 0,1000 
2022-03-17 11:56:26.420 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:26.510 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:26.511 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:26.511 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:26.602 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:26.603 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8805' LIMIT 0,1000 
2022-03-17 11:56:26.604 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:26.695 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:26.695 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:26.696 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:26.786 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:26.787 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,1 
2022-03-17 11:56:26.788 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 11:56:26.883 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 11:56:26.883 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8805,数据库:-0.02550000,计算得:0.025500
2022-03-17 11:56:26.884 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 爆仓剩余金额，返回给默认合伙人:-96.8467311900000000
2022-03-17 11:56:26.885 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,1 
2022-03-17 11:56:26.885 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 59(Integer)
2022-03-17 11:56:26.979 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 11:56:26.979 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 爆仓剩余金额，返回给默认合伙人--->用户:51905058,类型:59,爆仓剩余金额:-96.8467311900000000,返还金额:96.8467311900000000
2022-03-17 11:56:26.980 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8364122400000000
2022-03-17 11:56:26.981 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8805' LIMIT 0,1000 
2022-03-17 11:56:26.981 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 11:56:27.073 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 11:56:27.074 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 11:56:27.075 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 11:56:27.165 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 11:56:27.166 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 11:56:27.167 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:27.258 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:27.258 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 11:56:27.258 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:27.348 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:27.349 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 11:56:27.349 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:27.440 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:27.442 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 11:56:27.462 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:27.556 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 11:56:27.557 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 11:56:27.557 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 11:56:27.652 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 11:56:27.653 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 11:56:27.654 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 11:56:27.748 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:27.748 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8805,比列:0.300000,数据库:0.25092367,计算:-0.250923
2022-03-17 11:56:27.749 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 11:56:27.750 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 11:56:27.842 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:27.842 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8805,比列:0.200000,数据库:0.16728244,计算:-0.167282
2022-03-17 11:56:27.844 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 11:56:27.844 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 11:56:27.937 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:27.938 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8805,比列:0.300000,数据库:0.25092367,计算:-0.250923
2022-03-17 11:56:27.939 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 11:56:27.939 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 11:56:28.040 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:28.040 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8805,比列:0.100000,数据库:0.08364122,计算:-0.083641
2022-03-17 11:56:28.041 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 11:56:28.041 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 11:56:28.143 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 11:56:28.143 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8805,比列:0.100000,数据库:0.08364122,计算:-0.083641
2022-03-17 11:56:28.144 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 12:11:06.999 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m53s908ms).
2022-03-17 12:20:24.504 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=8m47s497ms).
2022-03-17 12:29:11.091 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=8m46s586ms).
2022-03-17 12:38:27.601 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=8m46s500ms).
2022-03-17 12:43:51.929 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m54s322ms).
2022-03-17 12:47:07.987 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 12:47:07.992 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 12:51:36.021 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5002 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 12:51:41.031 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 24745 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 12:51:41.032 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 12:51:41.863 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 12:51:41.865 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 12:51:41.883 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 12:51:41.888 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 12:51:41.889 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 12:51:41.896 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 12:51:41.906 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 12:51:41.907 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 12:51:41.922 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-03-17 12:51:42.564 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 12:51:42.576 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 12:51:42.577 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 12:51:42.577 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 12:51:42.708 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 12:51:42.708 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1617 ms
2022-03-17 12:51:43.826 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 12:51:44.547 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 12:51:44.548 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 12:51:44.549 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 12:51:44.768 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 12:51:44.785 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 12:51:44.796 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.311 seconds (JVM running for 24.811)
2022-03-17 12:51:51.401 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 12:51:51.402 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 12:51:51.403 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 12:51:51.807 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 12:51:52.879 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 12:51:52.891 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38,59) 
2022-03-17 12:51:52.922 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 12:51:53.039 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 12:51:53.045 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 12:51:53.045 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 12:51:53.127 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 12:51:53.128 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:51:53.129 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 12:51:53.212 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 12:51:53.212 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:0E-16,hold:0E-16
2022-03-17 12:51:53.213 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-3.1532688100000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:96.8467311900000000,操作后，数据库存储的总金额:0E-16
2022-03-17 12:51:53.216 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:51:53.216 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:53.294 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 12:51:53.295 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 12:51:53.296 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:51:53.296 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 12:51:53.379 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 12:51:53.380 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 12:51:53.381 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 12:51:53.460 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 12:51:53.461 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 12:51:53.461 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 12:51:53.545 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 12:51:53.546 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 12:51:53.546 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 12:51:53.626 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 12:51:53.627 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 12:51:53.627 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 12:51:53.714 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 12:51:53.715 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 12:51:53.716 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 12:51:53.796 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 12:51:53.796 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 12:51:53.799 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 12:51:53.799 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 12:51:53.895 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 16
2022-03-17 12:51:53.896 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-0.0163989600000000, preBalance=100.0000000000000000, postBalance=99.9836010400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8795, note=单号:8795开仓手续费-0.0163989600000000, createdDate=2022-03-17 11:54:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0163991200000000, preBalance=99.9836010400000000, postBalance=99.9672019200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8796, note=单号:8796开仓手续费-0.0163991200000000, createdDate=2022-03-17 11:54:30, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0819830000000000, preBalance=99.9672019200000000, postBalance=99.8852189200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8797, note=单号:8797开仓手续费-0.0819830000000000, createdDate=2022-03-17 11:54:40, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0491930400000000, preBalance=99.8852189200000000, postBalance=99.8360258800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8798, note=单号:8798开仓手续费-0.0491930400000000, createdDate=2022-03-17 11:54:50, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.5411696400000000, preBalance=99.8360258800000000, postBalance=99.2948562400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8799, note=单号:8799开仓手续费-0.5411696400000000, createdDate=2022-03-17 11:55:00, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0983954400000000, preBalance=99.2948562400000000, postBalance=99.1964608000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8800, note=单号:8800开仓手续费-0.0983954400000000, createdDate=2022-03-17 11:55:10, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.0803999900000000, preBalance=99.1964608000000000, postBalance=98.6373278700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8801, note=单号:8801平仓收益-0.5591329300000000, createdDate=2022-03-17 11:55:11, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0040000000000000, preBalance=98.6373278700000000, postBalance=98.6005313900000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8802, note=单号:8802平仓收益-0.0367964800000000, createdDate=2022-03-17 11:55:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.0247000000000000, preBalance=98.6005313900000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8803, note=单号:8803平仓收益-0.1064859200000000, createdDate=2022-03-17 11:55:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.6395329200000000, preBalance=98.4940454700000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8801, note=单号:8801平仓手续费-0.6395329200000000, createdDate=2022-03-17 11:55:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0327964800000000, preBalance=98.4940454700000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8802, note=单号:8802平仓手续费-0.0327964800000000, createdDate=2022-03-17 11:55:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.1311859200000000, preBalance=98.4940454700000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8803, note=单号:8803平仓手续费-0.1311859200000000, createdDate=2022-03-17 11:55:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8364020400000000, preBalance=98.4940454700000000, postBalance=97.6576434300000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8804, note=单号:8804开仓手续费-0.8364020400000000, createdDate=2022-03-17 11:56:00, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.0255000000000000, preBalance=97.6576434300000000, postBalance=96.8467311900000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8805, note=单号:8805平仓收益-0.8109122400000000, createdDate=2022-03-17 11:56:04, fromUserId=0, total=null), UserBillChain(userId=51905058, type=59, size=-96.8467311900000000, preBalance=96.8467311900000000, postBalance=0E-16, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=0, parentId=0, sourceId=8805, note=订单:8805爆仓剩余返还给默认合伙人,amount:-96.8467311900000000, createdDate=2022-03-17 11:56:05, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8364122400000000, preBalance=0E-16, postBalance=0E-16, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8805, note=单号:8805平仓手续费-0.8364122400000000, createdDate=2022-03-17 11:56:10, fromUserId=0, total=null)]
2022-03-17 12:51:53.897 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 12:51:53.897 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163989600000000
2022-03-17 12:51:53.904 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8795' LIMIT 0,1000 
2022-03-17 12:51:53.905 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:51:53.986 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:51:53.987 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:51:53.987 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:51:54.067 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:51:54.130 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 12:51:54.130 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:54.211 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:54.212 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 12:51:54.213 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:54.292 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:54.294 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 12:51:54.295 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:54.377 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:54.380 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 12:51:54.381 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:54.468 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:54.470 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:51:54.470 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:54.552 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 12:51:54.554 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 12:51:54.555 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 12:51:54.636 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:54.637 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8795,比列:0.300000,数据库:0.00491968,计算:-0.004919
2022-03-17 12:51:54.638 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 12:51:54.638 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 12:51:54.718 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:54.719 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8795,比列:0.200000,数据库:0.00327979,计算:-0.003279
2022-03-17 12:51:54.720 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 12:51:54.721 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 12:51:54.802 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:54.803 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8795,比列:0.300000,数据库:0.00491968,计算:-0.004919
2022-03-17 12:51:54.804 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 12:51:54.804 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 12:51:54.885 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:54.886 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8795,比列:0.100000,数据库:0.00163989,计算:-0.001639
2022-03-17 12:51:54.887 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 12:51:54.888 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 12:51:54.967 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:54.968 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8795,比列:0.100000,数据库:0.00163989,计算:-0.001639
2022-03-17 12:51:54.968 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163991200000000
2022-03-17 12:51:54.969 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8796' LIMIT 0,1000 
2022-03-17 12:51:54.969 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:51:55.056 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:51:55.057 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:51:55.058 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:51:55.137 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:51:55.139 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 12:51:55.139 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:55.218 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:55.219 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 12:51:55.219 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:55.298 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:55.299 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 12:51:55.299 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:55.378 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:55.379 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 12:51:55.380 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:55.460 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:55.461 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:51:55.461 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:55.540 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 12:51:55.542 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 12:51:55.543 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 12:51:55.625 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:55.626 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8796,比列:0.300000,数据库:0.00491973,计算:-0.004919
2022-03-17 12:51:55.627 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 12:51:55.628 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 12:51:55.708 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:55.709 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8796,比列:0.200000,数据库:0.00327982,计算:-0.003279
2022-03-17 12:51:55.710 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 12:51:55.711 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 12:51:55.791 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:55.792 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8796,比列:0.300000,数据库:0.00491973,计算:-0.004919
2022-03-17 12:51:55.793 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 12:51:55.794 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 12:51:55.873 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:55.874 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8796,比列:0.100000,数据库:0.00163991,计算:-0.001639
2022-03-17 12:51:55.875 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 12:51:55.875 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 12:51:55.954 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:55.954 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8796,比列:0.100000,数据库:0.00163991,计算:-0.001639
2022-03-17 12:51:55.954 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0819830000000000
2022-03-17 12:51:55.955 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8797' LIMIT 0,1000 
2022-03-17 12:51:55.955 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:51:56.036 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:51:56.037 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:51:56.038 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:51:56.121 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:51:56.121 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 12:51:56.122 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:56.199 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:56.200 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 12:51:56.201 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:56.278 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:56.279 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 12:51:56.280 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:56.358 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:56.360 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 12:51:56.360 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:56.437 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:56.438 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:51:56.438 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:56.519 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 12:51:56.520 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 12:51:56.520 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 12:51:56.599 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:56.600 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8797,比列:0.300000,数据库:0.02459490,计算:-0.024594
2022-03-17 12:51:56.601 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 12:51:56.601 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 12:51:56.684 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:56.685 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8797,比列:0.200000,数据库:0.01639660,计算:-0.016396
2022-03-17 12:51:56.686 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 12:51:56.686 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 12:51:56.767 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:56.768 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8797,比列:0.300000,数据库:0.02459490,计算:-0.024594
2022-03-17 12:51:56.769 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 12:51:56.769 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 12:51:56.849 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:56.849 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8797,比列:0.100000,数据库:0.00819830,计算:-0.008198
2022-03-17 12:51:56.850 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 12:51:56.851 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 12:51:56.931 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:56.931 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8797,比列:0.100000,数据库:0.00819830,计算:-0.008198
2022-03-17 12:51:56.932 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0491930400000000
2022-03-17 12:51:56.933 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8798' LIMIT 0,1000 
2022-03-17 12:51:56.933 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:51:57.019 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:51:57.020 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:51:57.021 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:51:57.109 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:51:57.110 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 12:51:57.111 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:57.196 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:57.197 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 12:51:57.197 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:57.276 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:57.277 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 12:51:57.277 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:57.357 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:57.357 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 12:51:57.358 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:57.439 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:57.440 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:51:57.440 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:57.525 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 12:51:57.527 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 12:51:57.528 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 12:51:57.608 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:57.609 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8798,比列:0.300000,数据库:0.01475791,计算:-0.014757
2022-03-17 12:51:57.610 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 12:51:57.611 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 12:51:57.692 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:57.693 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8798,比列:0.200000,数据库:0.00983860,计算:-0.009838
2022-03-17 12:51:57.694 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 12:51:57.696 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 12:51:57.777 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:57.777 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8798,比列:0.300000,数据库:0.01475791,计算:-0.014757
2022-03-17 12:51:57.778 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 12:51:57.779 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 12:51:57.860 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:57.860 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8798,比列:0.100000,数据库:0.00491930,计算:-0.004919
2022-03-17 12:51:57.861 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 12:51:57.862 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 12:51:57.942 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:57.943 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8798,比列:0.100000,数据库:0.00491930,计算:-0.004919
2022-03-17 12:51:57.943 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5411696400000000
2022-03-17 12:51:57.944 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8799' LIMIT 0,1000 
2022-03-17 12:51:57.945 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:51:58.027 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:51:58.028 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:51:58.029 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:51:58.107 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:51:58.107 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 12:51:58.108 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:58.466 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:58.467 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 12:51:58.467 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:58.546 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:58.547 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 12:51:58.547 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:58.628 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:58.629 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 12:51:58.630 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:58.708 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:58.709 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:51:58.709 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:58.789 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 12:51:58.790 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 12:51:58.791 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 12:51:58.869 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:58.870 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8799,比列:0.300000,数据库:0.16235089,计算:-0.162350
2022-03-17 12:51:58.870 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 12:51:58.871 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 12:51:58.958 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:58.959 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8799,比列:0.200000,数据库:0.10823392,计算:-0.108233
2022-03-17 12:51:58.959 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 12:51:58.960 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 12:51:59.043 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:59.044 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8799,比列:0.300000,数据库:0.16235089,计算:-0.162350
2022-03-17 12:51:59.045 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 12:51:59.046 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 12:51:59.134 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:59.135 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8799,比列:0.100000,数据库:0.05411696,计算:-0.054116
2022-03-17 12:51:59.135 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 12:51:59.136 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 12:51:59.224 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:59.225 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8799,比列:0.100000,数据库:0.05411696,计算:-0.054116
2022-03-17 12:51:59.225 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0983954400000000
2022-03-17 12:51:59.225 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8800' LIMIT 0,1000 
2022-03-17 12:51:59.226 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:51:59.308 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:51:59.309 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:51:59.309 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:51:59.388 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:51:59.389 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 12:51:59.390 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:59.467 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:59.467 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 12:51:59.468 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:59.547 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:59.548 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 12:51:59.548 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:59.626 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:59.627 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 12:51:59.627 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:59.705 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:51:59.706 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:51:59.706 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:51:59.788 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 12:51:59.790 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 12:51:59.791 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 12:51:59.871 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:59.872 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8800,比列:0.300000,数据库:0.02951863,计算:-0.029518
2022-03-17 12:51:59.872 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 12:51:59.873 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 12:51:59.951 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:51:59.951 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8800,比列:0.200000,数据库:0.01967908,计算:-0.019679
2022-03-17 12:51:59.952 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 12:51:59.952 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 12:52:00.032 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:00.033 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8800,比列:0.300000,数据库:0.02951863,计算:-0.029518
2022-03-17 12:52:00.034 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 12:52:00.034 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 12:52:00.112 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:00.113 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8800,比列:0.100000,数据库:0.00983954,计算:-0.009839
2022-03-17 12:52:00.113 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 12:52:00.113 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 12:52:00.191 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:00.192 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8800,比列:0.100000,数据库:0.00983954,计算:-0.009839
2022-03-17 12:52:00.192 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.0803999900000000
2022-03-17 12:52:00.193 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8801' LIMIT 0,1000 
2022-03-17 12:52:00.193 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:00.271 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:00.272 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:00.272 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:00.350 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:00.352 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8801' LIMIT 0,1000 
2022-03-17 12:52:00.352 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:00.431 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:00.432 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:00.433 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:00.510 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:00.512 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,1 
2022-03-17 12:52:00.513 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 12:52:00.592 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 12:52:00.592 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8801,数据库:-0.08039999,计算得:0.080399
2022-03-17 12:52:00.593 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0040000000000000
2022-03-17 12:52:00.594 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8802' LIMIT 0,1000 
2022-03-17 12:52:00.595 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:00.673 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:00.674 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:00.674 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:00.752 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:00.753 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8802' LIMIT 0,1000 
2022-03-17 12:52:00.753 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:00.831 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:00.832 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:00.833 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:00.913 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:00.915 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,1 
2022-03-17 12:52:00.915 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 12:52:00.994 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 12:52:00.995 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8802,数据库:0.00400000,计算得:-0.004000
2022-03-17 12:52:00.995 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.0247000000000000
2022-03-17 12:52:00.995 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8803' LIMIT 0,1000 
2022-03-17 12:52:00.996 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:01.078 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:01.079 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:01.079 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:01.157 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:01.158 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8803' LIMIT 0,1000 
2022-03-17 12:52:01.159 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:01.238 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:01.238 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:01.239 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:01.324 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:01.325 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,1 
2022-03-17 12:52:01.326 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 12:52:01.407 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 12:52:01.408 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8803,数据库:-0.02470000,计算得:0.024700
2022-03-17 12:52:01.408 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6395329200000000
2022-03-17 12:52:01.409 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8801' LIMIT 0,1000 
2022-03-17 12:52:01.409 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:01.488 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:01.489 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:01.489 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:01.566 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:01.567 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 12:52:01.567 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:01.646 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:01.646 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 12:52:01.647 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:01.725 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:01.726 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 12:52:01.726 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:01.805 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:01.805 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 12:52:01.806 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:01.883 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:01.884 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:52:01.885 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:01.962 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 12:52:01.963 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 12:52:01.964 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 12:52:02.051 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:02.052 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8801,比列:0.300000,数据库:0.19185987,计算:-0.191859
2022-03-17 12:52:02.052 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 12:52:02.053 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 12:52:02.133 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:02.134 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8801,比列:0.200000,数据库:0.12790658,计算:-0.127906
2022-03-17 12:52:02.134 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 12:52:02.135 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 12:52:02.213 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:02.213 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8801,比列:0.300000,数据库:0.19185987,计算:-0.191859
2022-03-17 12:52:02.214 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 12:52:02.215 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 12:52:02.298 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:02.298 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8801,比列:0.100000,数据库:0.06395329,计算:-0.063953
2022-03-17 12:52:02.299 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 12:52:02.299 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 12:52:02.377 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:02.378 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8801,比列:0.100000,数据库:0.06395329,计算:-0.063953
2022-03-17 12:52:02.378 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0327964800000000
2022-03-17 12:52:02.378 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8802' LIMIT 0,1000 
2022-03-17 12:52:02.379 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:02.457 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:02.458 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:02.458 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:02.535 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:02.536 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 12:52:02.536 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:02.615 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:02.615 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 12:52:02.616 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:02.694 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:02.695 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 12:52:02.695 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:02.773 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:02.773 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 12:52:02.773 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:02.851 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:02.852 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:52:02.852 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:02.930 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 12:52:02.932 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 12:52:02.932 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 12:52:03.014 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:03.015 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8802,比列:0.300000,数据库:0.00983894,计算:-0.009838
2022-03-17 12:52:03.017 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 12:52:03.018 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 12:52:03.105 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:03.106 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8802,比列:0.200000,数据库:0.00655929,计算:-0.006559
2022-03-17 12:52:03.106 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 12:52:03.107 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 12:52:03.194 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:03.195 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8802,比列:0.300000,数据库:0.00983894,计算:-0.009838
2022-03-17 12:52:03.196 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 12:52:03.197 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 12:52:03.276 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:03.276 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8802,比列:0.100000,数据库:0.00327964,计算:-0.003279
2022-03-17 12:52:03.276 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 12:52:03.277 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 12:52:03.357 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:03.358 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8802,比列:0.100000,数据库:0.00327964,计算:-0.003279
2022-03-17 12:52:03.358 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1311859200000000
2022-03-17 12:52:03.359 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8803' LIMIT 0,1000 
2022-03-17 12:52:03.359 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:03.437 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:03.438 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:03.438 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:03.517 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:03.520 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 12:52:03.520 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:03.598 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:03.599 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 12:52:03.599 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:03.677 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:03.678 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 12:52:03.679 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:03.757 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:03.758 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 12:52:03.759 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:03.838 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:03.840 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:52:03.840 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:03.922 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 12:52:03.923 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 12:52:03.924 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 12:52:04.003 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:04.003 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8803,比列:0.300000,数据库:0.03935577,计算:-0.039355
2022-03-17 12:52:04.004 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 12:52:04.004 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 12:52:04.089 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:04.090 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8803,比列:0.200000,数据库:0.02623718,计算:-0.026237
2022-03-17 12:52:04.091 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 12:52:04.091 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 12:52:04.459 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:04.459 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8803,比列:0.300000,数据库:0.03935577,计算:-0.039355
2022-03-17 12:52:04.460 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 12:52:04.461 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 12:52:04.540 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:04.541 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8803,比列:0.100000,数据库:0.01311859,计算:-0.013118
2022-03-17 12:52:04.542 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 12:52:04.542 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 12:52:04.625 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:04.625 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8803,比列:0.100000,数据库:0.01311859,计算:-0.013118
2022-03-17 12:52:04.626 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8364020400000000
2022-03-17 12:52:04.626 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8804' LIMIT 0,1000 
2022-03-17 12:52:04.626 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:04.711 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:04.712 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:04.712 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:04.790 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:04.791 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 12:52:04.792 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:04.874 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:04.874 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 12:52:04.875 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:04.954 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:04.955 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 12:52:04.955 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:05.039 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:05.040 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 12:52:05.041 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:05.121 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:05.122 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:52:05.122 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:05.206 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 12:52:05.207 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 12:52:05.207 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 12:52:05.288 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:05.288 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8804,比列:0.300000,数据库:0.25092061,计算:-0.250920
2022-03-17 12:52:05.289 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 12:52:05.289 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 12:52:05.380 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:05.381 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8804,比列:0.200000,数据库:0.16728040,计算:-0.167280
2022-03-17 12:52:05.382 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 12:52:05.382 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 12:52:05.466 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:05.467 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8804,比列:0.300000,数据库:0.25092061,计算:-0.250920
2022-03-17 12:52:05.468 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 12:52:05.468 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 12:52:05.550 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:05.550 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8804,比列:0.100000,数据库:0.08364020,计算:-0.083640
2022-03-17 12:52:05.551 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 12:52:05.552 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 12:52:05.631 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:05.631 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8804,比列:0.100000,数据库:0.08364020,计算:-0.083640
2022-03-17 12:52:05.632 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.0255000000000000
2022-03-17 12:52:05.632 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8805' LIMIT 0,1000 
2022-03-17 12:52:05.633 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:05.716 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:05.717 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:05.717 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:05.794 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:05.796 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8805' LIMIT 0,1000 
2022-03-17 12:52:05.796 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:05.875 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:05.876 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:05.876 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:05.954 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:05.956 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,1 
2022-03-17 12:52:05.956 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 12:52:06.036 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 12:52:06.036 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8805,数据库:-0.02550000,计算得:0.025500
2022-03-17 12:52:06.037 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 爆仓剩余金额，返回给默认合伙人:-96.8467311900000000
2022-03-17 12:52:06.038 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,1 
2022-03-17 12:52:06.038 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 59(Integer)
2022-03-17 12:52:06.118 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 12:52:06.119 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 爆仓剩余金额，返回给默认合伙人--->用户:51905058,类型:59,爆仓剩余金额:-96.8467311900000000,返还金额:96.8467311900000000
2022-03-17 12:52:06.119 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8364122400000000
2022-03-17 12:52:06.119 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8805' LIMIT 0,1000 
2022-03-17 12:52:06.120 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 12:52:06.198 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 12:52:06.199 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 12:52:06.199 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 12:52:06.285 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 12:52:06.286 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 12:52:06.286 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:06.364 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:06.365 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 12:52:06.366 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:06.445 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:06.445 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 12:52:06.446 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:06.528 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:06.529 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 12:52:06.529 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:06.606 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 12:52:06.607 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 12:52:06.607 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 12:52:06.685 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 12:52:06.686 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 12:52:06.687 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 12:52:06.766 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:06.766 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8805,比列:0.300000,数据库:0.25092367,计算:-0.250923
2022-03-17 12:52:06.767 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 12:52:06.768 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 12:52:06.848 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:06.849 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8805,比列:0.200000,数据库:0.16728244,计算:-0.167282
2022-03-17 12:52:06.850 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 12:52:06.850 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 12:52:06.930 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:06.931 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8805,比列:0.300000,数据库:0.25092367,计算:-0.250923
2022-03-17 12:52:06.931 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 12:52:06.932 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 12:52:07.012 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:07.012 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8805,比列:0.100000,数据库:0.08364122,计算:-0.083641
2022-03-17 12:52:07.013 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 12:52:07.013 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 12:52:07.103 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 12:52:07.103 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8805,比列:0.100000,数据库:0.08364122,计算:-0.083641
2022-03-17 12:52:07.104 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 12:59:36.582 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 12:59:36.596 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 12:59:55.362 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5005 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 13:00:00.375 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 24798 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 13:00:00.376 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 13:00:01.363 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 13:00:01.366 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 13:00:01.384 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 13:00:01.389 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 13:00:01.390 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 13:00:01.397 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 13:00:01.407 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 13:00:01.408 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 13:00:01.427 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2022-03-17 13:00:02.105 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 13:00:02.116 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 13:00:02.116 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 13:00:02.117 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 13:00:02.235 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 13:00:02.235 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1759 ms
2022-03-17 13:00:03.315 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 13:00:03.995 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 13:00:03.996 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 13:00:03.996 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 13:00:04.215 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 13:00:04.231 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 13:00:04.242 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.427 seconds (JVM running for 24.898)
2022-03-17 13:00:43.688 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 13:00:43.689 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 13:00:43.690 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 13:00:44.068 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 13:00:45.195 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 13:00:45.206 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 13:00:45.239 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 13:00:45.350 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 13:00:45.354 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 13:00:45.354 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 13:00:45.448 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 13:00:45.449 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:45.450 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 13:00:45.536 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 13:00:45.537 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:0E-16,hold:0E-16
2022-03-17 13:00:45.538 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-100.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:0E-16,操作后，数据库存储的总金额:0E-16
2022-03-17 13:00:45.540 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:45.541 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:45.625 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:00:45.625 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 13:00:45.626 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:45.627 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 13:00:45.715 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 13:00:45.716 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 13:00:45.716 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 13:00:45.803 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 13:00:45.804 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 13:00:45.805 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 13:00:45.889 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 13:00:45.890 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 13:00:45.891 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 13:00:45.981 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 13:00:45.982 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 13:00:45.982 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 13:00:46.068 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 13:00:46.069 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 13:00:46.070 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 13:00:46.155 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 13:00:46.156 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 13:00:46.158 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 13:00:46.159 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 13:00:46.255 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 16
2022-03-17 13:00:46.256 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-0.0163989600000000, preBalance=100.0000000000000000, postBalance=99.9836010400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8795, note=单号:8795开仓手续费-0.0163989600000000, createdDate=2022-03-17 11:54:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0163991200000000, preBalance=99.9836010400000000, postBalance=99.9672019200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8796, note=单号:8796开仓手续费-0.0163991200000000, createdDate=2022-03-17 11:54:30, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0819830000000000, preBalance=99.9672019200000000, postBalance=99.8852189200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8797, note=单号:8797开仓手续费-0.0819830000000000, createdDate=2022-03-17 11:54:40, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0491930400000000, preBalance=99.8852189200000000, postBalance=99.8360258800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8798, note=单号:8798开仓手续费-0.0491930400000000, createdDate=2022-03-17 11:54:50, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.5411696400000000, preBalance=99.8360258800000000, postBalance=99.2948562400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8799, note=单号:8799开仓手续费-0.5411696400000000, createdDate=2022-03-17 11:55:00, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0983954400000000, preBalance=99.2948562400000000, postBalance=99.1964608000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8800, note=单号:8800开仓手续费-0.0983954400000000, createdDate=2022-03-17 11:55:10, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.0803999900000000, preBalance=99.1964608000000000, postBalance=98.6373278700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8801, note=单号:8801平仓收益-0.5591329300000000, createdDate=2022-03-17 11:55:11, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0040000000000000, preBalance=98.6373278700000000, postBalance=98.6005313900000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8802, note=单号:8802平仓收益-0.0367964800000000, createdDate=2022-03-17 11:55:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.0247000000000000, preBalance=98.6005313900000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8803, note=单号:8803平仓收益-0.1064859200000000, createdDate=2022-03-17 11:55:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.6395329200000000, preBalance=98.4940454700000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8801, note=单号:8801平仓手续费-0.6395329200000000, createdDate=2022-03-17 11:55:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0327964800000000, preBalance=98.4940454700000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8802, note=单号:8802平仓手续费-0.0327964800000000, createdDate=2022-03-17 11:55:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.1311859200000000, preBalance=98.4940454700000000, postBalance=98.4940454700000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8803, note=单号:8803平仓手续费-0.1311859200000000, createdDate=2022-03-17 11:55:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8364020400000000, preBalance=98.4940454700000000, postBalance=97.6576434300000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8804, note=单号:8804开仓手续费-0.8364020400000000, createdDate=2022-03-17 11:56:00, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.0255000000000000, preBalance=97.6576434300000000, postBalance=96.8467311900000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8805, note=单号:8805平仓收益-0.8109122400000000, createdDate=2022-03-17 11:56:04, fromUserId=0, total=null), UserBillChain(userId=51905058, type=59, size=-96.8467311900000000, preBalance=96.8467311900000000, postBalance=0E-16, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=0, parentId=0, sourceId=8805, note=订单:8805爆仓剩余返还给默认合伙人,amount:-96.8467311900000000, createdDate=2022-03-17 11:56:05, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8364122400000000, preBalance=0E-16, postBalance=0E-16, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8805, note=单号:8805平仓手续费-0.8364122400000000, createdDate=2022-03-17 11:56:10, fromUserId=0, total=null)]
2022-03-17 13:00:46.256 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 13:00:46.256 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163989600000000
2022-03-17 13:00:46.266 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8795' LIMIT 0,1000 
2022-03-17 13:00:46.266 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:46.353 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:46.353 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:46.354 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:46.442 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:46.501 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 13:00:46.502 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:46.585 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:46.586 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 13:00:46.586 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:46.671 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:46.672 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 13:00:46.673 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:46.759 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:46.762 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 13:00:46.763 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:46.846 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:46.847 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:46.848 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:46.932 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:00:46.933 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 13:00:46.933 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 13:00:47.019 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:47.020 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8795,比列:0.300000,数据库:0.00491968,计算:-0.004919
2022-03-17 13:00:47.021 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 13:00:47.021 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 13:00:47.108 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:47.109 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8795,比列:0.200000,数据库:0.00327979,计算:-0.003279
2022-03-17 13:00:47.111 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 13:00:47.111 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 13:00:47.199 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:47.200 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8795,比列:0.300000,数据库:0.00491968,计算:-0.004919
2022-03-17 13:00:47.201 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 13:00:47.202 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 13:00:47.292 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:47.293 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8795,比列:0.100000,数据库:0.00163989,计算:-0.001639
2022-03-17 13:00:47.294 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8795' and type=? limit 0,100 
2022-03-17 13:00:47.294 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 13:00:47.390 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:47.391 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8795,比列:0.100000,数据库:0.00163989,计算:-0.001639
2022-03-17 13:00:47.391 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163991200000000
2022-03-17 13:00:47.392 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8796' LIMIT 0,1000 
2022-03-17 13:00:47.393 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:47.493 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:47.494 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:47.495 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:47.578 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:47.580 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 13:00:47.581 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:47.665 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:47.666 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 13:00:47.666 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:47.761 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:47.762 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 13:00:47.762 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:47.846 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:47.847 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 13:00:47.848 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:47.933 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:47.935 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:47.935 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:48.020 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:00:48.022 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 13:00:48.023 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 13:00:48.109 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:48.109 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8796,比列:0.300000,数据库:0.00491973,计算:-0.004919
2022-03-17 13:00:48.110 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 13:00:48.111 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 13:00:48.197 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:48.197 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8796,比列:0.200000,数据库:0.00327982,计算:-0.003279
2022-03-17 13:00:48.198 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 13:00:48.198 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 13:00:48.286 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:48.287 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8796,比列:0.300000,数据库:0.00491973,计算:-0.004919
2022-03-17 13:00:48.288 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 13:00:48.289 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 13:00:48.374 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:48.375 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8796,比列:0.100000,数据库:0.00163991,计算:-0.001639
2022-03-17 13:00:48.375 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8796' and type=? limit 0,100 
2022-03-17 13:00:48.375 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 13:00:48.463 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:48.464 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8796,比列:0.100000,数据库:0.00163991,计算:-0.001639
2022-03-17 13:00:48.464 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0819830000000000
2022-03-17 13:00:48.464 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8797' LIMIT 0,1000 
2022-03-17 13:00:48.465 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:48.555 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:48.556 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:48.556 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:48.641 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:48.642 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 13:00:48.642 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:48.727 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:48.732 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 13:00:48.733 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:48.820 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:48.821 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 13:00:48.821 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:48.908 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:48.910 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 13:00:48.910 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:48.995 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:48.996 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:48.997 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:49.081 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:00:49.082 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 13:00:49.083 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 13:00:49.171 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:49.171 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8797,比列:0.300000,数据库:0.02459490,计算:-0.024594
2022-03-17 13:00:49.172 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 13:00:49.173 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 13:00:49.261 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:49.261 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8797,比列:0.200000,数据库:0.01639660,计算:-0.016396
2022-03-17 13:00:49.262 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 13:00:49.263 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 13:00:49.351 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:49.352 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8797,比列:0.300000,数据库:0.02459490,计算:-0.024594
2022-03-17 13:00:49.353 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 13:00:49.354 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 13:00:49.443 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:49.444 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8797,比列:0.100000,数据库:0.00819830,计算:-0.008198
2022-03-17 13:00:49.445 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8797' and type=? limit 0,100 
2022-03-17 13:00:49.447 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 13:00:49.535 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:49.535 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8797,比列:0.100000,数据库:0.00819830,计算:-0.008198
2022-03-17 13:00:49.536 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0491930400000000
2022-03-17 13:00:49.536 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8798' LIMIT 0,1000 
2022-03-17 13:00:49.537 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:49.625 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:49.626 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:49.627 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:49.712 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:49.713 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 13:00:49.714 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:49.803 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:49.804 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 13:00:49.804 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:49.889 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:49.891 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 13:00:49.891 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:49.979 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:49.980 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 13:00:49.980 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:50.064 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:50.065 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:50.065 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:50.159 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:00:50.161 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 13:00:50.162 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 13:00:50.248 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:50.248 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8798,比列:0.300000,数据库:0.01475791,计算:-0.014757
2022-03-17 13:00:50.249 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 13:00:50.250 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 13:00:50.334 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:50.334 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8798,比列:0.200000,数据库:0.00983860,计算:-0.009838
2022-03-17 13:00:50.335 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 13:00:50.335 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 13:00:50.423 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:50.423 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8798,比列:0.300000,数据库:0.01475791,计算:-0.014757
2022-03-17 13:00:50.424 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 13:00:50.425 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 13:00:50.516 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:50.516 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8798,比列:0.100000,数据库:0.00491930,计算:-0.004919
2022-03-17 13:00:50.517 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8798' and type=? limit 0,100 
2022-03-17 13:00:50.518 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 13:00:50.609 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:50.610 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8798,比列:0.100000,数据库:0.00491930,计算:-0.004919
2022-03-17 13:00:50.610 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5411696400000000
2022-03-17 13:00:50.611 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8799' LIMIT 0,1000 
2022-03-17 13:00:50.612 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:50.698 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:50.699 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:50.700 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:50.784 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:50.785 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 13:00:50.785 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:50.871 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:50.872 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 13:00:50.873 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:50.959 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:50.960 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 13:00:50.961 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:51.047 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:51.048 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 13:00:51.049 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:51.133 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:51.134 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:51.135 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:51.222 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:00:51.224 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 13:00:51.224 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 13:00:51.311 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:51.312 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8799,比列:0.300000,数据库:0.16235089,计算:-0.162350
2022-03-17 13:00:51.314 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 13:00:51.314 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 13:00:51.411 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:51.412 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8799,比列:0.200000,数据库:0.10823392,计算:-0.108233
2022-03-17 13:00:51.413 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 13:00:51.413 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 13:00:51.500 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:51.500 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8799,比列:0.300000,数据库:0.16235089,计算:-0.162350
2022-03-17 13:00:51.501 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 13:00:51.501 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 13:00:51.587 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:51.588 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8799,比列:0.100000,数据库:0.05411696,计算:-0.054116
2022-03-17 13:00:51.589 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8799' and type=? limit 0,100 
2022-03-17 13:00:51.590 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 13:00:51.675 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:51.676 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8799,比列:0.100000,数据库:0.05411696,计算:-0.054116
2022-03-17 13:00:51.677 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0983954400000000
2022-03-17 13:00:51.677 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8800' LIMIT 0,1000 
2022-03-17 13:00:51.678 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:51.768 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:51.768 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:51.768 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:51.887 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:51.889 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 13:00:51.889 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:51.980 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:51.981 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 13:00:51.982 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:52.074 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:52.075 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 13:00:52.076 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:52.165 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:52.166 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 13:00:52.166 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:52.255 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:52.256 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:52.256 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:52.345 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:00:52.347 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 13:00:52.347 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 13:00:52.451 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:52.451 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8800,比列:0.300000,数据库:0.02951863,计算:-0.029518
2022-03-17 13:00:52.452 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 13:00:52.453 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 13:00:52.537 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:52.538 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8800,比列:0.200000,数据库:0.01967908,计算:-0.019679
2022-03-17 13:00:52.539 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 13:00:52.539 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 13:00:52.626 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:52.627 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8800,比列:0.300000,数据库:0.02951863,计算:-0.029518
2022-03-17 13:00:52.628 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 13:00:52.629 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 13:00:52.718 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:52.719 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8800,比列:0.100000,数据库:0.00983954,计算:-0.009839
2022-03-17 13:00:52.720 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8800' and type=? limit 0,100 
2022-03-17 13:00:52.720 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 13:00:52.810 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:52.810 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8800,比列:0.100000,数据库:0.00983954,计算:-0.009839
2022-03-17 13:00:52.811 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.0803999900000000
2022-03-17 13:00:52.811 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8801' LIMIT 0,1000 
2022-03-17 13:00:52.812 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:52.896 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:52.897 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:52.897 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:52.981 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:52.982 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8801' LIMIT 0,1000 
2022-03-17 13:00:52.983 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:53.070 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:53.072 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:53.073 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:53.157 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:53.158 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,1 
2022-03-17 13:00:53.159 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 13:00:53.245 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 13:00:53.246 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8801,数据库:-0.08039999,计算得:0.080399
2022-03-17 13:00:53.247 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0040000000000000
2022-03-17 13:00:53.247 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8802' LIMIT 0,1000 
2022-03-17 13:00:53.247 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:53.332 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:53.333 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:53.333 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:53.421 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:53.423 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8802' LIMIT 0,1000 
2022-03-17 13:00:53.423 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:53.512 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:53.513 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:53.514 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:53.600 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:53.601 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,1 
2022-03-17 13:00:53.602 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 13:00:53.689 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 13:00:53.689 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8802,数据库:0.00400000,计算得:-0.004000
2022-03-17 13:00:53.690 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.0247000000000000
2022-03-17 13:00:53.691 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8803' LIMIT 0,1000 
2022-03-17 13:00:53.691 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:53.777 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:53.777 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:53.778 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:53.861 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:53.863 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8803' LIMIT 0,1000 
2022-03-17 13:00:53.863 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:53.948 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:53.949 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:53.949 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:54.032 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:54.033 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,1 
2022-03-17 13:00:54.034 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 13:00:54.122 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 13:00:54.122 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8803,数据库:-0.02470000,计算得:0.024700
2022-03-17 13:00:54.123 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6395329200000000
2022-03-17 13:00:54.124 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8801' LIMIT 0,1000 
2022-03-17 13:00:54.124 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:54.209 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:54.210 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:54.211 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:54.296 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:54.297 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 13:00:54.298 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:54.382 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:54.382 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 13:00:54.382 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:54.469 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:54.470 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 13:00:54.470 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:54.555 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:54.556 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 13:00:54.556 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:54.640 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:54.641 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:54.641 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:54.725 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:00:54.726 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 13:00:54.727 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 13:00:54.815 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:54.815 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8801,比列:0.300000,数据库:0.19185987,计算:-0.191859
2022-03-17 13:00:54.816 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 13:00:54.816 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 13:00:54.900 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:54.900 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8801,比列:0.200000,数据库:0.12790658,计算:-0.127906
2022-03-17 13:00:54.901 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 13:00:54.901 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 13:00:54.989 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:54.989 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8801,比列:0.300000,数据库:0.19185987,计算:-0.191859
2022-03-17 13:00:54.990 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 13:00:54.991 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 13:00:55.077 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:55.077 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8801,比列:0.100000,数据库:0.06395329,计算:-0.063953
2022-03-17 13:00:55.078 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8801' and type=? limit 0,100 
2022-03-17 13:00:55.079 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 13:00:55.163 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:55.164 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8801,比列:0.100000,数据库:0.06395329,计算:-0.063953
2022-03-17 13:00:55.164 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0327964800000000
2022-03-17 13:00:55.164 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8802' LIMIT 0,1000 
2022-03-17 13:00:55.165 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:55.249 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:55.250 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:55.250 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:55.334 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:55.335 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 13:00:55.335 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:55.419 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:55.420 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 13:00:55.420 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:55.507 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:55.509 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 13:00:55.509 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:55.594 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:55.595 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 13:00:55.595 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:55.679 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:55.680 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:55.680 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:55.767 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:00:55.768 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 13:00:55.769 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 13:00:55.854 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:55.855 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8802,比列:0.300000,数据库:0.00983894,计算:-0.009838
2022-03-17 13:00:55.856 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 13:00:55.856 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 13:00:55.943 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:55.944 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8802,比列:0.200000,数据库:0.00655929,计算:-0.006559
2022-03-17 13:00:55.945 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 13:00:55.945 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 13:00:56.031 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:56.031 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8802,比列:0.300000,数据库:0.00983894,计算:-0.009838
2022-03-17 13:00:56.032 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 13:00:56.032 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 13:00:56.129 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:56.129 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8802,比列:0.100000,数据库:0.00327964,计算:-0.003279
2022-03-17 13:00:56.130 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8802' and type=? limit 0,100 
2022-03-17 13:00:56.130 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 13:00:56.216 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:56.216 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8802,比列:0.100000,数据库:0.00327964,计算:-0.003279
2022-03-17 13:00:56.217 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1311859200000000
2022-03-17 13:00:56.217 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8803' LIMIT 0,1000 
2022-03-17 13:00:56.217 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:56.303 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:56.303 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:56.304 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:56.389 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:56.390 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 13:00:56.390 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:56.477 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:56.478 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 13:00:56.478 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:56.563 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:56.563 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 13:00:56.564 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:56.648 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:56.649 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 13:00:56.649 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:56.734 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:56.735 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:56.735 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:56.820 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:00:56.821 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 13:00:56.822 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 13:00:56.907 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:56.907 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8803,比列:0.300000,数据库:0.03935577,计算:-0.039355
2022-03-17 13:00:56.908 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 13:00:56.908 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 13:00:56.993 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:56.993 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8803,比列:0.200000,数据库:0.02623718,计算:-0.026237
2022-03-17 13:00:56.994 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 13:00:56.994 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 13:00:57.080 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:57.081 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8803,比列:0.300000,数据库:0.03935577,计算:-0.039355
2022-03-17 13:00:57.081 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 13:00:57.082 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 13:00:57.167 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:57.168 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8803,比列:0.100000,数据库:0.01311859,计算:-0.013118
2022-03-17 13:00:57.169 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8803' and type=? limit 0,100 
2022-03-17 13:00:57.169 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 13:00:57.259 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:57.260 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8803,比列:0.100000,数据库:0.01311859,计算:-0.013118
2022-03-17 13:00:57.260 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8364020400000000
2022-03-17 13:00:57.261 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8804' LIMIT 0,1000 
2022-03-17 13:00:57.261 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:57.354 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:57.354 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:57.354 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:57.444 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:57.445 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 13:00:57.446 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:57.531 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:57.532 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 13:00:57.532 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:57.616 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:57.617 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 13:00:57.617 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:57.703 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:57.704 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 13:00:57.705 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:57.791 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:57.792 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:57.792 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:57.876 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:00:57.877 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 13:00:57.878 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 13:00:57.964 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:57.964 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8804,比列:0.300000,数据库:0.25092061,计算:-0.250920
2022-03-17 13:00:57.965 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 13:00:57.965 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 13:00:58.049 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:58.050 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8804,比列:0.200000,数据库:0.16728040,计算:-0.167280
2022-03-17 13:00:58.050 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 13:00:58.050 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 13:00:58.136 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:58.136 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8804,比列:0.300000,数据库:0.25092061,计算:-0.250920
2022-03-17 13:00:58.137 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 13:00:58.137 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 13:00:58.222 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:58.223 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8804,比列:0.100000,数据库:0.08364020,计算:-0.083640
2022-03-17 13:00:58.224 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8804' and type=? limit 0,100 
2022-03-17 13:00:58.224 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 13:00:58.309 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:58.310 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8804,比列:0.100000,数据库:0.08364020,计算:-0.083640
2022-03-17 13:00:58.310 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.0255000000000000
2022-03-17 13:00:58.311 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8805' LIMIT 0,1000 
2022-03-17 13:00:58.311 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:58.395 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:58.396 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:58.397 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:58.480 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:58.481 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8805' LIMIT 0,1000 
2022-03-17 13:00:58.481 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:58.565 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:58.566 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:58.566 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:58.650 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:58.651 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,1 
2022-03-17 13:00:58.651 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 13:00:58.736 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 13:00:58.736 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8805,数据库:-0.02550000,计算得:0.025500
2022-03-17 13:00:58.737 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 爆仓剩余金额，返回给默认合伙人:-96.8467311900000000
2022-03-17 13:00:58.737 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,1 
2022-03-17 13:00:58.737 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 59(Integer)
2022-03-17 13:00:58.822 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 13:00:58.822 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 爆仓剩余金额，返回给默认合伙人--->用户:51905058,类型:59,爆仓剩余金额:-96.8467311900000000,返还金额:96.8467311900000000
2022-03-17 13:00:58.823 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8364122400000000
2022-03-17 13:00:58.823 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8805' LIMIT 0,1000 
2022-03-17 13:00:58.823 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 13:00:58.908 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 13:00:58.908 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 13:00:58.908 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 13:00:58.993 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 13:00:58.994 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 13:00:58.995 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:59.080 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:59.081 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 13:00:59.081 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:59.165 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:59.166 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 13:00:59.166 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:59.254 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:59.254 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 13:00:59.255 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:59.338 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 13:00:59.339 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:00:59.339 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:00:59.423 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:00:59.424 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 13:00:59.424 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 13:00:59.515 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:59.515 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8805,比列:0.300000,数据库:0.25092367,计算:-0.250923
2022-03-17 13:00:59.516 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 13:00:59.516 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 13:00:59.602 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:59.603 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8805,比列:0.200000,数据库:0.16728244,计算:-0.167282
2022-03-17 13:00:59.604 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 13:00:59.604 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 13:00:59.690 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:59.691 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8805,比列:0.300000,数据库:0.25092367,计算:-0.250923
2022-03-17 13:00:59.692 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 13:00:59.692 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 13:00:59.776 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:59.777 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8805,比列:0.100000,数据库:0.08364122,计算:-0.083641
2022-03-17 13:00:59.777 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8805' and type=? limit 0,100 
2022-03-17 13:00:59.777 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 13:00:59.861 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 13:00:59.861 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8805,比列:0.100000,数据库:0.08364122,计算:-0.083641
2022-03-17 13:00:59.861 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 13:33:15.824 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 13:33:15.831 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 13:33:35.293 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5005 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 13:33:40.303 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 24923 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 13:33:40.304 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 13:33:41.124 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 13:33:41.127 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 13:33:41.145 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 13:33:41.150 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 13:33:41.151 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 13:33:41.159 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 13:33:41.170 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 13:33:41.171 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 13:33:41.187 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-03-17 13:33:41.799 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 13:33:41.809 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 13:33:41.809 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 13:33:41.810 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 13:33:41.935 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 13:33:41.935 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1569 ms
2022-03-17 13:33:42.982 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 13:33:43.741 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 13:33:43.743 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 13:33:43.743 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 13:33:43.979 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 13:33:44.006 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 13:33:44.018 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.277 seconds (JVM running for 24.765)
2022-03-17 13:35:25.445 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 13:35:25.447 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 13:35:25.449 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2022-03-17 13:35:25.709 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 13:35:26.954 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 13:35:26.966 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:35:26.996 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 13:35:27.120 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 13:35:27.125 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 13:35:27.126 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 13:35:27.215 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 13:35:27.334 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:[UserBalanceChain(userId=51905058, currencyId=6, balance=200.0000000000000000, hold=0E-16)],user_partner_balance:[]
2022-03-17 14:30:54.762 [http-nio-10090-exec-4] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@1eec33dc (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2022-03-17 14:30:59.770 [http-nio-10090-exec-4] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@281c500e (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2022-03-17 14:31:04.777 [http-nio-10090-exec-4] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7e71a68 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2022-03-17 14:31:09.784 [http-nio-10090-exec-4] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@690ae9c8 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2022-03-17 14:31:10.569 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 14:31:10.728 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 14:31:10.729 [http-nio-10090-exec-4] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7be52fd8 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2022-03-17 14:31:30.214 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5005 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 14:31:35.224 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 25632 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 14:31:35.225 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 14:31:36.186 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 14:31:36.189 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 14:31:36.211 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 14:31:36.216 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 14:31:36.217 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 14:31:36.228 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 14:31:36.240 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 14:31:36.242 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 14:31:36.269 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
2022-03-17 14:31:37.047 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 14:31:37.060 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 14:31:37.061 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 14:31:37.061 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 14:31:37.204 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 14:31:37.205 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1918 ms
2022-03-17 14:31:38.634 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 14:31:39.652 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 14:31:39.654 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 14:31:39.654 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 14:31:39.982 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 14:31:40.003 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 14:31:40.017 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 25.641 seconds (JVM running for 26.698)
2022-03-17 14:31:42.972 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 14:31:42.973 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 14:31:42.974 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 14:31:43.224 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 14:31:44.524 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 14:31:44.538 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:31:44.573 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 14:31:44.710 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 14:31:44.716 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:31:44.716 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:31:44.812 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 14:31:44.923 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:[UserBalanceChain(userId=51905058, currencyId=6, balance=100.0000000000000000, hold=0E-16)],user_partner_balance:[]
2022-03-17 14:32:42.742 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 14:32:42.745 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 14:32:42.853 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 14:32:42.854 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 14:32:42.855 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 14:32:42.962 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 14:32:42.964 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:32:42.964 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 14:32:43.070 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 14:32:43.071 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:99.1337786000000000,hold:0E-16
2022-03-17 14:32:43.071 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-0.8662214000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:99.1337786000000000,操作后，数据库存储的总金额:99.1337786000000000
2022-03-17 14:32:43.073 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:32:43.073 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:32:43.183 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 14:32:43.184 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 14:32:43.185 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:32:43.185 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:32:43.289 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:32:43.289 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 14:32:43.290 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:32:43.396 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:32:43.397 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 14:32:43.397 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:32:43.504 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:32:43.505 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 14:32:43.505 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:32:43.613 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:32:43.614 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 14:32:43.615 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:32:43.723 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:32:43.724 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 14:32:43.725 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:32:43.831 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:32:43.831 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 14:32:43.832 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 14:32:43.833 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 14:32:43.938 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 1
2022-03-17 14:32:43.939 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-0.8662214000000000, preBalance=131.0000000000000000, postBalance=130.1337786000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8806, note=单号:8806开仓手续费-0.8662214000000000, createdDate=2022-03-17 14:32:22, fromUserId=0, total=null)]
2022-03-17 14:32:43.939 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 14:32:43.939 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8662214000000000
2022-03-17 14:32:43.949 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8806' LIMIT 0,1000 
2022-03-17 14:32:43.950 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 14:32:44.056 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 14:32:44.057 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 14:32:44.057 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 14:32:44.162 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 14:32:44.226 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 14:32:44.227 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:32:44.336 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 14:32:44.338 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 14:32:44.338 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:32:44.445 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 14:32:44.446 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 14:32:44.447 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:32:44.547 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 14:32:44.548 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 14:32:44.548 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:32:44.645 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 14:32:44.645 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:32:44.645 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:32:44.741 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 14:32:44.744 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8806' and type=? limit 0,100 
2022-03-17 14:32:44.745 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 14:32:44.843 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:32:44.844 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8806,比列:0.300000,数据库:0.25986642,计算:-0.259866
2022-03-17 14:32:44.845 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8806' and type=? limit 0,100 
2022-03-17 14:32:44.846 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 14:32:44.945 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:32:44.945 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8806,比列:0.200000,数据库:0.17324428,计算:-0.173244
2022-03-17 14:32:44.946 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8806' and type=? limit 0,100 
2022-03-17 14:32:44.947 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 14:32:45.057 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:32:45.057 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8806,比列:0.300000,数据库:0.25986642,计算:-0.259866
2022-03-17 14:32:45.059 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8806' and type=? limit 0,100 
2022-03-17 14:32:45.060 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 14:32:45.156 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:32:45.156 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8806,比列:0.100000,数据库:0.08662214,计算:-0.086622
2022-03-17 14:32:45.157 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8806' and type=? limit 0,100 
2022-03-17 14:32:45.158 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 14:32:45.259 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:32:45.259 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8806,比列:0.100000,数据库:0.08662214,计算:-0.086622
2022-03-17 14:32:45.259 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 14:33:07.598 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 14:33:07.599 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 14:33:07.696 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 14:33:07.697 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 14:33:07.698 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - ==> Parameters: 
2022-03-17 14:33:07.794 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserBalanceByUserForFixed - <==      Total: 1
2022-03-17 14:33:07.802 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:33:07.802 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 14:33:07.898 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 14:33:07.899 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:0E-16,hold:0E-16
2022-03-17 14:33:07.899 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-100.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:0E-16,操作后，数据库存储的总金额:0E-16
2022-03-17 14:33:07.900 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:33:07.900 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:33:07.996 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 14:33:07.996 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 14:33:07.997 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:33:07.997 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:33:08.096 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:33:08.098 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 14:33:08.098 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:33:08.199 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:33:08.200 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 14:33:08.200 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:33:08.298 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:33:08.299 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 14:33:08.299 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:33:08.401 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:33:08.402 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 14:33:08.402 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:33:08.500 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:33:08.502 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 14:33:08.502 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:33:08.600 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:33:08.601 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 14:33:08.601 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 14:33:08.601 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 14:33:08.711 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 4
2022-03-17 14:33:08.712 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-0.8662214000000000, preBalance=131.0000000000000000, postBalance=130.1337786000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8806, note=单号:8806开仓手续费-0.8662214000000000, createdDate=2022-03-17 14:32:22, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=1.3833000000000000, preBalance=130.1337786000000000, postBalance=130.6503038800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8808, note=单号:8808平仓收益0.5165252800000000, createdDate=2022-03-17 14:32:56, fromUserId=0, total=null), UserBillChain(userId=51905058, type=59, size=-99.6503038800000000, preBalance=130.6503038800000000, postBalance=31.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=0, parentId=0, sourceId=8808, note=订单:8808爆仓剩余返还给默认合伙人,amount:-99.6503038800000000, createdDate=2022-03-17 14:32:56, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8667747200000000, preBalance=31.0000000000000000, postBalance=31.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8808, note=单号:8808平仓手续费-0.8667747200000000, createdDate=2022-03-17 14:33:02, fromUserId=0, total=null)]
2022-03-17 14:33:08.713 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 14:33:08.713 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8662214000000000
2022-03-17 14:33:08.715 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8806' LIMIT 0,1000 
2022-03-17 14:33:08.715 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 14:33:08.813 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 14:33:08.814 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 14:33:08.815 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 14:33:08.911 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 14:33:08.913 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 14:33:08.914 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:33:09.011 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 14:33:09.012 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 14:33:09.013 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:33:09.110 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 14:33:09.111 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 14:33:09.112 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:33:09.211 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 14:33:09.213 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 14:33:09.213 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:33:09.311 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 14:33:09.313 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:33:09.314 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:33:09.412 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 14:33:09.413 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8806' and type=? limit 0,100 
2022-03-17 14:33:09.414 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 14:33:09.517 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:33:09.517 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8806,比列:0.300000,数据库:0.25986642,计算:-0.259866
2022-03-17 14:33:09.519 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8806' and type=? limit 0,100 
2022-03-17 14:33:09.519 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 14:33:09.626 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:33:09.627 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8806,比列:0.200000,数据库:0.17324428,计算:-0.173244
2022-03-17 14:33:09.627 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8806' and type=? limit 0,100 
2022-03-17 14:33:09.628 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 14:33:09.728 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:33:09.728 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8806,比列:0.300000,数据库:0.25986642,计算:-0.259866
2022-03-17 14:33:09.730 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8806' and type=? limit 0,100 
2022-03-17 14:33:09.731 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 14:33:09.831 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:33:09.832 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8806,比列:0.100000,数据库:0.08662214,计算:-0.086622
2022-03-17 14:33:09.833 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8806' and type=? limit 0,100 
2022-03-17 14:33:09.834 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 14:33:09.938 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:33:09.939 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8806,比列:0.100000,数据库:0.08662214,计算:-0.086622
2022-03-17 14:33:09.939 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:1.3833000000000000
2022-03-17 14:33:09.940 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8808' LIMIT 0,1000 
2022-03-17 14:33:09.940 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 14:33:10.040 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 14:33:10.040 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 14:33:10.041 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 14:33:10.143 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 14:33:10.145 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8808' LIMIT 0,1000 
2022-03-17 14:33:10.145 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 14:33:10.250 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 14:33:10.251 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 14:33:10.252 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 14:33:10.354 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 14:33:10.356 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8808' and type=? limit 0,1 
2022-03-17 14:33:10.357 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 14:33:10.464 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 14:33:10.465 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8808,数据库:-1.38330000,计算得:1.383300
2022-03-17 14:33:10.465 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 爆仓剩余金额，返回给默认合伙人:-99.6503038800000000
2022-03-17 14:33:10.466 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8808' and type=? limit 0,1 
2022-03-17 14:33:10.466 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 59(Integer)
2022-03-17 14:33:10.565 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 14:33:10.565 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 爆仓剩余金额，返回给默认合伙人--->用户:51905058,类型:59,爆仓剩余金额:-99.6503038800000000,返还金额:99.6503038800000000
2022-03-17 14:33:10.566 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8667747200000000
2022-03-17 14:33:10.566 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8808' LIMIT 0,1000 
2022-03-17 14:33:10.567 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 14:33:10.665 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 14:33:10.666 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 14:33:10.666 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 14:33:10.763 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 14:33:10.765 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 14:33:10.765 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:33:10.863 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 14:33:10.864 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 14:33:10.865 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:33:10.962 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 14:33:10.964 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 14:33:10.964 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:33:11.062 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 14:33:11.064 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 14:33:11.064 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:33:11.168 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 14:33:11.168 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:33:11.168 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 14:33:11.264 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 14:33:11.265 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8808' and type=? limit 0,100 
2022-03-17 14:33:11.266 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 14:33:11.365 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:33:11.365 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8808,比列:0.300000,数据库:0.26003241,计算:-0.260032
2022-03-17 14:33:11.366 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8808' and type=? limit 0,100 
2022-03-17 14:33:11.367 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 14:33:11.467 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:33:11.468 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8808,比列:0.200000,数据库:0.17335494,计算:-0.173354
2022-03-17 14:33:11.469 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8808' and type=? limit 0,100 
2022-03-17 14:33:11.470 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 14:33:11.568 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:33:11.568 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8808,比列:0.300000,数据库:0.26003241,计算:-0.260032
2022-03-17 14:33:11.569 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8808' and type=? limit 0,100 
2022-03-17 14:33:11.570 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 14:33:11.667 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:33:11.667 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8808,比列:0.100000,数据库:0.08667747,计算:-0.086677
2022-03-17 14:33:11.668 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8808' and type=? limit 0,100 
2022-03-17 14:33:11.669 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 14:33:11.765 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 14:33:11.766 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8808,比列:0.100000,数据库:0.08667747,计算:-0.086677
2022-03-17 14:33:11.766 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 14:33:27.469 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:33:27.469 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:33:27.565 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:33:27.565 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 14:33:27.565 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:33:27.663 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:33:27.664 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 14:33:27.665 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:33:27.762 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:33:27.763 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 14:33:27.763 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:33:27.861 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:33:27.862 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 14:33:27.862 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:33:27.957 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:33:27.958 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 14:33:27.959 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:33:28.057 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:33:28.058 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 14:34:29.432 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:34:29.433 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:34:29.530 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:34:29.530 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 14:34:29.531 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:34:29.626 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:34:29.626 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 14:34:29.626 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:34:29.724 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:34:29.724 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 14:34:29.724 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:34:29.820 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:34:29.820 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 14:34:29.820 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:34:29.918 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:34:29.919 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 14:34:29.919 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:34:30.018 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:34:30.019 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 14:36:19.907 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 14:36:19.915 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 14:36:49.895 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5005 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 14:36:54.905 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 25665 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 14:36:54.906 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 14:36:55.777 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 14:36:55.779 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 14:36:55.804 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 14:36:55.811 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 14:36:55.812 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 14:36:55.823 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 14:36:55.837 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 14:36:55.838 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 14:36:55.862 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2022-03-17 14:36:56.617 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 14:36:56.630 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 14:36:56.631 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 14:36:56.631 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 14:36:56.773 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 14:36:56.774 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1812 ms
2022-03-17 14:36:57.855 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 14:36:58.612 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 14:36:58.613 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 14:36:58.613 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 14:36:58.838 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 14:36:58.854 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 14:36:58.866 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.478 seconds (JVM running for 24.955)
2022-03-17 14:37:02.230 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 14:37:02.231 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 14:37:02.232 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 14:37:02.491 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 14:37:03.646 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 14:37:03.658 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:37:03.689 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:37:03.809 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:37:03.815 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 14:37:03.815 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:37:03.905 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:37:03.906 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 14:37:03.906 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:37:03.994 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:37:03.995 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 14:37:03.995 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:37:04.083 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:37:04.084 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 14:37:04.085 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:37:04.175 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:37:04.188 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 14:37:04.188 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:37:04.274 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:37:04.275 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 14:37:04.404 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 14:37:04.404 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:37:04.491 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:37:04.492 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 14:37:04.492 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 14:37:04.581 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 14:37:04.582 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionFinish - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,fee,partner_id partnerId,parent_id parentId,liquidate_by liquidateBy FROM `bib_cfd`.`position_finish` WHERE `user_id` = '51905058' LIMIT 0,1000 
2022-03-17 14:37:04.583 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionFinish - ==> Parameters: 
2022-03-17 14:37:04.672 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionFinish - <==      Total: 1
2022-03-17 14:37:04.673 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 14:37:04.674 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 14:37:04.763 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 14:37:04.766 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 账户初始金额:130.1337786，盈亏金额:1.383300，手续费:0.866774，返的手续费:0，最后金额:130.650304
2022-03-17 14:49:33.686 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Retrograde clock change detected (housekeeper delta=29s843ms), soft-evicting connections from pool.
2022-03-17 14:55:12.742 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m9s11ms).
2022-03-17 16:08:38.253 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 16:08:38.258 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 16:08:59.930 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5007 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 16:09:04.940 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 26230 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 16:09:04.941 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 16:09:05.750 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:09:05.753 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 16:09:05.769 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 16:09:05.774 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:09:05.775 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 16:09:05.781 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 16:09:05.791 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:09:05.792 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 16:09:05.806 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2022-03-17 16:09:06.441 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 16:09:06.450 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 16:09:06.450 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 16:09:06.450 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 16:09:06.567 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 16:09:06.567 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1569 ms
2022-03-17 16:09:07.670 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 16:09:08.404 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 16:09:08.405 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 16:09:08.406 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 16:09:08.628 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 16:09:08.644 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 16:09:08.656 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.351 seconds (JVM running for 25.009)
2022-03-17 16:09:16.926 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 16:09:16.927 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 16:09:16.928 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 16:09:17.206 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 16:09:18.599 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 16:09:18.611 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:09:18.644 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:09:18.904 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:09:18.909 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:09:18.910 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:09:18.998 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:09:19.000 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:09:19.001 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 16:09:19.089 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 16:09:28.428 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:09:28.429 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:09:28.538 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:09:28.539 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:09:28.539 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:09:28.700 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:09:28.701 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:09:28.702 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 16:09:28.791 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 16:09:41.370 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:09:41.371 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:09:41.461 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:09:41.462 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:09:41.462 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:09:41.568 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:09:41.569 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:09:41.570 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 16:09:41.657 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 16:10:01.443 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:10:01.443 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:10:01.535 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:10:01.536 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:10:01.536 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:10:01.627 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:10:01.627 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:10:01.628 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 16:10:01.879 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 16:10:36.685 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:10:36.686 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:10:36.795 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:10:36.796 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:10:36.796 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:10:36.886 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:10:36.888 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:10:36.889 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 16:10:36.980 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 16:14:36.982 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 16:14:36.991 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 16:14:57.370 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5005 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 16:15:02.380 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 26271 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 16:15:02.381 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 16:15:03.173 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:15:03.175 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 16:15:03.194 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 16:15:03.199 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:15:03.200 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 16:15:03.208 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 16:15:03.218 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:15:03.220 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 16:15:03.233 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-03-17 16:15:03.879 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 16:15:03.889 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 16:15:03.889 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 16:15:03.889 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 16:15:04.008 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 16:15:04.008 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1574 ms
2022-03-17 16:15:05.109 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 16:15:05.963 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 16:15:05.965 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 16:15:05.965 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 16:15:06.227 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 16:15:06.248 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 16:15:06.259 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.411 seconds (JVM running for 24.907)
2022-03-17 16:15:10.432 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 16:15:10.433 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 16:15:10.434 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 16:15:10.685 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 16:15:13.155 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 16:15:13.167 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:15:13.198 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:15:13.317 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:15:13.322 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:15:13.322 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:15:13.621 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:15:13.623 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:15:13.624 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 16:15:13.711 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 16:15:13.850 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=10.0000000000000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=11.0000000000000000, hold=null)
2022-03-17 16:18:23.199 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 16:18:23.209 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 16:18:43.860 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5004 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 16:18:48.872 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 26286 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 16:18:48.874 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 16:18:49.762 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:18:49.764 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 16:18:49.785 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 16:18:49.790 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:18:49.791 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 16:18:49.803 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 16:18:49.815 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:18:49.817 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 16:18:49.833 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2022-03-17 16:18:50.540 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 16:18:50.551 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 16:18:50.551 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 16:18:50.552 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 16:18:50.687 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 16:18:50.687 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1759 ms
2022-03-17 16:18:51.750 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 16:18:52.476 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 16:18:52.477 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 16:18:52.477 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 16:18:52.705 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 16:18:52.722 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 16:18:52.733 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.573 seconds (JVM running for 25.211)
2022-03-17 16:18:58.313 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 16:18:58.313 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 16:18:58.315 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 16:18:58.586 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 16:18:59.890 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 16:18:59.899 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:18:59.925 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:19:00.227 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:19:00.233 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:19:00.233 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:19:00.316 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:19:00.317 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:19:00.317 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 16:19:00.403 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 16:21:01.763 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 16:21:01.773 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 16:21:21.979 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5003 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 16:21:26.991 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 26302 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 16:21:26.993 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 16:21:27.892 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:21:27.895 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 16:21:27.912 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 16:21:27.917 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:21:27.918 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 16:21:27.925 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 16:21:27.937 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:21:27.939 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 16:21:27.956 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-03-17 16:21:28.613 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 16:21:28.660 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 16:21:28.661 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 16:21:28.662 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 16:21:28.770 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 16:21:28.770 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1720 ms
2022-03-17 16:21:29.836 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 16:21:30.564 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 16:21:30.566 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 16:21:30.566 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 16:21:30.795 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 16:21:30.811 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 16:21:30.822 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.432 seconds (JVM running for 24.973)
2022-03-17 16:21:34.348 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 16:21:34.349 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 16:21:34.350 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 16:21:34.602 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 16:21:36.051 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 16:21:36.062 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:21:36.091 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:21:36.217 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:21:36.223 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:21:36.223 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:21:36.452 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:21:36.454 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:21:36.455 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 16:21:36.540 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 16:22:45.649 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 16:22:45.659 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 16:23:05.687 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5006 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 16:23:10.699 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 26319 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 16:23:10.700 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 16:23:11.483 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:23:11.486 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 16:23:11.504 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 16:23:11.509 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:23:11.509 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 16:23:11.517 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 16:23:11.527 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 16:23:11.529 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 16:23:11.545 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2022-03-17 16:23:12.181 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 16:23:12.231 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 16:23:12.231 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 16:23:12.232 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 16:23:12.319 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 16:23:12.319 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1562 ms
2022-03-17 16:23:13.379 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 16:23:14.104 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 16:23:14.105 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 16:23:14.105 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 16:23:14.330 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 16:23:14.346 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 16:23:14.358 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.195 seconds (JVM running for 24.674)
2022-03-17 16:23:17.721 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 16:23:17.722 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 16:23:17.723 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 16:23:17.988 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 16:23:21.089 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 16:23:21.102 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:23:21.131 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:23:21.442 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:23:21.447 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:23:21.447 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:23:21.564 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:23:21.565 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:23:21.566 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 16:23:21.850 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 16:23:21.987 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=3.8017127200000000, hold=0.2122411200000000),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=11.0000000000000000, hold=null)
2022-03-17 16:28:21.982 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:21.984 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:28:22.082 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:28:22.083 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:22.083 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:22.182 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:22.184 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:22.184 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 16:28:22.284 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 16:28:22.321 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=10.0000000000000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=20.0814000000000000, hold=null)
2022-03-17 16:28:33.030 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 16:28:33.032 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 16:28:33.125 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 16:28:33.126 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 16:28:33.127 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 16:28:33.226 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 16:28:33.227 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:33.228 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:28:33.320 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:28:33.321 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:0.0000620000000000,hold:0E-16
2022-03-17 16:28:33.321 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:10.0,操作后，账户变化金额:-9.9999380000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:0.0000620000000000,操作后，数据库存储的总金额:0.0000620000000000
2022-03-17 16:28:33.325 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:33.325 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:33.420 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:33.420 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 16:28:33.421 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:33.422 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:28:33.517 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:28:33.519 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:33.519 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:28:33.612 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:28:33.613 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:33.614 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:28:33.719 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:28:33.719 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:33.720 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:28:33.812 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:28:33.814 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:33.814 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:28:34.078 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:28:34.081 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 16:28:34.083 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:28:34.178 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:28:34.181 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 16:28:34.182 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 16:28:34.183 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 16:28:34.309 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 49
2022-03-17 16:28:34.309 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=3, size=-2.0426450000000000, preBalance=10.0000000000000000, postBalance=7.9573550000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8845, note=单号:8845开仓保证金-2.0426450000000000, createdDate=2022-03-17 16:20:09, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0817058000000000, preBalance=7.9573550000000000, postBalance=7.8756492000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8845, note=单号:8845开仓手续费-0.0817058000000000, createdDate=2022-03-17 16:20:14, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-1.2253290000000000, preBalance=7.8756492000000000, postBalance=6.6503202000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8846, note=单号:8846开仓保证金-1.2253290000000000, createdDate=2022-03-17 16:20:17, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-0.4085160000000000, preBalance=6.6503202000000000, postBalance=6.2418042000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8847, note=单号:8847开仓保证金-0.4085160000000000, createdDate=2022-03-17 16:20:21, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0490131600000000, preBalance=6.2418042000000000, postBalance=6.1927910400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8846, note=单号:8846开仓手续费-0.0490131600000000, createdDate=2022-03-17 16:20:24, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0163406400000000, preBalance=6.1927910400000000, postBalance=6.1764504000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8847, note=单号:8847开仓手续费-0.0163406400000000, createdDate=2022-03-17 16:20:25, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-0.8169880000000000, preBalance=6.1764504000000000, postBalance=5.3594624000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8848, note=单号:8848开仓保证金-0.8169880000000000, createdDate=2022-03-17 16:20:27, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-1.6338320000000000, preBalance=5.3594624000000000, postBalance=3.7256304000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8849, note=单号:8849开仓保证金-1.6338320000000000, createdDate=2022-03-17 16:20:32, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0326795200000000, preBalance=3.7256304000000000, postBalance=3.6929508800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8848, note=单号:8848开仓手续费-0.0326795200000000, createdDate=2022-03-17 16:20:35, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0653532800000000, preBalance=3.6929508800000000, postBalance=3.6275976000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8849, note=单号:8849开仓手续费-0.0653532800000000, createdDate=2022-03-17 16:20:35, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-1.6335200000000000, preBalance=3.6275976000000000, postBalance=1.9940776000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8850, note=单号:8850开仓保证金-1.6335200000000000, createdDate=2022-03-17 16:20:40, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0653408000000000, preBalance=1.9940776000000000, postBalance=1.9287368000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8850, note=单号:8850开仓手续费-0.0653408000000000, createdDate=2022-03-17 16:20:45, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=1.9786450000000000, preBalance=1.9287368000000000, postBalance=3.8257016000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8851, note=单号:8851平仓收益1.8969648000000000, createdDate=2022-03-17 16:20:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=1.2376290000000000, preBalance=3.8257016000000000, postBalance=5.0143223600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8852, note=单号:8852平仓收益1.1886207600000000, createdDate=2022-03-17 16:20:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.3970160000000000, preBalance=5.0143223600000000, postBalance=5.3950023200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8853, note=单号:8853平仓收益0.3806799600000000, createdDate=2022-03-17 16:20:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.8353880000000000, preBalance=5.3950023200000000, postBalance=6.1977181600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8854, note=单号:8854平仓收益0.8027158400000000, createdDate=2022-03-17 16:20:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=1.6110320000000000, preBalance=6.1977181600000000, postBalance=7.7434060000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8855, note=单号:8855平仓收益1.5456878400000000, createdDate=2022-03-17 16:20:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=1.6419200000000000, preBalance=7.7434060000000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8856, note=单号:8856平仓收益1.5765758400000000, createdDate=2022-03-17 16:20:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0816802000000000, preBalance=9.3199818400000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8851, note=单号:8851平仓手续费-0.0816802000000000, createdDate=2022-03-17 16:20:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0490082400000000, preBalance=9.3199818400000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8852, note=单号:8852平仓手续费-0.0490082400000000, createdDate=2022-03-17 16:20:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0163360400000000, preBalance=9.3199818400000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8853, note=单号:8853平仓手续费-0.0163360400000000, createdDate=2022-03-17 16:20:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0326721600000000, preBalance=9.3199818400000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8854, note=单号:8854平仓手续费-0.0326721600000000, createdDate=2022-03-17 16:20:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0653441600000000, preBalance=9.3199818400000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8855, note=单号:8855平仓手续费-0.0653441600000000, createdDate=2022-03-17 16:20:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0653441600000000, preBalance=9.3199818400000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8856, note=单号:8856平仓手续费-0.0653441600000000, createdDate=2022-03-17 16:20:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-5.3060280000000000, preBalance=9.3199818400000000, postBalance=4.0139538400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8857, note=单号:8857开仓保证金-5.3060280000000000, createdDate=2022-03-17 16:23:21, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.2122411200000000, preBalance=4.0139538400000000, postBalance=3.8017127200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8857, note=单号:8857开仓手续费-0.2122411200000000, createdDate=2022-03-17 16:23:25, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-0.4082650000000000, preBalance=3.8017127200000000, postBalance=3.3934477200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8858, note=单号:8858开仓保证金-0.4082650000000000, createdDate=2022-03-17 16:23:31, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0163306000000000, preBalance=3.3934477200000000, postBalance=3.3771171200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8858, note=单号:8858开仓手续费-0.0163306000000000, createdDate=2022-03-17 16:23:35, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-0.8163880000000000, preBalance=3.3771171200000000, postBalance=2.5607291200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8859, note=单号:8859开仓保证金-0.8163880000000000, createdDate=2022-03-17 16:23:36, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-1.2242700000000000, preBalance=2.5607291200000000, postBalance=1.3364591200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8860, note=单号:8860开仓保证金-1.2242700000000000, createdDate=2022-03-17 16:23:40, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0326555200000000, preBalance=1.3364591200000000, postBalance=1.3038036000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8859, note=单号:8859开仓手续费-0.0326555200000000, createdDate=2022-03-17 16:23:45, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0489708000000000, preBalance=1.3038036000000000, postBalance=1.2548328000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8860, note=单号:8860开仓手续费-0.0489708000000000, createdDate=2022-03-17 16:23:45, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-0.4082770000000000, preBalance=1.2548328000000000, postBalance=0.8465558000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8861, note=单号:8861开仓保证金-0.4082770000000000, createdDate=2022-03-17 16:24:07, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0163310800000000, preBalance=0.8465558000000000, postBalance=0.8302247200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8861, note=单号:8861开仓手续费-0.0163310800000000, createdDate=2022-03-17 16:24:15, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-0.4083200000000000, preBalance=0.8302247200000000, postBalance=0.4219047200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8862, note=单号:8862开仓保证金-0.4083200000000000, createdDate=2022-03-17 16:24:27, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0163328000000000, preBalance=0.4219047200000000, postBalance=0.4055719200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8862, note=单号:8862开仓手续费-0.0163328000000000, createdDate=2022-03-17 16:24:35, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=5.6258280000000000, preBalance=0.4055719200000000, postBalance=5.8190308800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8863, note=单号:8863平仓收益5.4134589600000000, createdDate=2022-03-17 16:24:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.4219650000000000, preBalance=5.8190308800000000, postBalance=6.2246598000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8864, note=单号:8864平仓收益0.4056289200000000, createdDate=2022-03-17 16:24:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.8579880000000000, preBalance=6.2246598000000000, postBalance=7.0499756400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8865, note=单号:8865平仓收益0.8253158400000000, createdDate=2022-03-17 16:24:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=1.3178700000000000, preBalance=7.0499756400000000, postBalance=8.3188374000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8866, note=单号:8866平仓收益1.2688617600000000, createdDate=2022-03-17 16:24:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.3954770000000000, preBalance=8.3188374000000000, postBalance=8.6979782000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8867, note=单号:8867平仓收益0.3791408000000000, createdDate=2022-03-17 16:24:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.3998200000000000, preBalance=8.6979782000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8868, note=单号:8868平仓收益0.3834838000000000, createdDate=2022-03-17 16:24:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.2123690400000000, preBalance=9.0814620000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8863, note=单号:8863平仓手续费-0.2123690400000000, createdDate=2022-03-17 16:24:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0163360800000000, preBalance=9.0814620000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8864, note=单号:8864平仓手续费-0.0163360800000000, createdDate=2022-03-17 16:24:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0326721600000000, preBalance=9.0814620000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8865, note=单号:8865平仓手续费-0.0326721600000000, createdDate=2022-03-17 16:24:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0490082400000000, preBalance=9.0814620000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8866, note=单号:8866平仓手续费-0.0490082400000000, createdDate=2022-03-17 16:24:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0163362000000000, preBalance=9.0814620000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8867, note=单号:8867平仓手续费-0.0163362000000000, createdDate=2022-03-17 16:24:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0163362000000000, preBalance=9.0814620000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8868, note=单号:8868平仓手续费-0.0163362000000000, createdDate=2022-03-17 16:24:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-9.0814000000000000, preBalance=9.0814620000000000, postBalance=0.0000620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3906, note=转出：9.08140000, createdDate=2022-03-17 16:27:38, fromUserId=null, total=null)]
2022-03-17 16:28:34.310 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 16:28:34.311 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-2.0426450000000000
2022-03-17 16:28:34.317 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8845' LIMIT 0,1 
2022-03-17 16:28:34.317 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:28:34.470 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:28:34.471 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:34.472 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:34.583 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:34.584 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0817058000000000
2022-03-17 16:28:34.586 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8845' LIMIT 0,1000 
2022-03-17 16:28:34.587 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:34.686 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:34.687 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:34.688 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:34.779 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:34.841 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:34.841 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:35.130 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:35.131 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:35.132 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:35.226 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:35.226 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:35.226 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:35.318 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:35.319 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:35.319 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:35.412 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:35.413 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:35.414 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:35.521 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:35.524 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8845' and type=? limit 0,100 
2022-03-17 16:28:35.525 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:35.625 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:35.625 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8845,比列:0.300000,数据库:0.02451174,计算:-0.024511
2022-03-17 16:28:35.626 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8845' and type=? limit 0,100 
2022-03-17 16:28:35.626 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:35.734 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:35.735 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8845,比列:0.200000,数据库:0.01634116,计算:-0.016341
2022-03-17 16:28:35.736 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8845' and type=? limit 0,100 
2022-03-17 16:28:35.736 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:35.831 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:35.831 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8845,比列:0.300000,数据库:0.02451174,计算:-0.024511
2022-03-17 16:28:35.833 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8845' and type=? limit 0,100 
2022-03-17 16:28:35.834 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:35.926 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:35.926 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8845,比列:0.100000,数据库:0.00817058,计算:-0.008170
2022-03-17 16:28:35.927 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8845' and type=? limit 0,100 
2022-03-17 16:28:35.928 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:36.172 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:36.173 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8845,比列:0.100000,数据库:0.00817058,计算:-0.008170
2022-03-17 16:28:36.173 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-1.2253290000000000
2022-03-17 16:28:36.174 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8846' LIMIT 0,1 
2022-03-17 16:28:36.174 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:28:36.268 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:28:36.268 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:36.269 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:36.359 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:36.360 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-0.4085160000000000
2022-03-17 16:28:36.360 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8847' LIMIT 0,1 
2022-03-17 16:28:36.361 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:28:36.452 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:28:36.452 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:36.452 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:36.565 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:36.566 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0490131600000000
2022-03-17 16:28:36.567 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8846' LIMIT 0,1000 
2022-03-17 16:28:36.568 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:36.659 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:36.660 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:36.661 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:36.752 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:36.753 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:36.753 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:36.863 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:36.864 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:36.865 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:36.955 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:36.956 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:36.956 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:37.221 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:37.222 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:37.223 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:37.312 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:37.313 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:37.313 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:37.403 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:37.404 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8846' and type=? limit 0,100 
2022-03-17 16:28:37.405 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:37.495 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:37.496 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8846,比列:0.300000,数据库:0.01470394,计算:-0.014703
2022-03-17 16:28:37.497 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8846' and type=? limit 0,100 
2022-03-17 16:28:37.497 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:37.617 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:37.617 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8846,比列:0.200000,数据库:0.00980263,计算:-0.009802
2022-03-17 16:28:37.618 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8846' and type=? limit 0,100 
2022-03-17 16:28:37.618 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:37.746 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:37.747 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8846,比列:0.300000,数据库:0.01470394,计算:-0.014703
2022-03-17 16:28:37.748 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8846' and type=? limit 0,100 
2022-03-17 16:28:37.748 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:37.839 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:37.840 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8846,比列:0.100000,数据库:0.00490131,计算:-0.004901
2022-03-17 16:28:37.841 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8846' and type=? limit 0,100 
2022-03-17 16:28:37.841 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:37.933 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:37.933 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8846,比列:0.100000,数据库:0.00490131,计算:-0.004901
2022-03-17 16:28:37.934 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163406400000000
2022-03-17 16:28:37.935 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8847' LIMIT 0,1000 
2022-03-17 16:28:37.935 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:38.027 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:38.028 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:38.028 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:38.277 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:38.277 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:38.278 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:38.368 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:38.369 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:38.370 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:38.460 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:38.460 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:38.461 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:38.553 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:38.554 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:38.555 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:38.668 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:38.669 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:38.670 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:38.766 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:38.767 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8847' and type=? limit 0,100 
2022-03-17 16:28:38.768 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:38.859 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:38.860 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8847,比列:0.300000,数据库:0.00490219,计算:-0.004902
2022-03-17 16:28:38.861 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8847' and type=? limit 0,100 
2022-03-17 16:28:38.861 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:38.970 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:38.970 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8847,比列:0.200000,数据库:0.00326812,计算:-0.003268
2022-03-17 16:28:38.971 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8847' and type=? limit 0,100 
2022-03-17 16:28:38.971 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:39.064 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:39.065 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8847,比列:0.300000,数据库:0.00490219,计算:-0.004902
2022-03-17 16:28:39.065 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8847' and type=? limit 0,100 
2022-03-17 16:28:39.065 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:39.325 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:39.325 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8847,比列:0.100000,数据库:0.00163406,计算:-0.001634
2022-03-17 16:28:39.326 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8847' and type=? limit 0,100 
2022-03-17 16:28:39.327 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:39.422 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:39.422 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8847,比列:0.100000,数据库:0.00163406,计算:-0.001634
2022-03-17 16:28:39.423 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-0.8169880000000000
2022-03-17 16:28:39.423 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8848' LIMIT 0,1 
2022-03-17 16:28:39.424 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:28:39.515 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:28:39.515 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:39.515 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:39.607 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:39.607 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-1.6338320000000000
2022-03-17 16:28:39.608 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8849' LIMIT 0,1 
2022-03-17 16:28:39.608 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:28:39.718 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:28:39.719 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:39.719 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:39.821 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:39.822 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0326795200000000
2022-03-17 16:28:39.823 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8848' LIMIT 0,1000 
2022-03-17 16:28:39.823 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:39.925 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:39.926 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:39.926 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:40.033 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:40.034 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:40.035 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:40.129 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:40.129 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:40.130 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:40.372 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:40.373 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:40.374 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:40.464 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:40.465 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:40.466 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:40.556 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:40.557 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:40.557 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:40.649 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:40.650 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8848' and type=? limit 0,100 
2022-03-17 16:28:40.651 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:40.854 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:40.855 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8848,比列:0.300000,数据库:0.00980385,计算:-0.009803
2022-03-17 16:28:40.856 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8848' and type=? limit 0,100 
2022-03-17 16:28:40.856 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:40.949 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:40.949 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8848,比列:0.200000,数据库:0.00653590,计算:-0.006535
2022-03-17 16:28:40.950 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8848' and type=? limit 0,100 
2022-03-17 16:28:40.951 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:41.044 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:41.045 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8848,比列:0.300000,数据库:0.00980385,计算:-0.009803
2022-03-17 16:28:41.046 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8848' and type=? limit 0,100 
2022-03-17 16:28:41.047 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:41.138 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:41.139 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8848,比列:0.100000,数据库:0.00326795,计算:-0.003267
2022-03-17 16:28:41.140 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8848' and type=? limit 0,100 
2022-03-17 16:28:41.140 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:41.423 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:41.423 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8848,比列:0.100000,数据库:0.00326795,计算:-0.003267
2022-03-17 16:28:41.424 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0653532800000000
2022-03-17 16:28:41.425 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8849' LIMIT 0,1000 
2022-03-17 16:28:41.425 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:41.517 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:41.517 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:41.518 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:41.607 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:41.608 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:41.608 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:41.701 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:41.702 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:41.702 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:41.816 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:41.817 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:41.817 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:41.913 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:41.914 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:41.915 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:42.015 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:42.016 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:42.016 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:42.115 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:42.117 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8849' and type=? limit 0,100 
2022-03-17 16:28:42.117 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:42.210 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:42.211 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8849,比列:0.300000,数据库:0.01960598,计算:-0.019605
2022-03-17 16:28:42.213 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8849' and type=? limit 0,100 
2022-03-17 16:28:42.213 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:42.470 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:42.470 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8849,比列:0.200000,数据库:0.01307065,计算:-0.013070
2022-03-17 16:28:42.471 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8849' and type=? limit 0,100 
2022-03-17 16:28:42.472 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:42.565 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:42.565 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8849,比列:0.300000,数据库:0.01960598,计算:-0.019605
2022-03-17 16:28:42.566 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8849' and type=? limit 0,100 
2022-03-17 16:28:42.567 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:42.659 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:42.659 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8849,比列:0.100000,数据库:0.00653532,计算:-0.006535
2022-03-17 16:28:42.660 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8849' and type=? limit 0,100 
2022-03-17 16:28:42.660 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:42.753 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:42.753 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8849,比列:0.100000,数据库:0.00653532,计算:-0.006535
2022-03-17 16:28:42.753 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-1.6335200000000000
2022-03-17 16:28:42.754 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8850' LIMIT 0,1 
2022-03-17 16:28:42.754 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:28:42.865 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:28:42.866 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:42.867 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:42.956 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:42.956 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0653408000000000
2022-03-17 16:28:42.957 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8850' LIMIT 0,1000 
2022-03-17 16:28:42.958 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:43.054 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:43.055 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:43.056 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:43.154 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:43.155 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:43.155 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:43.249 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:43.250 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:43.250 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:43.519 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:43.520 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:43.520 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:43.610 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:43.611 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:43.611 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:43.703 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:43.704 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:43.704 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:43.802 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:43.803 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8850' and type=? limit 0,100 
2022-03-17 16:28:43.803 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:43.911 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:43.911 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8850,比列:0.300000,数据库:0.01960224,计算:-0.019602
2022-03-17 16:28:43.912 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8850' and type=? limit 0,100 
2022-03-17 16:28:43.913 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:44.024 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:44.025 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8850,比列:0.200000,数据库:0.01306816,计算:-0.013068
2022-03-17 16:28:44.026 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8850' and type=? limit 0,100 
2022-03-17 16:28:44.026 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:44.119 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:44.119 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8850,比列:0.300000,数据库:0.01960224,计算:-0.019602
2022-03-17 16:28:44.120 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8850' and type=? limit 0,100 
2022-03-17 16:28:44.120 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:44.215 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:44.216 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8850,比列:0.100000,数据库:0.00653408,计算:-0.006534
2022-03-17 16:28:44.216 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8850' and type=? limit 0,100 
2022-03-17 16:28:44.217 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:44.309 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:44.310 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8850,比列:0.100000,数据库:0.00653408,计算:-0.006534
2022-03-17 16:28:44.310 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:1.9786450000000000
2022-03-17 16:28:44.310 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8851' LIMIT 0,1000 
2022-03-17 16:28:44.311 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:44.568 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:44.569 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:44.569 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:44.659 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:44.660 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8851' LIMIT 0,1000 
2022-03-17 16:28:44.661 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:44.751 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:44.752 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:44.753 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:44.846 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:44.848 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8851' and type=? limit 0,1 
2022-03-17 16:28:44.849 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:28:44.965 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:28:44.966 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8851,数据库:0.06400000,计算得:-0.064000
2022-03-17 16:28:44.966 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:1.2376290000000000
2022-03-17 16:28:44.967 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8852' LIMIT 0,1000 
2022-03-17 16:28:44.967 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:45.070 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:45.070 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:45.071 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:45.170 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:45.171 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8852' LIMIT 0,1000 
2022-03-17 16:28:45.172 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:45.276 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:45.276 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:45.276 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:45.368 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:45.369 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8852' and type=? limit 0,1 
2022-03-17 16:28:45.370 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:28:45.617 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:28:45.618 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8852,数据库:-0.01230000,计算得:0.012300
2022-03-17 16:28:45.618 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.3970160000000000
2022-03-17 16:28:45.618 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8853' LIMIT 0,1000 
2022-03-17 16:28:45.619 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:45.714 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:45.715 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:45.715 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:45.806 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:45.807 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8853' LIMIT 0,1000 
2022-03-17 16:28:45.807 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:45.901 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:45.902 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:45.902 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:46.008 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:46.010 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8853' and type=? limit 0,1 
2022-03-17 16:28:46.010 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:28:46.103 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:28:46.104 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8853,数据库:0.01150000,计算得:-0.011500
2022-03-17 16:28:46.104 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.8353880000000000
2022-03-17 16:28:46.104 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8854' LIMIT 0,1000 
2022-03-17 16:28:46.105 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:46.197 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:46.198 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:46.198 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:46.298 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:46.299 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8854' LIMIT 0,1000 
2022-03-17 16:28:46.299 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:46.390 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:46.391 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:46.391 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:46.665 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:46.666 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8854' and type=? limit 0,1 
2022-03-17 16:28:46.667 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:28:46.757 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:28:46.758 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8854,数据库:-0.01840000,计算得:0.018400
2022-03-17 16:28:46.758 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:1.6110320000000000
2022-03-17 16:28:46.759 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8855' LIMIT 0,1000 
2022-03-17 16:28:46.759 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:46.849 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:46.850 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:46.850 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:46.940 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:46.941 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8855' LIMIT 0,1000 
2022-03-17 16:28:46.942 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:47.055 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:47.056 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:47.056 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:47.196 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:47.198 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8855' and type=? limit 0,1 
2022-03-17 16:28:47.198 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:28:47.292 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:28:47.293 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8855,数据库:0.02280000,计算得:-0.022800
2022-03-17 16:28:47.293 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:1.6419200000000000
2022-03-17 16:28:47.293 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8856' LIMIT 0,1000 
2022-03-17 16:28:47.294 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:47.385 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:47.386 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:47.387 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:47.479 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:47.481 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8856' LIMIT 0,1000 
2022-03-17 16:28:47.482 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:47.714 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:47.715 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:47.715 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:47.806 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:47.806 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8856' and type=? limit 0,1 
2022-03-17 16:28:47.807 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:28:47.898 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:28:47.898 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8856,数据库:-0.00840000,计算得:0.008400
2022-03-17 16:28:47.899 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0816802000000000
2022-03-17 16:28:47.899 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8851' LIMIT 0,1000 
2022-03-17 16:28:47.899 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:47.994 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:47.995 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:47.995 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:48.106 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:48.107 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:48.108 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:48.210 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:48.211 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:48.211 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:48.332 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:48.333 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:48.333 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:48.423 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:48.424 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:48.424 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:48.515 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:48.515 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:48.515 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:48.763 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:48.764 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8851' and type=? limit 0,100 
2022-03-17 16:28:48.765 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:48.856 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:48.856 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8851,比列:0.300000,数据库:0.02450406,计算:-0.024504
2022-03-17 16:28:48.857 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8851' and type=? limit 0,100 
2022-03-17 16:28:48.857 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:48.952 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:48.953 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8851,比列:0.200000,数据库:0.01633604,计算:-0.016336
2022-03-17 16:28:48.954 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8851' and type=? limit 0,100 
2022-03-17 16:28:48.954 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:49.046 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:49.046 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8851,比列:0.300000,数据库:0.02450406,计算:-0.024504
2022-03-17 16:28:49.048 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8851' and type=? limit 0,100 
2022-03-17 16:28:49.049 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:49.156 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:49.156 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8851,比列:0.100000,数据库:0.00816802,计算:-0.008168
2022-03-17 16:28:49.157 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8851' and type=? limit 0,100 
2022-03-17 16:28:49.157 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:49.253 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:49.254 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8851,比列:0.100000,数据库:0.00816802,计算:-0.008168
2022-03-17 16:28:49.254 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0490082400000000
2022-03-17 16:28:49.254 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8852' LIMIT 0,1000 
2022-03-17 16:28:49.254 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:49.358 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:49.359 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:49.359 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:49.449 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:49.450 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:49.450 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:49.541 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:49.542 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:49.542 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:49.810 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:49.811 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:49.811 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:49.903 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:49.904 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:49.904 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:49.996 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:49.997 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:49.997 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:50.089 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:50.090 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8852' and type=? limit 0,100 
2022-03-17 16:28:50.090 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:50.204 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:50.204 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8852,比列:0.300000,数据库:0.01470247,计算:-0.014702
2022-03-17 16:28:50.205 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8852' and type=? limit 0,100 
2022-03-17 16:28:50.205 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:50.332 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:50.332 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8852,比列:0.200000,数据库:0.00980164,计算:-0.009801
2022-03-17 16:28:50.333 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8852' and type=? limit 0,100 
2022-03-17 16:28:50.333 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:50.424 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:50.425 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8852,比列:0.300000,数据库:0.01470247,计算:-0.014702
2022-03-17 16:28:50.425 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8852' and type=? limit 0,100 
2022-03-17 16:28:50.426 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:50.519 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:50.519 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8852,比列:0.100000,数据库:0.00490082,计算:-0.004900
2022-03-17 16:28:50.520 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8852' and type=? limit 0,100 
2022-03-17 16:28:50.520 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:50.612 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:50.612 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8852,比列:0.100000,数据库:0.00490082,计算:-0.004900
2022-03-17 16:28:50.612 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0163360400000000
2022-03-17 16:28:50.613 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8853' LIMIT 0,1000 
2022-03-17 16:28:50.614 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:50.862 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:50.863 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:50.864 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:50.954 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:50.955 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:50.955 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:51.051 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:51.051 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:51.052 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:51.142 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:51.142 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:51.142 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:51.252 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:51.253 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:51.253 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:51.357 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:51.357 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:51.357 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:51.470 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:51.471 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8853' and type=? limit 0,100 
2022-03-17 16:28:51.472 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:51.565 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:51.566 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8853,比列:0.300000,数据库:0.00490081,计算:-0.004900
2022-03-17 16:28:51.566 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8853' and type=? limit 0,100 
2022-03-17 16:28:51.567 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:51.658 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:51.658 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8853,比列:0.200000,数据库:0.00326720,计算:-0.003267
2022-03-17 16:28:51.659 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8853' and type=? limit 0,100 
2022-03-17 16:28:51.659 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:51.908 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:51.909 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8853,比列:0.300000,数据库:0.00490081,计算:-0.004900
2022-03-17 16:28:51.909 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8853' and type=? limit 0,100 
2022-03-17 16:28:51.910 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:52.002 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:52.003 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8853,比列:0.100000,数据库:0.00163360,计算:-0.001633
2022-03-17 16:28:52.004 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8853' and type=? limit 0,100 
2022-03-17 16:28:52.004 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:52.102 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:52.102 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8853,比列:0.100000,数据库:0.00163360,计算:-0.001633
2022-03-17 16:28:52.103 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0326721600000000
2022-03-17 16:28:52.103 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8854' LIMIT 0,1000 
2022-03-17 16:28:52.103 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:52.199 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:52.200 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:52.200 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:52.302 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:52.303 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:52.303 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:52.395 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:52.395 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:52.396 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:52.487 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:52.488 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:52.489 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:52.594 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:52.595 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:52.596 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:52.687 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:52.688 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:52.688 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:52.961 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:52.962 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8854' and type=? limit 0,100 
2022-03-17 16:28:52.963 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:53.057 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:53.058 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8854,比列:0.300000,数据库:0.00980164,计算:-0.009801
2022-03-17 16:28:53.058 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8854' and type=? limit 0,100 
2022-03-17 16:28:53.059 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:53.156 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:53.156 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8854,比列:0.200000,数据库:0.00653443,计算:-0.006534
2022-03-17 16:28:53.157 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8854' and type=? limit 0,100 
2022-03-17 16:28:53.158 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:53.350 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:53.351 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8854,比列:0.300000,数据库:0.00980164,计算:-0.009801
2022-03-17 16:28:53.352 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8854' and type=? limit 0,100 
2022-03-17 16:28:53.352 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:53.471 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:53.471 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8854,比列:0.100000,数据库:0.00326721,计算:-0.003267
2022-03-17 16:28:53.472 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8854' and type=? limit 0,100 
2022-03-17 16:28:53.473 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:53.566 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:53.567 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8854,比列:0.100000,数据库:0.00326721,计算:-0.003267
2022-03-17 16:28:53.567 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0653441600000000
2022-03-17 16:28:53.567 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8855' LIMIT 0,1000 
2022-03-17 16:28:53.568 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:53.660 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:53.661 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:53.661 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:53.752 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:53.753 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:53.753 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:54.004 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:54.004 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:54.005 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:54.096 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:54.097 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:54.098 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:54.190 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:54.190 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:54.190 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:54.285 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:54.285 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:54.286 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:54.401 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:54.402 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8855' and type=? limit 0,100 
2022-03-17 16:28:54.402 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:54.502 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:54.503 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8855,比列:0.300000,数据库:0.01960324,计算:-0.019603
2022-03-17 16:28:54.503 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8855' and type=? limit 0,100 
2022-03-17 16:28:54.504 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:54.612 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:54.612 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8855,比列:0.200000,数据库:0.01306883,计算:-0.013068
2022-03-17 16:28:54.613 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8855' and type=? limit 0,100 
2022-03-17 16:28:54.614 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:54.706 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:54.707 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8855,比列:0.300000,数据库:0.01960324,计算:-0.019603
2022-03-17 16:28:54.707 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8855' and type=? limit 0,100 
2022-03-17 16:28:54.708 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:54.799 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:54.800 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8855,比列:0.100000,数据库:0.00653441,计算:-0.006534
2022-03-17 16:28:54.800 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8855' and type=? limit 0,100 
2022-03-17 16:28:54.801 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:55.053 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:55.054 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8855,比列:0.100000,数据库:0.00653441,计算:-0.006534
2022-03-17 16:28:55.054 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0653441600000000
2022-03-17 16:28:55.055 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8856' LIMIT 0,1000 
2022-03-17 16:28:55.055 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:55.150 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:55.150 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:55.151 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:55.246 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:55.247 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:55.248 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:55.337 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:55.345 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:55.345 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:55.446 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:55.446 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:55.446 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:55.536 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:55.536 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:55.536 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:55.626 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:55.627 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:55.627 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:55.737 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:55.738 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8856' and type=? limit 0,100 
2022-03-17 16:28:55.738 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:55.831 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:55.831 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8856,比列:0.300000,数据库:0.01960324,计算:-0.019603
2022-03-17 16:28:55.832 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8856' and type=? limit 0,100 
2022-03-17 16:28:55.832 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:56.101 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:56.101 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8856,比列:0.200000,数据库:0.01306883,计算:-0.013068
2022-03-17 16:28:56.102 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8856' and type=? limit 0,100 
2022-03-17 16:28:56.102 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:56.192 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:56.192 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8856,比列:0.300000,数据库:0.01960324,计算:-0.019603
2022-03-17 16:28:56.193 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8856' and type=? limit 0,100 
2022-03-17 16:28:56.193 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:56.291 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:56.291 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8856,比列:0.100000,数据库:0.00653441,计算:-0.006534
2022-03-17 16:28:56.291 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8856' and type=? limit 0,100 
2022-03-17 16:28:56.291 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:56.386 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:56.386 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8856,比列:0.100000,数据库:0.00653441,计算:-0.006534
2022-03-17 16:28:56.386 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-5.3060280000000000
2022-03-17 16:28:56.387 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8857' LIMIT 0,1 
2022-03-17 16:28:56.387 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:28:56.494 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:28:56.494 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:56.495 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:56.585 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:56.585 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.2122411200000000
2022-03-17 16:28:56.585 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8857' LIMIT 0,1000 
2022-03-17 16:28:56.585 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:56.675 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:56.676 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:56.676 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:56.766 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:56.767 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:56.767 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:56.859 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:56.859 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:56.859 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:57.151 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:57.152 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:57.152 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:57.242 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:57.242 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:57.242 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:57.334 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:57.334 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:57.334 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:57.426 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:57.426 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8857' and type=? limit 0,100 
2022-03-17 16:28:57.427 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:57.544 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:57.544 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8857,比列:0.300000,数据库:0.06367233,计算:-0.063672
2022-03-17 16:28:57.544 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8857' and type=? limit 0,100 
2022-03-17 16:28:57.545 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:57.647 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:57.647 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8857,比列:0.200000,数据库:0.04244822,计算:-0.042448
2022-03-17 16:28:57.648 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8857' and type=? limit 0,100 
2022-03-17 16:28:57.648 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:57.754 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:57.754 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8857,比列:0.300000,数据库:0.06367233,计算:-0.063672
2022-03-17 16:28:57.755 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8857' and type=? limit 0,100 
2022-03-17 16:28:57.755 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:57.845 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:57.845 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8857,比列:0.100000,数据库:0.02122411,计算:-0.021224
2022-03-17 16:28:57.846 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8857' and type=? limit 0,100 
2022-03-17 16:28:57.846 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:57.947 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:57.947 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8857,比列:0.100000,数据库:0.02122411,计算:-0.021224
2022-03-17 16:28:57.947 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-0.4082650000000000
2022-03-17 16:28:57.947 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8858' LIMIT 0,1 
2022-03-17 16:28:57.947 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:28:58.201 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:28:58.202 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:58.202 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:58.292 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:58.292 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163306000000000
2022-03-17 16:28:58.293 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8858' LIMIT 0,1000 
2022-03-17 16:28:58.293 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:28:58.384 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:28:58.384 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:58.384 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:58.474 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:58.475 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:28:58.475 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:58.591 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:58.591 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:28:58.591 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:58.684 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:58.684 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:28:58.685 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:58.774 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:58.775 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:28:58.775 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:58.880 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:28:58.881 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:28:58.881 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:28:58.973 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:28:58.974 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8858' and type=? limit 0,100 
2022-03-17 16:28:58.974 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:28:59.248 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:59.248 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8858,比列:0.300000,数据库:0.00489918,计算:-0.004899
2022-03-17 16:28:59.249 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8858' and type=? limit 0,100 
2022-03-17 16:28:59.249 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:28:59.342 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:59.343 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8858,比列:0.200000,数据库:0.00326612,计算:-0.003266
2022-03-17 16:28:59.343 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8858' and type=? limit 0,100 
2022-03-17 16:28:59.343 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:28:59.441 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:59.441 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8858,比列:0.300000,数据库:0.00489918,计算:-0.004899
2022-03-17 16:28:59.442 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8858' and type=? limit 0,100 
2022-03-17 16:28:59.442 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:28:59.535 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:59.536 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8858,比列:0.100000,数据库:0.00163306,计算:-0.001633
2022-03-17 16:28:59.536 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8858' and type=? limit 0,100 
2022-03-17 16:28:59.537 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:28:59.648 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:28:59.648 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8858,比列:0.100000,数据库:0.00163306,计算:-0.001633
2022-03-17 16:28:59.648 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-0.8163880000000000
2022-03-17 16:28:59.649 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8859' LIMIT 0,1 
2022-03-17 16:28:59.649 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:28:59.741 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:28:59.741 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:59.741 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:28:59.833 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:28:59.834 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-1.2242700000000000
2022-03-17 16:28:59.834 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8860' LIMIT 0,1 
2022-03-17 16:28:59.834 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:28:59.926 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:28:59.926 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:28:59.926 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:00.024 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:00.025 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0326555200000000
2022-03-17 16:29:00.026 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8859' LIMIT 0,1000 
2022-03-17 16:29:00.026 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:00.298 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:00.299 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:00.299 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:00.390 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:00.391 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:00.391 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:00.488 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:00.488 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:00.489 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:00.579 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:00.580 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:00.580 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:00.690 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:00.691 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:00.691 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:00.795 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:00.796 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:00.796 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:00.907 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:00.908 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8859' and type=? limit 0,100 
2022-03-17 16:29:00.908 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:00.998 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:00.999 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8859,比列:0.300000,数据库:0.00979665,计算:-0.009796
2022-03-17 16:29:01.000 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8859' and type=? limit 0,100 
2022-03-17 16:29:01.001 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:01.106 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:01.106 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8859,比列:0.200000,数据库:0.00653110,计算:-0.006531
2022-03-17 16:29:01.107 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8859' and type=? limit 0,100 
2022-03-17 16:29:01.107 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:01.349 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:01.349 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8859,比列:0.300000,数据库:0.00979665,计算:-0.009796
2022-03-17 16:29:01.350 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8859' and type=? limit 0,100 
2022-03-17 16:29:01.350 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:01.441 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:01.441 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8859,比列:0.100000,数据库:0.00326555,计算:-0.003265
2022-03-17 16:29:01.442 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8859' and type=? limit 0,100 
2022-03-17 16:29:01.442 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:01.534 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:01.534 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8859,比列:0.100000,数据库:0.00326555,计算:-0.003265
2022-03-17 16:29:01.534 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0489708000000000
2022-03-17 16:29:01.535 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8860' LIMIT 0,1000 
2022-03-17 16:29:01.535 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:01.627 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:01.628 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:01.628 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:01.740 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:01.740 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:01.741 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:01.831 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:01.831 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:01.831 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:01.927 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:01.928 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:01.928 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:02.033 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:02.034 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:02.034 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:02.126 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:02.127 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:02.127 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:02.400 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:02.400 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8860' and type=? limit 0,100 
2022-03-17 16:29:02.401 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:02.492 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:02.492 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8860,比列:0.300000,数据库:0.01469124,计算:-0.014691
2022-03-17 16:29:02.492 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8860' and type=? limit 0,100 
2022-03-17 16:29:02.492 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:02.586 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:02.586 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8860,比列:0.200000,数据库:0.00979416,计算:-0.009794
2022-03-17 16:29:02.587 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8860' and type=? limit 0,100 
2022-03-17 16:29:02.588 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:02.678 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:02.679 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8860,比列:0.300000,数据库:0.01469124,计算:-0.014691
2022-03-17 16:29:02.679 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8860' and type=? limit 0,100 
2022-03-17 16:29:02.679 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:02.823 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:02.823 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8860,比列:0.100000,数据库:0.00489708,计算:-0.004897
2022-03-17 16:29:02.824 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8860' and type=? limit 0,100 
2022-03-17 16:29:02.824 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:02.915 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:02.915 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8860,比列:0.100000,数据库:0.00489708,计算:-0.004897
2022-03-17 16:29:02.915 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-0.4082770000000000
2022-03-17 16:29:02.916 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8861' LIMIT 0,1 
2022-03-17 16:29:02.916 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:29:03.023 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:29:03.025 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:03.026 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:03.115 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:03.116 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163310800000000
2022-03-17 16:29:03.116 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8861' LIMIT 0,1000 
2022-03-17 16:29:03.116 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:03.216 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:03.217 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:03.217 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:03.447 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:03.448 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:03.448 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:03.541 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:03.541 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:03.541 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:03.631 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:03.631 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:03.631 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:03.720 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:03.721 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:03.721 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:03.840 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:03.840 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:03.840 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:03.941 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:03.941 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8861' and type=? limit 0,100 
2022-03-17 16:29:03.941 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:04.055 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:04.055 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8861,比列:0.300000,数据库:0.00489932,计算:-0.004899
2022-03-17 16:29:04.056 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8861' and type=? limit 0,100 
2022-03-17 16:29:04.056 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:04.146 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:04.146 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8861,比列:0.200000,数据库:0.00326621,计算:-0.003266
2022-03-17 16:29:04.147 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8861' and type=? limit 0,100 
2022-03-17 16:29:04.147 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:04.237 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:04.238 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8861,比列:0.300000,数据库:0.00489932,计算:-0.004899
2022-03-17 16:29:04.238 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8861' and type=? limit 0,100 
2022-03-17 16:29:04.238 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:04.497 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:04.497 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8861,比列:0.100000,数据库:0.00163310,计算:-0.001633
2022-03-17 16:29:04.498 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8861' and type=? limit 0,100 
2022-03-17 16:29:04.498 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:04.587 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:04.588 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8861,比列:0.100000,数据库:0.00163310,计算:-0.001633
2022-03-17 16:29:04.588 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-0.4083200000000000
2022-03-17 16:29:04.588 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8862' LIMIT 0,1 
2022-03-17 16:29:04.588 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:29:04.679 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:29:04.680 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:04.680 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:04.769 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:04.769 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163328000000000
2022-03-17 16:29:04.769 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8862' LIMIT 0,1000 
2022-03-17 16:29:04.769 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:04.888 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:04.889 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:04.890 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:04.982 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:04.983 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:04.983 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:05.074 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:05.075 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:05.075 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:05.178 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:05.179 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:05.179 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:05.277 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:05.277 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:05.278 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:05.544 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:05.544 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:05.545 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:05.635 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:05.635 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8862' and type=? limit 0,100 
2022-03-17 16:29:05.636 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:05.725 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:05.726 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8862,比列:0.300000,数据库:0.00489984,计算:-0.004899
2022-03-17 16:29:05.726 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8862' and type=? limit 0,100 
2022-03-17 16:29:05.726 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:05.816 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:05.816 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8862,比列:0.200000,数据库:0.00326656,计算:-0.003266
2022-03-17 16:29:05.817 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8862' and type=? limit 0,100 
2022-03-17 16:29:05.817 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:05.935 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:05.935 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8862,比列:0.300000,数据库:0.00489984,计算:-0.004899
2022-03-17 16:29:05.936 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8862' and type=? limit 0,100 
2022-03-17 16:29:05.936 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:06.042 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:06.042 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8862,比列:0.100000,数据库:0.00163328,计算:-0.001633
2022-03-17 16:29:06.043 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8862' and type=? limit 0,100 
2022-03-17 16:29:06.043 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:06.133 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:06.133 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8862,比列:0.100000,数据库:0.00163328,计算:-0.001633
2022-03-17 16:29:06.133 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:5.6258280000000000
2022-03-17 16:29:06.133 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8863' LIMIT 0,1000 
2022-03-17 16:29:06.133 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:06.234 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:06.234 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:06.235 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:06.325 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:06.325 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8863' LIMIT 0,1000 
2022-03-17 16:29:06.325 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:06.597 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:06.598 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:06.599 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:06.689 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:06.690 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8863' and type=? limit 0,1 
2022-03-17 16:29:06.690 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:29:06.782 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:29:06.782 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8863,数据库:-0.31980000,计算得:0.319800
2022-03-17 16:29:06.783 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.4219650000000000
2022-03-17 16:29:06.783 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8864' LIMIT 0,1000 
2022-03-17 16:29:06.783 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:06.874 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:06.874 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:06.875 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:06.988 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:06.989 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8864' LIMIT 0,1000 
2022-03-17 16:29:06.990 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:07.096 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:07.097 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:07.097 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:07.209 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:07.210 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8864' and type=? limit 0,1 
2022-03-17 16:29:07.210 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:29:07.301 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:29:07.301 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8864,数据库:-0.01370000,计算得:0.013700
2022-03-17 16:29:07.301 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.8579880000000000
2022-03-17 16:29:07.302 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8865' LIMIT 0,1000 
2022-03-17 16:29:07.302 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:07.392 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:07.392 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:07.392 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:07.643 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:07.643 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8865' LIMIT 0,1000 
2022-03-17 16:29:07.644 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:07.736 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:07.736 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:07.737 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:07.827 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:07.828 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8865' and type=? limit 0,1 
2022-03-17 16:29:07.829 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:29:07.920 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:29:07.920 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8865,数据库:-0.04160000,计算得:0.041600
2022-03-17 16:29:07.920 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:1.3178700000000000
2022-03-17 16:29:07.920 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8866' LIMIT 0,1000 
2022-03-17 16:29:07.920 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:08.036 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:08.037 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:08.037 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:08.127 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:08.128 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8866' LIMIT 0,1000 
2022-03-17 16:29:08.128 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:08.220 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:08.220 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:08.221 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:08.326 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:08.327 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8866' and type=? limit 0,1 
2022-03-17 16:29:08.327 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:29:08.421 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:29:08.421 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8866,数据库:-0.09360000,计算得:0.093600
2022-03-17 16:29:08.422 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.3954770000000000
2022-03-17 16:29:08.422 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8867' LIMIT 0,1000 
2022-03-17 16:29:08.422 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:08.695 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:08.695 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:08.696 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:08.787 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:08.787 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8867' LIMIT 0,1000 
2022-03-17 16:29:08.788 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:08.878 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:08.879 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:08.879 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:08.970 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:08.971 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8867' and type=? limit 0,1 
2022-03-17 16:29:08.972 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:29:09.182 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:29:09.182 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8867,数据库:0.01280000,计算得:-0.012800
2022-03-17 16:29:09.182 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.3998200000000000
2022-03-17 16:29:09.183 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8868' LIMIT 0,1000 
2022-03-17 16:29:09.183 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:09.287 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:09.288 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:09.288 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:09.383 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:09.384 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8868' LIMIT 0,1000 
2022-03-17 16:29:09.385 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:09.477 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:09.477 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:09.478 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:09.742 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:09.743 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8868' and type=? limit 0,1 
2022-03-17 16:29:09.743 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:29:09.834 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:29:09.835 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8868,数据库:0.00850000,计算得:-0.008500
2022-03-17 16:29:09.835 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.2123690400000000
2022-03-17 16:29:09.836 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8863' LIMIT 0,1000 
2022-03-17 16:29:09.836 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:09.928 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:09.929 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:09.930 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:10.020 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:10.021 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:10.021 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:10.135 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:10.135 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:10.136 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:10.235 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:10.235 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:10.236 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:10.356 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:10.356 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:10.357 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:10.447 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:10.448 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:10.448 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:10.537 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:10.538 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8863' and type=? limit 0,100 
2022-03-17 16:29:10.538 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:10.794 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:10.794 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8863,比列:0.300000,数据库:0.06371071,计算:-0.063710
2022-03-17 16:29:10.795 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8863' and type=? limit 0,100 
2022-03-17 16:29:10.795 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:10.886 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:10.886 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8863,比列:0.200000,数据库:0.04247380,计算:-0.042473
2022-03-17 16:29:10.887 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8863' and type=? limit 0,100 
2022-03-17 16:29:10.887 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:10.977 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:10.977 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8863,比列:0.300000,数据库:0.06371071,计算:-0.063710
2022-03-17 16:29:10.978 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8863' and type=? limit 0,100 
2022-03-17 16:29:10.979 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:11.069 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:11.069 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8863,比列:0.100000,数据库:0.02123690,计算:-0.021236
2022-03-17 16:29:11.070 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8863' and type=? limit 0,100 
2022-03-17 16:29:11.070 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:11.185 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:11.185 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8863,比列:0.100000,数据库:0.02123690,计算:-0.021236
2022-03-17 16:29:11.186 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0163360800000000
2022-03-17 16:29:11.186 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8864' LIMIT 0,1000 
2022-03-17 16:29:11.186 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:11.288 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:11.288 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:11.288 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:11.381 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:11.382 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:11.382 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:11.487 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:11.487 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:11.488 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:11.581 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:11.582 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:11.582 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:11.838 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:11.838 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:11.838 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:11.927 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:11.928 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:11.928 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:12.017 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:12.018 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8864' and type=? limit 0,100 
2022-03-17 16:29:12.018 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:12.109 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:12.109 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8864,比列:0.300000,数据库:0.00490082,计算:-0.004900
2022-03-17 16:29:12.109 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8864' and type=? limit 0,100 
2022-03-17 16:29:12.110 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:12.231 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:12.232 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8864,比列:0.200000,数据库:0.00326721,计算:-0.003267
2022-03-17 16:29:12.232 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8864' and type=? limit 0,100 
2022-03-17 16:29:12.232 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:12.327 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:12.328 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8864,比列:0.300000,数据库:0.00490082,计算:-0.004900
2022-03-17 16:29:12.328 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8864' and type=? limit 0,100 
2022-03-17 16:29:12.329 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:12.428 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:12.428 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8864,比列:0.100000,数据库:0.00163360,计算:-0.001633
2022-03-17 16:29:12.429 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8864' and type=? limit 0,100 
2022-03-17 16:29:12.429 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:12.526 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:12.527 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8864,比列:0.100000,数据库:0.00163360,计算:-0.001633
2022-03-17 16:29:12.527 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0326721600000000
2022-03-17 16:29:12.527 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8865' LIMIT 0,1000 
2022-03-17 16:29:12.527 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:12.627 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:12.627 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:12.627 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:12.889 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:12.890 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:12.890 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:12.987 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:12.987 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:12.987 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:13.087 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:13.088 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:13.088 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:13.186 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:13.186 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:13.186 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:13.282 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:13.282 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:13.283 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:13.384 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:13.385 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8865' and type=? limit 0,100 
2022-03-17 16:29:13.385 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:13.499 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:13.499 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8865,比列:0.300000,数据库:0.00980164,计算:-0.009801
2022-03-17 16:29:13.501 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8865' and type=? limit 0,100 
2022-03-17 16:29:13.501 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:13.594 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:13.595 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8865,比列:0.200000,数据库:0.00653443,计算:-0.006534
2022-03-17 16:29:13.595 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8865' and type=? limit 0,100 
2022-03-17 16:29:13.596 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:13.687 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:13.688 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8865,比列:0.300000,数据库:0.00980164,计算:-0.009801
2022-03-17 16:29:13.688 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8865' and type=? limit 0,100 
2022-03-17 16:29:13.689 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:13.938 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:13.938 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8865,比列:0.100000,数据库:0.00326721,计算:-0.003267
2022-03-17 16:29:13.939 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8865' and type=? limit 0,100 
2022-03-17 16:29:13.939 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:14.033 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:14.034 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8865,比列:0.100000,数据库:0.00326721,计算:-0.003267
2022-03-17 16:29:14.034 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0490082400000000
2022-03-17 16:29:14.035 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8866' LIMIT 0,1000 
2022-03-17 16:29:14.035 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:14.132 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:14.132 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:14.132 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:14.225 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:14.225 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:14.226 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:14.316 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:14.317 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:14.317 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:14.408 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:14.409 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:14.410 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:14.502 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:14.502 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:14.503 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:14.594 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:14.594 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:14.595 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:14.685 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:14.686 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8866' and type=? limit 0,100 
2022-03-17 16:29:14.686 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:14.777 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:14.778 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8866,比列:0.300000,数据库:0.01470247,计算:-0.014702
2022-03-17 16:29:14.779 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8866' and type=? limit 0,100 
2022-03-17 16:29:14.779 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:14.870 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:14.870 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8866,比列:0.200000,数据库:0.00980164,计算:-0.009801
2022-03-17 16:29:14.871 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8866' and type=? limit 0,100 
2022-03-17 16:29:14.871 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:14.964 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:14.964 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8866,比列:0.300000,数据库:0.01470247,计算:-0.014702
2022-03-17 16:29:14.965 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8866' and type=? limit 0,100 
2022-03-17 16:29:14.966 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:15.058 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:15.059 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8866,比列:0.100000,数据库:0.00490082,计算:-0.004900
2022-03-17 16:29:15.060 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8866' and type=? limit 0,100 
2022-03-17 16:29:15.060 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:15.150 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:15.151 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8866,比列:0.100000,数据库:0.00490082,计算:-0.004900
2022-03-17 16:29:15.151 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0163362000000000
2022-03-17 16:29:15.152 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8867' LIMIT 0,1000 
2022-03-17 16:29:15.152 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:15.244 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:15.245 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:15.245 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:15.336 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:15.337 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:15.337 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:15.429 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:15.429 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:15.429 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:15.519 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:15.519 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:15.519 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:15.611 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:15.612 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:15.612 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:15.702 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:15.702 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:15.702 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:15.793 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:15.793 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8867' and type=? limit 0,100 
2022-03-17 16:29:15.794 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:15.883 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:15.883 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8867,比列:0.300000,数据库:0.00490086,计算:-0.004900
2022-03-17 16:29:15.884 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8867' and type=? limit 0,100 
2022-03-17 16:29:15.884 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:15.975 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:15.976 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8867,比列:0.200000,数据库:0.00326724,计算:-0.003267
2022-03-17 16:29:15.977 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8867' and type=? limit 0,100 
2022-03-17 16:29:15.977 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:16.070 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:16.071 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8867,比列:0.300000,数据库:0.00490086,计算:-0.004900
2022-03-17 16:29:16.072 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8867' and type=? limit 0,100 
2022-03-17 16:29:16.072 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:16.163 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:16.164 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8867,比列:0.100000,数据库:0.00163362,计算:-0.001633
2022-03-17 16:29:16.165 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8867' and type=? limit 0,100 
2022-03-17 16:29:16.165 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:16.273 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:16.274 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8867,比列:0.100000,数据库:0.00163362,计算:-0.001633
2022-03-17 16:29:16.274 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0163362000000000
2022-03-17 16:29:16.275 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8868' LIMIT 0,1000 
2022-03-17 16:29:16.275 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:16.377 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:16.378 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:16.378 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:16.468 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:16.469 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:16.469 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:16.563 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:16.564 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:16.564 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:16.655 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:16.656 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:16.656 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:16.747 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:16.749 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:16.749 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:16.847 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:16.848 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:16.848 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:16.938 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:16.939 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8868' and type=? limit 0,100 
2022-03-17 16:29:16.940 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:17.031 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:17.031 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8868,比列:0.300000,数据库:0.00490086,计算:-0.004900
2022-03-17 16:29:17.032 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8868' and type=? limit 0,100 
2022-03-17 16:29:17.032 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:17.133 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:17.135 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8868,比列:0.200000,数据库:0.00326724,计算:-0.003267
2022-03-17 16:29:17.143 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8868' and type=? limit 0,100 
2022-03-17 16:29:17.146 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:17.265 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:17.265 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8868,比列:0.300000,数据库:0.00490086,计算:-0.004900
2022-03-17 16:29:17.265 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8868' and type=? limit 0,100 
2022-03-17 16:29:17.266 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:17.356 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:17.356 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8868,比列:0.100000,数据库:0.00163362,计算:-0.001633
2022-03-17 16:29:17.357 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8868' and type=? limit 0,100 
2022-03-17 16:29:17.357 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:17.447 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:17.448 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8868,比列:0.100000,数据库:0.00163362,计算:-0.001633
2022-03-17 16:29:17.448 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-9.0814000000000000
2022-03-17 16:29:17.448 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 16:29:30.804 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 16:29:30.805 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 16:29:30.898 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 16:29:30.899 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 16:29:30.899 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 16:29:30.994 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 16:29:30.995 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:30.996 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:29:31.109 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:29:31.125 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:5.0000620000000000,hold:0E-16
2022-03-17 16:29:31.127 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:10.0,操作后，账户变化金额:-4.9999380000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:5.0000620000000000,操作后，数据库存储的总金额:5.0000620000000000
2022-03-17 16:29:31.128 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:31.129 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:31.235 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:31.236 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 16:29:31.236 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:31.236 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:29:31.339 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:29:31.339 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:31.340 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:29:31.431 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:29:31.432 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:31.432 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:29:31.523 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:29:31.523 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:31.524 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:29:31.766 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:29:31.767 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:31.768 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:29:31.858 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:29:31.859 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 16:29:31.859 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:29:31.952 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:29:31.952 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 16:29:31.953 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 16:29:31.954 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 16:29:32.344 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 50
2022-03-17 16:29:32.344 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=3, size=-2.0426450000000000, preBalance=10.0000000000000000, postBalance=7.9573550000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8845, note=单号:8845开仓保证金-2.0426450000000000, createdDate=2022-03-17 16:20:09, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0817058000000000, preBalance=7.9573550000000000, postBalance=7.8756492000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8845, note=单号:8845开仓手续费-0.0817058000000000, createdDate=2022-03-17 16:20:14, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-1.2253290000000000, preBalance=7.8756492000000000, postBalance=6.6503202000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8846, note=单号:8846开仓保证金-1.2253290000000000, createdDate=2022-03-17 16:20:17, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-0.4085160000000000, preBalance=6.6503202000000000, postBalance=6.2418042000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8847, note=单号:8847开仓保证金-0.4085160000000000, createdDate=2022-03-17 16:20:21, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0490131600000000, preBalance=6.2418042000000000, postBalance=6.1927910400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8846, note=单号:8846开仓手续费-0.0490131600000000, createdDate=2022-03-17 16:20:24, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0163406400000000, preBalance=6.1927910400000000, postBalance=6.1764504000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8847, note=单号:8847开仓手续费-0.0163406400000000, createdDate=2022-03-17 16:20:25, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-0.8169880000000000, preBalance=6.1764504000000000, postBalance=5.3594624000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8848, note=单号:8848开仓保证金-0.8169880000000000, createdDate=2022-03-17 16:20:27, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-1.6338320000000000, preBalance=5.3594624000000000, postBalance=3.7256304000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8849, note=单号:8849开仓保证金-1.6338320000000000, createdDate=2022-03-17 16:20:32, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0326795200000000, preBalance=3.7256304000000000, postBalance=3.6929508800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8848, note=单号:8848开仓手续费-0.0326795200000000, createdDate=2022-03-17 16:20:35, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0653532800000000, preBalance=3.6929508800000000, postBalance=3.6275976000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8849, note=单号:8849开仓手续费-0.0653532800000000, createdDate=2022-03-17 16:20:35, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-1.6335200000000000, preBalance=3.6275976000000000, postBalance=1.9940776000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8850, note=单号:8850开仓保证金-1.6335200000000000, createdDate=2022-03-17 16:20:40, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0653408000000000, preBalance=1.9940776000000000, postBalance=1.9287368000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8850, note=单号:8850开仓手续费-0.0653408000000000, createdDate=2022-03-17 16:20:45, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=1.9786450000000000, preBalance=1.9287368000000000, postBalance=3.8257016000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8851, note=单号:8851平仓收益1.8969648000000000, createdDate=2022-03-17 16:20:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=1.2376290000000000, preBalance=3.8257016000000000, postBalance=5.0143223600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8852, note=单号:8852平仓收益1.1886207600000000, createdDate=2022-03-17 16:20:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.3970160000000000, preBalance=5.0143223600000000, postBalance=5.3950023200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8853, note=单号:8853平仓收益0.3806799600000000, createdDate=2022-03-17 16:20:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.8353880000000000, preBalance=5.3950023200000000, postBalance=6.1977181600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8854, note=单号:8854平仓收益0.8027158400000000, createdDate=2022-03-17 16:20:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=1.6110320000000000, preBalance=6.1977181600000000, postBalance=7.7434060000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8855, note=单号:8855平仓收益1.5456878400000000, createdDate=2022-03-17 16:20:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=1.6419200000000000, preBalance=7.7434060000000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8856, note=单号:8856平仓收益1.5765758400000000, createdDate=2022-03-17 16:20:48, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0816802000000000, preBalance=9.3199818400000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8851, note=单号:8851平仓手续费-0.0816802000000000, createdDate=2022-03-17 16:20:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0490082400000000, preBalance=9.3199818400000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8852, note=单号:8852平仓手续费-0.0490082400000000, createdDate=2022-03-17 16:20:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0163360400000000, preBalance=9.3199818400000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8853, note=单号:8853平仓手续费-0.0163360400000000, createdDate=2022-03-17 16:20:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0326721600000000, preBalance=9.3199818400000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8854, note=单号:8854平仓手续费-0.0326721600000000, createdDate=2022-03-17 16:20:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0653441600000000, preBalance=9.3199818400000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8855, note=单号:8855平仓手续费-0.0653441600000000, createdDate=2022-03-17 16:20:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0653441600000000, preBalance=9.3199818400000000, postBalance=9.3199818400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8856, note=单号:8856平仓手续费-0.0653441600000000, createdDate=2022-03-17 16:20:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-5.3060280000000000, preBalance=9.3199818400000000, postBalance=4.0139538400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8857, note=单号:8857开仓保证金-5.3060280000000000, createdDate=2022-03-17 16:23:21, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.2122411200000000, preBalance=4.0139538400000000, postBalance=3.8017127200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8857, note=单号:8857开仓手续费-0.2122411200000000, createdDate=2022-03-17 16:23:25, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-0.4082650000000000, preBalance=3.8017127200000000, postBalance=3.3934477200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8858, note=单号:8858开仓保证金-0.4082650000000000, createdDate=2022-03-17 16:23:31, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0163306000000000, preBalance=3.3934477200000000, postBalance=3.3771171200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8858, note=单号:8858开仓手续费-0.0163306000000000, createdDate=2022-03-17 16:23:35, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-0.8163880000000000, preBalance=3.3771171200000000, postBalance=2.5607291200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8859, note=单号:8859开仓保证金-0.8163880000000000, createdDate=2022-03-17 16:23:36, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-1.2242700000000000, preBalance=2.5607291200000000, postBalance=1.3364591200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8860, note=单号:8860开仓保证金-1.2242700000000000, createdDate=2022-03-17 16:23:40, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0326555200000000, preBalance=1.3364591200000000, postBalance=1.3038036000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8859, note=单号:8859开仓手续费-0.0326555200000000, createdDate=2022-03-17 16:23:45, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0489708000000000, preBalance=1.3038036000000000, postBalance=1.2548328000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8860, note=单号:8860开仓手续费-0.0489708000000000, createdDate=2022-03-17 16:23:45, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-0.4082770000000000, preBalance=1.2548328000000000, postBalance=0.8465558000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8861, note=单号:8861开仓保证金-0.4082770000000000, createdDate=2022-03-17 16:24:07, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0163310800000000, preBalance=0.8465558000000000, postBalance=0.8302247200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8861, note=单号:8861开仓手续费-0.0163310800000000, createdDate=2022-03-17 16:24:15, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-0.4083200000000000, preBalance=0.8302247200000000, postBalance=0.4219047200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8862, note=单号:8862开仓保证金-0.4083200000000000, createdDate=2022-03-17 16:24:27, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0163328000000000, preBalance=0.4219047200000000, postBalance=0.4055719200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8862, note=单号:8862开仓手续费-0.0163328000000000, createdDate=2022-03-17 16:24:35, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=5.6258280000000000, preBalance=0.4055719200000000, postBalance=5.8190308800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8863, note=单号:8863平仓收益5.4134589600000000, createdDate=2022-03-17 16:24:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.4219650000000000, preBalance=5.8190308800000000, postBalance=6.2246598000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8864, note=单号:8864平仓收益0.4056289200000000, createdDate=2022-03-17 16:24:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.8579880000000000, preBalance=6.2246598000000000, postBalance=7.0499756400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8865, note=单号:8865平仓收益0.8253158400000000, createdDate=2022-03-17 16:24:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=1.3178700000000000, preBalance=7.0499756400000000, postBalance=8.3188374000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8866, note=单号:8866平仓收益1.2688617600000000, createdDate=2022-03-17 16:24:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.3954770000000000, preBalance=8.3188374000000000, postBalance=8.6979782000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8867, note=单号:8867平仓收益0.3791408000000000, createdDate=2022-03-17 16:24:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0.3998200000000000, preBalance=8.6979782000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8868, note=单号:8868平仓收益0.3834838000000000, createdDate=2022-03-17 16:24:46, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.2123690400000000, preBalance=9.0814620000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8863, note=单号:8863平仓手续费-0.2123690400000000, createdDate=2022-03-17 16:24:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0163360800000000, preBalance=9.0814620000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8864, note=单号:8864平仓手续费-0.0163360800000000, createdDate=2022-03-17 16:24:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0326721600000000, preBalance=9.0814620000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8865, note=单号:8865平仓手续费-0.0326721600000000, createdDate=2022-03-17 16:24:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0490082400000000, preBalance=9.0814620000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8866, note=单号:8866平仓手续费-0.0490082400000000, createdDate=2022-03-17 16:24:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0163362000000000, preBalance=9.0814620000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8867, note=单号:8867平仓手续费-0.0163362000000000, createdDate=2022-03-17 16:24:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0163362000000000, preBalance=9.0814620000000000, postBalance=9.0814620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=8868, note=单号:8868平仓手续费-0.0163362000000000, createdDate=2022-03-17 16:24:55, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-9.0814000000000000, preBalance=9.0814620000000000, postBalance=0.0000620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3906, note=转出：9.08140000, createdDate=2022-03-17 16:27:38, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=5.0000000000000000, preBalance=0.0000620000000000, postBalance=5.0000620000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:5.0000, createdDate=2022-03-17 16:28:53, fromUserId=null, total=null)]
2022-03-17 16:29:32.344 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 16:29:32.344 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-2.0426450000000000
2022-03-17 16:29:32.345 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8845' LIMIT 0,1 
2022-03-17 16:29:32.345 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:29:32.443 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:29:32.444 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:32.444 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:32.534 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:32.535 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0817058000000000
2022-03-17 16:29:32.535 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8845' LIMIT 0,1000 
2022-03-17 16:29:32.535 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:32.814 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:32.815 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:32.815 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:32.907 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:32.907 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:32.907 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:32.998 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:32.998 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:32.999 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:33.089 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:33.089 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:33.089 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:33.204 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:33.204 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:33.204 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:33.299 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:33.299 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:33.299 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:33.389 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:33.389 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8845' and type=? limit 0,100 
2022-03-17 16:29:33.389 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:33.480 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:33.480 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8845,比列:0.300000,数据库:0.02451174,计算:-0.024511
2022-03-17 16:29:33.481 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8845' and type=? limit 0,100 
2022-03-17 16:29:33.481 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:33.571 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:33.571 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8845,比列:0.200000,数据库:0.01634116,计算:-0.016341
2022-03-17 16:29:33.572 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8845' and type=? limit 0,100 
2022-03-17 16:29:33.572 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:33.863 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:33.864 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8845,比列:0.300000,数据库:0.02451174,计算:-0.024511
2022-03-17 16:29:33.864 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8845' and type=? limit 0,100 
2022-03-17 16:29:33.864 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:33.955 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:33.956 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8845,比列:0.100000,数据库:0.00817058,计算:-0.008170
2022-03-17 16:29:33.957 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8845' and type=? limit 0,100 
2022-03-17 16:29:33.957 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:34.047 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:34.047 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8845,比列:0.100000,数据库:0.00817058,计算:-0.008170
2022-03-17 16:29:34.047 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-1.2253290000000000
2022-03-17 16:29:34.048 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8846' LIMIT 0,1 
2022-03-17 16:29:34.048 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:29:34.153 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:29:34.153 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:34.153 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:34.255 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:34.256 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-0.4085160000000000
2022-03-17 16:29:34.256 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8847' LIMIT 0,1 
2022-03-17 16:29:34.256 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:29:34.360 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:29:34.361 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:34.361 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:34.472 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:34.472 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0490131600000000
2022-03-17 16:29:34.473 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8846' LIMIT 0,1000 
2022-03-17 16:29:34.473 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:34.566 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:34.566 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:34.566 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:34.658 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:34.658 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:34.659 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:34.913 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:34.914 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:34.914 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:35.005 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:35.006 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:35.007 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:35.099 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:35.099 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:35.100 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:35.192 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:35.193 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:35.193 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:35.306 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:35.307 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8846' and type=? limit 0,100 
2022-03-17 16:29:35.307 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:35.405 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:35.405 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8846,比列:0.300000,数据库:0.01470394,计算:-0.014703
2022-03-17 16:29:35.405 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8846' and type=? limit 0,100 
2022-03-17 16:29:35.406 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:35.497 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:35.497 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8846,比列:0.200000,数据库:0.00980263,计算:-0.009802
2022-03-17 16:29:35.498 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8846' and type=? limit 0,100 
2022-03-17 16:29:35.498 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:35.594 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:35.594 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8846,比列:0.300000,数据库:0.01470394,计算:-0.014703
2022-03-17 16:29:35.595 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8846' and type=? limit 0,100 
2022-03-17 16:29:35.595 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:35.687 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:35.687 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8846,比列:0.100000,数据库:0.00490131,计算:-0.004901
2022-03-17 16:29:35.688 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8846' and type=? limit 0,100 
2022-03-17 16:29:35.689 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:35.959 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:35.960 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8846,比列:0.100000,数据库:0.00490131,计算:-0.004901
2022-03-17 16:29:35.960 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163406400000000
2022-03-17 16:29:35.961 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8847' LIMIT 0,1000 
2022-03-17 16:29:35.961 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:36.056 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:36.057 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:36.057 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:36.150 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:36.151 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:36.151 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:36.243 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:36.244 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:36.245 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:36.351 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:36.351 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:36.352 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:36.446 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:36.447 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:36.447 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:36.539 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:36.540 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:36.541 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:36.632 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:36.633 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8847' and type=? limit 0,100 
2022-03-17 16:29:36.633 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:36.725 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:36.725 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8847,比列:0.300000,数据库:0.00490219,计算:-0.004902
2022-03-17 16:29:36.726 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8847' and type=? limit 0,100 
2022-03-17 16:29:36.726 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:37.015 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:37.015 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8847,比列:0.200000,数据库:0.00326812,计算:-0.003268
2022-03-17 16:29:37.016 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8847' and type=? limit 0,100 
2022-03-17 16:29:37.016 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:37.108 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:37.108 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8847,比列:0.300000,数据库:0.00490219,计算:-0.004902
2022-03-17 16:29:37.109 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8847' and type=? limit 0,100 
2022-03-17 16:29:37.109 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:37.201 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:37.202 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8847,比列:0.100000,数据库:0.00163406,计算:-0.001634
2022-03-17 16:29:37.203 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8847' and type=? limit 0,100 
2022-03-17 16:29:37.203 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:37.295 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:37.295 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8847,比列:0.100000,数据库:0.00163406,计算:-0.001634
2022-03-17 16:29:37.296 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-0.8169880000000000
2022-03-17 16:29:37.296 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8848' LIMIT 0,1 
2022-03-17 16:29:37.296 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:29:37.401 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:29:37.402 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:37.402 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:37.499 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:37.500 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-1.6338320000000000
2022-03-17 16:29:37.500 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8849' LIMIT 0,1 
2022-03-17 16:29:37.500 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:29:37.592 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:29:37.592 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:37.593 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:37.685 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:37.685 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0326795200000000
2022-03-17 16:29:37.685 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8848' LIMIT 0,1000 
2022-03-17 16:29:37.685 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:37.781 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:37.782 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:37.782 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:38.059 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:38.060 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:38.061 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:38.152 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:38.152 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:38.153 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:38.243 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:38.243 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:38.244 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:38.337 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:38.338 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:38.338 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:38.456 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:38.456 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:38.457 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:38.549 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:38.550 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8848' and type=? limit 0,100 
2022-03-17 16:29:38.551 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:38.650 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:38.650 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8848,比列:0.300000,数据库:0.00980385,计算:-0.009803
2022-03-17 16:29:38.651 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8848' and type=? limit 0,100 
2022-03-17 16:29:38.652 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:38.747 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:38.748 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8848,比列:0.200000,数据库:0.00653590,计算:-0.006535
2022-03-17 16:29:38.749 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8848' and type=? limit 0,100 
2022-03-17 16:29:38.749 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:38.840 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:38.841 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8848,比列:0.300000,数据库:0.00980385,计算:-0.009803
2022-03-17 16:29:38.841 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8848' and type=? limit 0,100 
2022-03-17 16:29:38.842 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:39.121 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:39.121 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8848,比列:0.100000,数据库:0.00326795,计算:-0.003267
2022-03-17 16:29:39.123 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8848' and type=? limit 0,100 
2022-03-17 16:29:39.123 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:39.217 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:39.217 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8848,比列:0.100000,数据库:0.00326795,计算:-0.003267
2022-03-17 16:29:39.218 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0653532800000000
2022-03-17 16:29:39.218 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8849' LIMIT 0,1000 
2022-03-17 16:29:39.218 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:39.314 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:39.315 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:39.315 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:39.495 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:39.496 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:39.496 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:39.595 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:39.596 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:39.596 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:39.689 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:39.690 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:39.690 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:39.788 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:39.789 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:39.789 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:39.880 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:39.881 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:39.881 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:40.154 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:40.155 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8849' and type=? limit 0,100 
2022-03-17 16:29:40.155 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:40.248 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:40.248 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8849,比列:0.300000,数据库:0.01960598,计算:-0.019605
2022-03-17 16:29:40.249 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8849' and type=? limit 0,100 
2022-03-17 16:29:40.250 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:40.349 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:40.349 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8849,比列:0.200000,数据库:0.01307065,计算:-0.013070
2022-03-17 16:29:40.350 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8849' and type=? limit 0,100 
2022-03-17 16:29:40.350 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:40.444 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:40.445 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8849,比列:0.300000,数据库:0.01960598,计算:-0.019605
2022-03-17 16:29:40.446 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8849' and type=? limit 0,100 
2022-03-17 16:29:40.446 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:40.549 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:40.549 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8849,比列:0.100000,数据库:0.00653532,计算:-0.006535
2022-03-17 16:29:40.550 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8849' and type=? limit 0,100 
2022-03-17 16:29:40.550 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:40.651 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:40.651 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8849,比列:0.100000,数据库:0.00653532,计算:-0.006535
2022-03-17 16:29:40.652 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-1.6335200000000000
2022-03-17 16:29:40.652 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8850' LIMIT 0,1 
2022-03-17 16:29:40.652 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:29:40.759 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:29:40.761 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:40.761 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:40.851 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:40.852 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0653408000000000
2022-03-17 16:29:40.852 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8850' LIMIT 0,1000 
2022-03-17 16:29:40.853 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:40.944 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:40.945 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:40.945 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:41.202 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:41.203 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:41.203 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:41.307 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:41.308 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:41.308 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:41.401 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:41.401 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:41.402 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:41.492 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:41.493 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:41.493 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:41.595 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:41.595 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:41.596 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:41.694 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:41.695 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8850' and type=? limit 0,100 
2022-03-17 16:29:41.695 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:41.787 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:41.788 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8850,比列:0.300000,数据库:0.01960224,计算:-0.019602
2022-03-17 16:29:41.788 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8850' and type=? limit 0,100 
2022-03-17 16:29:41.789 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:41.883 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:41.883 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8850,比列:0.200000,数据库:0.01306816,计算:-0.013068
2022-03-17 16:29:41.884 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8850' and type=? limit 0,100 
2022-03-17 16:29:41.884 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:41.976 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:41.977 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8850,比列:0.300000,数据库:0.01960224,计算:-0.019602
2022-03-17 16:29:41.978 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8850' and type=? limit 0,100 
2022-03-17 16:29:41.978 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:42.268 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:42.269 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8850,比列:0.100000,数据库:0.00653408,计算:-0.006534
2022-03-17 16:29:42.269 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8850' and type=? limit 0,100 
2022-03-17 16:29:42.270 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:42.367 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:42.367 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8850,比列:0.100000,数据库:0.00653408,计算:-0.006534
2022-03-17 16:29:42.367 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:1.9786450000000000
2022-03-17 16:29:42.368 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8851' LIMIT 0,1000 
2022-03-17 16:29:42.368 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:42.461 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:42.462 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:42.462 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:42.642 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:42.643 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8851' LIMIT 0,1000 
2022-03-17 16:29:42.643 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:42.735 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:42.735 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:42.736 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:42.831 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:42.833 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8851' and type=? limit 0,1 
2022-03-17 16:29:42.833 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:29:42.923 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:29:42.924 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8851,数据库:0.06400000,计算得:-0.064000
2022-03-17 16:29:42.924 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:1.2376290000000000
2022-03-17 16:29:42.925 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8852' LIMIT 0,1000 
2022-03-17 16:29:42.925 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:43.017 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:43.018 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:43.018 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:43.300 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:43.301 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8852' LIMIT 0,1000 
2022-03-17 16:29:43.301 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:43.395 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:43.396 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:43.396 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:43.486 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:43.487 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8852' and type=? limit 0,1 
2022-03-17 16:29:43.488 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:29:43.580 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:29:43.580 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8852,数据库:-0.01230000,计算得:0.012300
2022-03-17 16:29:43.581 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.3970160000000000
2022-03-17 16:29:43.581 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8853' LIMIT 0,1000 
2022-03-17 16:29:43.581 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:43.694 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:43.694 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:43.695 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:43.797 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:43.798 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8853' LIMIT 0,1000 
2022-03-17 16:29:43.798 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:43.908 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:43.909 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:43.909 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:44.001 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:44.002 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8853' and type=? limit 0,1 
2022-03-17 16:29:44.003 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:29:44.093 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:29:44.094 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8853,数据库:0.01150000,计算得:-0.011500
2022-03-17 16:29:44.094 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.8353880000000000
2022-03-17 16:29:44.095 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8854' LIMIT 0,1000 
2022-03-17 16:29:44.095 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:44.353 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:44.354 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:44.354 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:44.445 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:44.446 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8854' LIMIT 0,1000 
2022-03-17 16:29:44.446 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:44.540 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:44.540 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:44.541 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:44.636 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:44.637 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8854' and type=? limit 0,1 
2022-03-17 16:29:44.637 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:29:44.743 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:29:44.744 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8854,数据库:-0.01840000,计算得:0.018400
2022-03-17 16:29:44.744 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:1.6110320000000000
2022-03-17 16:29:44.744 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8855' LIMIT 0,1000 
2022-03-17 16:29:44.745 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:44.835 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:44.836 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:44.837 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:44.929 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:44.931 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8855' LIMIT 0,1000 
2022-03-17 16:29:44.931 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:45.027 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:45.028 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:45.028 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:45.119 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:45.121 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8855' and type=? limit 0,1 
2022-03-17 16:29:45.121 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:29:45.399 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:29:45.399 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8855,数据库:0.02280000,计算得:-0.022800
2022-03-17 16:29:45.399 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:1.6419200000000000
2022-03-17 16:29:45.400 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8856' LIMIT 0,1000 
2022-03-17 16:29:45.400 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:45.492 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:45.493 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:45.493 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:45.590 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:45.592 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8856' LIMIT 0,1000 
2022-03-17 16:29:45.594 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:45.701 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:45.703 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:45.704 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:45.880 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:45.881 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8856' and type=? limit 0,1 
2022-03-17 16:29:45.881 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:29:45.972 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:29:45.972 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8856,数据库:-0.00840000,计算得:0.008400
2022-03-17 16:29:45.972 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0816802000000000
2022-03-17 16:29:45.973 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8851' LIMIT 0,1000 
2022-03-17 16:29:45.973 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:46.066 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:46.067 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:46.067 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:46.157 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:46.158 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:46.159 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:46.452 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:46.453 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:46.453 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:46.554 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:46.555 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:46.555 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:46.649 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:46.650 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:46.650 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:46.744 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:46.745 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:46.745 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:46.839 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:46.840 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8851' and type=? limit 0,100 
2022-03-17 16:29:46.840 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:46.939 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:46.940 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8851,比列:0.300000,数据库:0.02450406,计算:-0.024504
2022-03-17 16:29:46.941 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8851' and type=? limit 0,100 
2022-03-17 16:29:46.941 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:47.052 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:47.052 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8851,比列:0.200000,数据库:0.01633604,计算:-0.016336
2022-03-17 16:29:47.053 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8851' and type=? limit 0,100 
2022-03-17 16:29:47.054 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:47.148 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:47.149 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8851,比列:0.300000,数据库:0.02450406,计算:-0.024504
2022-03-17 16:29:47.149 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8851' and type=? limit 0,100 
2022-03-17 16:29:47.150 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:47.243 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:47.243 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8851,比列:0.100000,数据库:0.00816802,计算:-0.008168
2022-03-17 16:29:47.244 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8851' and type=? limit 0,100 
2022-03-17 16:29:47.245 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:47.497 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:47.497 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8851,比列:0.100000,数据库:0.00816802,计算:-0.008168
2022-03-17 16:29:47.498 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0490082400000000
2022-03-17 16:29:47.498 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8852' LIMIT 0,1000 
2022-03-17 16:29:47.499 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:47.592 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:47.593 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:47.593 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:47.684 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:47.686 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:47.686 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:47.776 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:47.777 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:47.777 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:47.889 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:47.890 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:47.890 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:47.983 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:47.984 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:47.984 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:48.074 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:48.075 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:48.075 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:48.176 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:48.178 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8852' and type=? limit 0,100 
2022-03-17 16:29:48.178 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:48.274 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:48.274 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8852,比列:0.300000,数据库:0.01470247,计算:-0.014702
2022-03-17 16:29:48.275 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8852' and type=? limit 0,100 
2022-03-17 16:29:48.275 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:48.366 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:48.367 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8852,比列:0.200000,数据库:0.00980164,计算:-0.009801
2022-03-17 16:29:48.368 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8852' and type=? limit 0,100 
2022-03-17 16:29:48.368 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:48.553 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:48.554 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8852,比列:0.300000,数据库:0.01470247,计算:-0.014702
2022-03-17 16:29:48.555 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8852' and type=? limit 0,100 
2022-03-17 16:29:48.555 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:48.648 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:48.648 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8852,比列:0.100000,数据库:0.00490082,计算:-0.004900
2022-03-17 16:29:48.649 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8852' and type=? limit 0,100 
2022-03-17 16:29:48.649 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:48.742 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:48.742 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8852,比列:0.100000,数据库:0.00490082,计算:-0.004900
2022-03-17 16:29:48.743 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0163360400000000
2022-03-17 16:29:48.743 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8853' LIMIT 0,1000 
2022-03-17 16:29:48.744 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:48.849 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:48.849 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:48.850 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:48.966 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:48.967 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:48.968 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:49.058 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:49.059 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:49.059 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:49.151 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:49.152 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:49.152 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:49.250 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:49.250 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:49.251 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:49.344 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:49.345 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:49.345 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:49.599 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:49.600 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8853' and type=? limit 0,100 
2022-03-17 16:29:49.601 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:49.693 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:49.693 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8853,比列:0.300000,数据库:0.00490081,计算:-0.004900
2022-03-17 16:29:49.693 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8853' and type=? limit 0,100 
2022-03-17 16:29:49.693 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:49.784 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:49.785 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8853,比列:0.200000,数据库:0.00326720,计算:-0.003267
2022-03-17 16:29:49.785 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8853' and type=? limit 0,100 
2022-03-17 16:29:49.785 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:49.876 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:49.876 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8853,比列:0.300000,数据库:0.00490081,计算:-0.004900
2022-03-17 16:29:49.876 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8853' and type=? limit 0,100 
2022-03-17 16:29:49.877 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:49.991 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:49.991 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8853,比列:0.100000,数据库:0.00163360,计算:-0.001633
2022-03-17 16:29:49.992 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8853' and type=? limit 0,100 
2022-03-17 16:29:49.992 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:50.089 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:50.089 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8853,比列:0.100000,数据库:0.00163360,计算:-0.001633
2022-03-17 16:29:50.090 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0326721600000000
2022-03-17 16:29:50.090 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8854' LIMIT 0,1000 
2022-03-17 16:29:50.091 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:50.182 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:50.183 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:50.183 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:50.284 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:50.285 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:50.286 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:50.378 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:50.378 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:50.378 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:50.647 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:50.647 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:50.647 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:50.737 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:50.737 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:50.737 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:50.829 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:50.829 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:50.830 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:50.919 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:50.920 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8854' and type=? limit 0,100 
2022-03-17 16:29:50.920 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:51.039 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:51.039 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8854,比列:0.300000,数据库:0.00980164,计算:-0.009801
2022-03-17 16:29:51.039 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8854' and type=? limit 0,100 
2022-03-17 16:29:51.040 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:51.133 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:51.133 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8854,比列:0.200000,数据库:0.00653443,计算:-0.006534
2022-03-17 16:29:51.134 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8854' and type=? limit 0,100 
2022-03-17 16:29:51.134 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:51.235 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:51.235 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8854,比列:0.300000,数据库:0.00980164,计算:-0.009801
2022-03-17 16:29:51.235 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8854' and type=? limit 0,100 
2022-03-17 16:29:51.235 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:51.329 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:51.329 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8854,比列:0.100000,数据库:0.00326721,计算:-0.003267
2022-03-17 16:29:51.330 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8854' and type=? limit 0,100 
2022-03-17 16:29:51.330 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:51.422 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:51.422 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8854,比列:0.100000,数据库:0.00326721,计算:-0.003267
2022-03-17 16:29:51.423 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0653441600000000
2022-03-17 16:29:51.423 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8855' LIMIT 0,1000 
2022-03-17 16:29:51.424 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:51.695 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:51.695 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:51.695 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:51.787 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:51.787 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:51.787 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:51.879 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:51.880 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:51.880 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:51.970 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:51.971 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:51.971 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:52.086 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:52.086 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:52.086 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:52.178 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:52.178 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:52.178 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:52.271 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:52.273 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8855' and type=? limit 0,100 
2022-03-17 16:29:52.273 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:52.368 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:52.368 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8855,比列:0.300000,数据库:0.01960324,计算:-0.019603
2022-03-17 16:29:52.369 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8855' and type=? limit 0,100 
2022-03-17 16:29:52.369 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:52.462 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:52.462 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8855,比列:0.200000,数据库:0.01306883,计算:-0.013068
2022-03-17 16:29:52.463 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8855' and type=? limit 0,100 
2022-03-17 16:29:52.463 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:52.744 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:52.744 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8855,比列:0.300000,数据库:0.01960324,计算:-0.019603
2022-03-17 16:29:52.744 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8855' and type=? limit 0,100 
2022-03-17 16:29:52.745 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:52.836 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:52.837 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8855,比列:0.100000,数据库:0.00653441,计算:-0.006534
2022-03-17 16:29:52.837 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8855' and type=? limit 0,100 
2022-03-17 16:29:52.837 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:52.932 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:52.932 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8855,比列:0.100000,数据库:0.00653441,计算:-0.006534
2022-03-17 16:29:52.932 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0653441600000000
2022-03-17 16:29:52.933 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8856' LIMIT 0,1000 
2022-03-17 16:29:52.933 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:53.025 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:53.026 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:53.026 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:53.137 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:53.138 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:53.139 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:53.244 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:53.245 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:53.245 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:53.352 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:53.352 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:53.352 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:53.444 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:53.445 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:53.445 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:53.536 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:53.537 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:53.538 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:53.793 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:53.793 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8856' and type=? limit 0,100 
2022-03-17 16:29:53.793 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:53.885 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:53.885 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8856,比列:0.300000,数据库:0.01960324,计算:-0.019603
2022-03-17 16:29:53.886 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8856' and type=? limit 0,100 
2022-03-17 16:29:53.887 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:53.981 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:53.981 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8856,比列:0.200000,数据库:0.01306883,计算:-0.013068
2022-03-17 16:29:53.981 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8856' and type=? limit 0,100 
2022-03-17 16:29:53.982 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:54.073 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:54.073 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8856,比列:0.300000,数据库:0.01960324,计算:-0.019603
2022-03-17 16:29:54.074 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8856' and type=? limit 0,100 
2022-03-17 16:29:54.074 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:54.185 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:54.185 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8856,比列:0.100000,数据库:0.00653441,计算:-0.006534
2022-03-17 16:29:54.186 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8856' and type=? limit 0,100 
2022-03-17 16:29:54.186 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:54.285 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:54.285 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8856,比列:0.100000,数据库:0.00653441,计算:-0.006534
2022-03-17 16:29:54.285 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-5.3060280000000000
2022-03-17 16:29:54.286 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8857' LIMIT 0,1 
2022-03-17 16:29:54.286 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:29:54.386 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:29:54.386 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:54.387 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:54.481 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:54.482 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.2122411200000000
2022-03-17 16:29:54.482 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8857' LIMIT 0,1000 
2022-03-17 16:29:54.482 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:54.574 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:54.574 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:54.574 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:54.840 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:54.841 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:54.841 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:54.933 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:54.934 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:54.934 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:55.030 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:55.031 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:55.031 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:55.129 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:55.129 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:55.129 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:55.232 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:55.232 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:55.232 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:55.321 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:55.322 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8857' and type=? limit 0,100 
2022-03-17 16:29:55.322 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:55.413 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:55.413 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8857,比列:0.300000,数据库:0.06367233,计算:-0.063672
2022-03-17 16:29:55.414 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8857' and type=? limit 0,100 
2022-03-17 16:29:55.414 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:55.506 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:55.506 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8857,比列:0.200000,数据库:0.04244822,计算:-0.042448
2022-03-17 16:29:55.506 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8857' and type=? limit 0,100 
2022-03-17 16:29:55.507 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:55.640 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:55.640 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8857,比列:0.300000,数据库:0.06367233,计算:-0.063672
2022-03-17 16:29:55.641 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8857' and type=? limit 0,100 
2022-03-17 16:29:55.641 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:55.830 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:55.831 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8857,比列:0.100000,数据库:0.02122411,计算:-0.021224
2022-03-17 16:29:55.831 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8857' and type=? limit 0,100 
2022-03-17 16:29:55.831 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:55.978 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:55.978 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8857,比列:0.100000,数据库:0.02122411,计算:-0.021224
2022-03-17 16:29:55.978 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-0.4082650000000000
2022-03-17 16:29:55.979 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8858' LIMIT 0,1 
2022-03-17 16:29:55.979 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:29:56.076 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:29:56.076 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:56.077 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:56.168 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:56.169 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163306000000000
2022-03-17 16:29:56.169 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8858' LIMIT 0,1000 
2022-03-17 16:29:56.169 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:56.282 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:56.282 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:56.282 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:56.386 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:56.386 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:56.386 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:56.498 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:56.498 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:56.498 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:56.589 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:56.590 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:56.590 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:56.681 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:56.681 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:56.681 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:56.937 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:56.938 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:56.938 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:57.029 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:57.030 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8858' and type=? limit 0,100 
2022-03-17 16:29:57.030 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:57.122 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:57.122 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8858,比列:0.300000,数据库:0.00489918,计算:-0.004899
2022-03-17 16:29:57.122 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8858' and type=? limit 0,100 
2022-03-17 16:29:57.123 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:57.214 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:57.215 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8858,比列:0.200000,数据库:0.00326612,计算:-0.003266
2022-03-17 16:29:57.216 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8858' and type=? limit 0,100 
2022-03-17 16:29:57.216 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:57.330 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:57.330 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8858,比列:0.300000,数据库:0.00489918,计算:-0.004899
2022-03-17 16:29:57.331 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8858' and type=? limit 0,100 
2022-03-17 16:29:57.331 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:57.422 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:57.422 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8858,比列:0.100000,数据库:0.00163306,计算:-0.001633
2022-03-17 16:29:57.423 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8858' and type=? limit 0,100 
2022-03-17 16:29:57.423 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:57.514 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:57.514 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8858,比列:0.100000,数据库:0.00163306,计算:-0.001633
2022-03-17 16:29:57.514 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-0.8163880000000000
2022-03-17 16:29:57.515 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8859' LIMIT 0,1 
2022-03-17 16:29:57.515 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:29:57.621 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:29:57.622 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:57.622 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:57.712 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:57.712 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-1.2242700000000000
2022-03-17 16:29:57.712 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8860' LIMIT 0,1 
2022-03-17 16:29:57.712 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:29:57.985 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:29:57.985 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:57.985 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:58.075 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:58.075 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0326555200000000
2022-03-17 16:29:58.076 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8859' LIMIT 0,1000 
2022-03-17 16:29:58.076 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:58.168 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:58.168 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:58.168 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:58.259 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:58.259 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:58.259 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:58.379 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:58.379 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:58.379 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:58.470 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:58.470 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:58.470 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:58.564 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:58.565 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:29:58.565 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:58.657 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:58.658 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:29:58.658 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:58.749 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:29:58.750 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8859' and type=? limit 0,100 
2022-03-17 16:29:58.750 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:29:59.034 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:59.034 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8859,比列:0.300000,数据库:0.00979665,计算:-0.009796
2022-03-17 16:29:59.034 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8859' and type=? limit 0,100 
2022-03-17 16:29:59.035 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:29:59.126 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:59.126 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8859,比列:0.200000,数据库:0.00653110,计算:-0.006531
2022-03-17 16:29:59.127 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8859' and type=? limit 0,100 
2022-03-17 16:29:59.127 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:29:59.219 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:59.219 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8859,比列:0.300000,数据库:0.00979665,计算:-0.009796
2022-03-17 16:29:59.219 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8859' and type=? limit 0,100 
2022-03-17 16:29:59.219 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:29:59.328 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:59.328 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8859,比列:0.100000,数据库:0.00326555,计算:-0.003265
2022-03-17 16:29:59.329 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8859' and type=? limit 0,100 
2022-03-17 16:29:59.329 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:29:59.427 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:29:59.427 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8859,比列:0.100000,数据库:0.00326555,计算:-0.003265
2022-03-17 16:29:59.427 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0489708000000000
2022-03-17 16:29:59.427 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8860' LIMIT 0,1000 
2022-03-17 16:29:59.427 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:29:59.529 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:29:59.529 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:29:59.529 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:29:59.640 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:29:59.640 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:29:59.641 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:59.731 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:59.732 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:29:59.732 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:29:59.821 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:29:59.822 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:29:59.822 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:00.081 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:00.082 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:30:00.083 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:00.178 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:00.178 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:30:00.178 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:00.271 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:30:00.272 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8860' and type=? limit 0,100 
2022-03-17 16:30:00.272 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:30:00.362 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:00.362 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8860,比列:0.300000,数据库:0.01469124,计算:-0.014691
2022-03-17 16:30:00.363 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8860' and type=? limit 0,100 
2022-03-17 16:30:00.363 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:30:00.480 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:00.481 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8860,比列:0.200000,数据库:0.00979416,计算:-0.009794
2022-03-17 16:30:00.481 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8860' and type=? limit 0,100 
2022-03-17 16:30:00.482 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:30:00.572 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:00.573 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8860,比列:0.300000,数据库:0.01469124,计算:-0.014691
2022-03-17 16:30:00.574 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8860' and type=? limit 0,100 
2022-03-17 16:30:00.574 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:30:00.665 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:00.665 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8860,比列:0.100000,数据库:0.00489708,计算:-0.004897
2022-03-17 16:30:00.665 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8860' and type=? limit 0,100 
2022-03-17 16:30:00.665 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:30:00.760 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:00.761 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8860,比列:0.100000,数据库:0.00489708,计算:-0.004897
2022-03-17 16:30:00.761 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-0.4082770000000000
2022-03-17 16:30:00.761 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8861' LIMIT 0,1 
2022-03-17 16:30:00.761 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:30:00.852 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:30:00.852 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:00.852 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:01.130 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:01.130 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163310800000000
2022-03-17 16:30:01.131 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8861' LIMIT 0,1000 
2022-03-17 16:30:01.131 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:01.236 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:01.237 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:01.237 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:01.328 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:01.328 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:30:01.329 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:01.435 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:01.435 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:30:01.435 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:01.546 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:01.546 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:30:01.547 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:01.640 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:01.641 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:30:01.641 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:01.732 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:01.733 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:30:01.733 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:01.824 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:30:01.825 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8861' and type=? limit 0,100 
2022-03-17 16:30:01.825 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:30:01.917 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:01.918 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8861,比列:0.300000,数据库:0.00489932,计算:-0.004899
2022-03-17 16:30:01.918 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8861' and type=? limit 0,100 
2022-03-17 16:30:01.919 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:30:02.182 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:02.183 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8861,比列:0.200000,数据库:0.00326621,计算:-0.003266
2022-03-17 16:30:02.184 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8861' and type=? limit 0,100 
2022-03-17 16:30:02.184 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:30:02.276 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:02.276 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8861,比列:0.300000,数据库:0.00489932,计算:-0.004899
2022-03-17 16:30:02.277 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8861' and type=? limit 0,100 
2022-03-17 16:30:02.277 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:30:02.369 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:02.370 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8861,比列:0.100000,数据库:0.00163310,计算:-0.001633
2022-03-17 16:30:02.370 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8861' and type=? limit 0,100 
2022-03-17 16:30:02.370 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:30:02.466 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:02.466 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8861,比列:0.100000,数据库:0.00163310,计算:-0.001633
2022-03-17 16:30:02.466 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-0.4083200000000000
2022-03-17 16:30:02.466 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '8862' LIMIT 0,1 
2022-03-17 16:30:02.466 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 16:30:02.572 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 16:30:02.573 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:02.573 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:02.673 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:02.673 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0163328000000000
2022-03-17 16:30:02.673 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8862' LIMIT 0,1000 
2022-03-17 16:30:02.673 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:02.785 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:02.786 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:02.786 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:02.876 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:02.876 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:30:02.876 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:02.970 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:02.971 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:30:02.971 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:03.233 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:03.234 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:30:03.234 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:03.330 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:03.331 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:30:03.331 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:03.424 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:03.424 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:30:03.424 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:03.521 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:30:03.521 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8862' and type=? limit 0,100 
2022-03-17 16:30:03.521 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:30:03.624 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:03.625 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:8862,比列:0.300000,数据库:0.00489984,计算:-0.004899
2022-03-17 16:30:03.625 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8862' and type=? limit 0,100 
2022-03-17 16:30:03.625 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:30:03.721 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:03.721 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:8862,比列:0.200000,数据库:0.00326656,计算:-0.003266
2022-03-17 16:30:03.721 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8862' and type=? limit 0,100 
2022-03-17 16:30:03.721 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:30:03.817 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:03.818 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:8862,比列:0.300000,数据库:0.00489984,计算:-0.004899
2022-03-17 16:30:03.818 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8862' and type=? limit 0,100 
2022-03-17 16:30:03.818 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:30:03.914 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:03.914 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:8862,比列:0.100000,数据库:0.00163328,计算:-0.001633
2022-03-17 16:30:03.914 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8862' and type=? limit 0,100 
2022-03-17 16:30:03.915 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:30:04.006 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:04.006 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:8862,比列:0.100000,数据库:0.00163328,计算:-0.001633
2022-03-17 16:30:04.006 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:5.6258280000000000
2022-03-17 16:30:04.006 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8863' LIMIT 0,1000 
2022-03-17 16:30:04.007 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:04.281 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:04.282 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:04.282 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:04.383 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:04.384 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8863' LIMIT 0,1000 
2022-03-17 16:30:04.384 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:04.478 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:04.479 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:04.479 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:04.584 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:04.585 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8863' and type=? limit 0,1 
2022-03-17 16:30:04.586 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:30:04.695 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:30:04.695 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8863,数据库:-0.31980000,计算得:0.319800
2022-03-17 16:30:04.695 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.4219650000000000
2022-03-17 16:30:04.696 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8864' LIMIT 0,1000 
2022-03-17 16:30:04.696 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:04.791 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:04.792 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:04.792 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:04.889 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:04.889 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8864' LIMIT 0,1000 
2022-03-17 16:30:04.889 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:04.991 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:04.991 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:04.991 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:05.085 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:05.085 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8864' and type=? limit 0,1 
2022-03-17 16:30:05.085 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:30:05.329 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:30:05.329 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8864,数据库:-0.01370000,计算得:0.013700
2022-03-17 16:30:05.329 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.8579880000000000
2022-03-17 16:30:05.330 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8865' LIMIT 0,1000 
2022-03-17 16:30:05.330 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:05.423 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:05.424 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:05.424 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:05.515 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:05.516 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8865' LIMIT 0,1000 
2022-03-17 16:30:05.516 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:05.608 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:05.608 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:05.609 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:05.723 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:05.724 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8865' and type=? limit 0,1 
2022-03-17 16:30:05.724 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:30:05.819 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:30:05.819 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8865,数据库:-0.04160000,计算得:0.041600
2022-03-17 16:30:05.820 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:1.3178700000000000
2022-03-17 16:30:05.820 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8866' LIMIT 0,1000 
2022-03-17 16:30:05.820 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:05.921 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:05.921 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:05.921 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:06.023 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:06.023 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8866' LIMIT 0,1000 
2022-03-17 16:30:06.023 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:06.115 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:06.115 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:06.116 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:06.380 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:06.381 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8866' and type=? limit 0,1 
2022-03-17 16:30:06.381 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:30:06.476 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:30:06.477 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8866,数据库:-0.09360000,计算得:0.093600
2022-03-17 16:30:06.477 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.3954770000000000
2022-03-17 16:30:06.477 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8867' LIMIT 0,1000 
2022-03-17 16:30:06.478 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:06.571 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:06.572 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:06.572 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:06.663 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:06.664 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8867' LIMIT 0,1000 
2022-03-17 16:30:06.665 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:06.772 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:06.773 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:06.774 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:06.869 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:06.870 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8867' and type=? limit 0,1 
2022-03-17 16:30:06.871 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:30:06.965 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:30:06.965 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8867,数据库:0.01280000,计算得:-0.012800
2022-03-17 16:30:06.965 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0.3998200000000000
2022-03-17 16:30:06.966 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8868' LIMIT 0,1000 
2022-03-17 16:30:06.966 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:07.068 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:07.069 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:07.069 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:07.159 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:07.160 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8868' LIMIT 0,1000 
2022-03-17 16:30:07.160 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:07.427 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:07.428 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:07.428 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:07.529 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:07.529 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8868' and type=? limit 0,1 
2022-03-17 16:30:07.530 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 16:30:07.630 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 16:30:07.630 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:8868,数据库:0.00850000,计算得:-0.008500
2022-03-17 16:30:07.631 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.2123690400000000
2022-03-17 16:30:07.631 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8863' LIMIT 0,1000 
2022-03-17 16:30:07.631 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:07.724 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:07.724 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:07.725 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:07.820 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:07.821 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:30:07.821 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:07.926 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:07.927 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:30:07.927 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:08.034 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:08.035 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:30:08.035 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:08.126 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:08.127 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:30:08.127 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:08.219 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:08.220 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:30:08.220 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:08.479 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:30:08.480 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8863' and type=? limit 0,100 
2022-03-17 16:30:08.481 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:30:08.572 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:08.573 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8863,比列:0.300000,数据库:0.06371071,计算:-0.063710
2022-03-17 16:30:08.573 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8863' and type=? limit 0,100 
2022-03-17 16:30:08.574 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:30:08.666 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:08.666 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8863,比列:0.200000,数据库:0.04247380,计算:-0.042473
2022-03-17 16:30:08.667 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8863' and type=? limit 0,100 
2022-03-17 16:30:08.667 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:30:08.762 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:08.762 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8863,比列:0.300000,数据库:0.06371071,计算:-0.063710
2022-03-17 16:30:08.763 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8863' and type=? limit 0,100 
2022-03-17 16:30:08.763 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:30:08.871 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:08.872 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8863,比列:0.100000,数据库:0.02123690,计算:-0.021236
2022-03-17 16:30:08.872 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8863' and type=? limit 0,100 
2022-03-17 16:30:08.873 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:30:08.965 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:08.965 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8863,比列:0.100000,数据库:0.02123690,计算:-0.021236
2022-03-17 16:30:08.965 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0163360800000000
2022-03-17 16:30:08.966 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8864' LIMIT 0,1000 
2022-03-17 16:30:08.966 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:09.062 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:09.062 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:09.063 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:09.158 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:09.159 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:30:09.159 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:09.262 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:09.263 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:30:09.263 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:09.528 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:09.529 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:30:09.529 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:09.625 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:09.626 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:30:09.627 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:09.721 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:09.722 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:30:09.722 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:09.831 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:30:09.831 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8864' and type=? limit 0,100 
2022-03-17 16:30:09.832 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:30:10.016 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:10.016 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8864,比列:0.300000,数据库:0.00490082,计算:-0.004900
2022-03-17 16:30:10.016 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8864' and type=? limit 0,100 
2022-03-17 16:30:10.017 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:30:10.106 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:10.107 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8864,比列:0.200000,数据库:0.00326721,计算:-0.003267
2022-03-17 16:30:10.107 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8864' and type=? limit 0,100 
2022-03-17 16:30:10.107 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:30:10.211 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:10.212 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8864,比列:0.300000,数据库:0.00490082,计算:-0.004900
2022-03-17 16:30:10.212 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8864' and type=? limit 0,100 
2022-03-17 16:30:10.212 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:30:10.322 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:10.323 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8864,比列:0.100000,数据库:0.00163360,计算:-0.001633
2022-03-17 16:30:10.324 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8864' and type=? limit 0,100 
2022-03-17 16:30:10.325 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:30:10.577 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:10.578 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8864,比列:0.100000,数据库:0.00163360,计算:-0.001633
2022-03-17 16:30:10.578 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0326721600000000
2022-03-17 16:30:10.579 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8865' LIMIT 0,1000 
2022-03-17 16:30:10.579 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:10.671 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:10.671 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:10.672 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:10.762 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:10.763 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:30:10.764 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:10.855 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:10.856 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:30:10.856 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:10.968 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:10.968 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:30:10.969 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:11.067 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:11.068 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:30:11.069 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:11.179 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:11.180 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:30:11.180 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:11.275 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:30:11.276 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8865' and type=? limit 0,100 
2022-03-17 16:30:11.276 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:30:11.373 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:11.373 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8865,比列:0.300000,数据库:0.00980164,计算:-0.009801
2022-03-17 16:30:11.374 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8865' and type=? limit 0,100 
2022-03-17 16:30:11.374 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:30:11.623 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:11.623 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8865,比列:0.200000,数据库:0.00653443,计算:-0.006534
2022-03-17 16:30:11.624 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8865' and type=? limit 0,100 
2022-03-17 16:30:11.624 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:30:11.716 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:11.717 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8865,比列:0.300000,数据库:0.00980164,计算:-0.009801
2022-03-17 16:30:11.717 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8865' and type=? limit 0,100 
2022-03-17 16:30:11.718 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:30:11.814 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:11.815 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8865,比列:0.100000,数据库:0.00326721,计算:-0.003267
2022-03-17 16:30:11.816 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8865' and type=? limit 0,100 
2022-03-17 16:30:11.816 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:30:11.919 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:11.919 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8865,比列:0.100000,数据库:0.00326721,计算:-0.003267
2022-03-17 16:30:11.919 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0490082400000000
2022-03-17 16:30:11.920 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8866' LIMIT 0,1000 
2022-03-17 16:30:11.920 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:12.015 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:12.016 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:12.016 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:12.107 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:12.107 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:30:12.108 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:12.199 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:12.199 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:30:12.199 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:12.302 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:12.302 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:30:12.303 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:12.395 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:12.396 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:30:12.396 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:12.675 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:12.675 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:30:12.675 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:12.766 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:30:12.766 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8866' and type=? limit 0,100 
2022-03-17 16:30:12.766 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:30:12.857 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:12.857 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8866,比列:0.300000,数据库:0.01470247,计算:-0.014702
2022-03-17 16:30:12.858 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8866' and type=? limit 0,100 
2022-03-17 16:30:12.858 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:30:12.949 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:12.950 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8866,比列:0.200000,数据库:0.00980164,计算:-0.009801
2022-03-17 16:30:12.950 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8866' and type=? limit 0,100 
2022-03-17 16:30:12.951 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:30:13.065 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:13.066 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8866,比列:0.300000,数据库:0.01470247,计算:-0.014702
2022-03-17 16:30:13.067 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8866' and type=? limit 0,100 
2022-03-17 16:30:13.067 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:30:13.178 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:13.178 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8866,比列:0.100000,数据库:0.00490082,计算:-0.004900
2022-03-17 16:30:13.179 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8866' and type=? limit 0,100 
2022-03-17 16:30:13.179 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:30:13.274 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:13.274 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8866,比列:0.100000,数据库:0.00490082,计算:-0.004900
2022-03-17 16:30:13.274 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0163362000000000
2022-03-17 16:30:13.274 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8867' LIMIT 0,1000 
2022-03-17 16:30:13.274 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:13.366 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:13.367 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:13.367 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:13.457 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:13.458 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:30:13.459 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:13.719 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:13.720 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:30:13.720 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:13.811 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:13.812 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:30:13.812 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:13.902 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:13.902 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:30:13.903 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:13.995 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:13.996 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:30:13.996 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:14.115 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:30:14.116 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8867' and type=? limit 0,100 
2022-03-17 16:30:14.116 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:30:14.217 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:14.217 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8867,比列:0.300000,数据库:0.00490086,计算:-0.004900
2022-03-17 16:30:14.218 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8867' and type=? limit 0,100 
2022-03-17 16:30:14.218 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:30:14.330 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:14.330 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8867,比列:0.200000,数据库:0.00326724,计算:-0.003267
2022-03-17 16:30:14.331 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8867' and type=? limit 0,100 
2022-03-17 16:30:14.331 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:30:14.422 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:14.423 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8867,比列:0.300000,数据库:0.00490086,计算:-0.004900
2022-03-17 16:30:14.423 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8867' and type=? limit 0,100 
2022-03-17 16:30:14.424 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:30:14.515 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:14.515 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8867,比列:0.100000,数据库:0.00163362,计算:-0.001633
2022-03-17 16:30:14.515 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8867' and type=? limit 0,100 
2022-03-17 16:30:14.515 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:30:14.771 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:14.772 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8867,比列:0.100000,数据库:0.00163362,计算:-0.001633
2022-03-17 16:30:14.772 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0163362000000000
2022-03-17 16:30:14.772 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '8868' LIMIT 0,1000 
2022-03-17 16:30:14.773 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 16:30:14.865 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 16:30:14.865 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 16:30:14.866 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 16:30:14.959 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 16:30:14.960 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:30:14.960 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:15.055 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:15.055 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:30:15.056 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:15.161 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:15.162 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:30:15.162 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:15.262 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:15.263 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:30:15.263 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:15.366 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:30:15.367 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:30:15.367 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:30:15.458 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:30:15.458 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8868' and type=? limit 0,100 
2022-03-17 16:30:15.459 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 16:30:15.550 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:15.551 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:8868,比列:0.300000,数据库:0.00490086,计算:-0.004900
2022-03-17 16:30:15.552 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8868' and type=? limit 0,100 
2022-03-17 16:30:15.553 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 16:30:15.817 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:15.818 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:8868,比列:0.200000,数据库:0.00326724,计算:-0.003267
2022-03-17 16:30:15.819 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8868' and type=? limit 0,100 
2022-03-17 16:30:15.819 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 16:30:15.911 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:15.912 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:8868,比列:0.300000,数据库:0.00490086,计算:-0.004900
2022-03-17 16:30:15.912 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8868' and type=? limit 0,100 
2022-03-17 16:30:15.913 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 16:30:16.008 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:16.009 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:8868,比列:0.100000,数据库:0.00163362,计算:-0.001633
2022-03-17 16:30:16.009 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='8868' and type=? limit 0,100 
2022-03-17 16:30:16.010 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 16:30:16.120 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 16:30:16.121 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:8868,比列:0.100000,数据库:0.00163362,计算:-0.001633
2022-03-17 16:30:16.121 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-9.0814000000000000
2022-03-17 16:30:16.121 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:5.0000000000000000
2022-03-17 16:30:16.121 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 16:40:51.300 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Retrograde clock change detected (housekeeper delta=29s863ms), soft-evicting connections from pool.
2022-03-17 16:42:21.107 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:42:21.107 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:42:21.192 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:42:21.192 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:42:21.192 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:42:21.280 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:42:21.282 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:42:21.282 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 16:42:21.596 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 16:42:21.632 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=100.0000000000000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=15.0814000000000000, hold=null)
2022-03-17 16:43:01.434 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 16:43:01.435 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 16:43:01.531 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 16:43:01.532 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 16:43:01.532 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 16:43:01.620 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 16:43:01.620 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:43:01.620 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:43:01.741 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:43:01.757 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:77.0000000000000000,hold:0E-16
2022-03-17 16:43:01.758 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-23.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:77.0000000000000000,操作后，数据库存储的总金额:77.0000000000000000
2022-03-17 16:43:01.758 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:43:01.759 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:43:01.842 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:43:01.843 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 16:43:01.843 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:43:01.843 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:43:01.927 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:43:01.928 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:43:01.928 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:43:02.030 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:43:02.030 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:43:02.030 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:43:02.118 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:43:02.119 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:43:02.120 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:43:02.401 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:43:02.402 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:43:02.402 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:43:02.489 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:43:02.489 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 16:43:02.490 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:43:02.579 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:43:02.580 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 16:43:02.580 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 16:43:02.581 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 16:43:02.668 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 3
2022-03-17 16:43:02.668 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=100.0000000000000000, postBalance=88.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3908, note=转出：12.00000000, createdDate=2022-03-17 16:42:36, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=88.0000000000000000, postBalance=67.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3909, note=转出：21.00000000, createdDate=2022-03-17 16:42:41, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=10.0000000000000000, preBalance=67.0000000000000000, postBalance=77.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:10.0000, createdDate=2022-03-17 16:42:54, fromUserId=null, total=null)]
2022-03-17 16:43:02.668 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 16:43:02.668 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 16:43:02.668 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 16:43:02.669 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:10.0000000000000000
2022-03-17 16:43:02.669 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 16:43:36.096 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 16:43:36.097 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 16:43:36.196 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 16:43:36.196 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 16:43:36.196 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 16:43:36.351 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 16:43:36.352 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:43:36.352 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:43:36.437 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:43:36.437 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:77.0000000000000000,hold:0E-16
2022-03-17 16:43:36.437 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:77.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:177.0000000000000000,操作后，数据库存储的总金额:77.0000000000000000
2022-03-17 16:43:36.438 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:43:36.438 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:43:36.523 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:43:36.523 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 16:43:36.524 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:43:36.524 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:43:36.615 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:43:36.615 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:43:36.615 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:43:36.722 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:43:36.723 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:43:36.723 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:43:37.015 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:43:37.015 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:43:37.015 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:43:37.105 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:43:37.105 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:43:37.106 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:43:37.192 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:43:37.192 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 16:43:37.193 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:43:37.277 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:43:37.277 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 16:43:37.278 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 16:43:37.278 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 16:43:37.401 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 3
2022-03-17 16:43:37.401 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=100.0000000000000000, postBalance=88.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3908, note=转出：12.00000000, createdDate=2022-03-17 16:42:36, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=88.0000000000000000, postBalance=67.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3909, note=转出：21.00000000, createdDate=2022-03-17 16:42:41, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=110.0000000000000000, preBalance=67.0000000000000000, postBalance=77.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:10.0000, createdDate=2022-03-17 16:42:54, fromUserId=null, total=null)]
2022-03-17 16:43:37.401 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 16:43:37.401 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 16:43:37.401 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 16:43:37.401 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:110.0000000000000000
2022-03-17 16:43:37.402 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 16:51:15.225 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 16:51:15.227 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 16:51:15.310 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 16:51:15.311 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 16:51:15.311 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 16:51:15.556 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 16:51:15.556 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:51:15.557 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:51:15.647 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:51:15.647 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:77.0000000000000000,hold:0E-16
2022-03-17 16:51:15.648 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-23.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:77.0000000000000000,操作后，数据库存储的总金额:77.0000000000000000
2022-03-17 16:51:15.648 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:51:15.648 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:51:15.732 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 16:51:15.733 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 16:51:15.733 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 16:51:15.734 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:51:15.821 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:51:15.822 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:51:15.822 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:51:15.947 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:51:15.947 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 16:51:15.948 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:51:16.033 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:51:16.033 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 16:51:16.033 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:51:16.120 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:51:16.120 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 16:51:16.120 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:51:16.206 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:51:16.206 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 16:51:16.206 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 16:51:16.291 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 16:51:16.292 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 16:51:16.292 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 16:51:16.293 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 16:51:16.381 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 3
2022-03-17 16:51:16.381 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=100.0000000000000000, postBalance=88.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3908, note=转出：12.00000000, createdDate=2022-03-17 16:42:36, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=88.0000000000000000, postBalance=67.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3909, note=转出：21.00000000, createdDate=2022-03-17 16:42:41, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=10.0000000000000000, preBalance=67.0000000000000000, postBalance=77.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:10.0000, createdDate=2022-03-17 16:42:54, fromUserId=null, total=null)]
2022-03-17 16:51:16.381 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 16:51:16.381 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 16:51:16.381 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 16:51:16.382 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:10.0000000000000000
2022-03-17 16:51:16.382 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 16:54:09.212 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:54:09.213 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 16:54:09.297 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 16:54:09.297 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:54:09.297 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 16:54:09.383 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 16:54:09.383 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 16:54:09.383 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 16:54:09.629 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 16:54:09.665 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,账户user_balance:UserBalanceChain(userId=51905047, currencyId=6, balance=1000.0000000000000000, hold=0E-16),user_partner_balance:UserBalanceChain(userId=51905047, currencyId=6, balance=3.9406246550000000, hold=0E-16),otc_user_balance:UserBalanceChain(userId=51905047, currencyId=6, balance=0E-16, hold=null)
2022-03-17 17:00:05.802 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 17:00:05.805 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:00:05.897 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 17:00:05.898 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 17:00:05.898 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 17:00:06.187 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 17:00:06.187 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:00:06.188 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:00:06.281 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:00:06.281 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:77.0000000000000000,hold:0E-16
2022-03-17 17:00:06.282 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-23.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:77.0000000000000000,操作后，数据库存储的总金额:77.0000000000000000
2022-03-17 17:00:06.282 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:00:06.283 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:00:06.380 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:00:06.380 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 17:00:06.381 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:00:06.381 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:00:06.469 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:00:06.469 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 17:00:06.469 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:00:06.570 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:00:06.570 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 17:00:06.571 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:00:06.668 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:00:06.669 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 17:00:06.669 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:00:06.786 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:00:06.787 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 17:00:06.787 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:00:06.878 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:00:06.878 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 17:00:06.879 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:00:06.964 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:00:06.964 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 17:00:06.965 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 17:00:06.965 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 17:00:07.232 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 3
2022-03-17 17:00:07.232 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=100.0000000000000000, postBalance=88.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3908, note=转出：12.00000000, createdDate=2022-03-17 16:42:36, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=88.0000000000000000, postBalance=67.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3909, note=转出：21.00000000, createdDate=2022-03-17 16:42:41, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=10.0000000000000000, preBalance=67.0000000000000000, postBalance=77.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:10.0000, createdDate=2022-03-17 16:42:54, fromUserId=null, total=null)]
2022-03-17 17:00:07.233 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:00:07.233 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 17:00:07.233 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 17:00:07.233 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:10.0000000000000000
2022-03-17 17:00:07.233 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:00:39.472 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 17:00:39.476 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 17:00:59.928 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5003 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 17:01:04.941 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 26496 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 17:01:04.942 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 17:01:05.782 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:01:05.785 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 17:01:05.804 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 17:01:05.810 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:01:05.810 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 17:01:05.819 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 17:01:05.828 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:01:05.830 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 17:01:05.845 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-03-17 17:01:06.484 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 17:01:06.497 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 17:01:06.498 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 17:01:06.498 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 17:01:06.628 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 17:01:06.628 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1629 ms
2022-03-17 17:01:07.701 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 17:01:08.445 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 17:01:08.447 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 17:01:08.447 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 17:01:08.679 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 17:01:08.696 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 17:01:08.708 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.403 seconds (JVM running for 24.915)
2022-03-17 17:01:38.003 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 17:01:38.004 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 17:01:38.006 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 17:01:38.427 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 17:01:41.070 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 17:01:41.081 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 17:01:41.109 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:01:41.230 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 17:01:41.236 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 17:01:41.236 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 17:01:41.360 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 17:01:41.360 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:01:41.361 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:01:41.627 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:01:41.627 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:77.0000000000000000,hold:0E-16
2022-03-17 17:01:41.628 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-23.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:77.0000000000000000,操作后，数据库存储的总金额:77.0000000000000000
2022-03-17 17:01:41.631 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:01:41.631 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:01:41.734 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:01:41.734 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 17:01:41.747 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 17:01:41.748 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:01:41.846 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 17:01:41.847 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:01:41.848 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 17:01:42.017 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 17:01:42.018 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc_user_balance数据库金额，balance:138.0814000000000000
2022-03-17 17:01:42.019 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc_user_balance账户金额:15.0814,操作后，账户变化金额:-23.0000000000000000,操作后，计算剩余的金额:-7.9186000000000000,操作后，数据库存储的总金额:138.0814000000000000
2022-03-17 17:01:42.020 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:01:42.020 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:01:42.139 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:01:42.140 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 17:01:42.141 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:01:42.236 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:01:42.237 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 17:01:42.237 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:01:42.334 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:01:42.335 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 17:01:42.335 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:01:42.444 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:01:42.445 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 17:01:42.445 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:01:42.673 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:01:42.673 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 17:01:42.674 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:01:42.784 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:01:42.786 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 17:01:42.789 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 17:01:42.789 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 17:01:42.899 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 3
2022-03-17 17:01:42.900 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=100.0000000000000000, postBalance=88.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3908, note=转出：12.00000000, createdDate=2022-03-17 16:42:36, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=88.0000000000000000, postBalance=67.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3909, note=转出：21.00000000, createdDate=2022-03-17 16:42:41, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=10.0000000000000000, preBalance=67.0000000000000000, postBalance=77.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:10.0000, createdDate=2022-03-17 16:42:54, fromUserId=null, total=null)]
2022-03-17 17:01:42.901 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:01:42.901 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 17:01:42.901 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 17:01:42.901 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:10.0000000000000000
2022-03-17 17:01:42.901 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:02:42.179 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 17:02:42.180 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:02:42.450 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 17:02:42.452 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 17:02:42.453 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 17:02:42.545 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 17:02:42.546 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:02:42.548 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:02:42.643 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:02:42.645 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:77.0000000000000000,hold:0E-16
2022-03-17 17:02:42.646 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:100.0,操作后，账户变化金额:-23.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:77.0000000000000000,操作后，数据库存储的总金额:77.0000000000000000
2022-03-17 17:02:42.647 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:02:42.648 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:02:42.746 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:02:42.746 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 17:02:42.757 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 17:02:42.757 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:02:42.941 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 17:02:42.942 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:02:42.943 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 17:02:43.057 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 17:02:43.057 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc_user_balance数据库金额，balance:38.0814000000000000
2022-03-17 17:02:43.058 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc_user_balance账户金额:15.0814,操作后，账户变化金额:-23.0000000000000000,操作后，计算剩余的金额:-7.9186000000000000,操作后，数据库存储的总金额:38.0814000000000000
2022-03-17 17:02:43.059 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:02:43.059 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:02:43.158 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:02:43.159 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 17:02:43.160 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:02:43.258 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:02:43.259 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 17:02:43.260 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:02:43.501 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:02:43.502 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 17:02:43.502 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:02:43.596 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:02:43.597 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 17:02:43.597 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:02:43.691 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:02:43.692 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 17:02:43.693 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:02:43.788 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:02:43.789 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 17:02:43.790 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 17:02:43.790 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 17:02:43.904 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 3
2022-03-17 17:02:43.905 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=100.0000000000000000, postBalance=88.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3908, note=转出：12.00000000, createdDate=2022-03-17 16:42:36, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=88.0000000000000000, postBalance=67.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3909, note=转出：21.00000000, createdDate=2022-03-17 16:42:41, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=10.0000000000000000, preBalance=67.0000000000000000, postBalance=77.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:10.0000, createdDate=2022-03-17 16:42:54, fromUserId=null, total=null)]
2022-03-17 17:02:43.905 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:02:43.905 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 17:02:43.906 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 17:02:43.906 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:10.0000000000000000
2022-03-17 17:02:43.906 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:03:17.449 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:03:17.451 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:03:17.559 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:03:17.560 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:03:17.561 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:03:17.661 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:03:17.662 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:03:17.663 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 17:03:17.763 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 17:03:17.819 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=1000.0000000000000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=38.0814000000000000, hold=null)
2022-03-17 17:23:48.276 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:23:48.278 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:23:48.371 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:23:48.372 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:23:48.372 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:23:48.464 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:23:48.465 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:23:48.465 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 17:23:48.567 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 17:23:48.607 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=1000.0000000000000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=38.0814000000000000, hold=null)
2022-03-17 17:24:15.445 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 17:24:15.447 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:24:15.539 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 17:24:15.540 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 17:24:15.540 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 17:24:15.631 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 17:24:15.633 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:24:15.634 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:24:15.727 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:24:15.727 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:970.0000000000000000,hold:0E-16
2022-03-17 17:24:15.728 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-30.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:970.0000000000000000,操作后，数据库存储的总金额:970.0000000000000000
2022-03-17 17:24:15.729 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:24:15.729 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:24:15.830 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:24:15.831 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 17:24:15.845 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 17:24:15.846 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:24:15.949 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 17:24:15.950 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:24:15.950 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 17:24:16.048 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 17:24:16.048 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc_user_balance数据库金额，balance:68.0814000000000000
2022-03-17 17:24:16.049 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc_user_balance账户金额:38.0814,操作后，账户变化金额:-30.0000000000000000,操作后，计算剩余的金额:8.0814000000000000,操作后，数据库存储的总金额:68.0814000000000000
2022-03-17 17:24:16.049 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:24:16.050 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:24:16.142 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:24:16.143 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 17:24:16.144 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:24:16.239 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:24:16.240 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 17:24:16.240 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:24:16.493 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:24:16.494 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 17:24:16.495 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:24:16.597 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:24:16.598 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 17:24:16.598 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:24:16.695 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:24:16.696 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 17:24:16.697 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:24:16.883 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:24:16.884 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 17:24:16.884 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 17:24:16.885 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 17:24:16.980 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 3
2022-03-17 17:24:16.980 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=6, size=-11.0000000000000000, preBalance=1000.0000000000000000, postBalance=989.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3911, note=转出：11.00000000, createdDate=2022-03-17 17:23:55, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-32.0000000000000000, preBalance=989.0000000000000000, postBalance=957.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3912, note=转出：32.00000000, createdDate=2022-03-17 17:24:00, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=13.0000000000000000, preBalance=957.0000000000000000, postBalance=970.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:13.0000, createdDate=2022-03-17 17:24:09, fromUserId=null, total=null)]
2022-03-17 17:24:16.981 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:24:16.981 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-11.0000000000000000
2022-03-17 17:24:16.981 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-32.0000000000000000
2022-03-17 17:24:16.981 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:13.0000000000000000
2022-03-17 17:24:16.981 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:26:11.071 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Retrograde clock change detected (housekeeper delta=29s816ms), soft-evicting connections from pool.
2022-03-17 17:28:17.585 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 17:28:17.591 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 17:28:37.582 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5001 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 17:28:42.596 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 26588 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 17:28:42.597 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 17:28:43.557 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:28:43.561 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 17:28:43.588 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 17:28:43.594 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:28:43.595 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 17:28:43.604 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 17:28:43.616 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:28:43.618 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 17:28:43.635 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-03-17 17:28:44.317 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 17:28:44.329 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 17:28:44.330 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 17:28:44.330 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 17:28:44.462 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 17:28:44.463 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1807 ms
2022-03-17 17:28:45.663 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 17:28:46.557 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 17:28:46.559 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 17:28:46.560 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 17:28:46.802 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 17:28:46.820 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 17:28:46.833 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.828 seconds (JVM running for 25.391)
2022-03-17 17:34:16.676 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 17:34:16.678 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 17:34:16.679 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 17:34:17.112 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 17:34:18.602 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 17:34:18.614 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 17:34:18.646 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:34:18.841 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 17:34:18.846 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 17:34:18.847 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 17:34:18.942 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 17:34:18.943 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:34:18.944 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:34:19.037 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:34:19.038 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:971.0000000000000000,hold:0E-16
2022-03-17 17:34:19.040 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-29.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:971.0000000000000000,操作后，数据库存储的总金额:971.0000000000000000
2022-03-17 17:34:19.044 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:34:19.045 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:34:19.144 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:34:19.145 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 17:34:19.162 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 17:34:19.162 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:34:19.458 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 17:34:19.459 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:34:19.460 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 17:34:19.562 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 17:34:19.562 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc_user_balance数据库金额，balance:67.0814000000000000
2022-03-17 17:34:19.563 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc_user_balance账户金额:38.0814,操作后，账户变化金额:-29.0000000000000000,操作后，计算剩余的金额:67.0814000000000000,操作后，数据库存储的总金额:67.0814000000000000
2022-03-17 17:34:19.563 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:34:19.564 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:34:19.659 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:34:19.660 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 17:34:19.660 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:34:19.760 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:34:19.761 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 17:34:19.761 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:34:19.857 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:34:19.858 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 17:34:19.859 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:34:19.953 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:34:19.953 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 17:34:19.954 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:34:20.050 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:34:20.051 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 17:34:20.052 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:34:20.144 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:34:20.144 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 17:34:20.145 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 17:34:20.146 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 17:34:20.427 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 4
2022-03-17 17:34:20.427 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=6, size=-11.0000000000000000, preBalance=1000.0000000000000000, postBalance=989.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3911, note=转出：11.00000000, createdDate=2022-03-17 17:23:55, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-32.0000000000000000, preBalance=989.0000000000000000, postBalance=957.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3912, note=转出：32.00000000, createdDate=2022-03-17 17:24:00, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=13.0000000000000000, preBalance=957.0000000000000000, postBalance=970.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:13.0000, createdDate=2022-03-17 17:24:09, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=1.0000000000000000, preBalance=970.0000000000000000, postBalance=971.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:1.0000, createdDate=2022-03-17 17:24:45, fromUserId=null, total=null)]
2022-03-17 17:34:20.429 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:34:20.429 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-11.0000000000000000
2022-03-17 17:34:20.429 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-32.0000000000000000
2022-03-17 17:34:20.429 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:13.0000000000000000
2022-03-17 17:34:20.429 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:1.0000000000000000
2022-03-17 17:34:20.429 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:36:46.962 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 17:36:46.964 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:36:47.218 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 17:36:47.220 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 17:36:47.220 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 17:36:47.313 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 17:36:47.314 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:36:47.316 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:36:47.407 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:36:47.410 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:971.0000000000000000,hold:0E-16
2022-03-17 17:36:47.411 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-29.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:971.0000000000000000,操作后，数据库存储的总金额:971.0000000000000000
2022-03-17 17:36:47.412 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:36:47.412 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:36:47.511 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:36:47.512 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 17:36:47.525 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 17:36:47.525 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:36:47.699 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 17:36:47.700 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:36:47.700 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 17:36:47.790 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 17:36:47.790 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc_user_balance数据库金额，balance:167.0814000000000000
2022-03-17 17:36:47.791 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc_user_balance账户金额:38.0814,操作后，账户变化金额:-29.0000000000000000,操作后，计算剩余的金额:67.0814000000000000,操作后，数据库存储的总金额:167.0814000000000000
2022-03-17 17:36:47.791 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:36:47.791 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:36:47.895 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:36:47.896 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 17:36:47.897 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:36:47.987 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:36:47.988 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 17:36:47.989 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:36:48.273 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:36:48.275 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 17:36:48.275 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:36:48.369 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:36:48.370 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 17:36:48.370 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:36:48.462 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:36:48.463 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 17:36:48.463 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:36:48.569 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:36:48.569 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 17:36:48.570 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 17:36:48.570 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 17:36:48.686 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 4
2022-03-17 17:36:48.687 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=6, size=-11.0000000000000000, preBalance=1000.0000000000000000, postBalance=989.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3911, note=转出：11.00000000, createdDate=2022-03-17 17:23:55, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-32.0000000000000000, preBalance=989.0000000000000000, postBalance=957.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3912, note=转出：32.00000000, createdDate=2022-03-17 17:24:00, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=13.0000000000000000, preBalance=957.0000000000000000, postBalance=970.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:13.0000, createdDate=2022-03-17 17:24:09, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=1.0000000000000000, preBalance=970.0000000000000000, postBalance=971.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:1.0000, createdDate=2022-03-17 17:24:45, fromUserId=null, total=null)]
2022-03-17 17:36:48.687 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:36:48.688 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-11.0000000000000000
2022-03-17 17:36:48.688 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-32.0000000000000000
2022-03-17 17:36:48.688 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:13.0000000000000000
2022-03-17 17:36:48.688 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:1.0000000000000000
2022-03-17 17:36:48.688 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:37:02.147 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 17:37:02.149 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:37:02.299 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 17:37:02.300 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 17:37:02.301 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 17:37:02.408 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 17:37:02.409 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:37:02.410 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:37:02.514 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:37:02.514 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:971.0000000000000000,hold:0E-16
2022-03-17 17:37:02.515 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-29.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:971.0000000000000000,操作后，数据库存储的总金额:971.0000000000000000
2022-03-17 17:37:02.516 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:37:02.516 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:37:02.610 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:37:02.611 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 17:37:02.624 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 17:37:02.624 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:37:02.714 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 17:37:02.715 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:37:02.716 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 17:37:02.957 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 17:37:02.958 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc_user_balance数据库金额，balance:67.0814000000000000
2022-03-17 17:37:02.958 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc_user_balance账户金额:38.0814,操作后，账户变化金额:-29.0000000000000000,操作后，计算剩余的金额:67.0814000000000000,操作后，数据库存储的总金额:67.0814000000000000
2022-03-17 17:37:02.959 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:37:02.960 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:37:03.050 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:37:03.051 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 17:37:03.052 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:37:03.144 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:37:03.145 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 17:37:03.145 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:37:03.236 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:37:03.237 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 17:37:03.238 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:37:03.358 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:37:03.359 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 17:37:03.359 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:37:03.455 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:37:03.456 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 17:37:03.457 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:37:03.549 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:37:03.549 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 17:37:03.550 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 17:37:03.550 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 17:37:03.644 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 4
2022-03-17 17:37:03.644 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=6, size=-11.0000000000000000, preBalance=1000.0000000000000000, postBalance=989.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3911, note=转出：11.00000000, createdDate=2022-03-17 17:23:55, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-32.0000000000000000, preBalance=989.0000000000000000, postBalance=957.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3912, note=转出：32.00000000, createdDate=2022-03-17 17:24:00, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=13.0000000000000000, preBalance=957.0000000000000000, postBalance=970.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:13.0000, createdDate=2022-03-17 17:24:09, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=1.0000000000000000, preBalance=970.0000000000000000, postBalance=971.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:1.0000, createdDate=2022-03-17 17:24:45, fromUserId=null, total=null)]
2022-03-17 17:37:03.645 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:37:03.646 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-11.0000000000000000
2022-03-17 17:37:03.646 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-32.0000000000000000
2022-03-17 17:37:03.646 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:13.0000000000000000
2022-03-17 17:37:03.646 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:1.0000000000000000
2022-03-17 17:37:03.646 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:40:01.361 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 17:40:01.363 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:40:01.454 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 17:40:01.456 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 17:40:01.456 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 17:40:01.626 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 17:40:01.627 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:40:01.628 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:40:01.727 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:40:01.728 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:966.0000000000000000,hold:0E-16
2022-03-17 17:40:01.728 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-34.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:966.0000000000000000,操作后，数据库存储的总金额:966.0000000000000000
2022-03-17 17:40:01.728 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:40:01.729 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:40:01.871 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:40:01.872 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 17:40:01.887 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 17:40:01.888 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:40:01.980 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 17:40:01.981 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:40:01.982 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 17:40:02.282 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 17:40:02.282 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc_user_balance数据库金额，balance:67.0814000000000000
2022-03-17 17:40:02.283 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc_user_balance账户金额:38.0814,操作后，账户变化金额:-34.0000000000000000,操作后，计算剩余的金额:72.0814000000000000,操作后，数据库存储的总金额:67.0814000000000000
2022-03-17 17:40:02.283 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:40:02.284 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:40:02.379 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:40:02.380 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 17:40:02.380 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:40:02.472 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:40:02.473 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 17:40:02.474 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:40:02.569 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:40:02.570 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 17:40:02.571 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:40:02.674 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:40:02.675 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 17:40:02.675 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:40:02.768 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:40:02.770 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 17:40:02.771 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:40:02.865 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:40:02.865 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 17:40:02.867 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 17:40:02.867 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 17:40:02.966 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 5
2022-03-17 17:40:02.966 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=6, size=-11.0000000000000000, preBalance=1000.0000000000000000, postBalance=989.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3911, note=转出：11.00000000, createdDate=2022-03-17 17:23:55, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-32.0000000000000000, preBalance=989.0000000000000000, postBalance=957.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3912, note=转出：32.00000000, createdDate=2022-03-17 17:24:00, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=13.0000000000000000, preBalance=957.0000000000000000, postBalance=970.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:13.0000, createdDate=2022-03-17 17:24:09, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=1.0000000000000000, preBalance=970.0000000000000000, postBalance=971.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:1.0000, createdDate=2022-03-17 17:24:45, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-5.0000000000000000, preBalance=971.0000000000000000, postBalance=966.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77476, note=用户ID:51905058, 转出5.0000000000000000USDT, createdDate=2022-03-17 17:39:53, fromUserId=null, total=null)]
2022-03-17 17:40:02.967 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:40:02.967 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-11.0000000000000000
2022-03-17 17:40:02.967 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-32.0000000000000000
2022-03-17 17:40:02.967 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:13.0000000000000000
2022-03-17 17:40:02.967 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:1.0000000000000000
2022-03-17 17:40:02.967 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-5.0000000000000000
2022-03-17 17:40:02.967 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:43:59.582 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 17:43:59.584 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:43:59.675 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 17:43:59.676 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 17:43:59.677 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 17:43:59.771 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 17:43:59.772 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:43:59.772 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:44:00.071 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:44:00.072 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:971.0000000000000000,hold:0E-16
2022-03-17 17:44:00.073 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-29.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:971.0000000000000000,操作后，数据库存储的总金额:971.0000000000000000
2022-03-17 17:44:00.073 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:44:00.074 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:44:00.164 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:44:00.164 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 17:44:00.179 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 17:44:00.179 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:44:00.270 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 17:44:00.271 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:44:00.272 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 17:44:00.362 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 17:44:00.363 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc_user_balance数据库金额，balance:67.0814000000000000
2022-03-17 17:44:00.363 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc_user_balance账户金额:38.0814,操作后，账户变化金额:-29.0000000000000000,操作后，计算剩余的金额:67.0814000000000000,操作后，数据库存储的总金额:67.0814000000000000
2022-03-17 17:44:00.363 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:44:00.364 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:44:00.466 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:44:00.467 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 17:44:00.468 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:44:00.567 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:44:00.568 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 17:44:00.569 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:44:00.679 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:44:00.690 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 17:44:00.693 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:44:00.787 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:44:00.788 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 17:44:00.789 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:44:00.888 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:44:00.889 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 17:44:00.890 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 17:44:01.122 [http-nio-10090-exec-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 17:44:01.123 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 17:44:01.124 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 17:44:01.125 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 17:44:01.229 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 6
2022-03-17 17:44:01.230 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=6, size=-11.0000000000000000, preBalance=1000.0000000000000000, postBalance=989.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3911, note=转出：11.00000000, createdDate=2022-03-17 17:23:55, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-32.0000000000000000, preBalance=989.0000000000000000, postBalance=957.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3912, note=转出：32.00000000, createdDate=2022-03-17 17:24:00, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=13.0000000000000000, preBalance=957.0000000000000000, postBalance=970.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:13.0000, createdDate=2022-03-17 17:24:09, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=1.0000000000000000, preBalance=970.0000000000000000, postBalance=971.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:1.0000, createdDate=2022-03-17 17:24:45, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-5.0000000000000000, preBalance=971.0000000000000000, postBalance=966.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77476, note=用户ID:51905058, 转出5.0000000000000000USDT, createdDate=2022-03-17 17:39:53, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=5.0000000000000000, preBalance=966.0000000000000000, postBalance=971.0000000000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77477, note=用户ID:51905058, 转入5USDT, createdDate=2022-03-17 17:43:25, fromUserId=null, total=null)]
2022-03-17 17:44:01.231 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:44:01.231 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-11.0000000000000000
2022-03-17 17:44:01.231 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-32.0000000000000000
2022-03-17 17:44:01.231 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:13.0000000000000000
2022-03-17 17:44:01.231 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:1.0000000000000000
2022-03-17 17:44:01.231 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-5.0000000000000000
2022-03-17 17:44:01.231 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:5.0000000000000000
2022-03-17 17:44:01.231 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 17:52:32.819 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 17:52:32.830 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 17:52:53.990 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5002 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 17:52:59.003 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 26778 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 17:52:59.005 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 17:52:59.824 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:52:59.826 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 17:52:59.843 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 17:52:59.848 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:52:59.849 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 17:52:59.858 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 17:52:59.869 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:52:59.871 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 17:52:59.885 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-03-17 17:53:00.601 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 17:53:00.626 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 17:53:00.627 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 17:53:00.628 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 17:53:00.790 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 17:53:00.791 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1730 ms
2022-03-17 17:53:02.172 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 17:53:02.970 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 17:53:02.972 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 17:53:02.973 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 17:53:03.246 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 17:53:03.271 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 17:53:03.287 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.809 seconds (JVM running for 25.302)
2022-03-17 17:53:26.691 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 17:53:26.692 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 17:53:26.695 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2022-03-17 17:53:26.951 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 17:53:28.613 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 17:53:28.624 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:53:28.655 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:53:28.770 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:53:28.775 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:53:28.775 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:53:28.912 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:53:28.912 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:53:28.912 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 17:53:29.003 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 17:53:29.004 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 17:53:29.004 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 17:53:29.090 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 17:53:29.239 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=1000.0000000000000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=67.0814000000000000, hold=null),assert_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=0E-16, hold=null)
2022-03-17 17:54:14.405 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 17:54:14.415 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 17:54:34.674 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5002 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 17:54:39.685 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 26793 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 17:54:39.686 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 17:54:40.527 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:54:40.529 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 17:54:40.547 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 17:54:40.552 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:54:40.552 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 17:54:40.561 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 17:54:40.570 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:54:40.572 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 17:54:40.588 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2022-03-17 17:54:41.249 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 17:54:41.265 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 17:54:41.265 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 17:54:41.302 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 17:54:41.405 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 17:54:41.405 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1664 ms
2022-03-17 17:54:42.528 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 17:54:43.236 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 17:54:43.237 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 17:54:43.238 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 17:54:43.482 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 17:54:43.498 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 17:54:43.510 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.453 seconds (JVM running for 24.945)
2022-03-17 17:54:47.134 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 17:54:47.135 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 17:54:47.136 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 17:54:47.407 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 17:54:48.869 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 17:54:48.880 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:54:48.910 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:54:49.019 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:54:49.024 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:54:49.025 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:54:49.265 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:54:49.266 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:54:49.266 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 17:54:49.353 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 17:54:49.354 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 17:54:49.354 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 17:54:49.441 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 17:54:49.583 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=1000.0000000000000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=67.0814000000000000, hold=null),assert_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=0E-16, hold=null)
2022-03-17 17:55:58.719 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 17:55:58.719 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:55:58.805 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 17:55:58.806 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 17:55:58.806 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 17:55:58.893 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 17:55:58.894 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:55:58.894 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:55:59.021 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:55:59.021 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:841.0000000000000000,hold:0E-16
2022-03-17 17:55:59.021 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-159.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:841.0000000000000000,操作后，数据库存储的总金额:841.0000000000000000
2022-03-17 17:55:59.023 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:55:59.024 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:55:59.272 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:55:59.273 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 17:56:15.154 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 17:56:15.155 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:56:15.404 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 17:56:15.405 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 17:56:15.405 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 17:56:15.503 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 17:56:15.503 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:56:15.504 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:56:15.590 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:56:15.590 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:841.0000000000000000,hold:0E-16
2022-03-17 17:56:15.591 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-159.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:841.0000000000000000,操作后，数据库存储的总金额:841.0000000000000000
2022-03-17 17:56:15.592 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:56:15.592 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:56:15.683 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:56:15.683 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 17:57:00.211 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 17:57:00.213 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 17:57:00.501 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 17:57:00.501 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 17:57:00.502 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 17:57:00.588 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 17:57:00.589 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:57:00.589 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 17:57:00.676 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 17:57:00.677 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:841.0000000000000000,hold:0E-16
2022-03-17 17:57:00.677 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-159.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:841.0000000000000000,操作后，数据库存储的总金额:841.0000000000000000
2022-03-17 17:57:00.678 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 17:57:00.680 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 17:57:00.769 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 17:57:00.771 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 17:57:46.763 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 17:57:46.772 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 17:58:07.645 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5004 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 17:58:12.650 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 26817 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 17:58:12.651 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 17:58:13.719 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:58:13.721 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 17:58:13.740 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 17:58:13.745 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:58:13.746 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 17:58:13.754 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 17:58:13.764 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 17:58:13.766 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 17:58:13.789 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2022-03-17 17:58:14.549 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 17:58:14.566 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 17:58:14.566 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 17:58:14.567 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 17:58:14.733 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 17:58:14.733 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2036 ms
2022-03-17 17:58:16.170 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 17:58:16.977 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 17:58:16.979 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 17:58:16.979 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 17:58:17.282 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 17:58:17.297 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 17:58:17.310 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 25.299 seconds (JVM running for 25.839)
2022-03-17 18:01:46.197 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 18:01:46.199 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 18:01:46.200 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 18:01:46.607 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 18:01:48.278 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 18:01:48.286 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:01:48.316 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:01:48.441 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:01:48.447 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:01:48.447 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:01:48.550 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:01:48.552 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:01:48.552 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:01:48.649 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:01:48.650 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:929.4636959200000000,hold:27.1892580000000000
2022-03-17 18:01:48.651 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-43.3470460800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:956.6529539200000000,操作后，数据库存储的总金额:956.6529539200000000
2022-03-17 18:01:48.654 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:01:48.654 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:01:48.910 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:01:48.911 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:03:49.466 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 18:03:49.476 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 18:04:10.110 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5006 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 18:04:15.119 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 26861 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 18:04:15.120 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 18:04:16.002 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 18:04:16.004 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 18:04:16.025 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 18:04:16.029 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 18:04:16.030 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 18:04:16.039 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 18:04:16.051 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 18:04:16.052 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 18:04:16.068 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-03-17 18:04:16.802 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 18:04:16.814 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 18:04:16.814 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 18:04:16.815 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 18:04:16.934 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 18:04:16.934 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1754 ms
2022-03-17 18:04:18.125 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 18:04:18.928 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 18:04:18.930 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 18:04:18.930 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 18:04:19.187 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 18:04:19.205 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 18:04:19.217 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.657 seconds (JVM running for 25.222)
2022-03-17 18:04:48.305 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 18:04:48.306 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 18:04:48.307 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 18:04:48.610 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 18:04:49.998 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 18:04:50.010 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:04:50.045 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:04:50.175 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:04:50.181 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:04:50.181 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:04:50.272 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:04:50.273 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:04:50.274 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:04:50.683 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:04:50.684 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:04:50.684 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:04:50.783 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:04:50.930 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=1000.0000000000000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=166.0814000000000000, hold=null),assert_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=60.0000000000000000, hold=null)
2022-03-17 18:06:44.718 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:06:44.719 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:06:44.807 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:06:44.808 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:06:44.810 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:06:44.906 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:06:44.907 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:06:44.908 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:06:44.996 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:06:44.997 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:06:44.997 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:06:45.269 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:06:45.321 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=1000.0000000000000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=166.0814000000000000, hold=null),assert_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=60.0000000000000000, hold=null)
2022-03-17 18:07:08.859 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:07:08.860 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:07:08.968 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:07:08.969 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:07:08.970 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:07:09.061 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:07:09.061 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:07:09.062 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:07:09.149 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:07:09.149 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:994.7313330000000000,hold:5.2686670000000000
2022-03-17 18:07:09.149 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:0,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1000.0,操作后，数据库存储的总金额:1000.0000000000000000
2022-03-17 18:07:09.152 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:07:09.152 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:07:09.398 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:07:09.399 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:07:09.424 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:07:09.425 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:07:09.513 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:07:09.514 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:07:09.515 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:07:09.605 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:07:09.607 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:07:09.608 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:07:09.781 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:07:09.782 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:226.0814000000000000
2022-03-17 18:07:09.782 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:226.0814,操作后，账户变化金额:0,操作后，计算剩余的金额:226.0814,操作后，数据库存储的总金额:226.0814000000000000
2022-03-17 18:07:09.783 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:07:09.785 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:07:09.891 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:07:09.894 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:07:09.895 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:07:09.983 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:07:09.984 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:07:09.985 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:07:10.075 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:07:10.076 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:07:10.076 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:07:10.177 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:07:10.178 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:07:10.179 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:07:10.440 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:07:10.442 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:07:10.442 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:07:10.547 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:07:10.548 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:07:10.549 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:07:10.549 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:07:10.638 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 0
2022-03-17 18:07:10.639 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[]
2022-03-17 18:09:23.735 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:09:23.737 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:09:23.829 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:09:23.830 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:09:23.830 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:09:23.924 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:09:23.925 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:09:23.925 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:09:24.039 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:09:24.039 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:995.5897382800000000,hold:4.0685010000000000
2022-03-17 18:09:24.040 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-0.3417607200000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:999.6582392800000000,操作后，数据库存储的总金额:999.6582392800000000
2022-03-17 18:09:24.041 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:09:24.041 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:09:24.128 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:09:24.128 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:09:24.151 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:09:24.152 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:09:24.244 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:09:24.244 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:09:24.245 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:09:24.336 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:09:24.337 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:09:24.337 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:09:24.425 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:09:24.425 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:226.0814000000000000
2022-03-17 18:09:24.425 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:226.0814,操作后，账户变化金额:0,操作后，计算剩余的金额:226.0814,操作后，数据库存储的总金额:226.0814000000000000
2022-03-17 18:09:24.425 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:09:24.426 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:09:24.693 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:09:24.693 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:09:24.694 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:09:24.797 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:09:24.798 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:09:24.798 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:09:24.889 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:09:24.890 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:09:24.890 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:09:24.978 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:09:24.979 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:09:24.979 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:09:25.088 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:09:25.089 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:09:25.090 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:09:25.196 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:09:25.197 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:09:25.197 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:09:25.198 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:09:25.292 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 1
2022-03-17 18:09:25.293 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-0.3417607200000000, preBalance=1000.0000000000000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=10946, note=单号:10946开仓手续费-0.3417607200000000, createdDate=2022-03-17 18:08:40, fromUserId=0, total=null)]
2022-03-17 18:09:25.293 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:09:25.293 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3417607200000000
2022-03-17 18:09:25.303 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '10946' LIMIT 0,1000 
2022-03-17 18:09:25.304 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:09:25.394 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:09:25.395 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:09:25.395 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:09:25.485 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:09:25.541 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:09:25.542 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:09:25.834 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:09:25.834 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:09:25.834 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:09:25.937 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:09:25.938 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:09:25.938 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:09:26.032 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:09:26.033 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:09:26.033 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:09:26.140 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:09:26.142 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:09:26.142 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:09:26.231 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:09:26.234 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:09:26.235 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:09:26.351 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 5
2022-03-17 18:09:26.352 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:09:26.352 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:09:26.352 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:09:26.353 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:09:26.353 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:09:26.354 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:09:26.354 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:09:26.448 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 5
2022-03-17 18:09:26.449 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:09:26.449 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:09:26.450 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:09:26.450 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:09:26.450 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:09:26.451 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:09:26.451 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:09:26.546 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 5
2022-03-17 18:09:26.546 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:09:26.546 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:09:26.546 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:09:26.546 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:09:26.547 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:09:26.547 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:09:26.547 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:09:26.888 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 5
2022-03-17 18:09:26.889 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:09:26.889 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:09:26.889 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:09:26.889 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:09:26.889 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:09:26.890 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:09:26.890 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:09:26.982 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 5
2022-03-17 18:09:26.982 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:09:26.983 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:09:26.983 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:09:26.983 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:09:26.983 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:09:26.983 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:12:23.539 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:12:23.540 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:12:23.640 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:12:23.640 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:12:23.641 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:12:23.730 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:12:23.731 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:12:23.731 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:12:23.818 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:12:23.818 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:944.5897382800000000,hold:4.0685010000000000
2022-03-17 18:12:23.818 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-51.3417607200000000,逐仓爆仓盈余对应的平仓手续费总值:-1.6568472000000000,操作后，计算剩余的金额:948.6582392800000000,操作后，数据库存储的总金额:948.6582392800000000
2022-03-17 18:12:23.819 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:12:23.819 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:24.100 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:12:24.100 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:12:24.120 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:12:24.121 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:12:24.208 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:12:24.209 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:12:24.210 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:12:24.297 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:12:24.298 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:12:24.299 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:12:24.495 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:12:24.495 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:277.0814000000000000
2022-03-17 18:12:24.495 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:226.0814,操作后，账户变化金额:-51.0000000000000000,操作后，计算剩余的金额:277.0814000000000000,操作后，数据库存储的总金额:277.0814000000000000
2022-03-17 18:12:24.496 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:12:24.497 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:12:24.588 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:12:24.589 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:12:24.590 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:12:24.677 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:12:24.678 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:12:24.679 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:12:24.785 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:12:24.786 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:12:24.787 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:12:24.883 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:12:24.883 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:12:24.884 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:12:25.147 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:12:25.148 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:12:25.149 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:12:25.237 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:12:25.237 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:12:25.238 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:12:25.239 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:12:25.333 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 6
2022-03-17 18:12:25.333 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-0.3417607200000000, preBalance=1000.0000000000000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=10946, note=单号:10946开仓手续费-0.3417607200000000, createdDate=2022-03-17 18:08:40, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0E-16, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11687, note=单号:11687平仓收益7.4602494000000000, createdDate=2022-03-17 18:10:50, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8285766000000000, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11687, note=单号:11687平仓手续费-0.8285766000000000, createdDate=2022-03-17 18:10:50, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0E-16, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11702, note=单号:11702平仓收益6.6955554000000000, createdDate=2022-03-17 18:11:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8282706000000000, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11702, note=单号:11702平仓手续费-0.8282706000000000, createdDate=2022-03-17 18:11:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-51.0000000000000000, preBalance=999.6582392800000000, postBalance=948.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3918, note=转出：51.00000000, createdDate=2022-03-17 18:12:19, fromUserId=null, total=null)]
2022-03-17 18:12:25.334 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:12:25.334 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3417607200000000
2022-03-17 18:12:25.335 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '10946' LIMIT 0,1000 
2022-03-17 18:12:25.335 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:12:25.424 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:12:25.425 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:12:25.425 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:12:25.562 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:12:25.563 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:12:25.564 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:25.651 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:12:25.652 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:12:25.652 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:25.740 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:12:25.740 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:12:25.741 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:25.830 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:12:25.831 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:12:25.831 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:25.925 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:12:25.926 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:12:25.927 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:26.200 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:12:26.202 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:12:26.202 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:12:26.300 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:12:26.301 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.301 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.301 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.301 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.302 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.302 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.302 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.302 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.302 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.302 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.302 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.302 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.303 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.303 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.303 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.303 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.303 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.303 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.303 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.304 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:12:26.304 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:12:26.402 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:12:26.403 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.403 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.403 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.403 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.403 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.403 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.403 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.403 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.403 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.403 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.404 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.404 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.404 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.404 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.404 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.404 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.404 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.404 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.404 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:12:26.405 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:12:26.405 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:12:26.586 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:12:26.586 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.588 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.588 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.588 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.588 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.588 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.588 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:12:26.589 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:12:26.589 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:12:26.703 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:12:26.703 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.704 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.704 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.704 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.704 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.705 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.705 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.705 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.705 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.705 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.705 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.705 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.705 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.705 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.706 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.706 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.706 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.706 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.706 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.707 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:12:26.707 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:12:26.802 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:12:26.803 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.803 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.803 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.803 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.803 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.804 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.804 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.804 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.804 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.804 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.804 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.804 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.805 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.805 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.805 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.805 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.805 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.805 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.805 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:12:26.806 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0E-16
2022-03-17 18:12:26.807 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11687' LIMIT 0,1000 
2022-03-17 18:12:26.808 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:12:26.906 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:12:26.907 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:12:26.907 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:12:26.996 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:12:26.997 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 盈亏计算不正确--->,用户:51905058,订单:11687,类型:4
2022-03-17 18:12:26.997 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11687' LIMIT 0,1000 
2022-03-17 18:12:26.998 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:12:27.242 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:12:27.244 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:12:27.244 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:12:27.336 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:12:27.337 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11687' and type=? limit 0,1 
2022-03-17 18:12:27.338 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:12:27.428 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:12:27.428 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11687,数据库:12.55110000,计算得:-12.551100
2022-03-17 18:12:27.429 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8285766000000000
2022-03-17 18:12:27.430 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11687' LIMIT 0,1000 
2022-03-17 18:12:27.430 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:12:27.519 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:12:27.520 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:12:27.520 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:12:27.634 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:12:27.635 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:12:27.635 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:27.733 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:12:27.734 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:12:27.734 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:27.822 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:12:27.823 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:12:27.823 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:27.928 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:12:27.929 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:12:27.929 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:28.016 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:12:28.017 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:12:28.018 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:28.290 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:12:28.292 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11687' and type=? limit 0,100 
2022-03-17 18:12:28.292 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:12:28.385 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-03-17 18:12:28.386 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0E-16
2022-03-17 18:12:28.386 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11702' LIMIT 0,1000 
2022-03-17 18:12:28.387 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:12:28.479 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:12:28.480 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:12:28.480 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:12:28.571 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:12:28.572 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 盈亏计算不正确--->,用户:51905058,订单:11702,类型:4
2022-03-17 18:12:28.573 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11702' LIMIT 0,1000 
2022-03-17 18:12:28.574 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:12:28.689 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:12:28.689 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:12:28.690 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:12:28.777 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:12:28.778 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11702' and type=? limit 0,1 
2022-03-17 18:12:28.779 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:12:28.871 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:12:28.871 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11702,数据库:13.31610000,计算得:-13.316100
2022-03-17 18:12:28.872 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8282706000000000
2022-03-17 18:12:28.872 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11702' LIMIT 0,1000 
2022-03-17 18:12:28.873 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:12:28.967 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:12:28.967 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:12:28.968 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:12:29.057 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:12:29.059 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:12:29.060 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:29.348 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:12:29.348 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:12:29.349 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:29.438 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:12:29.439 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:12:29.440 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:29.528 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:12:29.529 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:12:29.530 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:29.639 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:12:29.640 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:12:29.641 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:12:29.816 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:12:29.817 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11702' and type=? limit 0,100 
2022-03-17 18:12:29.817 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:12:29.915 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-03-17 18:12:29.916 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-51.0000000000000000
2022-03-17 18:12:29.916 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:14:24.442 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:14:24.443 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:14:24.686 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:14:24.687 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:14:24.687 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:14:24.798 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:14:24.798 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:24.799 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:14:24.893 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:14:24.893 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:931.5897382800000000,hold:4.0685010000000000
2022-03-17 18:14:24.893 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-64.3417607200000000,逐仓爆仓盈余对应的平仓手续费总值:-1.6568472000000000,操作后，计算剩余的金额:935.6582392800000000,操作后，数据库存储的总金额:935.6582392800000000
2022-03-17 18:14:24.894 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:24.895 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:24.984 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:14:24.984 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:14:25.007 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:14:25.008 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:14:25.166 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:14:25.167 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:25.167 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:14:25.258 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:14:25.259 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:14:25.260 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:14:25.350 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:14:25.350 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:290.0814000000000000
2022-03-17 18:14:25.350 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:226.0814,操作后，账户变化金额:-64.0000000000000000,操作后，计算剩余的金额:290.0814000000000000,操作后，数据库存储的总金额:290.0814000000000000
2022-03-17 18:14:25.351 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:25.351 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:14:25.439 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:14:25.439 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:14:25.440 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:14:25.741 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:14:25.742 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:14:25.742 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:14:25.834 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:14:25.835 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:14:25.835 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:14:25.923 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:14:25.924 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:14:25.925 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:14:26.014 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:14:26.014 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:14:26.015 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:14:26.128 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:14:26.129 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:14:26.129 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:14:26.130 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:14:26.223 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 7
2022-03-17 18:14:26.224 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-0.3417607200000000, preBalance=1000.0000000000000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=10946, note=单号:10946开仓手续费-0.3417607200000000, createdDate=2022-03-17 18:08:40, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0E-16, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11687, note=单号:11687平仓收益7.4602494000000000, createdDate=2022-03-17 18:10:50, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8285766000000000, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11687, note=单号:11687平仓手续费-0.8285766000000000, createdDate=2022-03-17 18:10:50, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0E-16, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11702, note=单号:11702平仓收益6.6955554000000000, createdDate=2022-03-17 18:11:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8282706000000000, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11702, note=单号:11702平仓手续费-0.8282706000000000, createdDate=2022-03-17 18:11:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-51.0000000000000000, preBalance=999.6582392800000000, postBalance=948.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3918, note=转出：51.00000000, createdDate=2022-03-17 18:12:19, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-13.0000000000000000, preBalance=944.5897382800000000, postBalance=931.5897382800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77482, note=用户ID:51905058, 转出13.0000000000000000USDT, createdDate=2022-03-17 18:14:22, fromUserId=null, total=null)]
2022-03-17 18:14:26.225 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:14:26.225 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3417607200000000
2022-03-17 18:14:26.225 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '10946' LIMIT 0,1000 
2022-03-17 18:14:26.226 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:26.313 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:26.314 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:26.314 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:26.401 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:26.402 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:14:26.403 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:26.492 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:26.493 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:14:26.494 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:26.785 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:26.786 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:14:26.786 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:26.881 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:26.882 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:14:26.882 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:26.973 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:26.974 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:26.974 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:27.067 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:14:27.068 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:14:27.068 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:14:27.281 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:14:27.281 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.282 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.282 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.282 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.282 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.282 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.282 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.282 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.282 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.282 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.282 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.282 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.282 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.283 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.283 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.283 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.283 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.283 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.283 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.283 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:14:27.284 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:14:27.381 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:14:27.381 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.381 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.382 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:27.383 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:14:27.383 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:14:27.489 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:14:27.489 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.490 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.490 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.490 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.490 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.490 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.490 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.490 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.491 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.491 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.491 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.491 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.491 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.491 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.491 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.491 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.492 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.492 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.492 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:27.493 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:14:27.493 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:14:27.596 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:14:27.597 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.597 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.597 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.597 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.597 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.597 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.597 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.597 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.598 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.598 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.598 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.598 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.598 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.598 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.598 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.598 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.598 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.598 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.598 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.599 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:14:27.599 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:14:27.857 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:14:27.857 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.857 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.857 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.858 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.859 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.859 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.859 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:27.859 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0E-16
2022-03-17 18:14:27.860 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11687' LIMIT 0,1000 
2022-03-17 18:14:27.860 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:27.948 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:27.949 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:27.950 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:28.038 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:28.039 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 盈亏计算不正确--->,用户:51905058,订单:11687,类型:4
2022-03-17 18:14:28.040 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11687' LIMIT 0,1000 
2022-03-17 18:14:28.040 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:28.129 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:28.130 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:28.130 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:28.227 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:28.229 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11687' and type=? limit 0,1 
2022-03-17 18:14:28.229 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:14:28.319 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:14:28.320 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11687,数据库:12.55110000,计算得:-12.551100
2022-03-17 18:14:28.320 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8285766000000000
2022-03-17 18:14:28.320 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11687' LIMIT 0,1000 
2022-03-17 18:14:28.321 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:28.411 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:28.412 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:28.412 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:28.502 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:28.503 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:14:28.504 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:28.612 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:28.613 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:14:28.613 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:28.880 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:28.881 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:14:28.881 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:28.977 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:28.978 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:14:28.979 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:29.071 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:29.072 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:29.072 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:29.160 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:14:29.161 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11687' and type=? limit 0,100 
2022-03-17 18:14:29.161 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:14:29.273 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-03-17 18:14:29.274 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0E-16
2022-03-17 18:14:29.275 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11702' LIMIT 0,1000 
2022-03-17 18:14:29.275 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:29.370 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:29.371 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:29.372 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:29.460 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:29.461 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 盈亏计算不正确--->,用户:51905058,订单:11702,类型:4
2022-03-17 18:14:29.462 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11702' LIMIT 0,1000 
2022-03-17 18:14:29.462 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:29.553 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:29.554 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:29.554 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:29.642 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:29.643 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11702' and type=? limit 0,1 
2022-03-17 18:14:29.644 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:14:29.929 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:14:29.930 [http-nio-10090-exec-6] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11702,数据库:13.31610000,计算得:-13.316100
2022-03-17 18:14:29.930 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8282706000000000
2022-03-17 18:14:29.930 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11702' LIMIT 0,1000 
2022-03-17 18:14:29.931 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:30.023 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:30.024 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:30.025 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:30.112 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:30.113 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:14:30.113 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:30.209 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:30.209 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:14:30.210 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:30.326 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:30.327 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:14:30.327 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:30.417 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:30.418 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:14:30.418 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:30.506 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:30.507 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:30.507 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:30.603 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:14:30.604 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11702' and type=? limit 0,100 
2022-03-17 18:14:30.604 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:14:30.691 [http-nio-10090-exec-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-03-17 18:14:30.692 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-51.0000000000000000
2022-03-17 18:14:30.692 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-13.0000000000000000
2022-03-17 18:14:30.692 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:14:39.761 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:14:39.761 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:14:39.851 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:14:39.852 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:14:39.852 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:14:39.942 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:14:39.943 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:39.943 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:14:40.051 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:14:40.051 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:939.5897382800000000,hold:4.0685010000000000
2022-03-17 18:14:40.052 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-56.3417607200000000,逐仓爆仓盈余对应的平仓手续费总值:-1.6568472000000000,操作后，计算剩余的金额:943.6582392800000000,操作后，数据库存储的总金额:943.6582392800000000
2022-03-17 18:14:40.053 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:40.053 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:40.141 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:14:40.142 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:14:40.160 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:14:40.160 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:14:40.422 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:14:40.423 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:40.423 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:14:40.513 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:14:40.514 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:14:40.514 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:14:40.611 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:14:40.611 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:282.0814000000000000
2022-03-17 18:14:40.612 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:226.0814,操作后，账户变化金额:-56.0000000000000000,操作后，计算剩余的金额:282.0814000000000000,操作后，数据库存储的总金额:282.0814000000000000
2022-03-17 18:14:40.613 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:40.613 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:14:40.721 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:14:40.722 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:14:40.722 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:14:40.899 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:14:40.900 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:14:40.900 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:14:40.991 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:14:40.992 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:14:40.992 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:14:41.082 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:14:41.082 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:14:41.083 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:14:41.171 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:14:41.172 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:14:41.173 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:14:41.469 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:14:41.470 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:14:41.470 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:14:41.470 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:14:41.563 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 9
2022-03-17 18:14:41.563 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-0.3417607200000000, preBalance=1000.0000000000000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=10946, note=单号:10946开仓手续费-0.3417607200000000, createdDate=2022-03-17 18:08:40, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0E-16, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11687, note=单号:11687平仓收益7.4602494000000000, createdDate=2022-03-17 18:10:50, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8285766000000000, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11687, note=单号:11687平仓手续费-0.8285766000000000, createdDate=2022-03-17 18:10:50, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0E-16, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11702, note=单号:11702平仓收益6.6955554000000000, createdDate=2022-03-17 18:11:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8282706000000000, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11702, note=单号:11702平仓手续费-0.8282706000000000, createdDate=2022-03-17 18:11:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-51.0000000000000000, preBalance=999.6582392800000000, postBalance=948.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3918, note=转出：51.00000000, createdDate=2022-03-17 18:12:19, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-13.0000000000000000, preBalance=944.5897382800000000, postBalance=931.5897382800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77482, note=用户ID:51905058, 转出13.0000000000000000USDT, createdDate=2022-03-17 18:14:22, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=2.0000000000000000, preBalance=935.6582392800000000, postBalance=937.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:2.0000, createdDate=2022-03-17 18:14:30, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=6.0000000000000000, preBalance=933.5897382800000000, postBalance=939.5897382800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77484, note=用户ID:51905058, 转入6USDT, createdDate=2022-03-17 18:14:38, fromUserId=null, total=null)]
2022-03-17 18:14:41.564 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:14:41.564 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3417607200000000
2022-03-17 18:14:41.565 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '10946' LIMIT 0,1000 
2022-03-17 18:14:41.565 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:41.661 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:41.662 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:41.662 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:41.749 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:41.750 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:14:41.750 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:41.864 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:41.865 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:14:41.865 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:41.961 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:41.962 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:14:41.962 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:42.050 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:42.050 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:14:42.051 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:42.157 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:42.157 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:42.157 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:42.247 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:14:42.248 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:14:42.248 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:14:42.609 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:14:42.609 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.609 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.609 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.610 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.611 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.611 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.611 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.612 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:14:42.613 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:14:42.796 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:14:42.796 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.797 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:14:42.798 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:14:42.798 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:14:42.913 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:14:42.914 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.914 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.914 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.914 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.914 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.914 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.914 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.914 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.914 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.915 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.915 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.915 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.915 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.915 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.915 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.915 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.915 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.915 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.915 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:14:42.916 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:14:42.916 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:14:43.094 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:14:43.095 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.095 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.095 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.095 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.095 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.095 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.095 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.095 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.095 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.096 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.096 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.096 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.096 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.096 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.096 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.096 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.096 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.096 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.096 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.097 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:14:43.097 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:14:43.198 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:14:43.198 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.198 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.198 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.198 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.198 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.198 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.198 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.198 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.199 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.199 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.199 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.199 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.199 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.199 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.199 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.199 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.199 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.199 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.199 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:14:43.199 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0E-16
2022-03-17 18:14:43.200 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11687' LIMIT 0,1000 
2022-03-17 18:14:43.200 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:43.287 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:43.287 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:43.287 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:43.562 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:43.563 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 盈亏计算不正确--->,用户:51905058,订单:11687,类型:4
2022-03-17 18:14:43.564 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11687' LIMIT 0,1000 
2022-03-17 18:14:43.564 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:43.656 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:43.656 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:43.657 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:43.747 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:43.748 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11687' and type=? limit 0,1 
2022-03-17 18:14:43.748 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:14:43.840 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:14:43.840 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11687,数据库:12.55110000,计算得:-12.551100
2022-03-17 18:14:43.841 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8285766000000000
2022-03-17 18:14:43.842 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11687' LIMIT 0,1000 
2022-03-17 18:14:43.842 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:43.955 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:43.956 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:43.957 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:44.065 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:44.066 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:14:44.066 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:44.155 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:44.155 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:14:44.156 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:44.245 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:44.245 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:14:44.246 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:44.333 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:44.334 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:14:44.334 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:44.612 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:44.613 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:44.613 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:44.702 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:14:44.703 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11687' and type=? limit 0,100 
2022-03-17 18:14:44.703 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:14:44.792 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-03-17 18:14:44.792 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0E-16
2022-03-17 18:14:44.793 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11702' LIMIT 0,1000 
2022-03-17 18:14:44.793 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:44.883 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:44.883 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:44.884 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:45.006 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:45.006 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 盈亏计算不正确--->,用户:51905058,订单:11702,类型:4
2022-03-17 18:14:45.009 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11702' LIMIT 0,1000 
2022-03-17 18:14:45.009 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:45.106 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:45.107 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:45.107 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:45.197 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:45.198 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11702' and type=? limit 0,1 
2022-03-17 18:14:45.198 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:14:45.304 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:14:45.304 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11702,数据库:13.31610000,计算得:-13.316100
2022-03-17 18:14:45.304 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8282706000000000
2022-03-17 18:14:45.304 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11702' LIMIT 0,1000 
2022-03-17 18:14:45.305 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:14:45.394 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:14:45.395 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:14:45.395 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:14:45.661 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:14:45.662 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:14:45.662 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:45.752 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:45.753 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:14:45.753 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:45.840 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:45.841 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:14:45.841 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:45.928 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:45.928 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:14:45.929 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:46.058 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:14:46.059 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:14:46.059 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:14:46.146 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:14:46.147 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11702' and type=? limit 0,100 
2022-03-17 18:14:46.147 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:14:46.235 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-03-17 18:14:46.236 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-51.0000000000000000
2022-03-17 18:14:46.236 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-13.0000000000000000
2022-03-17 18:14:46.236 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:2.0000000000000000
2022-03-17 18:14:46.236 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:6.0000000000000000
2022-03-17 18:14:46.236 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:18:36.997 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:18:36.998 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:18:37.090 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:18:37.090 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:18:37.091 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:18:37.178 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:18:37.179 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:18:37.179 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:18:37.441 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:18:37.441 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:939.5897382800000000,hold:4.0685010000000000
2022-03-17 18:18:37.441 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-56.3417607200000000,逐仓爆仓盈余对应的平仓手续费总值:-1.6568472000000000,操作后，计算剩余的金额:943.6582392800000000,操作后，数据库存储的总金额:943.6582392800000000
2022-03-17 18:18:37.442 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:18:37.442 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:37.530 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:18:37.531 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:18:37.553 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:18:37.553 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:18:37.641 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:18:37.642 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:18:37.642 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:18:37.730 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:18:37.731 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:18:37.731 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:18:37.835 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:18:37.835 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:282.0814000000000000
2022-03-17 18:18:37.835 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:226.0814,操作后，账户变化金额:-56.0000000000000000,操作后，计算剩余的金额:282.0814000000000000,操作后，数据库存储的总金额:282.0814000000000000
2022-03-17 18:18:37.836 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:18:37.836 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:18:37.923 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:18:37.924 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:18:37.924 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:18:38.013 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:18:38.013 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:18:38.013 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:18:38.101 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:18:38.102 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:18:38.102 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:18:38.189 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:18:38.190 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:18:38.191 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:18:38.490 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:18:38.491 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:18:38.491 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:18:38.595 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:18:38.596 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:18:38.596 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:18:38.597 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:18:38.773 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 9
2022-03-17 18:18:38.774 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=51, size=-0.3417607200000000, preBalance=1000.0000000000000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=10946, note=单号:10946开仓手续费-0.3417607200000000, createdDate=2022-03-17 18:08:40, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0E-16, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11687, note=单号:11687平仓收益7.4602494000000000, createdDate=2022-03-17 18:10:50, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8285766000000000, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11687, note=单号:11687平仓手续费-0.8285766000000000, createdDate=2022-03-17 18:10:50, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=0E-16, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11702, note=单号:11702平仓收益6.6955554000000000, createdDate=2022-03-17 18:11:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8282706000000000, preBalance=999.6582392800000000, postBalance=999.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11702, note=单号:11702平仓手续费-0.8282706000000000, createdDate=2022-03-17 18:11:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-51.0000000000000000, preBalance=999.6582392800000000, postBalance=948.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3918, note=转出：51.00000000, createdDate=2022-03-17 18:12:19, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-13.0000000000000000, preBalance=944.5897382800000000, postBalance=931.5897382800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77482, note=用户ID:51905058, 转出13.0000000000000000USDT, createdDate=2022-03-17 18:14:22, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=2.0000000000000000, preBalance=935.6582392800000000, postBalance=937.6582392800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:2.0000, createdDate=2022-03-17 18:14:30, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=6.0000000000000000, preBalance=933.5897382800000000, postBalance=939.5897382800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77484, note=用户ID:51905058, 转入6USDT, createdDate=2022-03-17 18:14:38, fromUserId=null, total=null)]
2022-03-17 18:18:38.775 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:18:38.775 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3417607200000000
2022-03-17 18:18:38.775 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '10946' LIMIT 0,1000 
2022-03-17 18:18:38.775 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:18:38.894 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:18:38.896 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:18:38.896 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:18:38.986 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:18:38.987 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:18:38.987 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:39.077 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:18:39.078 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:18:39.078 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:39.185 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:18:39.186 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:18:39.186 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:39.275 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:18:39.276 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:18:39.276 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:39.538 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:18:39.539 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:18:39.540 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:39.635 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:18:39.636 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:18:39.636 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:18:39.824 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:18:39.825 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.825 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.825 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.825 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.825 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.825 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.826 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.826 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.826 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.826 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.826 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.826 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.826 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.826 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.827 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.827 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.827 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.827 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.827 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:39.828 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:18:39.828 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:18:40.024 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:18:40.024 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.024 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.024 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.024 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.024 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.025 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.025 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.025 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.025 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.025 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.025 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.025 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.025 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.025 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.025 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.025 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.025 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.026 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.026 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:10946,比列:0.200000,数据库:1.70880360,计算:-0.068352
2022-03-17 18:18:40.027 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:18:40.027 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:18:40.212 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:18:40.213 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.213 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.213 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.213 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.213 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.213 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.213 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.213 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.213 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.214 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.214 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.214 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.214 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.214 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.214 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.214 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.214 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.214 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.214 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:10946,比列:0.300000,数据库:2.56320540,计算:-0.102528
2022-03-17 18:18:40.215 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:18:40.215 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:18:40.590 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:18:40.591 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.591 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.591 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.591 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.591 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.591 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.591 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.591 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.591 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.591 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.591 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.591 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.592 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.592 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.592 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.592 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.592 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.592 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.592 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.593 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='10946' and type=? limit 0,100 
2022-03-17 18:18:40.593 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:18:40.786 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 19
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:10946,比列:0.100000,数据库:0.85440180,计算:-0.034176
2022-03-17 18:18:40.787 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0E-16
2022-03-17 18:18:40.788 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11687' LIMIT 0,1000 
2022-03-17 18:18:40.788 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:18:40.875 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:18:40.876 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:18:40.877 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:18:40.979 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:18:40.980 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 盈亏计算不正确--->,用户:51905058,订单:11687,类型:4
2022-03-17 18:18:40.980 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11687' LIMIT 0,1000 
2022-03-17 18:18:40.981 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:18:41.070 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:18:41.071 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:18:41.071 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:18:41.159 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:18:41.160 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11687' and type=? limit 0,1 
2022-03-17 18:18:41.161 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:18:41.249 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:18:41.249 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11687,数据库:12.55110000,计算得:-12.551100
2022-03-17 18:18:41.249 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8285766000000000
2022-03-17 18:18:41.250 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11687' LIMIT 0,1000 
2022-03-17 18:18:41.250 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:18:41.337 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:18:41.338 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:18:41.339 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:18:41.645 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:18:41.646 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:18:41.646 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:41.740 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:18:41.741 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:18:41.742 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:41.829 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:18:41.830 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:18:41.830 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:41.918 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:18:41.919 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:18:41.919 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:42.034 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:18:42.035 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:18:42.035 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:42.130 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:18:42.131 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11687' and type=? limit 0,100 
2022-03-17 18:18:42.132 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:18:42.221 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:18:42.221 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11687,比列:0.300000,数据库:0.24857298,计算:-0.248572
2022-03-17 18:18:42.222 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11687' and type=? limit 0,100 
2022-03-17 18:18:42.223 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:18:42.329 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:18:42.330 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11687,比列:0.200000,数据库:0.16571532,计算:-0.165715
2022-03-17 18:18:42.331 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11687' and type=? limit 0,100 
2022-03-17 18:18:42.331 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:18:42.419 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:18:42.420 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11687,比列:0.300000,数据库:0.24857298,计算:-0.248572
2022-03-17 18:18:42.420 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11687' and type=? limit 0,100 
2022-03-17 18:18:42.421 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:18:42.685 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:18:42.685 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11687,比列:0.100000,数据库:0.08285766,计算:-0.082857
2022-03-17 18:18:42.686 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11687' and type=? limit 0,100 
2022-03-17 18:18:42.686 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:18:42.781 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:18:42.782 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11687,比列:0.100000,数据库:0.08285766,计算:-0.082857
2022-03-17 18:18:42.782 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:0E-16
2022-03-17 18:18:42.782 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11702' LIMIT 0,1000 
2022-03-17 18:18:42.783 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:18:42.875 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:18:42.876 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:18:42.876 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:18:42.966 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:18:42.967 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 盈亏计算不正确--->,用户:51905058,订单:11702,类型:4
2022-03-17 18:18:42.968 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11702' LIMIT 0,1000 
2022-03-17 18:18:42.968 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:18:43.074 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:18:43.074 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:18:43.074 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:18:43.161 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:18:43.162 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11702' and type=? limit 0,1 
2022-03-17 18:18:43.162 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:18:43.249 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:18:43.251 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11702,数据库:13.31610000,计算得:-13.316100
2022-03-17 18:18:43.251 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8282706000000000
2022-03-17 18:18:43.251 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11702' LIMIT 0,1000 
2022-03-17 18:18:43.251 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:18:43.338 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:18:43.339 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:18:43.339 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:18:43.433 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:18:43.434 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:18:43.434 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:43.731 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:18:43.732 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:18:43.733 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:43.827 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:18:43.828 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:18:43.828 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:43.918 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:18:43.919 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:18:43.920 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:44.010 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:18:44.011 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:18:44.011 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:18:44.124 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:18:44.124 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11702' and type=? limit 0,100 
2022-03-17 18:18:44.124 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:18:44.214 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:18:44.214 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11702,比列:0.300000,数据库:0.24848118,计算:-0.248481
2022-03-17 18:18:44.215 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11702' and type=? limit 0,100 
2022-03-17 18:18:44.216 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:18:44.307 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:18:44.307 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11702,比列:0.200000,数据库:0.16565412,计算:-0.165654
2022-03-17 18:18:44.308 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11702' and type=? limit 0,100 
2022-03-17 18:18:44.308 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:18:44.781 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:18:44.782 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11702,比列:0.300000,数据库:0.24848118,计算:-0.248481
2022-03-17 18:18:44.782 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11702' and type=? limit 0,100 
2022-03-17 18:18:44.782 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:18:45.175 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:18:45.176 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11702,比列:0.100000,数据库:0.08282706,计算:-0.082827
2022-03-17 18:18:45.177 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11702' and type=? limit 0,100 
2022-03-17 18:18:45.177 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:18:45.433 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:18:45.433 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11702,比列:0.100000,数据库:0.08282706,计算:-0.082827
2022-03-17 18:18:45.433 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-51.0000000000000000
2022-03-17 18:18:45.433 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-13.0000000000000000
2022-03-17 18:18:45.434 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:2.0000000000000000
2022-03-17 18:18:45.434 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:6.0000000000000000
2022-03-17 18:18:45.434 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:19:45.640 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:19:45.642 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:19:45.732 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:19:45.732 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:19:45.732 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:19:45.823 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:19:45.825 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:19:45.826 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:19:45.945 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:19:45.946 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:19:45.947 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:19:46.034 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:19:46.076 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=1000.0000000000000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=215.0814000000000000, hold=null),assert_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=67.0000000000000000, hold=null)
2022-03-17 18:19:49.859 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:19:49.859 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:19:49.956 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:19:49.956 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:19:49.957 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:19:50.136 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:19:50.137 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:19:50.138 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:19:50.226 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:19:50.227 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1000.0000000000000000,hold:0E-16
2022-03-17 18:19:50.227 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:0,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1000.0,操作后，数据库存储的总金额:1000.0000000000000000
2022-03-17 18:19:50.227 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:19:50.227 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:19:50.321 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:19:50.321 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:19:50.342 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:19:50.343 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:19:50.431 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:19:50.432 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:19:50.432 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:19:50.521 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:19:50.522 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:19:50.522 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:19:50.798 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:19:50.799 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:282.0814000000000000
2022-03-17 18:19:50.799 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:282.0814,操作后，账户变化金额:0,操作后，计算剩余的金额:282.0814,操作后，数据库存储的总金额:282.0814000000000000
2022-03-17 18:19:50.800 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:19:50.800 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:19:50.891 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:19:50.892 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:19:50.892 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:19:50.986 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:19:50.987 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:19:50.987 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:19:51.097 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:19:51.097 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:19:51.097 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:19:51.286 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:19:51.287 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:19:51.288 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:19:51.375 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:19:51.376 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:19:51.376 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:19:51.493 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:19:51.493 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:19:51.494 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:19:51.494 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:19:51.581 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 0
2022-03-17 18:19:51.581 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[]
2022-03-17 18:20:05.683 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:20:05.684 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:20:05.777 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:20:05.778 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:20:05.778 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:20:05.866 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:20:05.866 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:20:05.867 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:20:05.956 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:20:05.957 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:978.4348907200000000,hold:0E-16
2022-03-17 18:20:05.957 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-21.5651092800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:978.4348907200000000,操作后，数据库存储的总金额:978.4348907200000000
2022-03-17 18:20:05.957 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:20:05.958 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:20:06.044 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:20:06.046 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:20:06.058 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:20:06.059 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:20:06.146 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:20:06.147 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:20:06.147 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:20:06.234 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:20:06.235 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:20:06.236 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:20:06.524 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:20:06.524 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:282.0814000000000000
2022-03-17 18:20:06.524 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:282.0814,操作后，账户变化金额:0,操作后，计算剩余的金额:282.0814,操作后，数据库存储的总金额:282.0814000000000000
2022-03-17 18:20:06.525 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:20:06.525 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:20:06.616 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:20:06.617 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:20:06.617 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:20:06.705 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:20:06.706 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:20:06.707 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:20:06.794 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:20:06.795 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:20:06.795 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:20:06.916 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:20:06.917 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:20:06.918 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:20:07.015 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:20:07.015 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:20:07.016 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:20:07.103 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:20:07.103 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:20:07.104 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:20:07.104 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:20:07.216 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 2
2022-03-17 18:20:07.217 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=3, size=-20.7356820000000000, preBalance=1000.0000000000000000, postBalance=979.2643180000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓保证金-20.7356820000000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8294272800000000, preBalance=979.2643180000000000, postBalance=978.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓手续费-0.8294272800000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null)]
2022-03-17 18:20:07.217 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:20:07.217 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-20.7356820000000000
2022-03-17 18:20:07.218 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11855' LIMIT 0,1 
2022-03-17 18:20:07.218 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:20:07.306 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:20:07.307 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:20:07.307 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:20:07.571 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:20:07.572 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8294272800000000
2022-03-17 18:20:07.572 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11855' LIMIT 0,1000 
2022-03-17 18:20:07.572 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:20:07.663 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:20:07.664 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:20:07.664 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:20:07.752 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:20:07.753 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:20:07.753 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:20:07.845 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:20:07.846 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:20:07.846 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:20:07.967 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:20:07.968 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:20:07.968 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:20:08.059 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:20:08.060 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:20:08.060 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:20:08.152 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:20:08.153 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:20:08.153 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:20:08.258 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:20:08.259 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:20:08.259 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:20:08.351 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-03-17 18:20:08.351 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:20:44.567 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:20:44.569 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:20:44.677 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:20:44.677 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:20:44.678 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:20:44.789 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:20:44.789 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:20:44.790 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:20:44.879 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:20:44.880 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:945.4348907200000000,hold:0E-16
2022-03-17 18:20:44.880 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-54.5651092800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:945.4348907200000000,操作后，数据库存储的总金额:945.4348907200000000
2022-03-17 18:20:44.880 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:20:44.881 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:20:44.970 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:20:44.970 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:20:44.997 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:20:44.997 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:20:45.095 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:20:45.096 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:20:45.096 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:20:45.337 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:20:45.337 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:20:45.338 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:20:45.428 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:20:45.428 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:315.0814000000000000
2022-03-17 18:20:45.428 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:282.0814,操作后，账户变化金额:-33.0000000000000000,操作后，计算剩余的金额:315.0814000000000000,操作后，数据库存储的总金额:315.0814000000000000
2022-03-17 18:20:45.429 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:20:45.429 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:20:45.518 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:20:45.519 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:20:45.519 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:20:45.609 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:20:45.609 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:20:45.610 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:20:45.724 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:20:45.725 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:20:45.725 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:20:45.824 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:20:45.825 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:20:45.825 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:20:45.913 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:20:45.914 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:20:45.914 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:20:46.020 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:20:46.020 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:20:46.021 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:20:46.021 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:20:46.110 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 4
2022-03-17 18:20:46.110 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=3, size=-20.7356820000000000, preBalance=1000.0000000000000000, postBalance=979.2643180000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓保证金-20.7356820000000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8294272800000000, preBalance=979.2643180000000000, postBalance=978.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓手续费-0.8294272800000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=978.4348907200000000, postBalance=966.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3920, note=转出：12.00000000, createdDate=2022-03-17 18:20:11, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=966.4348907200000000, postBalance=945.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77485, note=用户ID:51905058, 转出21.0000000000000000USDT, createdDate=2022-03-17 18:20:17, fromUserId=null, total=null)]
2022-03-17 18:20:46.110 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:20:46.110 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-20.7356820000000000
2022-03-17 18:20:46.110 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11855' LIMIT 0,1 
2022-03-17 18:20:46.111 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:20:46.381 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:20:46.382 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:20:46.383 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:20:46.473 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:20:46.474 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8294272800000000
2022-03-17 18:20:46.474 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11855' LIMIT 0,1000 
2022-03-17 18:20:46.474 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:20:46.561 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:20:46.562 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:20:46.562 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:20:46.657 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:20:46.657 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:20:46.658 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:20:46.770 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:20:46.771 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:20:46.771 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:20:46.869 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:20:46.870 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:20:46.870 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:20:46.964 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:20:46.965 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:20:46.965 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:20:47.056 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:20:47.057 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:20:47.058 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:20:47.145 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:20:47.146 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:20:47.147 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:20:47.428 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:20:47.428 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:20:47.429 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:20:47.429 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:20:47.523 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:20:47.524 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11855,比列:0.200000,数据库:0.16588545,计算:-0.165885
2022-03-17 18:20:47.525 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:20:47.525 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:20:47.633 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:20:47.634 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:20:47.635 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:20:47.635 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:20:47.726 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:20:47.727 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:20:47.727 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:20:47.728 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:20:47.822 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:20:47.822 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:20:47.823 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 18:20:47.823 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 18:20:47.823 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:21:05.925 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:21:05.925 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:21:06.013 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:21:06.014 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:21:06.014 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:21:06.302 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:21:06.303 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:06.304 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:21:06.398 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:21:06.399 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:965.5195740400000000,hold:0E-16
2022-03-17 18:21:06.399 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-34.4804259600000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:965.5195740400000000,操作后，数据库存储的总金额:965.5195740400000000
2022-03-17 18:21:06.399 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:06.399 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:06.488 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:21:06.489 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:21:06.512 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:21:06.513 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:21:06.599 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:21:06.600 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:06.600 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:21:06.694 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:21:06.694 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:21:06.694 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:21:06.785 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:21:06.785 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:315.0814000000000000
2022-03-17 18:21:06.785 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:282.0814,操作后，账户变化金额:-33.0000000000000000,操作后，计算剩余的金额:315.0814000000000000,操作后，数据库存储的总金额:315.0814000000000000
2022-03-17 18:21:06.786 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:06.786 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:21:06.905 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:21:06.906 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:21:06.906 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:21:06.996 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:21:06.997 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:21:06.997 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:21:07.092 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:21:07.093 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:21:07.093 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:21:07.351 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:21:07.352 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:21:07.352 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:21:07.441 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:21:07.441 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:21:07.442 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:21:07.533 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:21:07.546 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:21:07.547 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:21:07.548 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:21:07.637 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 6
2022-03-17 18:21:07.637 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=3, size=-20.7356820000000000, preBalance=1000.0000000000000000, postBalance=979.2643180000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓保证金-20.7356820000000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8294272800000000, preBalance=979.2643180000000000, postBalance=978.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓手续费-0.8294272800000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=978.4348907200000000, postBalance=966.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3920, note=转出：12.00000000, createdDate=2022-03-17 18:20:11, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=966.4348907200000000, postBalance=945.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77485, note=用户ID:51905058, 转出21.0000000000000000USDT, createdDate=2022-03-17 18:20:17, fromUserId=null, total=null), UserBillChain(userId=51905058, type=4, size=20.9141820000000000, preBalance=945.4348907200000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓收益20.0846833200000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8294986800000000, preBalance=965.5195740400000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓手续费-0.8294986800000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null)]
2022-03-17 18:21:07.638 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:21:07.638 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-20.7356820000000000
2022-03-17 18:21:07.638 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11855' LIMIT 0,1 
2022-03-17 18:21:07.638 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:21:07.748 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:21:07.749 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:21:07.749 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:21:07.836 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:21:07.837 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8294272800000000
2022-03-17 18:21:07.838 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11855' LIMIT 0,1000 
2022-03-17 18:21:07.838 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:21:07.927 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:21:07.928 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:21:07.928 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:21:08.019 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:21:08.020 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:21:08.021 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:08.116 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:08.117 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:21:08.117 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:08.400 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:08.401 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:21:08.402 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:08.504 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:08.505 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:21:08.505 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:08.593 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:08.594 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:08.594 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:08.682 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:21:08.683 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:21:08.683 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:21:08.794 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:08.794 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:21:08.794 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:21:08.794 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:21:08.884 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:08.885 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11855,比列:0.200000,数据库:0.16588545,计算:-0.165885
2022-03-17 18:21:08.885 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:21:08.886 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:21:08.976 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:08.977 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:21:08.977 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:21:08.977 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:21:09.065 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:09.066 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:21:09.066 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:21:09.067 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:21:09.158 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:09.159 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:21:09.159 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 18:21:09.159 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 18:21:09.159 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:20.9141820000000000
2022-03-17 18:21:09.159 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:21:09.160 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:21:09.450 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:21:09.450 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:21:09.451 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:21:09.544 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:21:09.545 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:21:09.545 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:21:09.635 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:21:09.635 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:21:09.636 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:21:09.724 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:21:09.725 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,1 
2022-03-17 18:21:09.725 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:21:09.840 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:21:09.840 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11856,数据库:-0.17850000,计算得:0.178500
2022-03-17 18:21:09.840 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8294986800000000
2022-03-17 18:21:09.841 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:21:09.841 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:21:09.937 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:21:09.937 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:21:09.938 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:21:10.027 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:21:10.028 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:21:10.028 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:10.116 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:10.117 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:21:10.117 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:10.211 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:10.212 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:21:10.212 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:10.497 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:10.498 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:21:10.499 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:10.594 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:10.595 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:10.595 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:10.684 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:21:10.685 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:21:10.685 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:21:10.776 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:10.776 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:21:10.777 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:21:10.777 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:21:10.894 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:10.894 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11856,比列:0.200000,数据库:0.16589973,计算:-0.165899
2022-03-17 18:21:10.894 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:21:10.895 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:21:10.982 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:10.982 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:21:10.983 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:21:10.983 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:21:11.071 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:11.072 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:21:11.073 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:21:11.073 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:21:11.164 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:11.164 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:21:11.164 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:21:33.658 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:21:33.659 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:21:33.747 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:21:33.747 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:21:33.747 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:21:33.834 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:21:33.835 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:33.835 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:21:33.968 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:21:33.969 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:964.5279190000000000,hold:0E-16
2022-03-17 18:21:33.969 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-35.4720810000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:964.5279190000000000,操作后，数据库存储的总金额:964.5279190000000000
2022-03-17 18:21:33.969 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:33.969 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:34.066 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:21:34.067 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:21:34.089 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:21:34.090 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:21:34.179 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:21:34.180 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:34.180 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:21:34.269 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:21:34.270 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:21:34.270 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:21:34.358 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:21:34.358 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:315.0814000000000000
2022-03-17 18:21:34.358 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:282.0814,操作后，账户变化金额:-33.0000000000000000,操作后，计算剩余的金额:315.0814000000000000,操作后，数据库存储的总金额:315.0814000000000000
2022-03-17 18:21:34.359 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:34.359 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:21:34.624 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:21:34.625 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:21:34.625 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:21:34.712 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:21:34.713 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:21:34.713 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:21:34.801 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:21:34.802 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:21:34.802 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:21:34.897 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:21:34.897 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:21:34.898 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:21:35.015 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:21:35.016 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:21:35.016 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:21:35.115 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:21:35.115 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:21:35.116 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:21:35.116 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:21:35.207 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 7
2022-03-17 18:21:35.207 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=3, size=-20.7356820000000000, preBalance=1000.0000000000000000, postBalance=979.2643180000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓保证金-20.7356820000000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8294272800000000, preBalance=979.2643180000000000, postBalance=978.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓手续费-0.8294272800000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=978.4348907200000000, postBalance=966.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3920, note=转出：12.00000000, createdDate=2022-03-17 18:20:11, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=966.4348907200000000, postBalance=945.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77485, note=用户ID:51905058, 转出21.0000000000000000USDT, createdDate=2022-03-17 18:20:17, fromUserId=null, total=null), UserBillChain(userId=51905058, type=4, size=20.9141820000000000, preBalance=945.4348907200000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓收益20.0846833200000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8294986800000000, preBalance=965.5195740400000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓手续费-0.8294986800000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.9916550400000000, preBalance=965.5195740400000000, postBalance=964.5279190000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11857, note=单号:11857开仓手续费-0.9916550400000000, createdDate=2022-03-17 18:21:24, fromUserId=0, total=null)]
2022-03-17 18:21:35.208 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:21:35.208 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-20.7356820000000000
2022-03-17 18:21:35.208 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11855' LIMIT 0,1 
2022-03-17 18:21:35.208 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:21:35.303 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:21:35.304 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:21:35.304 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:21:35.390 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:21:35.391 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8294272800000000
2022-03-17 18:21:35.391 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11855' LIMIT 0,1000 
2022-03-17 18:21:35.391 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:21:35.677 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:21:35.677 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:21:35.678 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:21:35.768 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:21:35.769 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:21:35.769 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:35.862 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:35.862 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:21:35.863 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:35.949 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:35.950 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:21:35.950 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:36.090 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:36.091 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:21:36.091 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:36.181 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:36.182 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:36.182 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:36.270 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:21:36.271 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:21:36.271 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:21:36.361 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:36.362 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:21:36.362 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:21:36.363 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:21:36.452 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:36.452 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11855,比列:0.200000,数据库:0.16588545,计算:-0.165885
2022-03-17 18:21:36.453 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:21:36.453 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:21:36.720 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:36.721 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:21:36.721 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:21:36.721 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:21:36.820 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:36.820 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:21:36.820 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:21:36.821 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:21:36.910 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:36.910 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:21:36.910 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 18:21:36.910 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 18:21:36.910 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:20.9141820000000000
2022-03-17 18:21:36.911 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:21:36.911 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:21:37.004 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:21:37.005 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:21:37.005 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:21:37.114 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:21:37.115 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:21:37.115 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:21:37.216 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:21:37.216 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:21:37.217 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:21:37.304 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:21:37.305 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,1 
2022-03-17 18:21:37.306 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:21:37.408 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:21:37.408 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11856,数据库:-0.17850000,计算得:0.178500
2022-03-17 18:21:37.408 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8294986800000000
2022-03-17 18:21:37.408 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:21:37.408 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:21:37.496 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:21:37.496 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:21:37.497 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:21:37.769 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:21:37.770 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:21:37.770 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:37.866 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:37.866 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:21:37.867 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:37.953 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:37.953 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:21:37.953 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:38.041 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:38.041 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:21:38.042 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:38.162 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:38.162 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:38.163 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:38.250 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:21:38.250 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:21:38.251 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:21:38.349 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:38.349 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:21:38.350 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:21:38.350 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:21:38.446 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:38.447 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11856,比列:0.200000,数据库:0.16589973,计算:-0.165899
2022-03-17 18:21:38.447 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:21:38.448 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:21:38.537 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:38.537 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:21:38.538 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:21:38.539 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:21:38.818 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:38.818 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:21:38.819 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:21:38.819 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:21:38.910 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:38.910 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:21:38.910 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9916550400000000
2022-03-17 18:21:38.910 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11857' LIMIT 0,1000 
2022-03-17 18:21:38.911 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:21:39.011 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:21:39.012 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:21:39.012 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:21:39.119 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:21:39.120 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:21:39.120 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:39.209 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:39.210 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:21:39.210 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:39.316 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:39.316 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:21:39.316 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:39.404 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:39.405 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:21:39.405 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:39.494 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:21:39.494 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:21:39.495 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:21:39.584 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:21:39.584 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:21:39.584 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:21:39.866 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:39.866 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:21:39.867 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:21:39.867 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:21:39.971 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:39.972 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11857,比列:0.200000,数据库:0.19833100,计算:-0.198331
2022-03-17 18:21:39.973 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:21:39.973 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:21:40.062 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:40.063 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:21:40.064 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:21:40.064 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:21:40.157 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:40.158 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:21:40.158 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:21:40.158 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:21:40.261 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:21:40.261 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:21:40.261 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:22:08.264 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:22:08.264 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:22:08.354 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:22:08.354 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:22:08.355 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:22:08.441 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:22:08.441 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:22:08.442 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:22:08.574 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:22:08.574 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:963.5118737200000000,hold:0E-16
2022-03-17 18:22:08.574 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-36.4881262800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:963.5118737200000000,操作后，数据库存储的总金额:963.5118737200000000
2022-03-17 18:22:08.575 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:22:08.575 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:08.674 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:22:08.674 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:22:08.697 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:22:08.697 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:22:08.787 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:22:08.788 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:22:08.788 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:22:08.876 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:22:08.877 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:22:08.877 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:22:08.963 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:22:08.964 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:315.0814000000000000
2022-03-17 18:22:08.964 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:282.0814,操作后，账户变化金额:-33.0000000000000000,操作后，计算剩余的金额:315.0814000000000000,操作后，数据库存储的总金额:315.0814000000000000
2022-03-17 18:22:08.964 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:22:08.964 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:22:09.228 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:22:09.228 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:22:09.229 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:22:09.316 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:22:09.317 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:22:09.318 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:22:09.408 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:22:09.408 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:22:09.409 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:22:09.496 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:22:09.497 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:22:09.497 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:22:09.623 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:22:09.623 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:22:09.624 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:22:09.710 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:22:09.711 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:22:09.711 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:22:09.711 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:22:09.803 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 9
2022-03-17 18:22:09.803 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=3, size=-20.7356820000000000, preBalance=1000.0000000000000000, postBalance=979.2643180000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓保证金-20.7356820000000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8294272800000000, preBalance=979.2643180000000000, postBalance=978.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓手续费-0.8294272800000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=978.4348907200000000, postBalance=966.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3920, note=转出：12.00000000, createdDate=2022-03-17 18:20:11, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=966.4348907200000000, postBalance=945.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77485, note=用户ID:51905058, 转出21.0000000000000000USDT, createdDate=2022-03-17 18:20:17, fromUserId=null, total=null), UserBillChain(userId=51905058, type=4, size=20.9141820000000000, preBalance=945.4348907200000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓收益20.0846833200000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8294986800000000, preBalance=965.5195740400000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓手续费-0.8294986800000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.9916550400000000, preBalance=965.5195740400000000, postBalance=964.5279190000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11857, note=单号:11857开仓手续费-0.9916550400000000, createdDate=2022-03-17 18:21:24, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0244000000000000, preBalance=964.5279190000000000, postBalance=963.5118737200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11858, note=单号:11858平仓收益-1.0160452800000000, createdDate=2022-03-17 18:21:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.9916452800000000, preBalance=963.5118737200000000, postBalance=963.5118737200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11858, note=单号:11858平仓手续费-0.9916452800000000, createdDate=2022-03-17 18:21:52, fromUserId=0, total=null)]
2022-03-17 18:22:09.804 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:22:09.804 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-20.7356820000000000
2022-03-17 18:22:09.805 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11855' LIMIT 0,1 
2022-03-17 18:22:09.805 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:22:09.910 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:22:09.910 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:22:09.911 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:22:10.004 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:22:10.005 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8294272800000000
2022-03-17 18:22:10.005 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11855' LIMIT 0,1000 
2022-03-17 18:22:10.006 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:22:10.276 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:22:10.277 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:22:10.277 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:22:10.365 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:22:10.365 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:22:10.366 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:10.455 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:10.455 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:22:10.456 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:10.545 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:10.546 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:22:10.546 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:10.671 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:10.671 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:22:10.672 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:10.787 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:10.788 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:22:10.788 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:10.877 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:22:10.878 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:22:10.878 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:22:10.968 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:10.969 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:22:10.970 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:22:10.970 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:22:11.057 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:11.058 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11855,比列:0.200000,数据库:0.16588545,计算:-0.165885
2022-03-17 18:22:11.059 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:22:11.059 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:22:11.327 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:11.328 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:22:11.329 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:22:11.329 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:22:11.416 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:11.416 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:22:11.417 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:22:11.417 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:22:11.505 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:11.506 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:22:11.506 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 18:22:11.506 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 18:22:11.506 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:20.9141820000000000
2022-03-17 18:22:11.507 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:22:11.507 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:22:11.595 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:22:11.595 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:22:11.595 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:22:11.721 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:22:11.722 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:22:11.722 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:22:11.820 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:22:11.821 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:22:11.822 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:22:11.911 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:22:11.911 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,1 
2022-03-17 18:22:11.912 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:22:12.018 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:22:12.019 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11856,数据库:-0.17850000,计算得:0.178500
2022-03-17 18:22:12.019 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8294986800000000
2022-03-17 18:22:12.020 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:22:12.020 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:22:12.108 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:22:12.108 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:22:12.109 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:22:12.378 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:22:12.379 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:22:12.379 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:12.468 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:12.468 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:22:12.468 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:12.556 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:12.557 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:22:12.557 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:12.643 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:12.644 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:22:12.644 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:12.770 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:12.771 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:22:12.772 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:12.860 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:22:12.861 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:22:12.861 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:22:12.953 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:12.954 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:22:12.955 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:22:12.955 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:22:13.056 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:13.056 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11856,比列:0.200000,数据库:0.16589973,计算:-0.165899
2022-03-17 18:22:13.057 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:22:13.058 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:22:13.150 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:13.150 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:22:13.151 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:22:13.151 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:22:13.423 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:13.423 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:22:13.424 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:22:13.425 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:22:13.517 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:13.517 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:22:13.517 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9916550400000000
2022-03-17 18:22:13.517 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11857' LIMIT 0,1000 
2022-03-17 18:22:13.518 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:22:13.608 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:22:13.608 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:22:13.609 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:22:13.696 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:22:13.696 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:22:13.697 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:13.814 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:13.815 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:22:13.815 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:13.907 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:13.907 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:22:13.907 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:14.005 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:14.005 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:22:14.006 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:14.094 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:14.094 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:22:14.094 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:14.183 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:22:14.184 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:22:14.185 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:22:14.473 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:14.473 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:22:14.474 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:22:14.474 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:22:14.564 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:14.564 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11857,比列:0.200000,数据库:0.19833100,计算:-0.198331
2022-03-17 18:22:14.565 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:22:14.565 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:22:14.654 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:14.655 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:22:14.656 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:22:14.656 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:22:14.743 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:14.743 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:22:14.744 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:22:14.744 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:22:14.866 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:14.867 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:22:14.867 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0244000000000000
2022-03-17 18:22:14.868 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:22:14.868 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:22:14.963 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:22:14.963 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:22:14.963 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:22:15.052 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:22:15.052 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:22:15.053 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:22:15.169 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:22:15.170 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:22:15.170 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:22:15.256 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:22:15.257 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,1 
2022-03-17 18:22:15.257 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:22:15.521 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:22:15.521 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11858,数据库:0.02440000,计算得:-0.024400
2022-03-17 18:22:15.522 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.9916452800000000
2022-03-17 18:22:15.522 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:22:15.523 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:22:15.612 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:22:15.612 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:22:15.612 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:22:15.701 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:22:15.702 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:22:15.703 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:15.790 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:15.791 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:22:15.791 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:15.914 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:15.915 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:22:15.915 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:16.005 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:16.006 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:22:16.006 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:16.094 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:22:16.095 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:22:16.095 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:22:16.199 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:22:16.200 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:22:16.200 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:22:16.289 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:16.289 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11858,比列:0.300000,数据库:0.29749358,计算:-0.297493
2022-03-17 18:22:16.290 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:22:16.290 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:22:16.571 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:16.571 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11858,比列:0.200000,数据库:0.19832905,计算:-0.198329
2022-03-17 18:22:16.572 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:22:16.573 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:22:16.660 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:16.660 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11858,比列:0.300000,数据库:0.29749358,计算:-0.297493
2022-03-17 18:22:16.661 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:22:16.661 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:22:16.751 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:16.752 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11858,比列:0.100000,数据库:0.09916452,计算:-0.099164
2022-03-17 18:22:16.753 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:22:16.754 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:22:16.843 [http-nio-10090-exec-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:22:16.843 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11858,比列:0.100000,数据库:0.09916452,计算:-0.099164
2022-03-17 18:22:16.844 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:25:47.106 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:25:47.107 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:25:47.204 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:25:47.206 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:25:47.208 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:25:47.294 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:25:47.295 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:25:47.296 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:25:47.532 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:25:47.533 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:960.2156383600000000,hold:0E-16
2022-03-17 18:25:47.533 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-39.7843616400000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:960.2156383600000000,操作后，数据库存储的总金额:960.2156383600000000
2022-03-17 18:25:47.534 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:25:47.534 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:47.622 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:25:47.622 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:25:47.643 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:25:47.644 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:25:47.731 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:25:47.732 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:25:47.732 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:25:47.821 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:25:47.822 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:25:47.822 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:25:47.926 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:25:47.926 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:315.0814000000000000
2022-03-17 18:25:47.926 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:282.0814,操作后，账户变化金额:-33.0000000000000000,操作后，计算剩余的金额:315.0814000000000000,操作后，数据库存储的总金额:315.0814000000000000
2022-03-17 18:25:47.927 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:25:47.927 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:25:48.023 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:25:48.023 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:25:48.023 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:25:48.111 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:25:48.112 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:25:48.112 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:25:48.206 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:25:48.207 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:25:48.207 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:25:48.302 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:25:48.302 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:25:48.303 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:25:48.585 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:25:48.586 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:25:48.587 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:25:48.674 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:25:48.675 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:25:48.675 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:25:48.675 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:25:48.853 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 18
2022-03-17 18:25:48.854 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=3, size=-20.7356820000000000, preBalance=1000.0000000000000000, postBalance=979.2643180000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓保证金-20.7356820000000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8294272800000000, preBalance=979.2643180000000000, postBalance=978.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓手续费-0.8294272800000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=978.4348907200000000, postBalance=966.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3920, note=转出：12.00000000, createdDate=2022-03-17 18:20:11, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=966.4348907200000000, postBalance=945.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77485, note=用户ID:51905058, 转出21.0000000000000000USDT, createdDate=2022-03-17 18:20:17, fromUserId=null, total=null), UserBillChain(userId=51905058, type=4, size=20.9141820000000000, preBalance=945.4348907200000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓收益20.0846833200000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8294986800000000, preBalance=965.5195740400000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓手续费-0.8294986800000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.9916550400000000, preBalance=965.5195740400000000, postBalance=964.5279190000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11857, note=单号:11857开仓手续费-0.9916550400000000, createdDate=2022-03-17 18:21:24, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0244000000000000, preBalance=964.5279190000000000, postBalance=963.5118737200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11858, note=单号:11858平仓收益-1.0160452800000000, createdDate=2022-03-17 18:21:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.9916452800000000, preBalance=963.5118737200000000, postBalance=963.5118737200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11858, note=单号:11858平仓手续费-0.9916452800000000, createdDate=2022-03-17 18:21:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8299719600000000, preBalance=963.5118737200000000, postBalance=962.6819017600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11859, note=单号:11859开仓手续费-0.8299719600000000, createdDate=2022-03-17 18:24:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.6672077600000000, preBalance=962.6819017600000000, postBalance=962.0146940000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11860, note=单号:11860开仓手续费-0.6672077600000000, createdDate=2022-03-17 18:24:51, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0813628000000000, preBalance=962.0146940000000000, postBalance=961.9333312000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11861, note=单号:11861开仓手续费-0.0813628000000000, createdDate=2022-03-17 18:24:58, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.1071000000000000, preBalance=961.9333312000000000, postBalance=960.9963020800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11862, note=单号:11862平仓收益-0.9370291200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0246000000000000, preBalance=960.9963020800000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11863, note=单号:11863平仓收益-0.6917979200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8299291200000000, preBalance=960.3045041600000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11862, note=单号:11862平仓手续费-0.8299291200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.6671979200000000, preBalance=960.3045041600000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11863, note=单号:11863平仓手续费-0.6671979200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0075000000000000, preBalance=960.3045041600000000, postBalance=960.2156383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11864, note=单号:11864平仓收益-0.0888658000000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0813658000000000, preBalance=960.2156383600000000, postBalance=960.2156383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11864, note=单号:11864平仓手续费-0.0813658000000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null)]
2022-03-17 18:25:48.855 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:25:48.855 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-20.7356820000000000
2022-03-17 18:25:48.855 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11855' LIMIT 0,1 
2022-03-17 18:25:48.855 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:25:48.963 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:25:48.964 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:25:48.964 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:25:49.053 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:25:49.053 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8294272800000000
2022-03-17 18:25:49.054 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11855' LIMIT 0,1000 
2022-03-17 18:25:49.054 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:25:49.152 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:25:49.153 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:25:49.153 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:25:49.248 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:25:49.249 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:25:49.250 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:49.345 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:49.346 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:25:49.346 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:49.632 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:49.633 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:25:49.633 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:49.723 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:49.734 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:25:49.736 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:49.822 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:49.823 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:25:49.823 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:49.912 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:25:49.912 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:25:49.913 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:25:50.026 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:50.026 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:25:50.026 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:25:50.027 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:25:50.128 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:50.129 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11855,比列:0.200000,数据库:0.16588545,计算:-0.165885
2022-03-17 18:25:50.129 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:25:50.130 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:25:50.229 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:50.229 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:25:50.230 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:25:50.231 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:25:50.321 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:50.321 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:25:50.322 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:25:50.322 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:25:50.410 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:50.410 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:25:50.410 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 18:25:50.410 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 18:25:50.410 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:20.9141820000000000
2022-03-17 18:25:50.411 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:25:50.411 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:25:50.682 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:25:50.682 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:25:50.683 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:25:50.770 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:25:50.771 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:25:50.771 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:25:50.861 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:25:50.861 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:25:50.862 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:25:50.949 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:25:50.950 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,1 
2022-03-17 18:25:50.950 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:25:51.075 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:25:51.075 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11856,数据库:-0.17850000,计算得:0.178500
2022-03-17 18:25:51.076 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8294986800000000
2022-03-17 18:25:51.076 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:25:51.076 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:25:51.168 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:25:51.169 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:25:51.169 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:25:51.256 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:25:51.257 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:25:51.258 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:51.345 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:51.346 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:25:51.346 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:51.433 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:51.434 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:25:51.435 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:51.733 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:51.734 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:25:51.734 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:51.821 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:51.821 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:25:51.822 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:51.910 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:25:51.911 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:25:51.912 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:25:52.000 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:52.000 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:25:52.001 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:25:52.002 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:25:52.128 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:52.128 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11856,比列:0.200000,数据库:0.16589973,计算:-0.165899
2022-03-17 18:25:52.129 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:25:52.129 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:25:52.218 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:52.219 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:25:52.220 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:25:52.221 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:25:52.312 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:52.312 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:25:52.313 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:25:52.313 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:25:52.409 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:52.410 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:25:52.410 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9916550400000000
2022-03-17 18:25:52.410 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11857' LIMIT 0,1000 
2022-03-17 18:25:52.410 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:25:52.497 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:25:52.498 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:25:52.499 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:25:52.782 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:25:52.783 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:25:52.783 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:52.870 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:52.871 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:25:52.871 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:52.957 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:52.958 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:25:52.958 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:53.045 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:53.046 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:25:53.046 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:53.172 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:53.172 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:25:53.173 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:53.287 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:25:53.288 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:25:53.288 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:25:53.300 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:53.300 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:25:53.301 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:25:53.301 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:25:53.394 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:53.394 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11857,比列:0.200000,数据库:0.19833100,计算:-0.198331
2022-03-17 18:25:53.395 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:25:53.396 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:25:53.483 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:53.483 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:25:53.484 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:25:53.484 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:25:53.755 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:53.755 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:25:53.756 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:25:53.757 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:25:53.845 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:53.845 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:25:53.845 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0244000000000000
2022-03-17 18:25:53.846 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:25:53.846 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:25:53.932 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:25:53.933 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:25:53.933 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:25:54.023 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:25:54.024 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:25:54.024 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:25:54.147 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:25:54.148 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:25:54.148 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:25:54.244 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:25:54.245 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,1 
2022-03-17 18:25:54.245 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:25:54.333 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:25:54.333 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11858,数据库:0.02440000,计算得:-0.024400
2022-03-17 18:25:54.333 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.9916452800000000
2022-03-17 18:25:54.333 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:25:54.333 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:25:54.422 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:25:54.422 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:25:54.423 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:25:54.509 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:25:54.509 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:25:54.509 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:54.801 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:54.801 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:25:54.801 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:54.889 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:54.889 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:25:54.889 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:54.977 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:54.977 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:25:54.977 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:55.071 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:55.071 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:25:55.071 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:55.195 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:25:55.195 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:25:55.196 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:25:55.283 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:55.283 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11858,比列:0.300000,数据库:0.29749358,计算:-0.297493
2022-03-17 18:25:55.284 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:25:55.284 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:25:55.380 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:55.381 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11858,比列:0.200000,数据库:0.19832905,计算:-0.198329
2022-03-17 18:25:55.381 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:25:55.381 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:25:55.479 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:55.479 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11858,比列:0.300000,数据库:0.29749358,计算:-0.297493
2022-03-17 18:25:55.480 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:25:55.480 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:25:55.567 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:55.567 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11858,比列:0.100000,数据库:0.09916452,计算:-0.099164
2022-03-17 18:25:55.568 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:25:55.568 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:25:55.850 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:55.850 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11858,比列:0.100000,数据库:0.09916452,计算:-0.099164
2022-03-17 18:25:55.850 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8299719600000000
2022-03-17 18:25:55.851 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11859' LIMIT 0,1000 
2022-03-17 18:25:55.851 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:25:55.941 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:25:55.942 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:25:55.942 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:25:56.034 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:25:56.035 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:25:56.036 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:56.124 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:56.125 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:25:56.126 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:56.240 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:56.241 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:25:56.241 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:56.347 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:56.347 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:25:56.347 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:56.435 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:56.435 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:25:56.435 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:56.533 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:25:56.534 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:25:56.534 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:25:56.623 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:56.623 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11859,比列:0.300000,数据库:0.24899158,计算:-0.248991
2022-03-17 18:25:56.624 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:25:56.624 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:25:56.904 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:56.905 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11859,比列:0.200000,数据库:0.16599439,计算:-0.165994
2022-03-17 18:25:56.905 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:25:56.906 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:25:56.995 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:56.995 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11859,比列:0.300000,数据库:0.24899158,计算:-0.248991
2022-03-17 18:25:56.995 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:25:56.995 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:25:57.087 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:57.087 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11859,比列:0.100000,数据库:0.08299719,计算:-0.082997
2022-03-17 18:25:57.087 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:25:57.088 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:25:57.176 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:57.177 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11859,比列:0.100000,数据库:0.08299719,计算:-0.082997
2022-03-17 18:25:57.177 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6672077600000000
2022-03-17 18:25:57.178 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11860' LIMIT 0,1000 
2022-03-17 18:25:57.178 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:25:57.296 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:25:57.297 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:25:57.297 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:25:57.386 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:25:57.387 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:25:57.387 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:57.476 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:57.476 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:25:57.477 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:57.563 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:57.564 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:25:57.564 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:57.651 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:57.652 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:25:57.652 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:57.952 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:57.953 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:25:57.953 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:58.062 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:25:58.063 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:25:58.063 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:25:58.189 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:58.189 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11860,比列:0.300000,数据库:0.20016232,计算:-0.200162
2022-03-17 18:25:58.189 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:25:58.190 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:25:58.344 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:58.345 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11860,比列:0.200000,数据库:0.13344155,计算:-0.133441
2022-03-17 18:25:58.345 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:25:58.346 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:25:58.435 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:58.436 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11860,比列:0.300000,数据库:0.20016232,计算:-0.200162
2022-03-17 18:25:58.436 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:25:58.436 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:25:58.526 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:58.526 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11860,比列:0.100000,数据库:0.06672077,计算:-0.066720
2022-03-17 18:25:58.526 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:25:58.527 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:25:58.616 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:58.616 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11860,比列:0.100000,数据库:0.06672077,计算:-0.066720
2022-03-17 18:25:58.616 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0813628000000000
2022-03-17 18:25:58.617 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11861' LIMIT 0,1000 
2022-03-17 18:25:58.617 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:25:58.704 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:25:58.705 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:25:58.705 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:25:59.002 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:25:59.003 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:25:59.003 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:59.099 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:59.099 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:25:59.100 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:59.188 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:59.189 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:25:59.189 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:59.293 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:59.294 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:25:59.294 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:59.404 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:25:59.404 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:25:59.404 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:25:59.492 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:25:59.494 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:25:59.494 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:25:59.587 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:59.587 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11861,比列:0.300000,数据库:0.02440884,计算:-0.024408
2022-03-17 18:25:59.588 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:25:59.588 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:25:59.677 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:59.677 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11861,比列:0.200000,数据库:0.01627256,计算:-0.016272
2022-03-17 18:25:59.678 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:25:59.678 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:25:59.767 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:25:59.768 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11861,比列:0.300000,数据库:0.02440884,计算:-0.024408
2022-03-17 18:25:59.768 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:25:59.769 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:26:00.049 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:00.050 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11861,比列:0.100000,数据库:0.00813628,计算:-0.008136
2022-03-17 18:26:00.050 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:26:00.051 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:26:00.148 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:00.148 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11861,比列:0.100000,数据库:0.00813628,计算:-0.008136
2022-03-17 18:26:00.148 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.1071000000000000
2022-03-17 18:26:00.149 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:26:00.149 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:26:00.244 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:26:00.244 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:26:00.245 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:26:00.331 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:26:00.332 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:26:00.332 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:26:00.445 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:26:00.446 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:26:00.446 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:26:00.535 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:26:00.536 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,1 
2022-03-17 18:26:00.536 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:26:00.624 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:26:00.624 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11862,数据库:0.10710000,计算得:-0.107100
2022-03-17 18:26:00.625 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0246000000000000
2022-03-17 18:26:00.625 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:26:00.625 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:26:00.712 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:26:00.713 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:26:00.713 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:26:00.799 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:26:00.800 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:26:00.800 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:26:01.098 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:26:01.099 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:26:01.099 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:26:01.198 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:26:01.198 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,1 
2022-03-17 18:26:01.198 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:26:01.286 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:26:01.286 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11863,数据库:0.02460000,计算得:-0.024600
2022-03-17 18:26:01.286 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8299291200000000
2022-03-17 18:26:01.286 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:26:01.286 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:26:01.374 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:26:01.375 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:26:01.375 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:26:01.490 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:26:01.490 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:26:01.491 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:01.578 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:26:01.579 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:26:01.579 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:01.666 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:26:01.666 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:26:01.666 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:01.758 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:26:01.759 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:26:01.760 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:01.856 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:26:01.857 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:26:01.857 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:02.147 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:26:02.148 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:26:02.149 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:26:02.239 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:02.239 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11862,比列:0.300000,数据库:0.24897873,计算:-0.248978
2022-03-17 18:26:02.240 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:26:02.240 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:26:02.328 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:02.328 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11862,比列:0.200000,数据库:0.16598582,计算:-0.165985
2022-03-17 18:26:02.329 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:26:02.329 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:26:02.433 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:02.433 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11862,比列:0.300000,数据库:0.24897873,计算:-0.248978
2022-03-17 18:26:02.433 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:26:02.434 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:26:02.546 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:02.546 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11862,比列:0.100000,数据库:0.08299291,计算:-0.082992
2022-03-17 18:26:02.547 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:26:02.547 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:26:02.636 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:02.636 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11862,比列:0.100000,数据库:0.08299291,计算:-0.082992
2022-03-17 18:26:02.636 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6671979200000000
2022-03-17 18:26:02.637 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:26:02.637 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:26:02.726 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:26:02.726 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:26:02.727 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:26:02.815 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:26:02.816 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:26:02.816 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:02.904 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:26:02.905 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:26:02.905 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:03.197 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:26:03.198 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:26:03.198 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:03.306 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:26:03.306 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:26:03.307 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:03.481 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:26:03.482 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:26:03.482 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:03.590 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:26:03.591 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:26:03.592 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:26:03.680 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:03.680 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11863,比列:0.300000,数据库:0.20015937,计算:-0.200159
2022-03-17 18:26:03.681 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:26:03.681 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:26:03.770 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:03.771 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11863,比列:0.200000,数据库:0.13343958,计算:-0.133439
2022-03-17 18:26:03.771 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:26:03.772 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:26:03.943 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:03.943 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11863,比列:0.300000,数据库:0.20015937,计算:-0.200159
2022-03-17 18:26:03.944 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:26:03.944 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:26:04.395 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:04.396 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11863,比列:0.100000,数据库:0.06671979,计算:-0.066719
2022-03-17 18:26:04.396 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:26:04.396 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:26:04.510 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:04.511 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11863,比列:0.100000,数据库:0.06671979,计算:-0.066719
2022-03-17 18:26:04.511 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0075000000000000
2022-03-17 18:26:04.511 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:26:04.511 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:26:04.641 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:26:04.642 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:26:04.642 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:26:04.741 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:26:04.742 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:26:04.742 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:26:04.911 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:26:04.912 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:26:04.912 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:26:05.438 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:26:05.439 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,1 
2022-03-17 18:26:05.440 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:26:05.531 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:26:05.532 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11864,数据库:0.00750000,计算得:-0.007500
2022-03-17 18:26:05.532 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0813658000000000
2022-03-17 18:26:05.532 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:26:05.532 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:26:05.828 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:26:05.828 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:26:05.829 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:26:05.997 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:26:05.998 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:26:05.998 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:06.086 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:26:06.086 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:26:06.086 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:06.371 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:26:06.371 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:26:06.372 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:06.461 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:26:06.462 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:26:06.462 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:06.553 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:26:06.554 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:26:06.554 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:26:06.642 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:26:06.643 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:26:06.643 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:26:06.744 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:06.745 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11864,比列:0.300000,数据库:0.02440974,计算:-0.024409
2022-03-17 18:26:06.745 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:26:06.745 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:26:06.833 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:06.833 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11864,比列:0.200000,数据库:0.01627316,计算:-0.016273
2022-03-17 18:26:06.834 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:26:06.834 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:26:06.922 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:06.923 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11864,比列:0.300000,数据库:0.02440974,计算:-0.024409
2022-03-17 18:26:06.924 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:26:06.924 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:26:07.012 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:07.012 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11864,比列:0.100000,数据库:0.00813658,计算:-0.008136
2022-03-17 18:26:07.013 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:26:07.013 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:26:07.104 [http-nio-10090-exec-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:26:07.104 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11864,比列:0.100000,数据库:0.00813658,计算:-0.008136
2022-03-17 18:26:07.104 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:26:19.438 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 18:26:19.450 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 18:26:40.238 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5003 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 18:26:45.247 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 26926 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 18:26:45.248 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 18:26:46.120 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 18:26:46.122 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 18:26:46.140 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 18:26:46.144 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 18:26:46.145 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 18:26:46.153 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 18:26:46.164 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 18:26:46.165 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 18:26:46.180 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-03-17 18:26:46.970 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 18:26:47.027 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 18:26:47.027 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 18:26:47.028 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 18:26:47.151 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 18:26:47.151 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1846 ms
2022-03-17 18:26:48.558 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 18:26:49.522 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 18:26:49.524 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 18:26:49.525 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 18:26:49.805 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 18:26:49.821 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 18:26:49.834 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 25.283 seconds (JVM running for 25.875)
2022-03-17 18:27:14.836 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 18:27:14.837 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 18:27:14.838 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 18:27:15.251 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 18:27:16.914 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 18:27:16.926 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:27:16.957 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:27:17.160 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:27:17.165 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:27:17.165 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:27:17.270 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:27:17.271 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:17.271 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:27:17.361 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:27:17.361 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:960.2156383600000000,hold:0E-16
2022-03-17 18:27:17.363 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-39.7843616400000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:960.2156383600000000,操作后，数据库存储的总金额:960.2156383600000000
2022-03-17 18:27:17.365 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:17.366 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:17.458 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:27:17.458 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:27:17.479 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:27:17.480 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:27:17.776 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:27:17.777 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:17.777 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:27:17.866 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:27:17.867 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:27:17.868 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:27:17.968 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:27:17.968 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:315.0814000000000000
2022-03-17 18:27:17.968 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:282.0814,操作后，账户变化金额:-33.0000000000000000,操作后，计算剩余的金额:315.0814000000000000,操作后，数据库存储的总金额:315.0814000000000000
2022-03-17 18:27:17.969 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:17.969 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:27:18.087 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:27:18.088 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:27:18.089 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:27:18.181 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:27:18.182 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:27:18.182 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:27:18.280 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:27:18.281 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:27:18.282 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:27:18.390 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:27:18.391 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:27:18.391 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:27:18.479 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:27:18.480 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:27:18.481 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:27:18.741 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:27:18.742 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:27:18.744 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:27:18.745 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:27:18.861 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 18
2022-03-17 18:27:18.862 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=3, size=-20.7356820000000000, preBalance=1000.0000000000000000, postBalance=979.2643180000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓保证金-20.7356820000000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8294272800000000, preBalance=979.2643180000000000, postBalance=978.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓手续费-0.8294272800000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=978.4348907200000000, postBalance=966.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3920, note=转出：12.00000000, createdDate=2022-03-17 18:20:11, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=966.4348907200000000, postBalance=945.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77485, note=用户ID:51905058, 转出21.0000000000000000USDT, createdDate=2022-03-17 18:20:17, fromUserId=null, total=null), UserBillChain(userId=51905058, type=4, size=20.9141820000000000, preBalance=945.4348907200000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓收益20.0846833200000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8294986800000000, preBalance=965.5195740400000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓手续费-0.8294986800000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.9916550400000000, preBalance=965.5195740400000000, postBalance=964.5279190000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11857, note=单号:11857开仓手续费-0.9916550400000000, createdDate=2022-03-17 18:21:24, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0244000000000000, preBalance=964.5279190000000000, postBalance=963.5118737200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11858, note=单号:11858平仓收益-1.0160452800000000, createdDate=2022-03-17 18:21:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.9916452800000000, preBalance=963.5118737200000000, postBalance=963.5118737200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11858, note=单号:11858平仓手续费-0.9916452800000000, createdDate=2022-03-17 18:21:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8299719600000000, preBalance=963.5118737200000000, postBalance=962.6819017600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11859, note=单号:11859开仓手续费-0.8299719600000000, createdDate=2022-03-17 18:24:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.6672077600000000, preBalance=962.6819017600000000, postBalance=962.0146940000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11860, note=单号:11860开仓手续费-0.6672077600000000, createdDate=2022-03-17 18:24:51, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0813628000000000, preBalance=962.0146940000000000, postBalance=961.9333312000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11861, note=单号:11861开仓手续费-0.0813628000000000, createdDate=2022-03-17 18:24:58, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.1071000000000000, preBalance=961.9333312000000000, postBalance=960.9963020800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11862, note=单号:11862平仓收益-0.9370291200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0246000000000000, preBalance=960.9963020800000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11863, note=单号:11863平仓收益-0.6917979200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8299291200000000, preBalance=960.3045041600000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11862, note=单号:11862平仓手续费-0.8299291200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.6671979200000000, preBalance=960.3045041600000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11863, note=单号:11863平仓手续费-0.6671979200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0075000000000000, preBalance=960.3045041600000000, postBalance=960.2156383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11864, note=单号:11864平仓收益-0.0888658000000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0813658000000000, preBalance=960.2156383600000000, postBalance=960.2156383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11864, note=单号:11864平仓手续费-0.0813658000000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null)]
2022-03-17 18:27:18.863 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:27:18.863 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-20.7356820000000000
2022-03-17 18:27:18.870 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11855' LIMIT 0,1 
2022-03-17 18:27:18.870 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:27:18.961 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:27:18.962 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:18.962 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:19.132 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:19.134 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8294272800000000
2022-03-17 18:27:19.135 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11855' LIMIT 0,1000 
2022-03-17 18:27:19.136 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:19.226 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:19.228 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:19.228 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:19.315 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:19.372 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:27:19.372 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:19.462 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:19.463 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:27:19.463 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:19.554 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:19.556 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:27:19.556 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:19.786 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:19.787 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:27:19.788 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:19.882 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:19.883 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:19.884 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:19.972 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:27:19.975 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:27:19.976 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:27:20.065 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:20.066 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:27:20.067 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:27:20.068 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:27:20.179 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:20.180 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11855,比列:0.200000,数据库:0.16588545,计算:-0.165885
2022-03-17 18:27:20.182 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:27:20.182 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:27:20.272 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:20.273 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:27:20.274 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:27:20.274 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:27:20.363 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:20.363 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:27:20.364 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:27:20.364 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:27:20.453 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:20.454 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:27:20.455 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 18:27:20.455 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 18:27:20.455 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:20.9141820000000000
2022-03-17 18:27:20.456 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:27:20.456 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:20.545 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:20.546 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:20.546 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:20.835 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:20.837 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:27:20.838 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:20.927 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:20.928 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:20.928 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:21.017 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:21.019 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,1 
2022-03-17 18:27:21.020 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:27:21.120 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:27:21.121 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11856,数据库:-0.17850000,计算得:0.178500
2022-03-17 18:27:21.121 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8294986800000000
2022-03-17 18:27:21.122 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:27:21.123 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:21.230 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:21.230 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:21.230 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:21.318 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:21.319 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:27:21.319 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:21.408 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:21.409 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:27:21.410 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:21.501 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:21.502 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:27:21.502 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:21.592 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:21.593 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:27:21.593 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:21.883 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:21.884 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:21.885 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:21.974 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:27:21.975 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:27:21.976 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:27:22.065 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:22.066 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:27:22.067 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:27:22.068 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:27:22.160 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:22.160 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11856,比列:0.200000,数据库:0.16589973,计算:-0.165899
2022-03-17 18:27:22.161 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:27:22.161 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:27:22.277 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:22.277 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:27:22.278 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:27:22.279 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:27:22.376 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:22.377 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:27:22.378 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:27:22.379 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:27:22.486 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:22.487 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:27:22.487 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9916550400000000
2022-03-17 18:27:22.488 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11857' LIMIT 0,1000 
2022-03-17 18:27:22.489 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:22.577 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:22.578 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:22.578 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:22.666 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:22.666 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:27:22.667 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:22.935 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:22.936 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:27:22.937 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:23.025 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:23.026 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:27:23.027 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:23.115 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:23.116 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:27:23.116 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:23.210 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:23.211 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:23.212 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:23.330 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:27:23.331 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:27:23.332 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:27:23.421 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:23.421 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:27:23.422 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:27:23.423 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:27:23.511 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:23.511 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11857,比列:0.200000,数据库:0.19833100,计算:-0.198331
2022-03-17 18:27:23.512 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:27:23.514 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:27:23.612 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:23.624 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:27:23.642 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:27:23.643 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:27:23.733 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:23.733 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:27:23.734 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:27:23.735 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:27:23.985 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:23.986 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:27:23.986 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0244000000000000
2022-03-17 18:27:23.987 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:27:23.988 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:24.078 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:24.078 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:24.079 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:24.169 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:24.170 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:27:24.170 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:24.260 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:24.261 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:24.261 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:24.376 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:24.377 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,1 
2022-03-17 18:27:24.378 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:27:24.482 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:27:24.482 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11858,数据库:0.02440000,计算得:-0.024400
2022-03-17 18:27:24.482 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.9916452800000000
2022-03-17 18:27:24.483 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:27:24.483 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:24.575 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:24.576 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:24.576 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:24.663 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:24.665 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:27:24.665 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:24.757 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:24.757 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:27:24.758 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:25.033 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:25.034 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:27:25.034 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:25.125 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:25.126 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:27:25.126 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:25.215 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:25.216 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:25.216 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:25.306 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:27:25.308 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:27:25.309 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:27:25.426 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:25.427 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11858,比列:0.300000,数据库:0.29749358,计算:-0.297493
2022-03-17 18:27:25.428 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:27:25.429 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:27:25.540 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:25.540 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11858,比列:0.200000,数据库:0.19832905,计算:-0.198329
2022-03-17 18:27:25.541 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:27:25.542 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:27:25.638 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:25.638 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11858,比列:0.300000,数据库:0.29749358,计算:-0.297493
2022-03-17 18:27:25.639 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:27:25.640 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:27:25.749 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:25.750 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11858,比列:0.100000,数据库:0.09916452,计算:-0.099164
2022-03-17 18:27:25.751 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:27:25.751 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:27:25.993 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:25.993 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11858,比列:0.100000,数据库:0.09916452,计算:-0.099164
2022-03-17 18:27:25.993 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8299719600000000
2022-03-17 18:27:25.994 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11859' LIMIT 0,1000 
2022-03-17 18:27:25.995 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:26.166 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:26.166 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:26.166 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:26.253 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:26.254 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:27:26.254 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:26.342 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:26.343 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:27:26.343 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:26.474 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:26.475 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:27:26.476 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:26.564 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:26.565 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:27:26.565 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:26.652 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:26.653 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:26.654 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:26.758 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:27:26.759 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:27:26.759 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:27:26.848 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:26.849 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11859,比列:0.300000,数据库:0.24899158,计算:-0.248991
2022-03-17 18:27:26.850 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:27:26.850 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:27:27.129 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:27.129 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11859,比列:0.200000,数据库:0.16599439,计算:-0.165994
2022-03-17 18:27:27.130 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:27:27.131 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:27:27.224 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:27.225 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11859,比列:0.300000,数据库:0.24899158,计算:-0.248991
2022-03-17 18:27:27.225 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:27:27.225 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:27:27.316 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:27.316 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11859,比列:0.100000,数据库:0.08299719,计算:-0.082997
2022-03-17 18:27:27.317 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:27:27.318 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:27:27.406 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:27.407 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11859,比列:0.100000,数据库:0.08299719,计算:-0.082997
2022-03-17 18:27:27.408 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6672077600000000
2022-03-17 18:27:27.408 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11860' LIMIT 0,1000 
2022-03-17 18:27:27.409 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:27.518 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:27.519 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:27.519 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:27.607 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:27.608 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:27:27.608 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:27.696 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:27.697 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:27:27.697 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:27.785 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:27.785 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:27:27.786 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:27.878 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:27.879 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:27:27.879 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:28.176 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:28.177 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:28.177 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:28.265 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:27:28.266 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:27:28.267 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:27:28.355 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:28.356 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11860,比列:0.300000,数据库:0.20016232,计算:-0.200162
2022-03-17 18:27:28.356 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:27:28.357 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:27:28.445 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:28.445 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11860,比列:0.200000,数据库:0.13344155,计算:-0.133441
2022-03-17 18:27:28.446 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:27:28.446 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:27:28.570 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:28.571 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11860,比列:0.300000,数据库:0.20016232,计算:-0.200162
2022-03-17 18:27:28.572 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:27:28.572 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:27:28.667 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:28.668 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11860,比列:0.100000,数据库:0.06672077,计算:-0.066720
2022-03-17 18:27:28.668 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:27:28.669 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:27:28.759 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:28.760 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11860,比列:0.100000,数据库:0.06672077,计算:-0.066720
2022-03-17 18:27:28.760 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0813628000000000
2022-03-17 18:27:28.760 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11861' LIMIT 0,1000 
2022-03-17 18:27:28.761 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:28.850 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:28.851 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:28.851 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:28.941 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:28.942 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:27:28.942 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:29.231 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:29.232 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:27:29.232 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:29.326 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:29.326 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:27:29.327 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:29.418 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:29.419 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:27:29.419 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:29.508 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:29.508 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:29.509 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:29.617 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:27:29.618 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:27:29.619 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:27:29.713 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:29.713 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11861,比列:0.300000,数据库:0.02440884,计算:-0.024408
2022-03-17 18:27:29.714 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:27:29.715 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:27:29.803 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:29.804 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11861,比列:0.200000,数据库:0.01627256,计算:-0.016272
2022-03-17 18:27:29.805 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:27:29.805 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:27:29.901 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:29.902 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11861,比列:0.300000,数据库:0.02440884,计算:-0.024408
2022-03-17 18:27:29.903 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:27:29.904 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:27:29.993 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:29.993 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11861,比列:0.100000,数据库:0.00813628,计算:-0.008136
2022-03-17 18:27:29.994 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:27:29.994 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:27:30.275 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:30.275 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11861,比列:0.100000,数据库:0.00813628,计算:-0.008136
2022-03-17 18:27:30.276 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.1071000000000000
2022-03-17 18:27:30.276 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:27:30.277 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:30.365 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:30.366 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:30.366 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:30.453 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:30.454 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:27:30.455 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:30.543 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:30.544 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:30.544 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:30.664 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:30.665 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,1 
2022-03-17 18:27:30.666 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:27:30.772 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:27:30.773 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11862,数据库:0.10710000,计算得:-0.107100
2022-03-17 18:27:30.773 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0246000000000000
2022-03-17 18:27:30.774 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:27:30.774 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:30.862 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:30.863 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:30.863 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:30.951 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:30.953 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:27:30.953 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:31.048 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:31.048 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:31.048 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:31.329 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:31.331 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,1 
2022-03-17 18:27:31.332 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:27:31.425 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:27:31.426 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11863,数据库:0.02460000,计算得:-0.024600
2022-03-17 18:27:31.426 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8299291200000000
2022-03-17 18:27:31.426 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:27:31.427 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:31.516 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:31.517 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:31.518 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:31.606 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:31.606 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:27:31.607 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:31.716 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:31.717 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:27:31.717 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:31.814 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:31.815 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:27:31.816 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:31.914 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:31.915 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:27:31.915 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:32.011 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:32.012 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:32.012 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:32.102 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:27:32.104 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:27:32.105 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:27:32.377 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:32.377 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11862,比列:0.300000,数据库:0.24897873,计算:-0.248978
2022-03-17 18:27:32.378 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:27:32.379 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:27:32.468 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:32.469 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11862,比列:0.200000,数据库:0.16598582,计算:-0.165985
2022-03-17 18:27:32.470 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:27:32.470 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:27:32.564 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:32.564 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11862,比列:0.300000,数据库:0.24897873,计算:-0.248978
2022-03-17 18:27:32.565 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:27:32.565 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:27:32.654 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:32.654 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11862,比列:0.100000,数据库:0.08299291,计算:-0.082992
2022-03-17 18:27:32.655 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:27:32.655 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:27:32.773 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:32.773 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11862,比列:0.100000,数据库:0.08299291,计算:-0.082992
2022-03-17 18:27:32.773 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6671979200000000
2022-03-17 18:27:32.774 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:27:32.775 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:32.867 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:32.867 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:32.868 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:32.955 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:32.957 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:27:32.957 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:33.047 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:33.048 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:27:33.048 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:33.147 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:33.147 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:27:33.147 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:33.423 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:33.424 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:27:33.424 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:33.512 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:33.513 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:33.514 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:33.601 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:27:33.602 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:27:33.602 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:27:33.691 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:33.692 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11863,比列:0.300000,数据库:0.20015937,计算:-0.200159
2022-03-17 18:27:33.693 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:27:33.693 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:27:33.816 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:33.816 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11863,比列:0.200000,数据库:0.13343958,计算:-0.133439
2022-03-17 18:27:33.817 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:27:33.817 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:27:33.921 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:33.921 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11863,比列:0.300000,数据库:0.20015937,计算:-0.200159
2022-03-17 18:27:33.922 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:27:33.923 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:27:34.014 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:34.015 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11863,比列:0.100000,数据库:0.06671979,计算:-0.066719
2022-03-17 18:27:34.015 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:27:34.015 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:27:34.111 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:34.111 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11863,比列:0.100000,数据库:0.06671979,计算:-0.066719
2022-03-17 18:27:34.111 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0075000000000000
2022-03-17 18:27:34.112 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:27:34.112 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:34.202 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:34.202 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:34.203 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:34.475 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:34.476 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:27:34.476 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:34.567 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:34.568 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:34.568 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:34.656 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:34.656 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,1 
2022-03-17 18:27:34.657 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:27:34.748 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:27:34.749 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11864,数据库:0.00750000,计算得:-0.007500
2022-03-17 18:27:34.749 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0813658000000000
2022-03-17 18:27:34.750 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:27:34.750 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:27:34.866 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:27:34.867 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:27:34.867 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:27:34.956 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:27:34.957 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:27:34.958 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:35.045 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:35.046 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:27:35.046 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:35.133 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:35.134 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:27:35.134 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:35.230 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:35.230 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:27:35.231 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:35.521 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:27:35.523 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:27:35.523 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:27:35.612 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:27:35.613 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:27:35.613 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:27:35.703 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:35.703 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11864,比列:0.300000,数据库:0.02440974,计算:-0.024409
2022-03-17 18:27:35.704 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:27:35.704 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:27:35.913 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:35.913 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11864,比列:0.200000,数据库:0.01627316,计算:-0.016273
2022-03-17 18:27:35.913 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:27:35.914 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:27:36.001 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:36.002 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11864,比列:0.300000,数据库:0.02440974,计算:-0.024409
2022-03-17 18:27:36.004 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:27:36.004 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:27:36.094 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:36.095 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11864,比列:0.100000,数据库:0.00813658,计算:-0.008136
2022-03-17 18:27:36.095 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:27:36.095 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:27:36.188 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:27:36.189 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11864,比列:0.100000,数据库:0.00813658,计算:-0.008136
2022-03-17 18:27:36.190 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:39:28.538 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:39:28.541 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:39:28.633 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:39:28.634 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:39:28.634 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:39:28.723 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:39:28.724 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:28.724 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:39:28.812 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:39:28.812 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:393.4590981978484781,hold:0E-16
2022-03-17 18:39:28.813 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-606.5409018021515219,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:393.4590981978484781,操作后，数据库存储的总金额:393.4590981978484781
2022-03-17 18:39:28.813 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:28.813 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:28.908 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:28.908 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:39:28.934 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:39:28.935 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:39:29.024 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:39:29.025 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:29.026 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:39:29.115 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:39:29.116 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:39:29.116 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:39:29.207 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:39:29.208 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:321.4214000000000000
2022-03-17 18:39:29.208 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:282.0814,操作后，账户变化金额:-39.3400000000000000,操作后，计算剩余的金额:321.4214000000000000,操作后，数据库存储的总金额:321.4214000000000000
2022-03-17 18:39:29.208 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:29.208 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:39:29.297 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:39:29.297 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:29.297 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:39:29.386 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:39:29.387 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:29.387 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:39:29.477 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:39:29.478 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:29.478 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:39:29.575 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:39:29.576 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:29.576 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:39:29.668 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:39:29.668 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:39:29.668 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:39:29.760 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:39:29.761 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:39:29.762 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:39:29.762 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:39:29.880 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 47
2022-03-17 18:39:29.880 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=3, size=-20.7356820000000000, preBalance=1000.0000000000000000, postBalance=979.2643180000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓保证金-20.7356820000000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8294272800000000, preBalance=979.2643180000000000, postBalance=978.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓手续费-0.8294272800000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=978.4348907200000000, postBalance=966.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3920, note=转出：12.00000000, createdDate=2022-03-17 18:20:11, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=966.4348907200000000, postBalance=945.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77485, note=用户ID:51905058, 转出21.0000000000000000USDT, createdDate=2022-03-17 18:20:17, fromUserId=null, total=null), UserBillChain(userId=51905058, type=4, size=20.9141820000000000, preBalance=945.4348907200000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓收益20.0846833200000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8294986800000000, preBalance=965.5195740400000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓手续费-0.8294986800000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.9916550400000000, preBalance=965.5195740400000000, postBalance=964.5279190000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11857, note=单号:11857开仓手续费-0.9916550400000000, createdDate=2022-03-17 18:21:24, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0244000000000000, preBalance=964.5279190000000000, postBalance=963.5118737200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11858, note=单号:11858平仓收益-1.0160452800000000, createdDate=2022-03-17 18:21:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.9916452800000000, preBalance=963.5118737200000000, postBalance=963.5118737200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11858, note=单号:11858平仓手续费-0.9916452800000000, createdDate=2022-03-17 18:21:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8299719600000000, preBalance=963.5118737200000000, postBalance=962.6819017600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11859, note=单号:11859开仓手续费-0.8299719600000000, createdDate=2022-03-17 18:24:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.6672077600000000, preBalance=962.6819017600000000, postBalance=962.0146940000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11860, note=单号:11860开仓手续费-0.6672077600000000, createdDate=2022-03-17 18:24:51, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0813628000000000, preBalance=962.0146940000000000, postBalance=961.9333312000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11861, note=单号:11861开仓手续费-0.0813628000000000, createdDate=2022-03-17 18:24:58, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.1071000000000000, preBalance=961.9333312000000000, postBalance=960.9963020800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11862, note=单号:11862平仓收益-0.9370291200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0246000000000000, preBalance=960.9963020800000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11863, note=单号:11863平仓收益-0.6917979200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8299291200000000, preBalance=960.3045041600000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11862, note=单号:11862平仓手续费-0.8299291200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.6671979200000000, preBalance=960.3045041600000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11863, note=单号:11863平仓手续费-0.6671979200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0075000000000000, preBalance=960.3045041600000000, postBalance=960.2156383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11864, note=单号:11864平仓收益-0.0888658000000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0813658000000000, preBalance=960.2156383600000000, postBalance=960.2156383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11864, note=单号:11864平仓手续费-0.0813658000000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-135.3782909090909090, preBalance=960.2156383600000000, postBalance=824.8373474509090910, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11865, note=单号:11865开仓保证金-135.3782909090909090, createdDate=2022-03-17 18:38:05, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-4.1696513600000000, preBalance=824.8373474509090910, postBalance=820.6676960909090910, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11865, note=单号:11865开仓手续费-4.1696513600000000, createdDate=2022-03-17 18:38:05, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-332.6589437500000000, preBalance=820.6676960909090910, postBalance=488.0087523409090910, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11866, note=单号:11866开仓保证金-332.6589437500000000, createdDate=2022-03-17 18:38:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-2.1290172400000000, preBalance=488.0087523409090910, postBalance=485.8797351009090910, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11866, note=单号:11866开仓手续费-2.1290172400000000, createdDate=2022-03-17 18:38:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-3.9647636363636363, preBalance=485.8797351009090910, postBalance=481.9149714645454547, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11867, note=单号:11867开仓保证金-3.9647636363636363, createdDate=2022-03-17 18:38:19, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.1221147200000000, preBalance=481.9149714645454547, postBalance=481.7928567445454547, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11867, note=单号:11867开仓手续费-0.1221147200000000, createdDate=2022-03-17 18:38:19, fromUserId=0, total=null), UserBillChain(userId=51905058, type=55, size=-3.0000000000000000, preBalance=481.7928567445454547, postBalance=478.7928567445454547, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11865, note=单号:11865增加保证金-3.0000000000000000, createdDate=2022-03-17 18:38:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=132.1377373967272727, preBalance=478.7928567445454547, postBalance=606.6359458212727274, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11868, note=单号:11868平仓收益127.8430890767272727, createdDate=2022-03-17 18:38:21, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-4.2946483200000000, preBalance=606.6359458212727274, postBalance=606.6359458212727274, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11868, note=单号:11868平仓手续费-4.2946483200000000, createdDate=2022-03-17 18:38:21, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-362.9020254237288135, preBalance=606.6359458212727274, postBalance=243.7339203975439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11869, note=单号:11869开仓保证金-362.9020254237288135, createdDate=2022-03-17 18:38:22, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-8.5644878000000000, preBalance=243.7339203975439139, postBalance=235.1694325975439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11869, note=单号:11869开仓手续费-8.5644878000000000, createdDate=2022-03-17 18:38:22, fromUserId=0, total=null), UserBillChain(userId=51905058, type=55, size=-10.0000000000000000, preBalance=235.1694325975439139, postBalance=225.1694325975439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11866, note=单号:11866增加保证金-10.0000000000000000, createdDate=2022-03-17 18:38:31, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=340.8511437500000000, preBalance=225.1694325975439139, postBalance=563.8922822275439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11870, note=单号:11870平仓收益338.7228496300000000, createdDate=2022-03-17 18:38:33, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-2.1282941200000000, preBalance=563.8922822275439139, postBalance=563.8922822275439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11870, note=单号:11870平仓手续费-2.1282941200000000, createdDate=2022-03-17 18:38:33, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-257.1958666666666666, preBalance=563.8922822275439139, postBalance=306.6964155608772473, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11871, note=单号:11871开仓保证金-257.1958666666666666, createdDate=2022-03-17 18:38:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-8.3331460800000000, preBalance=306.6964155608772473, postBalance=298.3632694808772473, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11871, note=单号:11871开仓手续费-8.3331460800000000, createdDate=2022-03-17 18:38:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-118.0940338983050847, preBalance=298.3632694808772473, postBalance=180.2692355825721626, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11872, note=单号:11872开仓保证金-118.0940338983050847, createdDate=2022-03-17 18:38:42, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-2.7870192000000000, preBalance=180.2692355825721626, postBalance=177.4822163825721626, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11872, note=单号:11872开仓手续费-2.7870192000000000, createdDate=2022-03-17 18:38:42, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-1.0000000000000000, preBalance=177.4822163825721626, postBalance=176.4822163825721626, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3921, note=转出：1.00000000, createdDate=2022-03-17 18:38:42, fromUserId=null, total=null), UserBillChain(userId=51905058, type=55, size=-9.0000000000000000, preBalance=176.4822163825721626, postBalance=167.4822163825721626, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11869, note=单号:11869增加保证金-9.0000000000000000, createdDate=2022-03-17 18:38:43, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=459.1566095387545763, preBalance=167.4822163825721626, postBalance=615.2997597613267389, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11873, note=单号:11873平仓收益447.8175433787545763, createdDate=2022-03-17 18:38:44, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-11.3390661600000000, preBalance=615.2997597613267389, postBalance=615.2997597613267389, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11873, note=单号:11873平仓手续费-11.3390661600000000, createdDate=2022-03-17 18:38:44, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-214.5270130434782608, preBalance=615.2997597613267389, postBalance=400.7727467178484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11874, note=单号:11874开仓保证金-214.5270130434782608, createdDate=2022-03-17 18:38:45, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-1.9736485200000000, preBalance=400.7727467178484781, postBalance=398.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11874, note=单号:11874开仓手续费-1.9736485200000000, createdDate=2022-03-17 18:38:45, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-5.0000000000000000, preBalance=398.7990981978484781, postBalance=393.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3922, note=转出：5.00000000, createdDate=2022-03-17 18:38:46, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-5.0000000000000000, preBalance=393.7990981978484781, postBalance=388.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77486, note=用户ID:51905058, 转出5.0000000000000000USDT, createdDate=2022-03-17 18:38:51, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-6.0000000000000000, preBalance=388.7990981978484781, postBalance=382.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77487, note=用户ID:51905058, 转出6.0000000000000000USDT, createdDate=2022-03-17 18:38:57, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=9.0000000000000000, preBalance=382.7990981978484781, postBalance=391.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:9.0000, createdDate=2022-03-17 18:39:03, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=1.6600000000000000, preBalance=391.7990981978484781, postBalance=393.4590981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77489, note=用户ID:51905058, 转入1.66USDT, createdDate=2022-03-17 18:39:10, fromUserId=null, total=null)]
2022-03-17 18:39:29.881 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:39:29.881 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-20.7356820000000000
2022-03-17 18:39:29.881 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11855' LIMIT 0,1 
2022-03-17 18:39:29.882 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:39:29.974 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:39:29.974 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:29.975 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:30.067 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:30.068 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8294272800000000
2022-03-17 18:39:30.068 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11855' LIMIT 0,1000 
2022-03-17 18:39:30.069 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:30.164 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:30.165 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:30.165 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:30.252 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:30.253 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:30.254 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:30.342 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:30.342 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:30.342 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:30.431 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:30.432 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:30.432 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:30.522 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:30.523 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:30.523 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:30.611 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:30.612 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:30.612 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:30.700 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:30.700 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:39:30.701 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:30.791 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:30.792 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:39:30.792 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:39:30.793 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:30.888 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:30.889 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11855,比列:0.200000,数据库:0.16588545,计算:-0.165885
2022-03-17 18:39:30.889 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:39:30.889 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:30.989 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:30.990 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:39:30.991 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:39:30.992 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:31.083 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:31.083 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:39:31.084 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:39:31.085 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:31.176 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:31.177 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:39:31.177 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 18:39:31.177 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 18:39:31.177 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:20.9141820000000000
2022-03-17 18:39:31.178 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:39:31.178 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:31.271 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:31.271 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:31.272 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:31.364 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:31.365 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:39:31.365 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:31.460 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:31.461 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:31.461 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:31.553 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:31.554 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,1 
2022-03-17 18:39:31.554 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:39:31.654 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:39:31.654 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11856,数据库:-0.17850000,计算得:0.178500
2022-03-17 18:39:31.654 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8294986800000000
2022-03-17 18:39:31.655 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:39:31.655 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:31.745 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:31.746 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:31.746 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:31.853 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:31.854 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:31.854 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:31.944 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:31.945 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:31.945 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:32.042 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:32.043 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:32.043 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:32.131 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:32.132 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:32.132 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:32.229 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:32.230 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:32.231 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:32.322 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:32.322 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:39:32.323 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:32.421 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:32.421 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:39:32.422 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:39:32.422 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:32.519 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:32.520 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11856,比列:0.200000,数据库:0.16589973,计算:-0.165899
2022-03-17 18:39:32.521 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:39:32.521 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:32.612 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:32.613 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:39:32.613 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:39:32.614 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:32.704 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:32.704 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:39:32.705 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:39:32.705 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:32.798 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:32.798 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:39:32.799 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9916550400000000
2022-03-17 18:39:32.799 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11857' LIMIT 0,1000 
2022-03-17 18:39:32.799 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:32.890 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:32.890 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:32.890 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:32.988 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:32.988 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:32.989 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:33.080 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:33.081 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:33.081 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:33.186 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:33.187 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:33.187 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:33.280 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:33.281 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:33.281 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:33.376 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:33.377 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:33.378 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:33.470 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:33.471 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:39:33.471 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:33.565 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:33.566 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:39:33.566 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:39:33.567 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:33.657 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:33.658 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11857,比列:0.200000,数据库:0.19833100,计算:-0.198331
2022-03-17 18:39:33.658 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:39:33.659 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:33.754 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:33.755 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:39:33.755 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:39:33.756 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:33.854 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:33.854 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:39:33.855 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:39:33.855 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:33.953 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:33.953 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:39:33.954 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0244000000000000
2022-03-17 18:39:33.954 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:39:33.955 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:34.050 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:34.051 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:34.051 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:34.142 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:34.144 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:39:34.144 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:34.236 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:34.236 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:34.236 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:34.337 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:34.339 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,1 
2022-03-17 18:39:34.339 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:39:34.449 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:39:34.449 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11858,数据库:0.02440000,计算得:-0.024400
2022-03-17 18:39:34.449 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.9916452800000000
2022-03-17 18:39:34.450 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:39:34.451 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:34.548 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:34.548 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:34.549 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:34.638 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:34.640 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:34.640 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:34.731 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:34.731 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:34.731 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:34.823 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:34.823 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:34.824 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:34.928 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:34.929 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:34.929 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:35.020 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:35.021 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:35.021 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:35.111 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:35.112 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:39:35.112 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:35.203 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:35.203 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11858,比列:0.300000,数据库:0.29749358,计算:-0.297493
2022-03-17 18:39:35.204 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:39:35.204 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:35.297 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:35.297 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11858,比列:0.200000,数据库:0.19832905,计算:-0.198329
2022-03-17 18:39:35.298 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:39:35.298 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:35.391 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:35.391 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11858,比列:0.300000,数据库:0.29749358,计算:-0.297493
2022-03-17 18:39:35.392 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:39:35.392 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:35.489 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:35.489 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11858,比列:0.100000,数据库:0.09916452,计算:-0.099164
2022-03-17 18:39:35.490 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:39:35.490 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:35.581 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:35.582 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11858,比列:0.100000,数据库:0.09916452,计算:-0.099164
2022-03-17 18:39:35.582 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8299719600000000
2022-03-17 18:39:35.582 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11859' LIMIT 0,1000 
2022-03-17 18:39:35.583 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:35.678 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:35.679 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:35.679 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:35.775 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:35.776 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:35.777 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:35.898 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:35.899 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:35.899 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:35.994 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:35.995 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:35.995 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:36.087 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:36.087 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:36.088 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:36.179 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:36.180 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:36.180 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:36.273 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:36.274 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:39:36.275 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:36.365 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:36.365 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11859,比列:0.300000,数据库:0.24899158,计算:-0.248991
2022-03-17 18:39:36.366 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:39:36.366 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:36.461 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:36.462 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11859,比列:0.200000,数据库:0.16599439,计算:-0.165994
2022-03-17 18:39:36.463 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:39:36.463 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:36.557 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:36.557 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11859,比列:0.300000,数据库:0.24899158,计算:-0.248991
2022-03-17 18:39:36.558 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:39:36.558 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:36.651 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:36.652 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11859,比列:0.100000,数据库:0.08299719,计算:-0.082997
2022-03-17 18:39:36.653 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:39:36.653 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:36.745 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:36.746 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11859,比列:0.100000,数据库:0.08299719,计算:-0.082997
2022-03-17 18:39:36.746 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6672077600000000
2022-03-17 18:39:36.747 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11860' LIMIT 0,1000 
2022-03-17 18:39:36.747 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:36.849 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:36.850 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:36.851 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:36.940 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:36.941 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:36.942 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:37.030 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:37.031 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:37.031 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:37.123 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:37.124 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:37.124 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:37.214 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:37.214 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:37.215 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:37.303 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:37.303 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:37.304 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:37.393 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:37.394 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:39:37.395 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:37.493 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:37.493 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11860,比列:0.300000,数据库:0.20016232,计算:-0.200162
2022-03-17 18:39:37.494 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:39:37.495 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:37.591 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:37.592 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11860,比列:0.200000,数据库:0.13344155,计算:-0.133441
2022-03-17 18:39:37.593 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:39:37.593 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:37.688 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:37.689 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11860,比列:0.300000,数据库:0.20016232,计算:-0.200162
2022-03-17 18:39:37.689 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:39:37.690 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:37.780 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:37.781 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11860,比列:0.100000,数据库:0.06672077,计算:-0.066720
2022-03-17 18:39:37.782 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:39:37.782 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:37.873 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:37.873 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11860,比列:0.100000,数据库:0.06672077,计算:-0.066720
2022-03-17 18:39:37.873 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0813628000000000
2022-03-17 18:39:37.874 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11861' LIMIT 0,1000 
2022-03-17 18:39:37.874 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:37.964 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:37.965 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:37.966 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:38.056 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:38.057 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:38.057 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:38.151 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:38.152 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:38.152 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:38.244 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:38.245 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:38.245 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:38.336 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:38.336 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:38.337 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:38.462 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:38.463 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:38.463 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:38.559 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:38.560 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:39:38.560 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:38.658 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:38.658 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11861,比列:0.300000,数据库:0.02440884,计算:-0.024408
2022-03-17 18:39:38.659 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:39:38.659 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:38.750 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:38.750 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11861,比列:0.200000,数据库:0.01627256,计算:-0.016272
2022-03-17 18:39:38.751 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:39:38.752 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:38.849 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:38.850 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11861,比列:0.300000,数据库:0.02440884,计算:-0.024408
2022-03-17 18:39:38.851 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:39:38.852 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:38.947 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:38.947 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11861,比列:0.100000,数据库:0.00813628,计算:-0.008136
2022-03-17 18:39:38.948 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:39:38.949 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:39.046 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:39.047 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11861,比列:0.100000,数据库:0.00813628,计算:-0.008136
2022-03-17 18:39:39.047 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.1071000000000000
2022-03-17 18:39:39.048 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:39:39.049 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:39.138 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:39.139 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:39.139 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:39.227 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:39.228 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:39:39.228 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:39.318 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:39.318 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:39.319 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:39.407 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:39.408 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,1 
2022-03-17 18:39:39.408 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:39:39.499 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:39:39.499 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11862,数据库:0.10710000,计算得:-0.107100
2022-03-17 18:39:39.499 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0246000000000000
2022-03-17 18:39:39.500 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:39:39.500 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:39.600 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:39.601 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:39.601 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:39.692 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:39.692 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:39:39.693 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:39.784 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:39.785 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:39.785 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:39.882 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:39.883 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,1 
2022-03-17 18:39:39.884 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:39:39.977 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:39:39.977 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11863,数据库:0.02460000,计算得:-0.024600
2022-03-17 18:39:39.978 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8299291200000000
2022-03-17 18:39:39.979 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:39:39.979 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:40.069 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:40.070 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:40.070 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:40.162 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:40.163 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:40.163 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:40.260 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:40.261 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:40.261 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:40.359 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:40.360 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:40.360 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:40.451 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:40.452 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:40.452 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:40.544 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:40.545 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:40.546 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:40.637 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:40.637 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:39:40.638 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:40.730 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:40.731 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11862,比列:0.300000,数据库:0.24897873,计算:-0.248978
2022-03-17 18:39:40.733 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:39:40.733 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:40.836 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:40.836 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11862,比列:0.200000,数据库:0.16598582,计算:-0.165985
2022-03-17 18:39:40.837 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:39:40.837 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:40.931 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:40.932 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11862,比列:0.300000,数据库:0.24897873,计算:-0.248978
2022-03-17 18:39:40.933 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:39:40.934 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:41.024 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:41.025 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11862,比列:0.100000,数据库:0.08299291,计算:-0.082992
2022-03-17 18:39:41.026 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:39:41.026 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:41.120 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:41.120 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11862,比列:0.100000,数据库:0.08299291,计算:-0.082992
2022-03-17 18:39:41.120 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6671979200000000
2022-03-17 18:39:41.121 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:39:41.121 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:41.211 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:41.211 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:41.212 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:41.301 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:41.302 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:41.302 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:41.391 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:41.392 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:41.392 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:41.491 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:41.491 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:41.492 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:41.619 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:41.619 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:41.620 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:41.711 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:41.712 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:41.712 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:41.801 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:41.803 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:39:41.803 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:41.893 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:41.893 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11863,比列:0.300000,数据库:0.20015937,计算:-0.200159
2022-03-17 18:39:41.894 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:39:41.895 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:41.984 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:41.985 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11863,比列:0.200000,数据库:0.13343958,计算:-0.133439
2022-03-17 18:39:41.985 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:39:41.985 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:42.105 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:42.105 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11863,比列:0.300000,数据库:0.20015937,计算:-0.200159
2022-03-17 18:39:42.106 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:39:42.107 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:42.198 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:42.198 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11863,比列:0.100000,数据库:0.06671979,计算:-0.066719
2022-03-17 18:39:42.199 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:39:42.199 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:42.288 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:42.289 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11863,比列:0.100000,数据库:0.06671979,计算:-0.066719
2022-03-17 18:39:42.289 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0075000000000000
2022-03-17 18:39:42.290 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:39:42.290 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:42.380 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:42.381 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:42.381 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:42.469 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:42.469 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:39:42.470 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:42.557 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:42.558 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:42.558 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:42.648 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:42.649 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,1 
2022-03-17 18:39:42.650 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:39:42.744 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:39:42.745 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11864,数据库:0.00750000,计算得:-0.007500
2022-03-17 18:39:42.745 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0813658000000000
2022-03-17 18:39:42.745 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:39:42.745 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:42.841 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:42.841 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:42.842 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:42.940 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:42.940 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:42.941 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:43.033 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:43.034 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:43.034 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:43.122 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:43.123 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:43.123 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:43.212 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:43.213 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:43.213 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:43.302 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:43.303 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:43.303 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:43.391 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:43.392 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:39:43.392 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:43.485 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:43.485 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11864,比列:0.300000,数据库:0.02440974,计算:-0.024409
2022-03-17 18:39:43.486 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:39:43.486 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:43.579 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:43.580 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11864,比列:0.200000,数据库:0.01627316,计算:-0.016273
2022-03-17 18:39:43.580 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:39:43.580 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:43.675 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:43.675 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11864,比列:0.300000,数据库:0.02440974,计算:-0.024409
2022-03-17 18:39:43.676 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:39:43.677 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:43.767 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:43.768 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11864,比列:0.100000,数据库:0.00813658,计算:-0.008136
2022-03-17 18:39:43.768 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:39:43.769 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:43.858 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:43.859 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11864,比列:0.100000,数据库:0.00813658,计算:-0.008136
2022-03-17 18:39:43.859 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-135.3782909090909090
2022-03-17 18:39:43.859 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11865' LIMIT 0,1 
2022-03-17 18:39:43.859 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:39:43.948 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:39:43.949 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:39:43.949 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:44.038 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:44.038 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-4.1696513600000000
2022-03-17 18:39:44.039 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11865' LIMIT 0,1000 
2022-03-17 18:39:44.039 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:44.129 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-17 18:39:44.130 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:39:44.130 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:44.219 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:44.219 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:44.220 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:44.309 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:44.309 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:44.309 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:44.400 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:44.401 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:44.401 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:44.489 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:44.490 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:44.490 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:44.578 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:44.579 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:44.579 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:44.667 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:44.669 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:39:44.669 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:44.763 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:44.764 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11865,比列:0.300000,数据库:1.25089540,计算:-1.250895
2022-03-17 18:39:44.764 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:39:44.765 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:44.863 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:44.863 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11865,比列:0.200000,数据库:0.83393027,计算:-0.833930
2022-03-17 18:39:44.864 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:39:44.864 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:44.954 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:44.954 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11865,比列:0.300000,数据库:1.25089540,计算:-1.250895
2022-03-17 18:39:44.955 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:39:44.955 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:45.047 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:45.048 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11865,比列:0.100000,数据库:0.41696513,计算:-0.416965
2022-03-17 18:39:45.048 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:39:45.049 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:45.138 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:45.138 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11865,比列:0.100000,数据库:0.41696513,计算:-0.416965
2022-03-17 18:39:45.139 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-332.6589437500000000
2022-03-17 18:39:45.139 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11866' LIMIT 0,1 
2022-03-17 18:39:45.139 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:39:45.232 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:39:45.233 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:45.233 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:45.329 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:45.330 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-2.1290172400000000
2022-03-17 18:39:45.331 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11866' LIMIT 0,1000 
2022-03-17 18:39:45.331 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:45.426 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-17 18:39:45.426 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:45.427 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:45.515 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:45.516 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:45.517 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:45.606 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:45.607 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:45.607 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:45.696 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:45.696 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:45.696 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:45.785 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:45.786 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:45.786 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:45.875 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:45.876 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:45.876 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:45.966 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:45.966 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:39:45.967 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:46.060 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:46.061 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11866,比列:0.300000,数据库:0.63870517,计算:-0.638705
2022-03-17 18:39:46.062 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:39:46.063 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:46.151 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:46.152 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11866,比列:0.200000,数据库:0.42580344,计算:-0.425803
2022-03-17 18:39:46.152 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:39:46.153 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:46.242 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:46.242 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11866,比列:0.300000,数据库:0.63870517,计算:-0.638705
2022-03-17 18:39:46.243 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:39:46.243 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:46.332 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:46.332 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11866,比列:0.100000,数据库:0.21290172,计算:-0.212901
2022-03-17 18:39:46.333 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:39:46.334 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:46.425 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:46.425 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11866,比列:0.100000,数据库:0.21290172,计算:-0.212901
2022-03-17 18:39:46.425 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-3.9647636363636363
2022-03-17 18:39:46.426 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11867' LIMIT 0,1 
2022-03-17 18:39:46.426 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:39:46.517 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:39:46.518 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:39:46.519 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:46.611 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:46.612 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11867) 
2022-03-17 18:39:46.612 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-17 18:39:46.709 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-17 18:39:46.711 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1221147200000000
2022-03-17 18:39:46.712 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11867' LIMIT 0,1000 
2022-03-17 18:39:46.712 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:46.802 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:46.802 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:39:46.803 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:46.894 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:46.894 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905058,订单:11867,类型:51
2022-03-17 18:39:46.895 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:46.896 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:46.988 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:46.989 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:46.990 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:47.079 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:47.080 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:47.080 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:47.169 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:47.169 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:47.169 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:47.258 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:47.259 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:47.259 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:47.348 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:47.349 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:39:47.349 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:47.443 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:47.443 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11867,比列:0.300000,数据库:0.03663441,计算:-0.036634
2022-03-17 18:39:47.444 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:39:47.444 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:47.535 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:47.535 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11867,比列:0.200000,数据库:0.02442294,计算:-0.024422
2022-03-17 18:39:47.536 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:39:47.536 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:47.627 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:47.628 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11867,比列:0.300000,数据库:0.03663441,计算:-0.036634
2022-03-17 18:39:47.628 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:39:47.628 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:47.718 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:47.718 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11867,比列:0.100000,数据库:0.01221147,计算:-0.012211
2022-03-17 18:39:47.719 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:39:47.719 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:47.807 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:47.807 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11867,比列:0.100000,数据库:0.01221147,计算:-0.012211
2022-03-17 18:39:47.807 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-3.0000000000000000
2022-03-17 18:39:47.807 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:132.1377373967272727
2022-03-17 18:39:47.808 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11868' LIMIT 0,1000 
2022-03-17 18:39:47.808 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:47.900 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:47.902 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:39:47.902 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:48.007 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:48.007 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11868' LIMIT 0,1000 
2022-03-17 18:39:48.008 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:48.098 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:48.100 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:39:48.100 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:48.189 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:48.190 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,1 
2022-03-17 18:39:48.190 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:39:48.284 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:39:48.285 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11868,数据库:2.16167993,计算得:-7.205599
2022-03-17 18:39:48.285 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-4.2946483200000000
2022-03-17 18:39:48.286 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11868' LIMIT 0,1000 
2022-03-17 18:39:48.286 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:48.377 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:48.378 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:39:48.378 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:48.467 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:48.468 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:48.469 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:48.565 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:48.566 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:48.566 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:48.662 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:48.663 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:48.663 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:48.755 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:48.755 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:48.756 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:48.871 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:48.871 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:48.871 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:48.960 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:48.960 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:39:48.961 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:49.054 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:49.054 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11868,比列:0.300000,数据库:1.28839449,计算:-1.288394
2022-03-17 18:39:49.054 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:39:49.055 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:49.144 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:49.144 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11868,比列:0.200000,数据库:0.85892966,计算:-0.858929
2022-03-17 18:39:49.145 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:39:49.145 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:49.234 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:49.234 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11868,比列:0.300000,数据库:1.28839449,计算:-1.288394
2022-03-17 18:39:49.235 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:39:49.235 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:49.323 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:49.323 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11868,比列:0.100000,数据库:0.42946483,计算:-0.429464
2022-03-17 18:39:49.324 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:39:49.324 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:49.414 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:49.414 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11868,比列:0.100000,数据库:0.42946483,计算:-0.429464
2022-03-17 18:39:49.414 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-362.9020254237288135
2022-03-17 18:39:49.415 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11869' LIMIT 0,1 
2022-03-17 18:39:49.415 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:39:49.504 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:39:49.505 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:49.505 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:49.596 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:49.596 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-8.5644878000000000
2022-03-17 18:39:49.598 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11869' LIMIT 0,1000 
2022-03-17 18:39:49.598 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:49.688 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-17 18:39:49.689 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:49.690 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:49.779 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:49.780 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:49.780 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:49.874 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:49.874 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:49.874 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:49.966 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:49.967 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:49.967 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:50.055 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:50.056 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:50.056 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:50.149 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:50.149 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:50.149 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:50.245 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:50.246 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:39:50.247 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:50.336 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:50.336 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11869,比列:0.300000,数据库:2.56934634,计算:-2.569346
2022-03-17 18:39:50.336 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:39:50.337 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:50.425 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:50.425 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11869,比列:0.200000,数据库:1.71289756,计算:-1.712897
2022-03-17 18:39:50.426 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:39:50.426 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:50.515 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:50.515 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11869,比列:0.300000,数据库:2.56934634,计算:-2.569346
2022-03-17 18:39:50.516 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:39:50.516 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:50.605 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:50.606 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11869,比列:0.100000,数据库:0.85644878,计算:-0.856448
2022-03-17 18:39:50.607 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:39:50.607 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:50.700 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:50.700 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11869,比列:0.100000,数据库:0.85644878,计算:-0.856448
2022-03-17 18:39:50.701 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-10.0000000000000000
2022-03-17 18:39:50.701 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:340.8511437500000000
2022-03-17 18:39:50.701 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11870' LIMIT 0,1000 
2022-03-17 18:39:50.701 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:50.794 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:50.795 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:50.795 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:50.884 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:50.885 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11870' LIMIT 0,1000 
2022-03-17 18:39:50.886 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:50.982 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:50.983 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:50.984 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:51.075 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:51.077 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,1 
2022-03-17 18:39:51.078 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:39:51.170 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:39:51.170 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11870,数据库:0.54234000,计算得:-1.807800
2022-03-17 18:39:51.171 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-2.1282941200000000
2022-03-17 18:39:51.171 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11870' LIMIT 0,1000 
2022-03-17 18:39:51.172 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:51.260 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:51.261 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:51.261 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:51.348 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:51.349 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:51.349 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:51.440 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:51.440 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:51.441 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:51.532 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:51.532 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:51.532 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:51.623 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:51.624 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:51.624 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:51.713 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:51.713 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:51.714 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:51.803 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:51.804 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:39:51.804 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:51.895 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:51.895 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11870,比列:0.300000,数据库:0.63848823,计算:-0.638488
2022-03-17 18:39:51.897 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:39:51.897 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:51.988 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:51.988 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11870,比列:0.200000,数据库:0.42565882,计算:-0.425658
2022-03-17 18:39:51.989 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:39:51.990 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:52.083 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:52.083 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11870,比列:0.300000,数据库:0.63848823,计算:-0.638488
2022-03-17 18:39:52.084 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:39:52.084 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:52.174 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:52.175 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11870,比列:0.100000,数据库:0.21282941,计算:-0.212829
2022-03-17 18:39:52.176 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:39:52.176 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:52.266 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:52.267 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11870,比列:0.100000,数据库:0.21282941,计算:-0.212829
2022-03-17 18:39:52.267 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-257.1958666666666666
2022-03-17 18:39:52.268 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11871' LIMIT 0,1 
2022-03-17 18:39:52.268 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:39:52.357 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:39:52.358 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-17 18:39:52.358 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:52.448 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:52.449 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-8.3331460800000000
2022-03-17 18:39:52.450 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11871' LIMIT 0,1000 
2022-03-17 18:39:52.450 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:52.541 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:52.542 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-17 18:39:52.542 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:52.633 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:52.634 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:52.634 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:52.729 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:52.730 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:52.731 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:52.823 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:52.823 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:52.824 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:52.912 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:52.913 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:52.913 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:53.003 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:53.004 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:53.004 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:53.094 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:53.095 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:39:53.095 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:53.185 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:53.185 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11871,比列:0.300000,数据库:2.49994382,计算:-2.499943
2022-03-17 18:39:53.186 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:39:53.187 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:53.277 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:53.277 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11871,比列:0.200000,数据库:1.66662921,计算:-1.666629
2022-03-17 18:39:53.278 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:39:53.279 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:53.370 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:53.370 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11871,比列:0.300000,数据库:2.49994382,计算:-2.499943
2022-03-17 18:39:53.371 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:39:53.372 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:53.467 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:53.468 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11871,比列:0.100000,数据库:0.83331460,计算:-0.833314
2022-03-17 18:39:53.468 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:39:53.469 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:53.561 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:53.561 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11871,比列:0.100000,数据库:0.83331460,计算:-0.833314
2022-03-17 18:39:53.561 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-118.0940338983050847
2022-03-17 18:39:53.562 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11872' LIMIT 0,1 
2022-03-17 18:39:53.562 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:39:53.666 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:39:53.667 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:53.667 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:53.778 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:53.779 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11872) 
2022-03-17 18:39:53.779 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-17 18:39:53.869 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-17 18:39:53.870 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-2.7870192000000000
2022-03-17 18:39:53.871 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11872' LIMIT 0,1000 
2022-03-17 18:39:53.871 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:53.960 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:53.960 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:53.961 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:54.050 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:54.050 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905058,订单:11872,类型:51
2022-03-17 18:39:54.051 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:54.051 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:54.141 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:54.141 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:54.142 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:54.230 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:54.231 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:54.231 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:54.323 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:54.323 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:54.324 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:54.418 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:54.418 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:54.419 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:54.509 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:54.510 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:39:54.511 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:54.600 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:54.601 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11872,比列:0.300000,数据库:0.83610576,计算:-0.836105
2022-03-17 18:39:54.601 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:39:54.602 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:54.691 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:54.692 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11872,比列:0.200000,数据库:0.55740384,计算:-0.557403
2022-03-17 18:39:54.693 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:39:54.693 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:54.783 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:54.784 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11872,比列:0.300000,数据库:0.83610576,计算:-0.836105
2022-03-17 18:39:54.784 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:39:54.785 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:54.876 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:54.876 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11872,比列:0.100000,数据库:0.27870192,计算:-0.278701
2022-03-17 18:39:54.877 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:39:54.877 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:54.969 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:54.969 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11872,比列:0.100000,数据库:0.27870192,计算:-0.278701
2022-03-17 18:39:54.970 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-1.0000000000000000
2022-03-17 18:39:54.970 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-9.0000000000000000
2022-03-17 18:39:54.970 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:459.1566095387545763
2022-03-17 18:39:54.971 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11873' LIMIT 0,1000 
2022-03-17 18:39:54.971 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:55.060 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:55.061 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:55.061 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:55.149 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:55.150 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11873' LIMIT 0,1000 
2022-03-17 18:39:55.150 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:55.240 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:55.240 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:55.241 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:55.329 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:55.330 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,1 
2022-03-17 18:39:55.331 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:39:55.421 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:39:55.422 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11873,数据库:9.33063000,计算得:-31.102100
2022-03-17 18:39:55.422 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-11.3390661600000000
2022-03-17 18:39:55.423 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11873' LIMIT 0,1000 
2022-03-17 18:39:55.423 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:55.514 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:55.514 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:39:55.515 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:55.603 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:55.605 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:55.605 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:55.699 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:55.700 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:55.700 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:55.794 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:55.795 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:55.795 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:55.885 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:55.886 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:55.886 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:55.974 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:55.975 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:55.976 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:56.069 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:56.071 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:39:56.071 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:56.161 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:56.162 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11873,比列:0.300000,数据库:3.40171984,计算:-3.401719
2022-03-17 18:39:56.162 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:39:56.163 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:56.254 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:56.254 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11873,比列:0.200000,数据库:2.26781323,计算:-2.267813
2022-03-17 18:39:56.256 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:39:56.256 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:56.346 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:56.346 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11873,比列:0.300000,数据库:3.40171984,计算:-3.401719
2022-03-17 18:39:56.347 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:39:56.348 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:56.441 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:56.441 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11873,比列:0.100000,数据库:1.13390661,计算:-1.133906
2022-03-17 18:39:56.442 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:39:56.443 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:56.533 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:56.533 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11873,比列:0.100000,数据库:1.13390661,计算:-1.133906
2022-03-17 18:39:56.533 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-214.5270130434782608
2022-03-17 18:39:56.534 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11874' LIMIT 0,1 
2022-03-17 18:39:56.534 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:39:56.625 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:39:56.625 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:39:56.626 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:56.715 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:56.716 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.9736485200000000
2022-03-17 18:39:56.717 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11874' LIMIT 0,1000 
2022-03-17 18:39:56.717 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:39:56.808 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:39:56.809 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:39:56.809 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:39:56.898 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:39:56.899 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:39:56.899 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:56.988 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:56.988 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:39:56.989 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:57.079 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:57.080 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:39:57.080 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:57.170 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:57.171 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:39:57.172 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:57.260 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:39:57.261 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:39:57.262 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:39:57.350 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:39:57.351 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:39:57.352 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:39:57.440 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:57.441 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11874,比列:0.300000,数据库:0.59209455,计算:-0.592094
2022-03-17 18:39:57.442 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:39:57.442 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:39:57.534 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:57.534 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11874,比列:0.200000,数据库:0.39472970,计算:-0.394729
2022-03-17 18:39:57.535 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:39:57.536 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:39:57.627 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:57.627 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11874,比列:0.300000,数据库:0.59209455,计算:-0.592094
2022-03-17 18:39:57.628 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:39:57.628 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:39:57.718 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:57.719 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11874,比列:0.100000,数据库:0.19736485,计算:-0.197364
2022-03-17 18:39:57.720 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:39:57.720 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:39:57.809 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:39:57.809 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11874,比列:0.100000,数据库:0.19736485,计算:-0.197364
2022-03-17 18:39:57.810 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-5.0000000000000000
2022-03-17 18:39:57.810 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-5.0000000000000000
2022-03-17 18:39:57.810 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-6.0000000000000000
2022-03-17 18:39:57.810 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:9.0000000000000000
2022-03-17 18:39:57.810 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:1.6600000000000000
2022-03-17 18:39:57.810 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:52:43.581 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:52:43.582 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:52:43.671 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:52:43.672 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:52:43.672 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:52:43.761 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:52:43.762 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:43.763 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:52:43.852 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:52:43.853 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:590.6949381613267390,hold:0E-16
2022-03-17 18:52:43.853 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-409.3050618386732610,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:590.6949381613267390,操作后，数据库存储的总金额:590.6949381613267390
2022-03-17 18:52:43.853 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:43.853 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:43.941 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:52:43.941 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:52:43.965 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:52:43.965 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:52:44.053 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:52:44.055 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:44.055 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:52:44.146 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:52:44.147 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:52:44.148 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:52:44.235 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:52:44.235 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:321.4214000000000000
2022-03-17 18:52:44.235 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:282.0814,操作后，账户变化金额:-39.3400000000000000,操作后，计算剩余的金额:321.4214000000000000,操作后，数据库存储的总金额:321.4214000000000000
2022-03-17 18:52:44.236 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:44.236 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:52:44.324 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:52:44.324 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:44.325 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:52:44.416 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:52:44.416 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:52:44.417 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:52:44.505 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:52:44.505 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:52:44.506 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:52:44.609 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:52:44.610 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:52:44.610 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:52:44.698 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:52:44.698 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:52:44.698 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:52:44.786 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:52:44.787 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:52:44.788 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:52:44.788 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:52:44.885 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 49
2022-03-17 18:52:44.885 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=3, size=-20.7356820000000000, preBalance=1000.0000000000000000, postBalance=979.2643180000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓保证金-20.7356820000000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8294272800000000, preBalance=979.2643180000000000, postBalance=978.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓手续费-0.8294272800000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=978.4348907200000000, postBalance=966.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3920, note=转出：12.00000000, createdDate=2022-03-17 18:20:11, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=966.4348907200000000, postBalance=945.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77485, note=用户ID:51905058, 转出21.0000000000000000USDT, createdDate=2022-03-17 18:20:17, fromUserId=null, total=null), UserBillChain(userId=51905058, type=4, size=20.9141820000000000, preBalance=945.4348907200000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓收益20.0846833200000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8294986800000000, preBalance=965.5195740400000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓手续费-0.8294986800000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.9916550400000000, preBalance=965.5195740400000000, postBalance=964.5279190000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11857, note=单号:11857开仓手续费-0.9916550400000000, createdDate=2022-03-17 18:21:24, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0244000000000000, preBalance=964.5279190000000000, postBalance=963.5118737200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11858, note=单号:11858平仓收益-1.0160452800000000, createdDate=2022-03-17 18:21:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.9916452800000000, preBalance=963.5118737200000000, postBalance=963.5118737200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11858, note=单号:11858平仓手续费-0.9916452800000000, createdDate=2022-03-17 18:21:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8299719600000000, preBalance=963.5118737200000000, postBalance=962.6819017600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11859, note=单号:11859开仓手续费-0.8299719600000000, createdDate=2022-03-17 18:24:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.6672077600000000, preBalance=962.6819017600000000, postBalance=962.0146940000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11860, note=单号:11860开仓手续费-0.6672077600000000, createdDate=2022-03-17 18:24:51, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0813628000000000, preBalance=962.0146940000000000, postBalance=961.9333312000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11861, note=单号:11861开仓手续费-0.0813628000000000, createdDate=2022-03-17 18:24:58, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.1071000000000000, preBalance=961.9333312000000000, postBalance=960.9963020800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11862, note=单号:11862平仓收益-0.9370291200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0246000000000000, preBalance=960.9963020800000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11863, note=单号:11863平仓收益-0.6917979200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8299291200000000, preBalance=960.3045041600000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11862, note=单号:11862平仓手续费-0.8299291200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.6671979200000000, preBalance=960.3045041600000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11863, note=单号:11863平仓手续费-0.6671979200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0075000000000000, preBalance=960.3045041600000000, postBalance=960.2156383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11864, note=单号:11864平仓收益-0.0888658000000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0813658000000000, preBalance=960.2156383600000000, postBalance=960.2156383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11864, note=单号:11864平仓手续费-0.0813658000000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-135.3782909090909090, preBalance=960.2156383600000000, postBalance=824.8373474509090910, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11865, note=单号:11865开仓保证金-135.3782909090909090, createdDate=2022-03-17 18:38:05, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-4.1696513600000000, preBalance=824.8373474509090910, postBalance=820.6676960909090910, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11865, note=单号:11865开仓手续费-4.1696513600000000, createdDate=2022-03-17 18:38:05, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-332.6589437500000000, preBalance=820.6676960909090910, postBalance=488.0087523409090910, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11866, note=单号:11866开仓保证金-332.6589437500000000, createdDate=2022-03-17 18:38:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-2.1290172400000000, preBalance=488.0087523409090910, postBalance=485.8797351009090910, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11866, note=单号:11866开仓手续费-2.1290172400000000, createdDate=2022-03-17 18:38:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-3.9647636363636363, preBalance=485.8797351009090910, postBalance=481.9149714645454547, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11867, note=单号:11867开仓保证金-3.9647636363636363, createdDate=2022-03-17 18:38:19, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.1221147200000000, preBalance=481.9149714645454547, postBalance=481.7928567445454547, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11867, note=单号:11867开仓手续费-0.1221147200000000, createdDate=2022-03-17 18:38:19, fromUserId=0, total=null), UserBillChain(userId=51905058, type=55, size=-3.0000000000000000, preBalance=481.7928567445454547, postBalance=478.7928567445454547, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11865, note=单号:11865增加保证金-3.0000000000000000, createdDate=2022-03-17 18:38:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=132.1377373967272727, preBalance=478.7928567445454547, postBalance=606.6359458212727274, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11868, note=单号:11868平仓收益127.8430890767272727, createdDate=2022-03-17 18:38:21, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-4.2946483200000000, preBalance=606.6359458212727274, postBalance=606.6359458212727274, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11868, note=单号:11868平仓手续费-4.2946483200000000, createdDate=2022-03-17 18:38:21, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-362.9020254237288135, preBalance=606.6359458212727274, postBalance=243.7339203975439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11869, note=单号:11869开仓保证金-362.9020254237288135, createdDate=2022-03-17 18:38:22, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-8.5644878000000000, preBalance=243.7339203975439139, postBalance=235.1694325975439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11869, note=单号:11869开仓手续费-8.5644878000000000, createdDate=2022-03-17 18:38:22, fromUserId=0, total=null), UserBillChain(userId=51905058, type=55, size=-10.0000000000000000, preBalance=235.1694325975439139, postBalance=225.1694325975439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11866, note=单号:11866增加保证金-10.0000000000000000, createdDate=2022-03-17 18:38:31, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=340.8511437500000000, preBalance=225.1694325975439139, postBalance=563.8922822275439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11870, note=单号:11870平仓收益338.7228496300000000, createdDate=2022-03-17 18:38:33, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-2.1282941200000000, preBalance=563.8922822275439139, postBalance=563.8922822275439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11870, note=单号:11870平仓手续费-2.1282941200000000, createdDate=2022-03-17 18:38:33, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-257.1958666666666666, preBalance=563.8922822275439139, postBalance=306.6964155608772473, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11871, note=单号:11871开仓保证金-257.1958666666666666, createdDate=2022-03-17 18:38:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-8.3331460800000000, preBalance=306.6964155608772473, postBalance=298.3632694808772473, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11871, note=单号:11871开仓手续费-8.3331460800000000, createdDate=2022-03-17 18:38:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-118.0940338983050847, preBalance=298.3632694808772473, postBalance=180.2692355825721626, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11872, note=单号:11872开仓保证金-118.0940338983050847, createdDate=2022-03-17 18:38:42, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-2.7870192000000000, preBalance=180.2692355825721626, postBalance=177.4822163825721626, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11872, note=单号:11872开仓手续费-2.7870192000000000, createdDate=2022-03-17 18:38:42, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-1.0000000000000000, preBalance=177.4822163825721626, postBalance=176.4822163825721626, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3921, note=转出：1.00000000, createdDate=2022-03-17 18:38:42, fromUserId=null, total=null), UserBillChain(userId=51905058, type=55, size=-9.0000000000000000, preBalance=176.4822163825721626, postBalance=167.4822163825721626, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11869, note=单号:11869增加保证金-9.0000000000000000, createdDate=2022-03-17 18:38:43, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=459.1566095387545763, preBalance=167.4822163825721626, postBalance=615.2997597613267389, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11873, note=单号:11873平仓收益447.8175433787545763, createdDate=2022-03-17 18:38:44, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-11.3390661600000000, preBalance=615.2997597613267389, postBalance=615.2997597613267389, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11873, note=单号:11873平仓手续费-11.3390661600000000, createdDate=2022-03-17 18:38:44, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-214.5270130434782608, preBalance=615.2997597613267389, postBalance=400.7727467178484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11874, note=单号:11874开仓保证金-214.5270130434782608, createdDate=2022-03-17 18:38:45, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-1.9736485200000000, preBalance=400.7727467178484781, postBalance=398.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11874, note=单号:11874开仓手续费-1.9736485200000000, createdDate=2022-03-17 18:38:45, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-5.0000000000000000, preBalance=398.7990981978484781, postBalance=393.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3922, note=转出：5.00000000, createdDate=2022-03-17 18:38:46, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-5.0000000000000000, preBalance=393.7990981978484781, postBalance=388.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77486, note=用户ID:51905058, 转出5.0000000000000000USDT, createdDate=2022-03-17 18:38:51, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-6.0000000000000000, preBalance=388.7990981978484781, postBalance=382.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77487, note=用户ID:51905058, 转出6.0000000000000000USDT, createdDate=2022-03-17 18:38:57, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=9.0000000000000000, preBalance=382.7990981978484781, postBalance=391.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:9.0000, createdDate=2022-03-17 18:39:03, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=1.6600000000000000, preBalance=391.7990981978484781, postBalance=393.4590981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77489, note=用户ID:51905058, 转入1.66USDT, createdDate=2022-03-17 18:39:10, fromUserId=null, total=null), UserBillChain(userId=51905058, type=4, size=199.2156130434782609, preBalance=393.4590981978484781, postBalance=590.6949381613267390, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11876, note=单号:11876平仓收益197.2358399634782609, createdDate=2022-03-17 18:52:30, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-1.9797730800000000, preBalance=590.6949381613267390, postBalance=590.6949381613267390, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11876, note=单号:11876平仓手续费-1.9797730800000000, createdDate=2022-03-17 18:52:30, fromUserId=0, total=null)]
2022-03-17 18:52:44.889 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:52:44.889 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-20.7356820000000000
2022-03-17 18:52:44.889 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11855' LIMIT 0,1 
2022-03-17 18:52:44.890 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:52:44.979 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:52:44.979 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:44.980 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:45.066 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:45.067 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8294272800000000
2022-03-17 18:52:45.068 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11855' LIMIT 0,1000 
2022-03-17 18:52:45.068 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:45.156 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:45.156 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:45.156 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:45.245 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:45.246 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:45.247 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:45.335 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:45.335 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:52:45.335 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:45.423 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:45.423 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:52:45.424 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:45.512 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:45.513 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:52:45.514 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:45.604 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:45.605 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:45.605 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:45.693 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:52:45.694 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:52:45.694 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:52:45.786 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:45.786 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:52:45.787 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:52:45.787 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:52:45.885 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:45.886 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11855,比列:0.200000,数据库:0.16588545,计算:-0.165885
2022-03-17 18:52:45.886 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:52:45.887 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:52:45.984 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:45.984 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:52:45.985 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:52:45.985 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:52:46.075 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:46.075 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:52:46.076 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:52:46.076 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:52:46.168 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:46.169 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:52:46.169 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 18:52:46.169 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 18:52:46.169 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:20.9141820000000000
2022-03-17 18:52:46.170 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:52:46.170 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:46.258 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:46.259 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:46.259 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:46.349 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:46.350 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:52:46.351 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:46.438 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:46.439 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:46.439 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:46.529 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:46.530 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,1 
2022-03-17 18:52:46.531 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:52:46.620 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:52:46.620 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11856,数据库:-0.17850000,计算得:0.178500
2022-03-17 18:52:46.620 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8294986800000000
2022-03-17 18:52:46.621 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:52:46.621 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:46.710 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:46.711 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:46.712 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:46.799 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:46.800 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:46.800 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:46.887 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:46.888 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:52:46.888 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:46.977 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:46.977 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:52:46.977 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:47.065 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:47.067 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:52:47.068 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:47.157 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:47.158 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:47.159 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:47.248 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:52:47.249 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:52:47.249 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:52:47.337 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:47.338 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:52:47.339 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:52:47.339 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:52:47.436 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:47.436 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11856,比列:0.200000,数据库:0.16589973,计算:-0.165899
2022-03-17 18:52:47.437 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:52:47.437 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:52:47.526 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:47.526 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:52:47.527 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:52:47.527 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:52:47.615 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:47.615 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:52:47.616 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:52:47.616 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:52:47.709 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:47.710 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:52:47.710 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9916550400000000
2022-03-17 18:52:47.710 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11857' LIMIT 0,1000 
2022-03-17 18:52:47.711 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:47.802 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:47.802 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:47.802 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:47.895 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:47.896 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:47.897 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:47.985 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:47.985 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:52:47.985 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:48.072 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:48.073 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:52:48.073 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:48.164 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:48.165 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:52:48.165 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:48.253 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:48.253 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:48.253 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:48.342 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:52:48.343 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:52:48.343 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:52:48.431 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:48.432 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:52:48.432 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:52:48.433 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:52:48.521 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:48.522 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11857,比列:0.200000,数据库:0.19833100,计算:-0.198331
2022-03-17 18:52:48.522 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:52:48.522 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:52:48.612 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:48.613 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:52:48.614 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:52:48.614 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:52:48.704 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:48.704 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:52:48.705 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:52:48.705 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:52:48.801 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:48.802 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:52:48.802 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0244000000000000
2022-03-17 18:52:48.803 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:52:48.803 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:48.891 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:48.891 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:48.891 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:48.979 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:48.979 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:52:48.980 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:49.069 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:49.069 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:49.069 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:49.157 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:49.158 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,1 
2022-03-17 18:52:49.158 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:52:49.246 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:52:49.247 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11858,数据库:0.02440000,计算得:-0.024400
2022-03-17 18:52:49.247 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.9916452800000000
2022-03-17 18:52:49.248 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:52:49.248 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:49.336 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:49.336 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:49.336 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:49.423 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:49.424 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:49.424 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:49.515 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:49.516 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:52:49.516 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:49.604 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:49.605 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:52:49.605 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:49.693 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:49.693 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:52:49.693 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:49.793 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:49.793 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:49.794 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:49.889 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:52:49.890 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:52:49.890 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:52:49.981 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:49.982 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11858,比列:0.300000,数据库:0.29749358,计算:-0.297493
2022-03-17 18:52:49.982 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:52:49.983 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:52:50.071 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:50.071 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11858,比列:0.200000,数据库:0.19832905,计算:-0.198329
2022-03-17 18:52:50.073 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:52:50.073 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:52:50.164 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:50.165 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11858,比列:0.300000,数据库:0.29749358,计算:-0.297493
2022-03-17 18:52:50.165 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:52:50.166 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:52:50.258 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:50.259 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11858,比列:0.100000,数据库:0.09916452,计算:-0.099164
2022-03-17 18:52:50.259 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:52:50.259 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:52:50.356 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:50.356 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11858,比列:0.100000,数据库:0.09916452,计算:-0.099164
2022-03-17 18:52:50.356 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8299719600000000
2022-03-17 18:52:50.357 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11859' LIMIT 0,1000 
2022-03-17 18:52:50.357 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:50.446 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:50.447 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:50.448 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:50.536 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:50.537 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:50.537 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:50.627 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:50.628 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:52:50.628 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:50.717 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:50.718 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:52:50.718 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:50.806 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:50.807 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:52:50.807 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:50.897 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:50.898 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:50.898 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:50.986 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:52:50.987 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:52:50.987 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:52:51.075 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:51.075 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11859,比列:0.300000,数据库:0.24899158,计算:-0.248991
2022-03-17 18:52:51.076 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:52:51.076 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:52:51.168 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:51.169 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11859,比列:0.200000,数据库:0.16599439,计算:-0.165994
2022-03-17 18:52:51.170 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:52:51.170 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:52:51.259 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:51.259 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11859,比列:0.300000,数据库:0.24899158,计算:-0.248991
2022-03-17 18:52:51.260 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:52:51.260 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:52:51.349 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:51.349 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11859,比列:0.100000,数据库:0.08299719,计算:-0.082997
2022-03-17 18:52:51.350 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:52:51.350 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:52:51.440 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:51.440 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11859,比列:0.100000,数据库:0.08299719,计算:-0.082997
2022-03-17 18:52:51.440 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6672077600000000
2022-03-17 18:52:51.441 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11860' LIMIT 0,1000 
2022-03-17 18:52:51.441 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:51.530 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:51.531 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:51.531 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:51.618 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:51.618 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:51.618 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:51.706 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:51.706 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:52:51.707 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:51.802 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:51.803 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:52:51.803 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:51.893 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:51.894 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:52:51.894 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:51.984 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:51.985 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:51.986 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:52.074 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:52:52.075 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:52:52.076 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:52:52.164 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:52.164 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11860,比列:0.300000,数据库:0.20016232,计算:-0.200162
2022-03-17 18:52:52.165 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:52:52.165 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:52:52.255 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:52.255 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11860,比列:0.200000,数据库:0.13344155,计算:-0.133441
2022-03-17 18:52:52.256 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:52:52.256 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:52:52.346 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:52.347 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11860,比列:0.300000,数据库:0.20016232,计算:-0.200162
2022-03-17 18:52:52.348 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:52:52.348 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:52:52.438 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:52.438 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11860,比列:0.100000,数据库:0.06672077,计算:-0.066720
2022-03-17 18:52:52.438 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:52:52.439 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:52:52.531 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:52.532 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11860,比列:0.100000,数据库:0.06672077,计算:-0.066720
2022-03-17 18:52:52.532 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0813628000000000
2022-03-17 18:52:52.532 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11861' LIMIT 0,1000 
2022-03-17 18:52:52.532 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:52.624 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:52.624 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:52.624 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:52.713 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:52.714 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:52.714 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:52.802 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:52.802 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:52:52.802 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:52.892 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:52.892 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:52:52.893 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:52.985 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:52.985 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:52:52.986 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:53.073 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:53.074 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:53.074 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:53.164 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:52:53.165 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:52:53.166 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:52:53.256 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:53.256 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11861,比列:0.300000,数据库:0.02440884,计算:-0.024408
2022-03-17 18:52:53.257 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:52:53.257 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:52:53.347 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:53.347 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11861,比列:0.200000,数据库:0.01627256,计算:-0.016272
2022-03-17 18:52:53.347 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:52:53.347 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:52:53.435 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:53.435 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11861,比列:0.300000,数据库:0.02440884,计算:-0.024408
2022-03-17 18:52:53.435 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:52:53.435 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:52:53.523 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:53.524 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11861,比列:0.100000,数据库:0.00813628,计算:-0.008136
2022-03-17 18:52:53.524 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:52:53.524 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:52:53.613 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:53.613 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11861,比列:0.100000,数据库:0.00813628,计算:-0.008136
2022-03-17 18:52:53.613 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.1071000000000000
2022-03-17 18:52:53.613 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:52:53.613 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:53.701 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:53.702 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:53.702 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:53.790 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:53.791 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:52:53.791 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:53.889 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:53.890 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:53.890 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:53.979 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:53.981 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,1 
2022-03-17 18:52:53.981 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:52:54.069 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:52:54.069 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11862,数据库:0.10710000,计算得:-0.107100
2022-03-17 18:52:54.069 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0246000000000000
2022-03-17 18:52:54.070 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:52:54.070 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:54.159 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:54.159 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:54.159 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:54.247 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:54.248 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:52:54.248 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:54.340 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:54.340 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:54.340 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:54.431 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:54.432 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,1 
2022-03-17 18:52:54.432 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:52:54.533 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:52:54.533 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11863,数据库:0.02460000,计算得:-0.024600
2022-03-17 18:52:54.534 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8299291200000000
2022-03-17 18:52:54.534 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:52:54.534 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:54.622 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:54.623 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:54.623 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:54.712 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:54.714 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:54.714 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:54.804 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:54.804 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:52:54.805 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:54.893 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:54.894 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:52:54.894 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:54.981 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:54.982 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:52:54.982 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:55.070 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:55.070 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:55.070 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:55.157 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:52:55.158 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:52:55.158 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:52:55.247 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:55.248 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11862,比列:0.300000,数据库:0.24897873,计算:-0.248978
2022-03-17 18:52:55.248 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:52:55.249 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:52:55.337 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:55.337 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11862,比列:0.200000,数据库:0.16598582,计算:-0.165985
2022-03-17 18:52:55.337 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:52:55.338 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:52:55.426 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:55.427 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11862,比列:0.300000,数据库:0.24897873,计算:-0.248978
2022-03-17 18:52:55.428 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:52:55.428 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:52:55.517 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:55.518 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11862,比列:0.100000,数据库:0.08299291,计算:-0.082992
2022-03-17 18:52:55.518 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:52:55.519 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:52:55.618 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:55.619 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11862,比列:0.100000,数据库:0.08299291,计算:-0.082992
2022-03-17 18:52:55.619 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6671979200000000
2022-03-17 18:52:55.620 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:52:55.620 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:55.710 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:55.710 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:55.710 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:55.820 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:55.821 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:55.821 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:55.915 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:55.916 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:52:55.916 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:56.004 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:56.005 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:52:56.005 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:56.094 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:56.095 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:52:56.096 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:56.185 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:56.186 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:56.186 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:56.282 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:52:56.282 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:52:56.283 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:52:56.370 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:56.371 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11863,比列:0.300000,数据库:0.20015937,计算:-0.200159
2022-03-17 18:52:56.372 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:52:56.372 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:52:56.462 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:56.463 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11863,比列:0.200000,数据库:0.13343958,计算:-0.133439
2022-03-17 18:52:56.463 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:52:56.464 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:52:56.556 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:56.557 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11863,比列:0.300000,数据库:0.20015937,计算:-0.200159
2022-03-17 18:52:56.557 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:52:56.558 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:52:56.647 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:56.648 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11863,比列:0.100000,数据库:0.06671979,计算:-0.066719
2022-03-17 18:52:56.649 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:52:56.649 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:52:56.737 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:56.737 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11863,比列:0.100000,数据库:0.06671979,计算:-0.066719
2022-03-17 18:52:56.737 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0075000000000000
2022-03-17 18:52:56.738 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:52:56.738 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:56.827 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:56.829 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:56.829 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:56.917 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:56.917 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:52:56.917 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:57.008 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:57.009 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:57.009 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:57.099 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:57.100 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,1 
2022-03-17 18:52:57.100 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:52:57.189 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:52:57.189 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11864,数据库:0.00750000,计算得:-0.007500
2022-03-17 18:52:57.189 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0813658000000000
2022-03-17 18:52:57.190 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:52:57.190 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:57.278 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:52:57.279 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:57.280 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:57.368 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:57.369 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:57.369 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:57.458 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:57.459 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:52:57.459 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:57.550 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:57.551 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:52:57.551 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:57.639 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:57.639 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:52:57.640 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:57.731 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:57.731 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:57.732 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:57.827 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:52:57.828 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:52:57.828 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:52:57.926 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:57.926 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11864,比列:0.300000,数据库:0.02440974,计算:-0.024409
2022-03-17 18:52:57.927 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:52:57.928 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:52:58.019 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:58.019 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11864,比列:0.200000,数据库:0.01627316,计算:-0.016273
2022-03-17 18:52:58.020 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:52:58.021 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:52:58.110 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:58.110 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11864,比列:0.300000,数据库:0.02440974,计算:-0.024409
2022-03-17 18:52:58.110 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:52:58.111 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:52:58.199 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:58.199 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11864,比列:0.100000,数据库:0.00813658,计算:-0.008136
2022-03-17 18:52:58.200 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:52:58.201 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:52:58.288 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:58.288 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11864,比列:0.100000,数据库:0.00813658,计算:-0.008136
2022-03-17 18:52:58.288 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-135.3782909090909090
2022-03-17 18:52:58.289 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11865' LIMIT 0,1 
2022-03-17 18:52:58.289 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:52:58.378 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:52:58.378 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:52:58.378 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:58.471 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:58.472 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-4.1696513600000000
2022-03-17 18:52:58.473 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11865' LIMIT 0,1000 
2022-03-17 18:52:58.473 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:58.563 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-17 18:52:58.564 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:52:58.564 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:58.656 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:58.656 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:58.657 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:58.746 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:58.747 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:52:58.748 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:58.839 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:58.840 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:52:58.841 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:58.929 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:58.930 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:52:58.931 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:59.019 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:52:59.020 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:52:59.020 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:52:59.110 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:52:59.111 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:52:59.111 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:52:59.204 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:59.205 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11865,比列:0.300000,数据库:1.25089540,计算:-1.250895
2022-03-17 18:52:59.205 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:52:59.206 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:52:59.296 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:59.296 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11865,比列:0.200000,数据库:0.83393027,计算:-0.833930
2022-03-17 18:52:59.297 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:52:59.298 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:52:59.386 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:59.387 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11865,比列:0.300000,数据库:1.25089540,计算:-1.250895
2022-03-17 18:52:59.387 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:52:59.388 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:52:59.486 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:59.486 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11865,比列:0.100000,数据库:0.41696513,计算:-0.416965
2022-03-17 18:52:59.487 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:52:59.488 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:52:59.579 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:52:59.579 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11865,比列:0.100000,数据库:0.41696513,计算:-0.416965
2022-03-17 18:52:59.579 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-332.6589437500000000
2022-03-17 18:52:59.580 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11866' LIMIT 0,1 
2022-03-17 18:52:59.580 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:52:59.672 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:52:59.672 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:59.673 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:59.761 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:59.762 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-2.1290172400000000
2022-03-17 18:52:59.762 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11866' LIMIT 0,1000 
2022-03-17 18:52:59.763 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:52:59.864 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-17 18:52:59.865 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:52:59.865 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:52:59.963 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:52:59.964 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:52:59.964 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:00.053 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:00.054 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:53:00.054 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:00.153 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:00.154 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:53:00.154 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:00.242 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:00.243 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:53:00.244 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:00.335 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:00.335 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:53:00.335 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:00.423 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:53:00.423 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:53:00.424 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:53:00.514 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:00.514 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11866,比列:0.300000,数据库:0.63870517,计算:-0.638705
2022-03-17 18:53:00.515 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:53:00.516 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:53:00.604 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:00.604 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11866,比列:0.200000,数据库:0.42580344,计算:-0.425803
2022-03-17 18:53:00.605 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:53:00.606 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:53:00.694 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:00.695 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11866,比列:0.300000,数据库:0.63870517,计算:-0.638705
2022-03-17 18:53:00.696 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:53:00.697 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:53:00.785 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:00.786 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11866,比列:0.100000,数据库:0.21290172,计算:-0.212901
2022-03-17 18:53:00.786 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:53:00.787 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:53:00.876 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:00.876 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11866,比列:0.100000,数据库:0.21290172,计算:-0.212901
2022-03-17 18:53:00.876 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-3.9647636363636363
2022-03-17 18:53:00.877 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11867' LIMIT 0,1 
2022-03-17 18:53:00.877 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:53:00.973 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:53:00.974 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:53:00.974 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:01.063 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:01.064 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11867) 
2022-03-17 18:53:01.064 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-17 18:53:01.154 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-17 18:53:01.155 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1221147200000000
2022-03-17 18:53:01.157 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11867' LIMIT 0,1000 
2022-03-17 18:53:01.157 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:01.248 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:01.249 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:53:01.249 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:01.337 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:01.337 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905058,订单:11867,类型:51
2022-03-17 18:53:01.337 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:53:01.337 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:01.425 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:01.426 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:53:01.426 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:01.513 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:01.514 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:53:01.514 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:01.601 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:01.601 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:53:01.602 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:01.690 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:01.690 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:53:01.690 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:01.798 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:53:01.799 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:53:01.799 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:53:01.902 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:01.903 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11867,比列:0.300000,数据库:0.03663441,计算:-0.036634
2022-03-17 18:53:01.904 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:53:01.904 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:53:01.997 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:01.998 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11867,比列:0.200000,数据库:0.02442294,计算:-0.024422
2022-03-17 18:53:01.998 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:53:01.998 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:53:02.086 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:02.087 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11867,比列:0.300000,数据库:0.03663441,计算:-0.036634
2022-03-17 18:53:02.087 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:53:02.088 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:53:02.176 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:02.177 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11867,比列:0.100000,数据库:0.01221147,计算:-0.012211
2022-03-17 18:53:02.177 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:53:02.178 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:53:02.268 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:02.268 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11867,比列:0.100000,数据库:0.01221147,计算:-0.012211
2022-03-17 18:53:02.269 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-3.0000000000000000
2022-03-17 18:53:02.269 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:132.1377373967272727
2022-03-17 18:53:02.269 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11868' LIMIT 0,1000 
2022-03-17 18:53:02.269 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:02.362 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:02.363 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:53:02.363 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:02.451 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:02.452 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11868' LIMIT 0,1000 
2022-03-17 18:53:02.452 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:02.542 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:02.542 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:53:02.543 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:02.631 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:02.632 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,1 
2022-03-17 18:53:02.632 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:53:02.721 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:53:02.722 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11868,数据库:2.16167993,计算得:-7.205599
2022-03-17 18:53:02.722 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-4.2946483200000000
2022-03-17 18:53:02.722 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11868' LIMIT 0,1000 
2022-03-17 18:53:02.722 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:02.810 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:02.811 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:53:02.811 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:02.900 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:02.901 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:53:02.901 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:02.989 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:02.989 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:53:02.989 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:03.076 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:03.077 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:53:03.077 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:03.167 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:03.168 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:53:03.168 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:03.255 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:03.256 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:53:03.256 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:03.344 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:53:03.345 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:53:03.345 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:53:03.434 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:03.435 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11868,比列:0.300000,数据库:1.28839449,计算:-1.288394
2022-03-17 18:53:03.435 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:53:03.436 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:53:03.525 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:03.525 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11868,比列:0.200000,数据库:0.85892966,计算:-0.858929
2022-03-17 18:53:03.526 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:53:03.526 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:53:03.614 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:03.614 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11868,比列:0.300000,数据库:1.28839449,计算:-1.288394
2022-03-17 18:53:03.614 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:53:03.614 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:53:03.703 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:03.704 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11868,比列:0.100000,数据库:0.42946483,计算:-0.429464
2022-03-17 18:53:03.705 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:53:03.705 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:53:03.795 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:03.795 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11868,比列:0.100000,数据库:0.42946483,计算:-0.429464
2022-03-17 18:53:03.796 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-362.9020254237288135
2022-03-17 18:53:03.796 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11869' LIMIT 0,1 
2022-03-17 18:53:03.796 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:53:03.899 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:53:03.900 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:53:03.900 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:03.987 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:03.987 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-8.5644878000000000
2022-03-17 18:53:03.988 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11869' LIMIT 0,1000 
2022-03-17 18:53:03.988 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:04.078 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-17 18:53:04.079 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:53:04.079 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:04.167 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:04.168 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:53:04.168 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:04.256 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:04.256 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:53:04.256 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:04.356 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:04.356 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:53:04.356 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:04.445 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:04.445 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:53:04.446 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:04.541 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:04.542 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:53:04.542 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:04.631 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:53:04.632 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:53:04.632 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:53:04.720 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:04.720 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11869,比列:0.300000,数据库:2.56934634,计算:-2.569346
2022-03-17 18:53:04.720 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:53:04.721 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:53:04.809 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:04.810 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11869,比列:0.200000,数据库:1.71289756,计算:-1.712897
2022-03-17 18:53:04.811 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:53:04.811 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:53:04.899 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:04.900 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11869,比列:0.300000,数据库:2.56934634,计算:-2.569346
2022-03-17 18:53:04.900 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:53:04.901 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:53:04.988 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:04.989 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11869,比列:0.100000,数据库:0.85644878,计算:-0.856448
2022-03-17 18:53:04.989 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:53:04.990 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:53:05.078 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:05.078 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11869,比列:0.100000,数据库:0.85644878,计算:-0.856448
2022-03-17 18:53:05.079 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-10.0000000000000000
2022-03-17 18:53:05.079 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:340.8511437500000000
2022-03-17 18:53:05.080 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11870' LIMIT 0,1000 
2022-03-17 18:53:05.080 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:05.169 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:05.170 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:53:05.170 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:05.259 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:05.260 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11870' LIMIT 0,1000 
2022-03-17 18:53:05.261 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:05.351 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:05.352 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:53:05.352 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:05.440 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:05.441 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,1 
2022-03-17 18:53:05.441 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:53:05.532 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:53:05.532 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11870,数据库:0.54234000,计算得:-1.807800
2022-03-17 18:53:05.532 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-2.1282941200000000
2022-03-17 18:53:05.533 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11870' LIMIT 0,1000 
2022-03-17 18:53:05.533 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:05.622 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:05.622 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:53:05.622 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:05.709 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:05.710 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:53:05.711 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:05.801 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:05.801 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:53:05.801 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:05.889 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:05.890 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:53:05.890 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:05.978 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:05.979 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:53:05.979 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:06.066 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:06.067 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:53:06.068 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:06.155 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:53:06.156 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:53:06.156 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:53:06.246 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:06.246 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11870,比列:0.300000,数据库:0.63848823,计算:-0.638488
2022-03-17 18:53:06.247 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:53:06.248 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:53:06.336 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:06.336 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11870,比列:0.200000,数据库:0.42565882,计算:-0.425658
2022-03-17 18:53:06.337 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:53:06.337 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:53:06.426 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:06.427 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11870,比列:0.300000,数据库:0.63848823,计算:-0.638488
2022-03-17 18:53:06.427 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:53:06.428 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:53:06.519 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:06.519 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11870,比列:0.100000,数据库:0.21282941,计算:-0.212829
2022-03-17 18:53:06.520 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:53:06.520 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:53:06.609 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:06.609 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11870,比列:0.100000,数据库:0.21282941,计算:-0.212829
2022-03-17 18:53:06.610 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-257.1958666666666666
2022-03-17 18:53:06.610 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11871' LIMIT 0,1 
2022-03-17 18:53:06.611 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:53:06.701 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:53:06.702 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-17 18:53:06.702 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:06.789 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:06.790 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-8.3331460800000000
2022-03-17 18:53:06.790 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11871' LIMIT 0,1000 
2022-03-17 18:53:06.790 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:06.879 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:06.880 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-17 18:53:06.880 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:06.968 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:06.969 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:53:06.969 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:07.056 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:07.057 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:53:07.058 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:07.146 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:07.147 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:53:07.147 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:07.239 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:07.240 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:53:07.240 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:07.331 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:07.332 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:53:07.332 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:07.422 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:53:07.423 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:53:07.423 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:53:07.512 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:07.512 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11871,比列:0.300000,数据库:2.49994382,计算:-2.499943
2022-03-17 18:53:07.513 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:53:07.513 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:53:07.608 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:07.608 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11871,比列:0.200000,数据库:1.66662921,计算:-1.666629
2022-03-17 18:53:07.609 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:53:07.609 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:53:07.698 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:07.699 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11871,比列:0.300000,数据库:2.49994382,计算:-2.499943
2022-03-17 18:53:07.699 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:53:07.699 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:53:07.788 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:07.789 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11871,比列:0.100000,数据库:0.83331460,计算:-0.833314
2022-03-17 18:53:07.789 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:53:07.789 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:53:07.880 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:07.880 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11871,比列:0.100000,数据库:0.83331460,计算:-0.833314
2022-03-17 18:53:07.881 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-118.0940338983050847
2022-03-17 18:53:07.881 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11872' LIMIT 0,1 
2022-03-17 18:53:07.882 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:53:07.971 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:53:07.972 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:53:07.972 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:08.059 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:08.061 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11872) 
2022-03-17 18:53:08.061 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-17 18:53:08.154 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-17 18:53:08.155 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-2.7870192000000000
2022-03-17 18:53:08.156 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11872' LIMIT 0,1000 
2022-03-17 18:53:08.156 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:08.244 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:08.245 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:53:08.245 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:08.337 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:08.337 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905058,订单:11872,类型:51
2022-03-17 18:53:08.338 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:53:08.338 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:08.426 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:08.426 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:53:08.426 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:08.514 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:08.515 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:53:08.515 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:08.604 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:08.604 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:53:08.605 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:08.692 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:08.693 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:53:08.693 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:08.782 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:53:08.783 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:53:08.783 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:53:08.872 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:08.873 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11872,比列:0.300000,数据库:0.83610576,计算:-0.836105
2022-03-17 18:53:08.873 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:53:08.874 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:53:08.970 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:08.970 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11872,比列:0.200000,数据库:0.55740384,计算:-0.557403
2022-03-17 18:53:08.971 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:53:08.972 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:53:09.061 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:09.062 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11872,比列:0.300000,数据库:0.83610576,计算:-0.836105
2022-03-17 18:53:09.063 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:53:09.063 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:53:09.152 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:09.153 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11872,比列:0.100000,数据库:0.27870192,计算:-0.278701
2022-03-17 18:53:09.153 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:53:09.154 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:53:09.241 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:09.242 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11872,比列:0.100000,数据库:0.27870192,计算:-0.278701
2022-03-17 18:53:09.242 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-1.0000000000000000
2022-03-17 18:53:09.242 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-9.0000000000000000
2022-03-17 18:53:09.242 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:459.1566095387545763
2022-03-17 18:53:09.243 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11873' LIMIT 0,1000 
2022-03-17 18:53:09.243 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:09.331 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:09.332 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:53:09.332 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:09.419 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:09.420 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11873' LIMIT 0,1000 
2022-03-17 18:53:09.420 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:09.509 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:09.510 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:53:09.510 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:09.597 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:09.598 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,1 
2022-03-17 18:53:09.598 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:53:09.686 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:53:09.687 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11873,数据库:9.33063000,计算得:-31.102100
2022-03-17 18:53:09.687 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-11.3390661600000000
2022-03-17 18:53:09.687 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11873' LIMIT 0,1000 
2022-03-17 18:53:09.688 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:09.776 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:09.777 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:53:09.777 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:09.865 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:09.865 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:53:09.865 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:09.953 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:09.953 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:53:09.953 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:10.041 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:10.042 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:53:10.042 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:10.129 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:10.129 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:53:10.129 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:10.226 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:10.227 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:53:10.227 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:10.314 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:53:10.315 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:53:10.315 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:53:10.407 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:10.407 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11873,比列:0.300000,数据库:3.40171984,计算:-3.401719
2022-03-17 18:53:10.408 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:53:10.409 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:53:10.498 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:10.499 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11873,比列:0.200000,数据库:2.26781323,计算:-2.267813
2022-03-17 18:53:10.499 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:53:10.500 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:53:10.589 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:10.590 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11873,比列:0.300000,数据库:3.40171984,计算:-3.401719
2022-03-17 18:53:10.591 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:53:10.591 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:53:10.681 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:10.682 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11873,比列:0.100000,数据库:1.13390661,计算:-1.133906
2022-03-17 18:53:10.682 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:53:10.682 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:53:10.770 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:10.771 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11873,比列:0.100000,数据库:1.13390661,计算:-1.133906
2022-03-17 18:53:10.771 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-214.5270130434782608
2022-03-17 18:53:10.772 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11874' LIMIT 0,1 
2022-03-17 18:53:10.772 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:53:10.866 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:53:10.867 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:53:10.867 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:10.961 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:10.962 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.9736485200000000
2022-03-17 18:53:10.962 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11874' LIMIT 0,1000 
2022-03-17 18:53:10.963 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:11.051 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:11.052 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:53:11.052 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:11.142 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:11.142 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:53:11.143 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:11.230 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:11.231 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:53:11.231 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:11.319 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:11.320 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:53:11.320 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:11.410 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:11.411 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:53:11.412 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:11.499 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:11.500 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:53:11.501 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:11.588 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:53:11.588 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:53:11.589 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:53:11.677 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:11.677 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11874,比列:0.300000,数据库:0.59209455,计算:-0.592094
2022-03-17 18:53:11.677 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:53:11.678 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:53:11.766 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:11.766 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11874,比列:0.200000,数据库:0.39472970,计算:-0.394729
2022-03-17 18:53:11.767 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:53:11.767 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:53:11.857 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:11.857 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11874,比列:0.300000,数据库:0.59209455,计算:-0.592094
2022-03-17 18:53:11.858 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:53:11.858 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:53:11.949 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:11.949 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11874,比列:0.100000,数据库:0.19736485,计算:-0.197364
2022-03-17 18:53:11.949 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:53:11.949 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:53:12.038 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:12.038 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11874,比列:0.100000,数据库:0.19736485,计算:-0.197364
2022-03-17 18:53:12.038 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-5.0000000000000000
2022-03-17 18:53:12.038 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-5.0000000000000000
2022-03-17 18:53:12.038 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-6.0000000000000000
2022-03-17 18:53:12.039 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:9.0000000000000000
2022-03-17 18:53:12.039 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:1.6600000000000000
2022-03-17 18:53:12.039 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:199.2156130434782609
2022-03-17 18:53:12.039 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11876' LIMIT 0,1000 
2022-03-17 18:53:12.040 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:12.128 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:12.129 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:53:12.129 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:12.216 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:12.217 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11876' LIMIT 0,1000 
2022-03-17 18:53:12.218 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:12.306 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:12.306 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:53:12.306 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:12.396 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:12.396 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11876' and type=? limit 0,1 
2022-03-17 18:53:12.397 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:53:12.486 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:53:12.486 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11876,数据库:15.31140000,计算得:-15.311400
2022-03-17 18:53:12.486 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.9797730800000000
2022-03-17 18:53:12.487 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11876' LIMIT 0,1000 
2022-03-17 18:53:12.487 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:53:12.578 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:53:12.579 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:53:12.579 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:53:12.669 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:53:12.670 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:53:12.670 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:12.757 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:12.758 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:53:12.758 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:12.846 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:12.847 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:53:12.848 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:12.935 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:12.936 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:53:12.936 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:13.024 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:53:13.025 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:53:13.025 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:53:13.112 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:53:13.113 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11876' and type=? limit 0,100 
2022-03-17 18:53:13.113 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:53:13.204 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:13.204 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11876,比列:0.300000,数据库:0.59393192,计算:-0.593931
2022-03-17 18:53:13.205 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11876' and type=? limit 0,100 
2022-03-17 18:53:13.205 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:53:13.294 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:13.295 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11876,比列:0.200000,数据库:0.39595461,计算:-0.395954
2022-03-17 18:53:13.296 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11876' and type=? limit 0,100 
2022-03-17 18:53:13.296 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:53:13.385 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:13.385 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11876,比列:0.300000,数据库:0.59393192,计算:-0.593931
2022-03-17 18:53:13.385 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11876' and type=? limit 0,100 
2022-03-17 18:53:13.386 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:53:13.474 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:13.474 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11876,比列:0.100000,数据库:0.19797730,计算:-0.197977
2022-03-17 18:53:13.474 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11876' and type=? limit 0,100 
2022-03-17 18:53:13.475 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:53:13.578 [http-nio-10090-exec-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:53:13.579 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11876,比列:0.100000,数据库:0.19797730,计算:-0.197977
2022-03-17 18:53:13.579 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:55:46.559 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 18:55:46.560 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:55:46.649 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 18:55:46.649 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905058' AND type=4 AND `size` = '0') 
2022-03-17 18:55:46.649 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 18:55:46.737 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 18:55:46.737 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:46.737 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 18:55:46.825 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 18:55:46.826 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:0E-16,hold:0E-16
2022-03-17 18:55:46.826 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-1000.0000000000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:0E-16,操作后，数据库存储的总金额:0E-16
2022-03-17 18:55:46.826 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:46.826 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:46.914 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:55:46.915 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058，user_partner_balance表无数据，不做流水校验！
2022-03-17 18:55:46.926 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 18:55:46.926 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905058(String)
2022-03-17 18:55:47.014 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 18:55:47.015 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:47.015 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 18:55:47.103 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 18:55:47.104 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 18:55:47.105 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 18:55:47.194 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 18:55:47.194 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:321.4214000000000000
2022-03-17 18:55:47.194 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:282.0814,操作后，账户变化金额:-39.3400000000000000,操作后，计算剩余的金额:321.4214000000000000,操作后，数据库存储的总金额:321.4214000000000000
2022-03-17 18:55:47.195 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:47.195 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:55:47.284 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:55:47.285 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:55:47.285 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:55:47.376 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:55:47.377 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:55:47.377 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:55:47.465 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:55:47.466 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:55:47.466 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:55:47.556 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:55:47.556 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:55:47.557 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:55:47.645 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:55:47.646 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 18:55:47.646 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 18:55:47.734 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 18:55:47.743 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 18:55:47.746 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905058' and created_date>='' 
2022-03-17 18:55:47.746 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 18:55:47.924 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 53
2022-03-17 18:55:47.925 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,流水:[UserBillChain(userId=51905058, type=3, size=-20.7356820000000000, preBalance=1000.0000000000000000, postBalance=979.2643180000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓保证金-20.7356820000000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8294272800000000, preBalance=979.2643180000000000, postBalance=978.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11855, note=单号:11855开仓手续费-0.8294272800000000, createdDate=2022-03-17 18:20:02, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-12.0000000000000000, preBalance=978.4348907200000000, postBalance=966.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3920, note=转出：12.00000000, createdDate=2022-03-17 18:20:11, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-21.0000000000000000, preBalance=966.4348907200000000, postBalance=945.4348907200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77485, note=用户ID:51905058, 转出21.0000000000000000USDT, createdDate=2022-03-17 18:20:17, fromUserId=null, total=null), UserBillChain(userId=51905058, type=4, size=20.9141820000000000, preBalance=945.4348907200000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓收益20.0846833200000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8294986800000000, preBalance=965.5195740400000000, postBalance=965.5195740400000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11856, note=单号:11856平仓手续费-0.8294986800000000, createdDate=2022-03-17 18:20:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.9916550400000000, preBalance=965.5195740400000000, postBalance=964.5279190000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11857, note=单号:11857开仓手续费-0.9916550400000000, createdDate=2022-03-17 18:21:24, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0244000000000000, preBalance=964.5279190000000000, postBalance=963.5118737200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11858, note=单号:11858平仓收益-1.0160452800000000, createdDate=2022-03-17 18:21:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.9916452800000000, preBalance=963.5118737200000000, postBalance=963.5118737200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11858, note=单号:11858平仓手续费-0.9916452800000000, createdDate=2022-03-17 18:21:52, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.8299719600000000, preBalance=963.5118737200000000, postBalance=962.6819017600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11859, note=单号:11859开仓手续费-0.8299719600000000, createdDate=2022-03-17 18:24:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.6672077600000000, preBalance=962.6819017600000000, postBalance=962.0146940000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11860, note=单号:11860开仓手续费-0.6672077600000000, createdDate=2022-03-17 18:24:51, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.0813628000000000, preBalance=962.0146940000000000, postBalance=961.9333312000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11861, note=单号:11861开仓手续费-0.0813628000000000, createdDate=2022-03-17 18:24:58, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.1071000000000000, preBalance=961.9333312000000000, postBalance=960.9963020800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11862, note=单号:11862平仓收益-0.9370291200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0246000000000000, preBalance=960.9963020800000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11863, note=单号:11863平仓收益-0.6917979200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.8299291200000000, preBalance=960.3045041600000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11862, note=单号:11862平仓手续费-0.8299291200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.6671979200000000, preBalance=960.3045041600000000, postBalance=960.3045041600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11863, note=单号:11863平仓手续费-0.6671979200000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-0.0075000000000000, preBalance=960.3045041600000000, postBalance=960.2156383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11864, note=单号:11864平仓收益-0.0888658000000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-0.0813658000000000, preBalance=960.2156383600000000, postBalance=960.2156383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11864, note=单号:11864平仓手续费-0.0813658000000000, createdDate=2022-03-17 18:25:01, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-135.3782909090909090, preBalance=960.2156383600000000, postBalance=824.8373474509090910, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11865, note=单号:11865开仓保证金-135.3782909090909090, createdDate=2022-03-17 18:38:05, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-4.1696513600000000, preBalance=824.8373474509090910, postBalance=820.6676960909090910, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11865, note=单号:11865开仓手续费-4.1696513600000000, createdDate=2022-03-17 18:38:05, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-332.6589437500000000, preBalance=820.6676960909090910, postBalance=488.0087523409090910, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11866, note=单号:11866开仓保证金-332.6589437500000000, createdDate=2022-03-17 18:38:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-2.1290172400000000, preBalance=488.0087523409090910, postBalance=485.8797351009090910, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11866, note=单号:11866开仓手续费-2.1290172400000000, createdDate=2022-03-17 18:38:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-3.9647636363636363, preBalance=485.8797351009090910, postBalance=481.9149714645454547, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11867, note=单号:11867开仓保证金-3.9647636363636363, createdDate=2022-03-17 18:38:19, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-0.1221147200000000, preBalance=481.9149714645454547, postBalance=481.7928567445454547, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11867, note=单号:11867开仓手续费-0.1221147200000000, createdDate=2022-03-17 18:38:19, fromUserId=0, total=null), UserBillChain(userId=51905058, type=55, size=-3.0000000000000000, preBalance=481.7928567445454547, postBalance=478.7928567445454547, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11865, note=单号:11865增加保证金-3.0000000000000000, createdDate=2022-03-17 18:38:20, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=132.1377373967272727, preBalance=478.7928567445454547, postBalance=606.6359458212727274, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11868, note=单号:11868平仓收益127.8430890767272727, createdDate=2022-03-17 18:38:21, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-4.2946483200000000, preBalance=606.6359458212727274, postBalance=606.6359458212727274, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11868, note=单号:11868平仓手续费-4.2946483200000000, createdDate=2022-03-17 18:38:21, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-362.9020254237288135, preBalance=606.6359458212727274, postBalance=243.7339203975439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11869, note=单号:11869开仓保证金-362.9020254237288135, createdDate=2022-03-17 18:38:22, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-8.5644878000000000, preBalance=243.7339203975439139, postBalance=235.1694325975439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11869, note=单号:11869开仓手续费-8.5644878000000000, createdDate=2022-03-17 18:38:22, fromUserId=0, total=null), UserBillChain(userId=51905058, type=55, size=-10.0000000000000000, preBalance=235.1694325975439139, postBalance=225.1694325975439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11866, note=单号:11866增加保证金-10.0000000000000000, createdDate=2022-03-17 18:38:31, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=340.8511437500000000, preBalance=225.1694325975439139, postBalance=563.8922822275439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11870, note=单号:11870平仓收益338.7228496300000000, createdDate=2022-03-17 18:38:33, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-2.1282941200000000, preBalance=563.8922822275439139, postBalance=563.8922822275439139, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11870, note=单号:11870平仓手续费-2.1282941200000000, createdDate=2022-03-17 18:38:33, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-257.1958666666666666, preBalance=563.8922822275439139, postBalance=306.6964155608772473, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11871, note=单号:11871开仓保证金-257.1958666666666666, createdDate=2022-03-17 18:38:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-8.3331460800000000, preBalance=306.6964155608772473, postBalance=298.3632694808772473, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11871, note=单号:11871开仓手续费-8.3331460800000000, createdDate=2022-03-17 18:38:39, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-118.0940338983050847, preBalance=298.3632694808772473, postBalance=180.2692355825721626, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11872, note=单号:11872开仓保证金-118.0940338983050847, createdDate=2022-03-17 18:38:42, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-2.7870192000000000, preBalance=180.2692355825721626, postBalance=177.4822163825721626, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11872, note=单号:11872开仓手续费-2.7870192000000000, createdDate=2022-03-17 18:38:42, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-1.0000000000000000, preBalance=177.4822163825721626, postBalance=176.4822163825721626, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3921, note=转出：1.00000000, createdDate=2022-03-17 18:38:42, fromUserId=null, total=null), UserBillChain(userId=51905058, type=55, size=-9.0000000000000000, preBalance=176.4822163825721626, postBalance=167.4822163825721626, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11869, note=单号:11869增加保证金-9.0000000000000000, createdDate=2022-03-17 18:38:43, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=459.1566095387545763, preBalance=167.4822163825721626, postBalance=615.2997597613267389, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11873, note=单号:11873平仓收益447.8175433787545763, createdDate=2022-03-17 18:38:44, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-11.3390661600000000, preBalance=615.2997597613267389, postBalance=615.2997597613267389, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11873, note=单号:11873平仓手续费-11.3390661600000000, createdDate=2022-03-17 18:38:44, fromUserId=0, total=null), UserBillChain(userId=51905058, type=3, size=-214.5270130434782608, preBalance=615.2997597613267389, postBalance=400.7727467178484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11874, note=单号:11874开仓保证金-214.5270130434782608, createdDate=2022-03-17 18:38:45, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-1.9736485200000000, preBalance=400.7727467178484781, postBalance=398.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11874, note=单号:11874开仓手续费-1.9736485200000000, createdDate=2022-03-17 18:38:45, fromUserId=0, total=null), UserBillChain(userId=51905058, type=6, size=-5.0000000000000000, preBalance=398.7990981978484781, postBalance=393.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=3922, note=转出：5.00000000, createdDate=2022-03-17 18:38:46, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-5.0000000000000000, preBalance=393.7990981978484781, postBalance=388.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77486, note=用户ID:51905058, 转出5.0000000000000000USDT, createdDate=2022-03-17 18:38:51, fromUserId=null, total=null), UserBillChain(userId=51905058, type=6, size=-6.0000000000000000, preBalance=388.7990981978484781, postBalance=382.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77487, note=用户ID:51905058, 转出6.0000000000000000USDT, createdDate=2022-03-17 18:38:57, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=9.0000000000000000, preBalance=382.7990981978484781, postBalance=391.7990981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=0, note=转入:9.0000, createdDate=2022-03-17 18:39:03, fromUserId=null, total=null), UserBillChain(userId=51905058, type=5, size=1.6600000000000000, preBalance=391.7990981978484781, postBalance=393.4590981978484781, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77489, note=用户ID:51905058, 转入1.66USDT, createdDate=2022-03-17 18:39:10, fromUserId=null, total=null), UserBillChain(userId=51905058, type=4, size=199.2156130434782609, preBalance=393.4590981978484781, postBalance=590.6949381613267390, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11876, note=单号:11876平仓收益197.2358399634782609, createdDate=2022-03-17 18:52:30, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-1.9797730800000000, preBalance=590.6949381613267390, postBalance=590.6949381613267390, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11876, note=单号:11876平仓手续费-1.9797730800000000, createdDate=2022-03-17 18:52:30, fromUserId=0, total=null), UserBillChain(userId=51905058, type=51, size=-1.6120288800000000, preBalance=590.6949381613267390, postBalance=589.0829092813267390, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11877, note=单号:11877开仓手续费-1.6120288800000000, createdDate=2022-03-17 18:53:12, fromUserId=0, total=null), UserBillChain(userId=51905058, type=4, size=-992.8017000000000000, preBalance=589.0829092813267390, postBalance=-405.3296989186732610, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11880, note=单号:11880平仓收益-994.4126082000000000, createdDate=2022-03-17 18:54:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=52, size=-1.6109082000000000, preBalance=-405.3296989186732610, postBalance=-405.3296989186732610, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11880, note=单号:11880平仓手续费-1.6109082000000000, createdDate=2022-03-17 18:54:16, fromUserId=0, total=null), UserBillChain(userId=51905058, type=54, size=405.3296989186732610, preBalance=-405.3296989186732610, postBalance=0E-16, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11880, note=单号:11880穿仓回补405.3296989186732610, createdDate=2022-03-17 18:54:20, fromUserId=51904446, total=null)]
2022-03-17 18:55:47.927 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 18:55:47.927 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-20.7356820000000000
2022-03-17 18:55:47.927 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11855' LIMIT 0,1 
2022-03-17 18:55:47.928 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:55:48.018 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:55:48.019 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:48.019 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:48.111 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:48.112 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8294272800000000
2022-03-17 18:55:48.112 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11855' LIMIT 0,1000 
2022-03-17 18:55:48.113 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:48.204 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:48.204 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:48.205 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:48.293 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:48.294 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:55:48.294 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:48.381 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:48.381 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:55:48.382 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:48.470 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:48.471 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:55:48.471 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:48.561 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:48.562 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:55:48.562 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:48.651 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:48.652 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:48.652 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:48.738 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:55:48.739 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:55:48.739 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:55:48.830 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:48.830 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:55:48.830 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:55:48.830 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:55:48.922 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:48.923 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11855,比列:0.200000,数据库:0.16588545,计算:-0.165885
2022-03-17 18:55:48.923 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:55:48.924 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:55:49.030 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:49.030 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11855,比列:0.300000,数据库:0.24882818,计算:-0.248828
2022-03-17 18:55:49.031 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:55:49.031 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:55:49.123 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:49.124 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:55:49.124 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11855' and type=? limit 0,100 
2022-03-17 18:55:49.124 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:55:49.222 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:49.223 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11855,比列:0.100000,数据库:0.08294272,计算:-0.082942
2022-03-17 18:55:49.223 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-12.0000000000000000
2022-03-17 18:55:49.223 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-21.0000000000000000
2022-03-17 18:55:49.223 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:20.9141820000000000
2022-03-17 18:55:49.223 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:55:49.223 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:49.313 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:49.313 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:49.313 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:49.402 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:49.403 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:55:49.403 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:49.491 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:49.492 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:49.492 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:49.581 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:49.582 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,1 
2022-03-17 18:55:49.582 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:55:49.672 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:55:49.672 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11856,数据库:-0.17850000,计算得:0.178500
2022-03-17 18:55:49.672 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8294986800000000
2022-03-17 18:55:49.673 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11856' LIMIT 0,1000 
2022-03-17 18:55:49.673 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:49.761 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:49.762 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:49.762 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:49.849 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:49.850 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:55:49.850 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:49.979 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:49.979 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:55:49.979 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:50.066 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:50.067 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:55:50.067 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:50.180 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:50.181 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:55:50.181 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:50.271 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:50.272 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:50.272 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:50.360 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:55:50.360 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:55:50.361 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:55:50.450 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:50.451 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:55:50.452 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:55:50.452 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:55:50.543 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:50.544 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11856,比列:0.200000,数据库:0.16589973,计算:-0.165899
2022-03-17 18:55:50.544 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:55:50.545 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:55:50.634 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:50.634 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11856,比列:0.300000,数据库:0.24884960,计算:-0.248849
2022-03-17 18:55:50.635 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:55:50.635 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:55:50.726 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:50.726 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:55:50.727 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11856' and type=? limit 0,100 
2022-03-17 18:55:50.727 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:55:50.815 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:50.815 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11856,比列:0.100000,数据库:0.08294986,计算:-0.082949
2022-03-17 18:55:50.815 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.9916550400000000
2022-03-17 18:55:50.816 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11857' LIMIT 0,1000 
2022-03-17 18:55:50.816 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:50.906 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:50.906 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:50.906 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:50.997 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:50.997 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:55:50.997 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:51.089 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:51.089 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:55:51.090 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:51.185 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:51.186 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:55:51.186 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:51.276 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:51.276 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:55:51.277 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:51.367 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:51.368 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:51.368 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:51.456 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:55:51.456 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:55:51.457 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:55:51.546 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:51.547 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:55:51.547 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:55:51.547 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:55:51.636 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:51.636 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11857,比列:0.200000,数据库:0.19833100,计算:-0.198331
2022-03-17 18:55:51.637 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:55:51.637 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:55:51.725 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:51.725 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11857,比列:0.300000,数据库:0.29749651,计算:-0.297496
2022-03-17 18:55:51.726 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:55:51.726 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:55:51.814 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:51.814 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:55:51.815 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11857' and type=? limit 0,100 
2022-03-17 18:55:51.815 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:55:51.912 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:51.912 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11857,比列:0.100000,数据库:0.09916550,计算:-0.099165
2022-03-17 18:55:51.912 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0244000000000000
2022-03-17 18:55:51.912 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:55:51.913 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:52.003 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:52.004 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:52.004 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:52.093 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:52.094 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:55:52.094 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:52.183 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:52.184 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:52.184 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:52.272 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:52.273 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,1 
2022-03-17 18:55:52.273 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:55:52.362 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:55:52.362 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11858,数据库:0.02440000,计算得:-0.024400
2022-03-17 18:55:52.362 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.9916452800000000
2022-03-17 18:55:52.363 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11858' LIMIT 0,1000 
2022-03-17 18:55:52.363 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:52.451 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:52.452 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:52.452 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:52.539 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:52.540 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:55:52.540 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:52.628 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:52.628 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:55:52.629 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:52.717 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:52.718 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:55:52.718 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:52.807 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:52.807 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:55:52.807 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:52.895 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:52.895 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:52.896 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:52.982 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:55:52.983 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:55:52.983 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:55:53.072 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:53.072 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11858,比列:0.300000,数据库:0.29749358,计算:-0.297493
2022-03-17 18:55:53.072 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:55:53.073 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:55:53.161 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:53.161 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11858,比列:0.200000,数据库:0.19832905,计算:-0.198329
2022-03-17 18:55:53.161 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:55:53.162 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:55:53.252 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:53.253 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11858,比列:0.300000,数据库:0.29749358,计算:-0.297493
2022-03-17 18:55:53.253 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:55:53.253 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:55:53.342 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:53.343 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11858,比列:0.100000,数据库:0.09916452,计算:-0.099164
2022-03-17 18:55:53.343 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11858' and type=? limit 0,100 
2022-03-17 18:55:53.344 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:55:53.431 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:53.431 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11858,比列:0.100000,数据库:0.09916452,计算:-0.099164
2022-03-17 18:55:53.431 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.8299719600000000
2022-03-17 18:55:53.432 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11859' LIMIT 0,1000 
2022-03-17 18:55:53.432 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:53.521 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:53.522 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:53.522 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:53.610 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:53.611 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:55:53.611 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:53.700 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:53.701 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:55:53.701 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:53.790 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:53.790 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:55:53.791 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:53.881 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:53.881 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:55:53.881 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:53.972 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:53.973 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:53.973 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:54.061 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:55:54.062 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:55:54.062 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:55:54.150 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:54.150 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11859,比列:0.300000,数据库:0.24899158,计算:-0.248991
2022-03-17 18:55:54.151 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:55:54.151 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:55:54.243 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:54.243 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11859,比列:0.200000,数据库:0.16599439,计算:-0.165994
2022-03-17 18:55:54.244 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:55:54.244 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:55:54.335 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:54.335 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11859,比列:0.300000,数据库:0.24899158,计算:-0.248991
2022-03-17 18:55:54.336 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:55:54.336 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:55:54.425 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:54.425 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11859,比列:0.100000,数据库:0.08299719,计算:-0.082997
2022-03-17 18:55:54.426 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11859' and type=? limit 0,100 
2022-03-17 18:55:54.427 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:55:54.514 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:54.515 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11859,比列:0.100000,数据库:0.08299719,计算:-0.082997
2022-03-17 18:55:54.515 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6672077600000000
2022-03-17 18:55:54.515 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11860' LIMIT 0,1000 
2022-03-17 18:55:54.515 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:54.605 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:54.605 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:54.605 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:54.697 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:54.697 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:55:54.697 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:54.785 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:54.785 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:55:54.785 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:54.873 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:54.873 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:55:54.873 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:54.963 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:54.963 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:55:54.963 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:55.050 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:55.050 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:55.050 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:55.140 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:55:55.141 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:55:55.141 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:55:55.229 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:55.229 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11860,比列:0.300000,数据库:0.20016232,计算:-0.200162
2022-03-17 18:55:55.230 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:55:55.231 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:55:55.320 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:55.320 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11860,比列:0.200000,数据库:0.13344155,计算:-0.133441
2022-03-17 18:55:55.321 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:55:55.321 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:55:55.410 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:55.410 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11860,比列:0.300000,数据库:0.20016232,计算:-0.200162
2022-03-17 18:55:55.411 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:55:55.411 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:55:55.426 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:55.426 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11860,比列:0.100000,数据库:0.06672077,计算:-0.066720
2022-03-17 18:55:55.426 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11860' and type=? limit 0,100 
2022-03-17 18:55:55.426 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:55:55.520 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:55.520 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11860,比列:0.100000,数据库:0.06672077,计算:-0.066720
2022-03-17 18:55:55.520 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.0813628000000000
2022-03-17 18:55:55.520 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11861' LIMIT 0,1000 
2022-03-17 18:55:55.520 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:55.611 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:55.611 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:55.611 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:55.700 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:55.701 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:55:55.701 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:55.791 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:55.791 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:55:55.791 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:55.883 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:55.883 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:55:55.883 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:55.973 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:55.973 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:55:55.974 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:56.062 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:56.062 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:56.063 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:56.152 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:55:56.153 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:55:56.153 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:55:56.244 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:56.245 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11861,比列:0.300000,数据库:0.02440884,计算:-0.024408
2022-03-17 18:55:56.245 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:55:56.246 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:55:56.335 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:56.335 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11861,比列:0.200000,数据库:0.01627256,计算:-0.016272
2022-03-17 18:55:56.336 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:55:56.336 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:55:56.426 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:56.426 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11861,比列:0.300000,数据库:0.02440884,计算:-0.024408
2022-03-17 18:55:56.427 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:55:56.427 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:55:56.514 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:56.515 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11861,比列:0.100000,数据库:0.00813628,计算:-0.008136
2022-03-17 18:55:56.515 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11861' and type=? limit 0,100 
2022-03-17 18:55:56.515 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:55:56.612 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:56.612 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11861,比列:0.100000,数据库:0.00813628,计算:-0.008136
2022-03-17 18:55:56.612 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.1071000000000000
2022-03-17 18:55:56.613 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:55:56.613 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:56.703 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:56.703 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:56.703 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:56.795 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:56.795 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:55:56.795 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:56.885 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:56.885 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:56.885 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:56.974 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:56.974 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,1 
2022-03-17 18:55:56.975 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:55:57.062 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:55:57.062 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11862,数据库:0.10710000,计算得:-0.107100
2022-03-17 18:55:57.062 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0246000000000000
2022-03-17 18:55:57.062 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:55:57.062 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:57.152 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:57.153 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:57.153 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:57.240 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:57.241 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:55:57.241 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:57.330 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:57.331 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:57.331 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:57.419 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:57.420 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,1 
2022-03-17 18:55:57.420 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:55:57.508 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:55:57.509 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11863,数据库:0.02460000,计算得:-0.024600
2022-03-17 18:55:57.509 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.8299291200000000
2022-03-17 18:55:57.509 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11862' LIMIT 0,1000 
2022-03-17 18:55:57.509 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:57.597 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:57.597 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:57.598 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:57.686 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:57.687 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:55:57.687 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:57.780 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:57.781 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:55:57.781 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:57.870 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:57.870 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:55:57.871 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:57.960 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:57.960 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:55:57.960 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:58.048 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:58.049 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:58.049 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:58.137 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:55:58.138 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:55:58.138 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:55:58.231 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:58.232 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11862,比列:0.300000,数据库:0.24897873,计算:-0.248978
2022-03-17 18:55:58.232 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:55:58.232 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:55:58.321 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:58.321 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11862,比列:0.200000,数据库:0.16598582,计算:-0.165985
2022-03-17 18:55:58.321 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:55:58.322 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:55:58.410 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:58.411 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11862,比列:0.300000,数据库:0.24897873,计算:-0.248978
2022-03-17 18:55:58.411 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:55:58.412 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:55:58.500 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:58.500 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11862,比列:0.100000,数据库:0.08299291,计算:-0.082992
2022-03-17 18:55:58.500 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11862' and type=? limit 0,100 
2022-03-17 18:55:58.501 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:55:58.591 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:58.591 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11862,比列:0.100000,数据库:0.08299291,计算:-0.082992
2022-03-17 18:55:58.591 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6671979200000000
2022-03-17 18:55:58.591 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11863' LIMIT 0,1000 
2022-03-17 18:55:58.592 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:58.680 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:58.680 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:58.680 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:58.767 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:58.768 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:55:58.769 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:58.858 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:58.859 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:55:58.859 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:58.948 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:58.949 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:55:58.949 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:59.037 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:59.037 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:55:59.037 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:59.125 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:55:59.125 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:55:59.126 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:55:59.213 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:55:59.214 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:55:59.214 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:55:59.309 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:59.309 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11863,比列:0.300000,数据库:0.20015937,计算:-0.200159
2022-03-17 18:55:59.309 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:55:59.309 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:55:59.398 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:59.398 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11863,比列:0.200000,数据库:0.13343958,计算:-0.133439
2022-03-17 18:55:59.399 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:55:59.399 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:55:59.488 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:59.488 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11863,比列:0.300000,数据库:0.20015937,计算:-0.200159
2022-03-17 18:55:59.488 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:55:59.489 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:55:59.578 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:59.578 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11863,比列:0.100000,数据库:0.06671979,计算:-0.066719
2022-03-17 18:55:59.578 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11863' and type=? limit 0,100 
2022-03-17 18:55:59.579 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:55:59.669 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:55:59.669 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11863,比列:0.100000,数据库:0.06671979,计算:-0.066719
2022-03-17 18:55:59.669 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-0.0075000000000000
2022-03-17 18:55:59.670 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:55:59.670 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:59.757 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:59.758 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:59.758 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:55:59.849 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:55:59.849 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:55:59.850 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:55:59.939 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:55:59.939 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:55:59.939 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:00.026 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:00.027 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,1 
2022-03-17 18:56:00.027 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:56:00.116 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:56:00.117 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11864,数据库:0.00750000,计算得:-0.007500
2022-03-17 18:56:00.117 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.0813658000000000
2022-03-17 18:56:00.117 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11864' LIMIT 0,1000 
2022-03-17 18:56:00.118 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:00.213 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:00.214 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:00.214 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:00.301 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:00.302 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:00.302 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:00.392 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:00.393 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:00.393 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:00.481 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:00.482 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:00.482 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:00.570 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:00.570 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:00.571 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:00.658 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:00.658 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:00.658 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:00.747 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:00.748 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:56:00.748 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:00.837 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:00.853 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11864,比列:0.300000,数据库:0.02440974,计算:-0.024409
2022-03-17 18:56:00.854 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:56:00.854 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:00.949 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:00.949 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11864,比列:0.200000,数据库:0.01627316,计算:-0.016273
2022-03-17 18:56:00.950 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:56:00.950 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:01.038 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:01.038 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11864,比列:0.300000,数据库:0.02440974,计算:-0.024409
2022-03-17 18:56:01.038 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:56:01.039 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:01.130 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:01.130 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11864,比列:0.100000,数据库:0.00813658,计算:-0.008136
2022-03-17 18:56:01.131 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11864' and type=? limit 0,100 
2022-03-17 18:56:01.131 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:01.219 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:01.220 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11864,比列:0.100000,数据库:0.00813658,计算:-0.008136
2022-03-17 18:56:01.220 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-135.3782909090909090
2022-03-17 18:56:01.220 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11865' LIMIT 0,1 
2022-03-17 18:56:01.221 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:56:01.309 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:56:01.310 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:56:01.310 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:01.397 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:01.397 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-4.1696513600000000
2022-03-17 18:56:01.398 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11865' LIMIT 0,1000 
2022-03-17 18:56:01.398 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:01.488 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-17 18:56:01.488 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:56:01.488 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:01.576 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:01.577 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:01.577 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:01.665 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:01.666 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:01.666 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:01.756 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:01.756 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:01.756 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:01.844 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:01.844 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:01.844 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:01.931 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:01.932 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:01.932 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:02.019 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:02.020 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:56:02.020 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:02.109 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:02.109 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11865,比列:0.300000,数据库:1.25089540,计算:-1.250895
2022-03-17 18:56:02.110 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:56:02.110 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:02.200 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:02.200 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11865,比列:0.200000,数据库:0.83393027,计算:-0.833930
2022-03-17 18:56:02.201 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:56:02.201 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:02.289 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:02.289 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11865,比列:0.300000,数据库:1.25089540,计算:-1.250895
2022-03-17 18:56:02.290 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:56:02.290 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:02.378 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:02.378 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11865,比列:0.100000,数据库:0.41696513,计算:-0.416965
2022-03-17 18:56:02.379 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11865' and type=? limit 0,100 
2022-03-17 18:56:02.380 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:02.469 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:02.469 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11865,比列:0.100000,数据库:0.41696513,计算:-0.416965
2022-03-17 18:56:02.469 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-332.6589437500000000
2022-03-17 18:56:02.470 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11866' LIMIT 0,1 
2022-03-17 18:56:02.470 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:56:02.559 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:56:02.559 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:02.559 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:02.646 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:02.647 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-2.1290172400000000
2022-03-17 18:56:02.647 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11866' LIMIT 0,1000 
2022-03-17 18:56:02.648 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:02.738 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-17 18:56:02.738 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:02.738 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:02.826 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:02.826 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:02.827 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:02.914 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:02.915 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:02.915 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:03.003 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:03.004 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:03.004 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:03.093 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:03.093 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:03.094 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:03.181 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:03.182 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:03.182 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:03.271 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:03.271 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:56:03.271 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:03.360 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:03.360 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11866,比列:0.300000,数据库:0.63870517,计算:-0.638705
2022-03-17 18:56:03.361 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:56:03.361 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:03.449 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:03.449 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11866,比列:0.200000,数据库:0.42580344,计算:-0.425803
2022-03-17 18:56:03.450 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:56:03.450 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:03.541 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:03.541 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11866,比列:0.300000,数据库:0.63870517,计算:-0.638705
2022-03-17 18:56:03.542 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:56:03.542 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:03.630 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:03.631 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11866,比列:0.100000,数据库:0.21290172,计算:-0.212901
2022-03-17 18:56:03.631 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11866' and type=? limit 0,100 
2022-03-17 18:56:03.632 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:03.721 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:03.722 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11866,比列:0.100000,数据库:0.21290172,计算:-0.212901
2022-03-17 18:56:03.722 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-3.9647636363636363
2022-03-17 18:56:03.722 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11867' LIMIT 0,1 
2022-03-17 18:56:03.722 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:56:03.814 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:56:03.814 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:56:03.814 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:03.905 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:03.905 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11867) 
2022-03-17 18:56:03.905 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-17 18:56:03.993 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-17 18:56:03.994 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1221147200000000
2022-03-17 18:56:03.994 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11867' LIMIT 0,1000 
2022-03-17 18:56:03.994 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:04.082 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:04.082 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:56:04.083 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:04.170 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:04.170 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905058,订单:11867,类型:51
2022-03-17 18:56:04.171 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:04.171 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:04.263 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:04.264 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:04.264 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:04.352 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:04.353 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:04.353 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:04.442 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:04.442 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:04.443 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:04.535 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:04.536 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:04.536 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:04.632 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:04.632 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:56:04.633 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:04.720 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:04.721 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11867,比列:0.300000,数据库:0.03663441,计算:-0.036634
2022-03-17 18:56:04.721 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:56:04.721 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:04.811 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:04.811 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11867,比列:0.200000,数据库:0.02442294,计算:-0.024422
2022-03-17 18:56:04.812 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:56:04.813 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:04.902 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:04.902 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11867,比列:0.300000,数据库:0.03663441,计算:-0.036634
2022-03-17 18:56:04.902 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:56:04.903 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:04.992 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:04.992 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11867,比列:0.100000,数据库:0.01221147,计算:-0.012211
2022-03-17 18:56:04.992 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11867' and type=? limit 0,100 
2022-03-17 18:56:04.993 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:05.081 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:05.081 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11867,比列:0.100000,数据库:0.01221147,计算:-0.012211
2022-03-17 18:56:05.081 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-3.0000000000000000
2022-03-17 18:56:05.081 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:132.1377373967272727
2022-03-17 18:56:05.082 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11868' LIMIT 0,1000 
2022-03-17 18:56:05.082 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:05.170 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:05.171 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:56:05.171 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:05.259 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:05.260 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11868' LIMIT 0,1000 
2022-03-17 18:56:05.260 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:05.348 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:05.349 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:56:05.349 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:05.436 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:05.437 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,1 
2022-03-17 18:56:05.437 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:56:05.525 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:56:05.526 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11868,数据库:2.16167993,计算得:-7.205599
2022-03-17 18:56:05.526 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-4.2946483200000000
2022-03-17 18:56:05.526 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11868' LIMIT 0,1000 
2022-03-17 18:56:05.526 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:05.617 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:05.617 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:56:05.617 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:05.707 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:05.708 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:05.708 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:05.803 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:05.803 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:05.804 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:05.894 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:05.894 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:05.894 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:05.982 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:05.982 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:05.983 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:06.070 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:06.071 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:06.071 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:06.159 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:06.159 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:56:06.160 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:06.249 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:06.249 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11868,比列:0.300000,数据库:1.28839449,计算:-1.288394
2022-03-17 18:56:06.250 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:56:06.250 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:06.338 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:06.339 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11868,比列:0.200000,数据库:0.85892966,计算:-0.858929
2022-03-17 18:56:06.339 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:56:06.339 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:06.428 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:06.429 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11868,比列:0.300000,数据库:1.28839449,计算:-1.288394
2022-03-17 18:56:06.429 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:56:06.429 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:06.517 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:06.517 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11868,比列:0.100000,数据库:0.42946483,计算:-0.429464
2022-03-17 18:56:06.518 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11868' and type=? limit 0,100 
2022-03-17 18:56:06.518 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:06.612 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:06.613 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11868,比列:0.100000,数据库:0.42946483,计算:-0.429464
2022-03-17 18:56:06.613 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-362.9020254237288135
2022-03-17 18:56:06.613 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11869' LIMIT 0,1 
2022-03-17 18:56:06.614 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:56:06.705 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:56:06.705 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:06.706 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:06.933 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:06.934 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-8.5644878000000000
2022-03-17 18:56:06.935 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11869' LIMIT 0,1000 
2022-03-17 18:56:06.935 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:07.028 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 2
2022-03-17 18:56:07.028 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:07.029 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:07.207 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:07.208 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:07.208 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:07.299 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:07.300 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:07.301 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:07.478 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:07.478 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:07.478 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:07.572 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:07.572 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:07.572 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:07.704 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:07.705 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:07.705 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:07.883 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:07.884 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:56:07.885 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:08.065 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:08.065 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11869,比列:0.300000,数据库:2.56934634,计算:-2.569346
2022-03-17 18:56:08.066 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:56:08.067 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:08.219 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:08.219 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11869,比列:0.200000,数据库:1.71289756,计算:-1.712897
2022-03-17 18:56:08.220 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:56:08.220 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:08.396 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:08.397 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11869,比列:0.300000,数据库:2.56934634,计算:-2.569346
2022-03-17 18:56:08.397 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:56:08.398 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:08.486 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:08.486 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11869,比列:0.100000,数据库:0.85644878,计算:-0.856448
2022-03-17 18:56:08.487 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11869' and type=? limit 0,100 
2022-03-17 18:56:08.487 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:08.574 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:08.575 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11869,比列:0.100000,数据库:0.85644878,计算:-0.856448
2022-03-17 18:56:08.575 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-10.0000000000000000
2022-03-17 18:56:08.575 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:340.8511437500000000
2022-03-17 18:56:08.575 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11870' LIMIT 0,1000 
2022-03-17 18:56:08.575 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:08.664 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:08.665 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:08.665 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:08.752 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:08.753 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11870' LIMIT 0,1000 
2022-03-17 18:56:08.753 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:08.843 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:08.843 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:08.843 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:08.942 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:08.943 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,1 
2022-03-17 18:56:08.943 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:56:09.036 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:56:09.036 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11870,数据库:0.54234000,计算得:-1.807800
2022-03-17 18:56:09.036 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-2.1282941200000000
2022-03-17 18:56:09.036 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11870' LIMIT 0,1000 
2022-03-17 18:56:09.037 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:09.140 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:09.141 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:09.141 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:09.229 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:09.230 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:09.230 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:09.318 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:09.318 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:09.319 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:09.406 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:09.406 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:09.407 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:09.495 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:09.496 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:09.496 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:09.584 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:09.584 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:09.585 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:09.672 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:09.672 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:56:09.672 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:09.761 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:09.761 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11870,比列:0.300000,数据库:0.63848823,计算:-0.638488
2022-03-17 18:56:09.762 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:56:09.762 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:09.855 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:09.855 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11870,比列:0.200000,数据库:0.42565882,计算:-0.425658
2022-03-17 18:56:09.855 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:56:09.855 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:09.947 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:09.947 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11870,比列:0.300000,数据库:0.63848823,计算:-0.638488
2022-03-17 18:56:09.947 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:56:09.948 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:10.036 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:10.037 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11870,比列:0.100000,数据库:0.21282941,计算:-0.212829
2022-03-17 18:56:10.037 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11870' and type=? limit 0,100 
2022-03-17 18:56:10.037 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:10.127 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:10.127 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11870,比列:0.100000,数据库:0.21282941,计算:-0.212829
2022-03-17 18:56:10.127 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-257.1958666666666666
2022-03-17 18:56:10.127 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11871' LIMIT 0,1 
2022-03-17 18:56:10.128 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:56:10.229 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:56:10.229 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-17 18:56:10.229 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:10.319 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:10.319 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-8.3331460800000000
2022-03-17 18:56:10.320 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11871' LIMIT 0,1000 
2022-03-17 18:56:10.320 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:10.410 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:10.410 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-03-17 18:56:10.410 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:10.500 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:10.501 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:10.502 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:10.589 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:10.589 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:10.590 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:10.678 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:10.679 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:10.679 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:10.766 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:10.767 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:10.767 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:10.855 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:10.855 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:10.856 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:10.946 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:10.947 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:56:10.947 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:11.038 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:11.038 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11871,比列:0.300000,数据库:2.49994382,计算:-2.499943
2022-03-17 18:56:11.038 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:56:11.039 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:11.127 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:11.127 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11871,比列:0.200000,数据库:1.66662921,计算:-1.666629
2022-03-17 18:56:11.127 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:56:11.128 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:11.220 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:11.220 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11871,比列:0.300000,数据库:2.49994382,计算:-2.499943
2022-03-17 18:56:11.220 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:56:11.221 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:11.311 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:11.311 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11871,比列:0.100000,数据库:0.83331460,计算:-0.833314
2022-03-17 18:56:11.311 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11871' and type=? limit 0,100 
2022-03-17 18:56:11.312 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:11.401 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:11.402 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11871,比列:0.100000,数据库:0.83331460,计算:-0.833314
2022-03-17 18:56:11.402 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-118.0940338983050847
2022-03-17 18:56:11.402 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11872' LIMIT 0,1 
2022-03-17 18:56:11.402 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:56:11.496 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:56:11.497 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:11.497 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:11.585 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:11.586 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=11872) 
2022-03-17 18:56:11.586 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-03-17 18:56:11.675 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-03-17 18:56:11.675 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-2.7870192000000000
2022-03-17 18:56:11.675 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11872' LIMIT 0,1000 
2022-03-17 18:56:11.676 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:11.764 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:11.764 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:11.765 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:11.852 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:11.852 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费计算不正确--->用户:51905058,订单:11872,类型:51
2022-03-17 18:56:11.853 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:11.853 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:11.941 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:11.941 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:11.941 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:12.032 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:12.032 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:12.033 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:12.122 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:12.123 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:12.123 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:12.211 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:12.212 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:12.212 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:12.299 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:12.300 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:56:12.300 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:12.389 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:12.389 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11872,比列:0.300000,数据库:0.83610576,计算:-0.836105
2022-03-17 18:56:12.389 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:56:12.389 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:12.480 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:12.480 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11872,比列:0.200000,数据库:0.55740384,计算:-0.557403
2022-03-17 18:56:12.480 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:56:12.481 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:12.569 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:12.569 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11872,比列:0.300000,数据库:0.83610576,计算:-0.836105
2022-03-17 18:56:12.570 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:56:12.570 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:12.659 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:12.659 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11872,比列:0.100000,数据库:0.27870192,计算:-0.278701
2022-03-17 18:56:12.659 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11872' and type=? limit 0,100 
2022-03-17 18:56:12.660 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:12.748 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:12.748 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11872,比列:0.100000,数据库:0.27870192,计算:-0.278701
2022-03-17 18:56:12.749 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-1.0000000000000000
2022-03-17 18:56:12.749 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 逐仓保证金划入:-9.0000000000000000
2022-03-17 18:56:12.749 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:459.1566095387545763
2022-03-17 18:56:12.749 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11873' LIMIT 0,1000 
2022-03-17 18:56:12.749 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:12.837 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:12.837 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:12.837 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:12.926 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:12.927 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11873' LIMIT 0,1000 
2022-03-17 18:56:12.927 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:13.015 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:13.016 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:13.016 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:13.104 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:13.105 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,1 
2022-03-17 18:56:13.105 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:56:13.197 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:56:13.197 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11873,数据库:9.33063000,计算得:-31.102100
2022-03-17 18:56:13.198 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-11.3390661600000000
2022-03-17 18:56:13.198 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11873' LIMIT 0,1000 
2022-03-17 18:56:13.198 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:13.286 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:13.287 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:13.287 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:13.375 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:13.376 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:13.376 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:13.464 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:13.465 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:13.465 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:13.552 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:13.553 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:13.553 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:13.642 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:13.642 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:13.642 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:13.732 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:13.733 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:13.733 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:13.827 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:13.827 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:56:13.828 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:13.924 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:13.925 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11873,比列:0.300000,数据库:3.40171984,计算:-3.401719
2022-03-17 18:56:13.925 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:56:13.925 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:14.020 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:14.020 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11873,比列:0.200000,数据库:2.26781323,计算:-2.267813
2022-03-17 18:56:14.021 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:56:14.021 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:14.109 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:14.109 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11873,比列:0.300000,数据库:3.40171984,计算:-3.401719
2022-03-17 18:56:14.109 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:56:14.110 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:14.199 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:14.199 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11873,比列:0.100000,数据库:1.13390661,计算:-1.133906
2022-03-17 18:56:14.200 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11873' and type=? limit 0,100 
2022-03-17 18:56:14.200 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:14.289 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:14.289 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11873,比列:0.100000,数据库:1.13390661,计算:-1.133906
2022-03-17 18:56:14.289 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-214.5270130434782608
2022-03-17 18:56:14.289 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `type` IS NULL AND `order_id` = '11874' LIMIT 0,1 
2022-03-17 18:56:14.289 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-03-17 18:56:14.378 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-03-17 18:56:14.378 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:56:14.378 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:14.466 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:14.466 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.9736485200000000
2022-03-17 18:56:14.467 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11874' LIMIT 0,1000 
2022-03-17 18:56:14.467 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:14.558 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:14.558 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:56:14.558 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:14.648 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:14.649 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:14.649 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:14.737 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:14.738 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:14.738 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:14.827 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:14.827 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:14.828 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:14.915 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:14.915 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:14.915 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:15.005 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:15.005 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:15.006 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:15.094 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:15.094 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:56:15.094 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:15.183 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:15.183 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11874,比列:0.300000,数据库:0.59209455,计算:-0.592094
2022-03-17 18:56:15.184 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:56:15.185 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:15.272 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:15.273 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11874,比列:0.200000,数据库:0.39472970,计算:-0.394729
2022-03-17 18:56:15.273 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:56:15.273 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:15.371 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:15.371 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11874,比列:0.300000,数据库:0.59209455,计算:-0.592094
2022-03-17 18:56:15.372 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:56:15.373 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:15.460 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:15.460 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11874,比列:0.100000,数据库:0.19736485,计算:-0.197364
2022-03-17 18:56:15.461 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11874' and type=? limit 0,100 
2022-03-17 18:56:15.461 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:15.550 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:15.551 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11874,比列:0.100000,数据库:0.19736485,计算:-0.197364
2022-03-17 18:56:15.551 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-5.0000000000000000
2022-03-17 18:56:15.551 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-5.0000000000000000
2022-03-17 18:56:15.551 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转出:-6.0000000000000000
2022-03-17 18:56:15.552 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:9.0000000000000000
2022-03-17 18:56:15.552 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 转入:1.6600000000000000
2022-03-17 18:56:15.552 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:199.2156130434782609
2022-03-17 18:56:15.552 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11876' LIMIT 0,1000 
2022-03-17 18:56:15.552 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:15.642 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:15.642 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:56:15.642 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:15.729 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:15.729 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11876' LIMIT 0,1000 
2022-03-17 18:56:15.730 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:15.824 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:15.824 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:56:15.824 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:15.915 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:15.915 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11876' and type=? limit 0,1 
2022-03-17 18:56:15.915 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:56:16.004 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:56:16.004 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11876,数据库:15.31140000,计算得:-15.311400
2022-03-17 18:56:16.004 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.9797730800000000
2022-03-17 18:56:16.004 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11876' LIMIT 0,1000 
2022-03-17 18:56:16.004 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:16.094 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:16.095 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ltcusdt%' 
2022-03-17 18:56:16.095 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:16.184 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:16.185 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:16.185 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:16.276 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:16.276 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:16.277 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:16.364 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:16.364 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:16.364 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:16.452 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:16.452 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:16.452 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:16.541 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:16.541 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:16.542 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:16.630 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:16.630 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11876' and type=? limit 0,100 
2022-03-17 18:56:16.630 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:16.721 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:16.721 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11876,比列:0.300000,数据库:0.59393192,计算:-0.593931
2022-03-17 18:56:16.721 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11876' and type=? limit 0,100 
2022-03-17 18:56:16.721 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:16.810 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:16.811 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11876,比列:0.200000,数据库:0.39595461,计算:-0.395954
2022-03-17 18:56:16.811 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11876' and type=? limit 0,100 
2022-03-17 18:56:16.812 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:16.902 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:16.902 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11876,比列:0.300000,数据库:0.59393192,计算:-0.593931
2022-03-17 18:56:16.903 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11876' and type=? limit 0,100 
2022-03-17 18:56:16.903 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:16.992 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:16.993 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11876,比列:0.100000,数据库:0.19797730,计算:-0.197977
2022-03-17 18:56:16.993 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11876' and type=? limit 0,100 
2022-03-17 18:56:16.993 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:17.081 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:17.081 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11876,比列:0.100000,数据库:0.19797730,计算:-0.197977
2022-03-17 18:56:17.081 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.6120288800000000
2022-03-17 18:56:17.082 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11877' LIMIT 0,1000 
2022-03-17 18:56:17.082 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:17.171 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:17.172 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:17.172 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:17.266 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:17.267 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:17.267 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:17.356 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:17.357 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:17.357 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:17.445 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:17.446 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:17.446 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:17.536 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:17.537 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:17.537 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:17.629 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:17.630 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:17.630 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:17.723 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:17.723 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11877' and type=? limit 0,100 
2022-03-17 18:56:17.723 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:17.818 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:17.818 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:51,订单:11877,比列:0.300000,数据库:0.48360866,计算:-0.483608
2022-03-17 18:56:17.819 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11877' and type=? limit 0,100 
2022-03-17 18:56:17.819 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:17.921 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:17.921 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:51,订单:11877,比列:0.200000,数据库:0.32240577,计算:-0.322405
2022-03-17 18:56:17.922 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11877' and type=? limit 0,100 
2022-03-17 18:56:17.922 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:18.011 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:18.011 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:51,订单:11877,比列:0.300000,数据库:0.48360866,计算:-0.483608
2022-03-17 18:56:18.012 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11877' and type=? limit 0,100 
2022-03-17 18:56:18.012 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:18.100 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:18.100 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:51,订单:11877,比列:0.100000,数据库:0.16120288,计算:-0.161202
2022-03-17 18:56:18.100 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11877' and type=? limit 0,100 
2022-03-17 18:56:18.101 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:18.188 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:18.188 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:51,订单:11877,比列:0.100000,数据库:0.16120288,计算:-0.161202
2022-03-17 18:56:18.188 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-992.8017000000000000
2022-03-17 18:56:18.188 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11880' LIMIT 0,1000 
2022-03-17 18:56:18.188 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:18.277 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:18.278 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:18.278 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:18.369 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:18.369 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11880' LIMIT 0,1000 
2022-03-17 18:56:18.369 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:18.461 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:18.462 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:18.462 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:18.549 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:18.550 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11880' and type=? limit 0,1 
2022-03-17 18:56:18.550 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 18:56:18.639 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:56:18.639 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(未开启对赌)--盈亏校验--->用户:51905058,默认合伙人:51904446,交易类型:4,订单:11880,数据库:992.80170000,计算得:-992.801700
2022-03-17 18:56:18.639 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.6109082000000000
2022-03-17 18:56:18.640 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905058' AND `order_id` = '11880' LIMIT 0,1000 
2022-03-17 18:56:18.640 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 18:56:18.731 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 18:56:18.731 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 18:56:18.732 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 18:56:18.819 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 18:56:18.820 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 18:56:18.820 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:18.914 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:18.914 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 18:56:18.915 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:19.004 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:19.005 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 18:56:19.006 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:19.093 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:19.093 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 18:56:19.094 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:19.182 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 18:56:19.183 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 18:56:19.183 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 18:56:19.278 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 18:56:19.278 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11880' and type=? limit 0,100 
2022-03-17 18:56:19.278 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 18:56:19.368 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:19.368 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51904446,交易类型:52,订单:11880,比列:0.300000,数据库:0.48327246,计算:-0.483272
2022-03-17 18:56:19.369 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11880' and type=? limit 0,100 
2022-03-17 18:56:19.369 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 18:56:19.462 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:19.462 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905052,交易类型:52,订单:11880,比列:0.200000,数据库:0.32218164,计算:-0.322181
2022-03-17 18:56:19.463 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11880' and type=? limit 0,100 
2022-03-17 18:56:19.463 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 18:56:19.551 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:19.551 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905043,交易类型:52,订单:11880,比列:0.300000,数据库:0.48327246,计算:-0.483272
2022-03-17 18:56:19.551 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11880' and type=? limit 0,100 
2022-03-17 18:56:19.551 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 18:56:19.639 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:19.639 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905041,交易类型:52,订单:11880,比列:0.100000,数据库:0.16109082,计算:-0.161090
2022-03-17 18:56:19.639 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11880' and type=? limit 0,100 
2022-03-17 18:56:19.640 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-03-17 18:56:19.727 [http-nio-10090-exec-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 18:56:19.743 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户无返佣--手续费校验-->用户:51905058,合伙人:51905047,交易类型:52,订单:11880,比列:0.100000,数据库:0.16109082,计算:-0.161090
2022-03-17 18:56:19.744 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 穿仓回补（给用户加钱到0）给用户:405.3296989186732610
2022-03-17 18:56:19.745 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11880' and type=? limit 0,1 
2022-03-17 18:56:19.745 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 38(Integer)
2022-03-17 18:56:19.837 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 18:56:19.837 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.PositionsCalc - partnerBack--合伙人--穿仓回退--->用户:51905058,合伙人:51904446,交易类型:54,订单:11880,数据库:-405.32969891,计算得:405.329698
2022-03-17 18:56:19.837 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905058流水--------
2022-03-17 20:04:14.756 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=47m57s460ms).
2022-03-17 20:07:20.676 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 20:07:20.683 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 20:07:38.690 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5005 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 20:07:43.701 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 27325 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 20:07:43.702 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 20:07:44.517 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 20:07:44.519 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 20:07:44.540 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 20:07:44.545 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 20:07:44.546 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 20:07:44.553 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 20:07:44.563 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 20:07:44.565 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 20:07:44.584 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2022-03-17 20:07:45.200 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 20:07:45.213 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 20:07:45.213 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 20:07:45.213 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 20:07:45.344 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 20:07:45.344 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1586 ms
2022-03-17 20:07:46.437 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 20:07:47.141 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 20:07:47.144 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 20:07:47.144 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 20:07:47.377 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 20:07:47.398 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 20:07:47.413 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.265 seconds (JVM running for 24.79)
2022-03-17 20:08:18.624 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 20:08:18.626 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 20:08:18.627 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 20:08:18.881 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 20:08:20.131 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 20:08:20.142 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 20:08:20.171 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:08:20.300 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:08:20.305 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 20:08:20.305 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:08:20.687 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:08:20.688 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:08:20.688 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:08:20.789 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:08:20.790 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 20:08:20.791 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:08:20.883 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:08:20.884 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 20:08:20.884 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:08:20.985 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:08:20.986 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 20:08:20.986 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:08:21.086 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:08:21.087 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905058,合伙人:[{"userId":"51905058","parentId":"51905047","gparentId":"0","partnerId":"51905047","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":}, {"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 20:12:29.233 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 20:12:29.234 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 20:12:29.332 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 20:12:29.333 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 20:12:29.333 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:12:29.430 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:12:29.431 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 20:12:29.431 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 20:12:29.523 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 20:12:29.524 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 20:12:29.524 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 20:12:29.615 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 20:12:29.734 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,账户user_balance:UserBalanceChain(userId=51905047, currencyId=6, balance=1000.0000000000000000, hold=0E-16),user_partner_balance:UserBalanceChain(userId=51905047, currencyId=6, balance=35718.5506040040000000, hold=0E-16),otc_user_balance:UserBalanceChain(userId=51905047, currencyId=6, balance=0E-16, hold=null),assert_user_balance:UserBalanceChain(userId=51905047, currencyId=6, balance=1.1100000000000000, hold=null)
2022-03-17 20:12:34.140 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:12:34.141 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 20:12:34.237 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 20:12:34.238 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:12:34.238 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:12:34.336 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:12:34.336 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:12:34.337 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 20:12:34.427 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 20:12:34.428 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905041' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 20:12:34.428 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 20:12:34.521 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 20:12:34.570 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905041,账户user_balance:UserBalanceChain(userId=51905041, currencyId=6, balance=1000.0000000000000000, hold=0E-16),user_partner_balance:UserBalanceChain(userId=51905041, currencyId=6, balance=55480.3866320399412979, hold=0E-16),otc_user_balance:UserBalanceChain(userId=51905041, currencyId=6, balance=0E-16, hold=null),assert_user_balance:UserBalanceChain(userId=51905041, currencyId=6, balance=0E-16, hold=null)
2022-03-17 20:17:04.459 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 20:17:04.461 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905041(String)
2022-03-17 20:17:04.554 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 20:17:04.556 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905041' AND type=4 AND `size` = '0') 
2022-03-17 20:17:04.558 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 20:17:04.654 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 20:17:04.657 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:17:04.658 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 20:17:05.034 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 20:17:05.035 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:996.2712383600000000,hold:0E-16
2022-03-17 20:17:05.036 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-3.7287616400000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:996.2712383600000000,操作后，数据库存储的总金额:996.2712383600000000
2022-03-17 20:17:05.041 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:17:05.042 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:17:05.135 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:17:05.159 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) 
2022-03-17 20:17:05.159 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905041(String)
2022-03-17 20:17:05.256 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:17:05.258 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:17:05.259 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:17:05.351 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:17:05.353 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:55480.7871243679412979,hold:0E-16
2022-03-17 20:17:05.354 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:55480.38663203994,操作后，账户变化金额:0.4004923280000000,操作后，计算剩余的金额:55479.9861397119400000,操作后，数据库存储的总金额:55480.7871243679412979
2022-03-17 20:17:05.377 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 20:17:05.377 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905041(String)
2022-03-17 20:17:05.476 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 20:17:05.477 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:17:05.477 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 20:17:05.856 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 20:17:05.857 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905041' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 20:17:05.858 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 20:17:05.950 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 20:17:05.951 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:0E-16
2022-03-17 20:17:05.951 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:0.0,操作后，账户变化金额:0,操作后，计算剩余的金额:0.0,操作后，数据库存储的总金额:0E-16
2022-03-17 20:17:05.952 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:17:05.952 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:17:06.044 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:17:06.045 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 20:17:06.046 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:17:06.142 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:17:06.143 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 20:17:06.143 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:17:06.248 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:17:06.249 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 20:17:06.250 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:17:06.351 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:17:06.352 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.SqlUtil - 用户:51905041,合伙人:[{"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 20:17:06.354 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905041' and created_date>='' 
2022-03-17 20:17:06.354 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 20:17:06.453 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 5
2022-03-17 20:17:06.454 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905041,流水:[UserBillChain(userId=51905041, type=51, size=-1.0015760800000000, preBalance=1000.0000000000000000, postBalance=998.9984239200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11902, note=单号:11902开仓手续费-1.0015760800000000, createdDate=2022-03-17 20:15:19, fromUserId=0, total=null), UserBillChain(userId=51905041, type=16, size=0.2003152160000000, preBalance=55480.3866320399412979, postBalance=55480.5869472559412979, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11902, note=手续费返佣：0.200315216,单号来源:11902,用户来源: 51905041, createdDate=2022-03-17 20:15:29, fromUserId=51905041, total=null), UserBillChain(userId=51905041, type=4, size=-1.7263000000000000, preBalance=998.9984239200000000, postBalance=996.2712383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11903, note=单号:11903平仓收益-2.7271855600000000, createdDate=2022-03-17 20:16:27, fromUserId=0, total=null), UserBillChain(userId=51905041, type=52, size=-1.0008855600000000, preBalance=996.2712383600000000, postBalance=996.2712383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11903, note=单号:11903平仓手续费-1.0008855600000000, createdDate=2022-03-17 20:16:27, fromUserId=0, total=null), UserBillChain(userId=51905041, type=16, size=0.2001771120000000, preBalance=55480.5869472559412979, postBalance=55480.7871243679412979, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11903, note=手续费返佣：0.200177112,单号来源:11903,用户来源: 51905041, createdDate=2022-03-17 20:16:29, fromUserId=51905041, total=null)]
2022-03-17 20:17:06.455 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905041流水--------
2022-03-17 20:17:06.456 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0015760800000000
2022-03-17 20:17:06.459 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905041' AND `order_id` = '11902' LIMIT 0,1000 
2022-03-17 20:17:06.459 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 20:17:06.555 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 20:17:06.557 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 20:17:06.558 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 20:17:06.650 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 20:17:06.716 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 20:17:06.716 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:17:06.808 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:17:06.810 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 20:17:06.810 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:17:06.902 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:17:06.904 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:17:06.904 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:17:06.998 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:17:07.000 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11902' and type=? limit 0,100 
2022-03-17 20:17:07.001 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 20:17:07.107 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:17:07.108 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51904446,交易类型:51,订单:11902,比列:0.300000,数据库:0.30047282,计算:0.300472
2022-03-17 20:17:07.109 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11902' and type=? limit 0,100 
2022-03-17 20:17:07.110 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 20:17:07.203 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:17:07.204 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51905052,交易类型:51,订单:11902,比列:0.200000,数据库:0.20031521,计算:0.200315
2022-03-17 20:17:07.205 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11902' and type=? limit 0,100 
2022-03-17 20:17:07.206 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 20:17:07.301 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:17:07.302 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51905043,交易类型:51,订单:11902,比列:0.300000,数据库:0.30047282,计算:0.300472
2022-03-17 20:17:07.303 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11902' and type=? limit 0,100 
2022-03-17 20:17:07.303 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 20:17:07.399 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:17:07.399 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51905041,交易类型:51,订单:11902,比列:0.200000,数据库:0.20031521,计算:0.200315
2022-03-17 20:17:07.400 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.2003152160000000
2022-03-17 20:17:07.400 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905041,类型:16,之前余额:55480.3866320399412979,分佣金额:0.2003152160000000,之后余额:55480.5869472559412979
2022-03-17 20:17:07.400 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-1.7263000000000000
2022-03-17 20:17:07.401 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905041' AND `order_id` = '11903' LIMIT 0,1000 
2022-03-17 20:17:07.401 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 20:17:07.497 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 20:17:07.498 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 20:17:07.498 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 20:17:07.600 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 20:17:07.602 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905041' AND `order_id` = '11903' LIMIT 0,1000 
2022-03-17 20:17:07.602 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 20:17:07.704 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 20:17:07.706 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 20:17:07.707 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 20:17:08.112 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 20:17:08.114 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11903' and type=? limit 0,1 
2022-03-17 20:17:08.114 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51905043(String), 27(Integer)
2022-03-17 20:17:08.215 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 20:17:08.216 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905041,默认合伙人:51905043,交易类型:4,订单:11903,比例:0.7,数据库:1.20841000,计算得:1.208410
2022-03-17 20:17:08.217 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11903' and type=? limit 0,1 
2022-03-17 20:17:08.218 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 20:17:08.615 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 20:17:08.616 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905041,默认合伙人:51904446,交易类型:4,订单:11903,数据库:0.51789000,计算得:0.517890
2022-03-17 20:17:08.617 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0008855600000000
2022-03-17 20:17:08.618 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905041' AND `order_id` = '11903' LIMIT 0,1000 
2022-03-17 20:17:08.618 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 20:17:08.717 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 20:17:08.718 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 20:17:08.719 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 20:17:08.812 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 20:17:08.814 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 20:17:08.814 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:17:08.905 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:17:08.907 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 20:17:08.907 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:17:09.002 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:17:09.004 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:17:09.005 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:17:09.100 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:17:09.101 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11903' and type=? limit 0,100 
2022-03-17 20:17:09.102 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 20:17:09.204 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:17:09.205 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51904446,交易类型:52,订单:11903,比列:0.300000,数据库:0.30026566,计算:0.300265
2022-03-17 20:17:09.207 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11903' and type=? limit 0,100 
2022-03-17 20:17:09.208 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 20:17:09.320 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:17:09.320 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51905052,交易类型:52,订单:11903,比列:0.200000,数据库:0.20017711,计算:0.200177
2022-03-17 20:17:09.322 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11903' and type=? limit 0,100 
2022-03-17 20:17:09.322 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 20:17:09.419 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:17:09.420 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51905043,交易类型:52,订单:11903,比列:0.300000,数据库:0.30026566,计算:0.300265
2022-03-17 20:17:09.421 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11903' and type=? limit 0,100 
2022-03-17 20:17:09.422 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 20:17:09.522 [http-nio-10090-exec-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:17:09.523 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51905041,交易类型:52,订单:11903,比列:0.200000,数据库:0.20017711,计算:0.200177
2022-03-17 20:17:09.524 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.2001771120000000
2022-03-17 20:17:09.524 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905041,类型:16,之前余额:55480.5869472559412979,分佣金额:0.2001771120000000,之后余额:55480.7871243679412979
2022-03-17 20:17:09.525 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905041流水--------
2022-03-17 20:19:41.590 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 20:19:41.605 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 20:20:01.223 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5006 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 20:20:06.237 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 27365 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 20:20:06.238 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 20:20:07.074 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 20:20:07.076 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 20:20:07.096 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 20:20:07.101 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 20:20:07.102 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 20:20:07.112 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 20:20:07.126 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 20:20:07.127 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 20:20:07.142 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-03-17 20:20:07.776 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 20:20:07.786 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 20:20:07.786 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 20:20:07.787 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 20:20:07.912 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 20:20:07.912 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1611 ms
2022-03-17 20:20:09.006 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 20:20:09.739 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 20:20:09.741 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 20:20:09.741 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 20:20:09.967 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 20:20:09.982 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 20:20:09.993 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.334 seconds (JVM running for 24.841)
2022-03-17 20:20:18.769 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 20:20:18.770 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 20:20:18.771 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 20:20:19.163 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 20:20:20.468 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 20:20:20.479 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 20:20:20.534 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905041(String)
2022-03-17 20:20:20.665 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 20:20:20.671 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905041' AND type=4 AND `size` = '0') 
2022-03-17 20:20:20.671 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 20:20:20.766 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 20:20:20.767 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:20:20.768 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 20:20:20.857 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 20:20:20.858 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:996.2712383600000000,hold:0E-16
2022-03-17 20:20:20.860 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:-3.7287616400000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:996.2712383600000000,操作后，数据库存储的总金额:996.2712383600000000
2022-03-17 20:20:20.864 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:20:20.864 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:20:20.954 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:20:20.977 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) 
2022-03-17 20:20:20.977 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905041(String)
2022-03-17 20:20:21.066 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:20:21.067 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:20:21.068 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:20:21.177 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:20:21.178 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:55480.8216592879412979,hold:0E-16
2022-03-17 20:20:21.178 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:55480.38663203994,操作后，账户变化金额:0.4350272480000000,操作后，计算剩余的金额:55480.8216592879400000,操作后，数据库存储的总金额:55480.8216592879412979
2022-03-17 20:20:21.201 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 20:20:21.202 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905041(String)
2022-03-17 20:20:21.291 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 20:20:21.293 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:20:21.294 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 20:20:21.389 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 20:20:21.389 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905041' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 20:20:21.390 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 20:20:21.480 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 20:20:21.482 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:0E-16
2022-03-17 20:20:21.482 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:0.0,操作后，账户变化金额:0,操作后，计算剩余的金额:0.0,操作后，数据库存储的总金额:0E-16
2022-03-17 20:20:21.483 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:20:21.484 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:20:21.575 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:20:21.576 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 20:20:21.577 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:20:21.686 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:20:21.687 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 20:20:21.688 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:20:21.780 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:20:21.781 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 20:20:21.782 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:20:21.871 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:20:21.872 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905041,合伙人:[{"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 20:20:21.873 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905041' and created_date>='' 
2022-03-17 20:20:21.873 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 20:20:21.973 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 6
2022-03-17 20:20:21.973 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905041,流水:[UserBillChain(userId=51905041, type=51, size=-1.0015760800000000, preBalance=1000.0000000000000000, postBalance=998.9984239200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11902, note=单号:11902开仓手续费-1.0015760800000000, createdDate=2022-03-17 20:15:19, fromUserId=0, total=null), UserBillChain(userId=51905041, type=16, size=0.2003152160000000, preBalance=55480.3866320399412979, postBalance=55480.5869472559412979, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11902, note=手续费返佣：0.200315216,单号来源:11902,用户来源: 51905041, createdDate=2022-03-17 20:15:29, fromUserId=51905041, total=null), UserBillChain(userId=51905041, type=4, size=-1.7263000000000000, preBalance=998.9984239200000000, postBalance=996.2712383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11903, note=单号:11903平仓收益-2.7271855600000000, createdDate=2022-03-17 20:16:27, fromUserId=0, total=null), UserBillChain(userId=51905041, type=52, size=-1.0008855600000000, preBalance=996.2712383600000000, postBalance=996.2712383600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=11903, note=单号:11903平仓手续费-1.0008855600000000, createdDate=2022-03-17 20:16:27, fromUserId=0, total=null), UserBillChain(userId=51905041, type=16, size=0.2001771120000000, preBalance=55480.5869472559412979, postBalance=55480.7871243679412979, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11903, note=手续费返佣：0.200177112,单号来源:11903,用户来源: 51905041, createdDate=2022-03-17 20:16:29, fromUserId=51905041, total=null), UserBillChain(userId=51905041, type=16, size=0.0345349200000000, preBalance=55480.7871243679412979, postBalance=55480.8216592879412979, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11904, note=手续费返佣：0.03453492,单号来源:11904,用户来源: 51905058, createdDate=2022-03-17 20:17:39, fromUserId=51905058, total=null)]
2022-03-17 20:20:21.975 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905041流水--------
2022-03-17 20:20:21.975 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0015760800000000
2022-03-17 20:20:21.977 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905041' AND `order_id` = '11902' LIMIT 0,1000 
2022-03-17 20:20:21.978 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 20:20:22.072 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 20:20:22.074 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 20:20:22.076 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 20:20:22.174 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 20:20:22.234 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 20:20:22.235 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:20:22.324 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:20:22.326 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 20:20:22.327 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:20:22.418 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:20:22.419 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:20:22.419 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:20:22.514 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:20:22.516 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11902' and type=? limit 0,100 
2022-03-17 20:20:22.517 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 20:20:22.608 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:20:22.609 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51904446,交易类型:51,订单:11902,比列:0.300000,数据库:0.30047282,计算:0.300472
2022-03-17 20:20:22.611 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11902' and type=? limit 0,100 
2022-03-17 20:20:22.611 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 20:20:22.705 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:20:22.706 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51905052,交易类型:51,订单:11902,比列:0.200000,数据库:0.20031521,计算:0.200315
2022-03-17 20:20:22.707 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11902' and type=? limit 0,100 
2022-03-17 20:20:22.708 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 20:20:22.809 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:20:22.810 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51905043,交易类型:51,订单:11902,比列:0.300000,数据库:0.30047282,计算:0.300472
2022-03-17 20:20:22.811 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11902' and type=? limit 0,100 
2022-03-17 20:20:22.812 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 20:20:22.902 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:20:22.903 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51905041,交易类型:51,订单:11902,比列:0.200000,数据库:0.20031521,计算:0.200315
2022-03-17 20:20:22.904 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.2003152160000000
2022-03-17 20:20:22.904 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905041,类型:16,之前余额:55480.3866320399412979,分佣金额:0.2003152160000000,之后余额:55480.5869472559412979
2022-03-17 20:20:22.904 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-1.7263000000000000
2022-03-17 20:20:22.905 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905041' AND `order_id` = '11903' LIMIT 0,1000 
2022-03-17 20:20:22.906 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 20:20:22.996 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 20:20:22.997 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 20:20:22.998 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 20:20:23.089 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 20:20:23.090 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905041' AND `order_id` = '11903' LIMIT 0,1000 
2022-03-17 20:20:23.091 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 20:20:23.197 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 20:20:23.198 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 20:20:23.198 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 20:20:23.570 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 20:20:23.572 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11903' and type=? limit 0,1 
2022-03-17 20:20:23.573 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51905043(String), 27(Integer)
2022-03-17 20:20:23.663 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 20:20:23.663 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905041,默认合伙人:51905043,交易类型:4,订单:11903,比例:0.7,数据库:1.20841000,计算得:1.208410
2022-03-17 20:20:23.664 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11903' and type=? limit 0,1 
2022-03-17 20:20:23.665 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-03-17 20:20:23.759 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-03-17 20:20:23.760 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - morePartnerProfit--有合伙人(开启对赌)--盈亏校验--->用户:51905041,默认合伙人:51904446,交易类型:4,订单:11903,数据库:0.51789000,计算得:0.517890
2022-03-17 20:20:23.760 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0008855600000000
2022-03-17 20:20:23.761 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905041' AND `order_id` = '11903' LIMIT 0,1000 
2022-03-17 20:20:23.762 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-03-17 20:20:23.850 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-03-17 20:20:23.851 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-03-17 20:20:23.852 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-03-17 20:20:23.946 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-03-17 20:20:23.947 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 20:20:23.948 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:20:24.044 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:20:24.045 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 20:20:24.046 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:20:24.133 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:20:24.134 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:20:24.134 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:20:24.220 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:20:24.222 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11903' and type=? limit 0,100 
2022-03-17 20:20:24.223 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-03-17 20:20:24.315 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:20:24.315 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51904446,交易类型:52,订单:11903,比列:0.300000,数据库:0.30026566,计算:0.300265
2022-03-17 20:20:24.316 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11903' and type=? limit 0,100 
2022-03-17 20:20:24.317 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905052(String), 16(Integer)
2022-03-17 20:20:24.407 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:20:24.407 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51905052,交易类型:52,订单:11903,比列:0.200000,数据库:0.20017711,计算:0.200177
2022-03-17 20:20:24.408 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11903' and type=? limit 0,100 
2022-03-17 20:20:24.409 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905043(String), 16(Integer)
2022-03-17 20:20:24.498 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:20:24.499 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51905043,交易类型:52,订单:11903,比列:0.300000,数据库:0.30026566,计算:0.300265
2022-03-17 20:20:24.499 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='11903' and type=? limit 0,100 
2022-03-17 20:20:24.500 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905041(String), 16(Integer)
2022-03-17 20:20:24.618 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-03-17 20:20:24.618 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--手续费校验-->用户:51905041,合伙人:51905041,交易类型:52,订单:11903,比列:0.200000,数据库:0.20017711,计算:0.200177
2022-03-17 20:20:24.618 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.2001771120000000
2022-03-17 20:20:24.619 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905041,类型:16,之前余额:55480.5869472559412979,分佣金额:0.2001771120000000,之后余额:55480.7871243679412979
2022-03-17 20:20:24.619 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0345349200000000
2022-03-17 20:20:24.619 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905041,类型:16,之前余额:55480.7871243679412979,分佣金额:0.0345349200000000,之后余额:55480.8216592879412979
2022-03-17 20:20:24.619 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905041流水--------
2022-03-17 20:28:45.914 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 20:28:45.916 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-03-17 20:28:46.003 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 20:28:46.004 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-03-17 20:28:46.004 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 20:28:46.094 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 20:28:46.096 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 20:28:46.096 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 20:28:46.185 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 20:28:46.186 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1000.0000000000000000,hold:0E-16
2022-03-17 20:28:46.186 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:0,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1000.0,操作后，数据库存储的总金额:1000.0000000000000000
2022-03-17 20:28:46.187 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 20:28:46.187 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:28:46.281 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:28:46.295 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) 
2022-03-17 20:28:46.296 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-03-17 20:28:46.391 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:28:46.392 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 20:28:46.393 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 20:28:46.480 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 20:28:46.481 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:35718.5851389240000000,hold:0E-16
2022-03-17 20:28:46.482 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:35718.550604004,操作后，账户变化金额:0.0345349200000000,操作后，计算剩余的金额:35718.5851389240000000,操作后，数据库存储的总金额:35718.5851389240000000
2022-03-17 20:28:46.503 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 20:28:46.504 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-03-17 20:28:46.594 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 20:28:46.595 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 20:28:46.596 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 20:28:46.684 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 20:28:46.686 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 20:28:46.686 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 20:28:46.788 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 20:28:46.789 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:1.1100000000000000
2022-03-17 20:28:46.789 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:1.11,操作后，账户变化金额:0,操作后，计算剩余的金额:1.11,操作后，数据库存储的总金额:1.1100000000000000
2022-03-17 20:28:46.789 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 20:28:46.790 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:28:46.901 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:28:46.902 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 20:28:46.902 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:28:47.011 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:28:47.013 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 20:28:47.014 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:28:47.107 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:28:47.108 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 20:28:47.108 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:28:47.199 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:28:47.200 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 20:28:47.200 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 20:28:47.296 [http-nio-10090-exec-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 20:28:47.297 [http-nio-10090-exec-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 20:28:47.298 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='' 
2022-03-17 20:28:47.299 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 20:28:47.392 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 1
2022-03-17 20:28:47.393 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=16, size=0.0345349200000000, preBalance=35718.5506040040000000, postBalance=35718.5851389240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11904, note=手续费返佣：0.03453492,单号来源:11904,用户来源: 51905058, createdDate=2022-03-17 20:17:39, fromUserId=51905058, total=null)]
2022-03-17 20:28:47.394 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-03-17 20:28:47.394 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0345349200000000
2022-03-17 20:28:47.395 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:35718.5506040040000000,分佣金额:0.0345349200000000,之后余额:35718.5851389240000000
2022-03-17 20:28:47.395 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-03-17 21:01:57.889 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=5m37s87ms).
2022-03-17 21:11:00.491 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 21:11:00.496 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 21:45:05.823 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5004 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 21:45:10.834 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 28340 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 21:45:10.835 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 21:45:11.959 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 21:45:11.962 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 21:45:11.989 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 21:45:11.994 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 21:45:11.995 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 21:45:12.003 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 21:45:12.019 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 21:45:12.021 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 21:45:12.040 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2022-03-17 21:45:12.808 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 21:45:12.822 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 21:45:12.823 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 21:45:12.823 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 21:45:12.967 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 21:45:12.968 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2071 ms
2022-03-17 21:45:14.232 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 21:45:15.176 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 21:45:15.178 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 21:45:15.178 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 21:45:15.450 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 21:45:15.467 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 21:45:15.480 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 25.46 seconds (JVM running for 26.187)
2022-03-17 21:46:26.904 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 21:46:26.906 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 21:46:26.907 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 21:46:27.348 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 21:46:28.943 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 21:46:28.956 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type not in (16,27,38) 
2022-03-17 21:46:28.993 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-03-17 21:46:29.139 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-03-17 21:46:29.146 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type=52 and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-03-17 21:46:29.147 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-03-17 21:46:29.239 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-03-17 21:46:29.240 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 21:46:29.241 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 21:46:29.330 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 21:46:29.331 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1000.0000000000000000,hold:0E-16
2022-03-17 21:46:29.332 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1000.0,操作后，账户变化金额:0,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1000.0,操作后，数据库存储的总金额:1000.0000000000000000
2022-03-17 21:46:29.336 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 21:46:29.336 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 21:46:29.424 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 21:46:29.446 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) 
2022-03-17 21:46:29.446 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-03-17 21:46:29.531 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-03-17 21:46:29.533 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 21:46:29.533 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 21:46:29.620 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-03-17 21:46:29.621 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:35718.5851389240000000,hold:0E-16
2022-03-17 21:46:29.621 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:35718.550604004,操作后，账户变化金额:0.0345349200000000,操作后，计算剩余的金额:35718.5851389240000000,操作后，数据库存储的总金额:35718.5851389240000000
2022-03-17 21:46:29.644 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'' and user_id = ? and type in (5,6) 
2022-03-17 21:46:29.644 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-03-17 21:46:29.737 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-03-17 21:46:29.738 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 21:46:29.738 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 21:46:29.837 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 21:46:29.838 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 21:46:29.838 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 21:46:29.928 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 21:46:29.928 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:1.1100000000000000
2022-03-17 21:46:29.928 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:1.11,操作后，账户变化金额:0,操作后，计算剩余的金额:1.11,操作后，数据库存储的总金额:1.1100000000000000
2022-03-17 21:46:29.929 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-03-17 21:46:29.930 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 21:46:30.035 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 21:46:30.036 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905041' LIMIT 0,1 
2022-03-17 21:46:30.037 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 21:46:30.130 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 21:46:30.132 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905043' LIMIT 0,1 
2022-03-17 21:46:30.132 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 21:46:30.222 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 21:46:30.223 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905052' LIMIT 0,1 
2022-03-17 21:46:30.224 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 21:46:30.310 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 21:46:30.312 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-03-17 21:46:30.312 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-03-17 21:46:30.404 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-03-17 21:46:30.404 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51905041","gparentId":"0","partnerId":"51905041","distId":"0","level":"1","type":3,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905041","parentId":"51905043","gparentId":"0","partnerId":"51905043","distId":"0","level":"1","type":0,"defaulted":"0","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.200000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905043","parentId":"51905052","gparentId":"0","partnerId":"51905052","distId":"0","level":"1","type":3,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51905052","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.700000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.200000,"rebateUserRatio":0.300000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.000000,"userLossGivingBonsRate":0.000000}}]
2022-03-17 21:46:30.406 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='' 
2022-03-17 21:46:30.406 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-03-17 21:46:30.506 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 1
2022-03-17 21:46:30.507 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=16, size=0.0345349200000000, preBalance=35718.5506040040000000, postBalance=35718.5851389240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=11904, note=手续费返佣：0.03453492,单号来源:11904,用户来源: 51905058, createdDate=2022-03-17 20:17:39, fromUserId=51905058, total=null)]
2022-03-17 21:46:30.508 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-03-17 21:46:30.508 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0345349200000000
2022-03-17 21:46:30.508 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:35718.5506040040000000,分佣金额:0.0345349200000000,之后余额:35718.5851389240000000
2022-03-17 21:46:30.508 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-03-17 22:35:06.401 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=25m37s272ms).
2022-03-17 22:37:32.449 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 22:37:32.460 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 22:37:52.573 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5002 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 22:37:57.583 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 28757 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 22:37:57.584 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 22:37:58.495 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 22:37:58.497 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 22:37:58.517 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 22:37:58.522 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 22:37:58.523 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 22:37:58.532 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 22:37:58.543 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 22:37:58.544 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 22:37:58.563 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2022-03-17 22:37:59.244 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 22:37:59.291 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 22:37:59.291 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 22:37:59.292 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 22:37:59.391 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 22:37:59.391 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1749 ms
2022-03-17 22:38:00.616 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 22:38:01.412 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 22:38:01.413 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 22:38:01.413 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 22:38:01.687 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 22:38:01.704 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 22:38:01.717 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.679 seconds (JVM running for 25.169)
2022-03-17 22:39:06.144 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 22:39:06.145 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 22:39:06.147 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2022-03-17 22:39:06.420 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 22:39:07.715 [http-nio-10090-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 22:39:07.727 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:39:07.760 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 22:39:07.874 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 22:39:07.880 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:39:07.880 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 22:39:07.967 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 22:39:07.968 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:39:07.968 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 22:39:08.070 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 22:39:08.072 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 22:39:08.072 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 22:39:08.163 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 22:39:08.309 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=user_balance, currencyId=6, balance=9642252.0406304800000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=224.0814000000000000, hold=null),assert_user_balance:UserBalanceChain(userId=51905058, currencyId=6, balance=97.3400000000000000, hold=null)
2022-03-17 22:41:01.670 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-17 22:41:01.681 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-03-17 22:41:21.777 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5005 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-03-17 22:41:26.786 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 28771 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-03-17 22:41:26.787 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-03-17 22:41:27.638 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 22:41:27.640 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-03-17 22:41:27.659 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Elasticsearch repository interfaces.
2022-03-17 22:41:27.664 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 22:41:27.664 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-03-17 22:41:27.672 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-03-17 22:41:27.683 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-03-17 22:41:27.685 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-03-17 22:41:27.700 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2022-03-17 22:41:28.379 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-03-17 22:41:28.391 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-03-17 22:41:28.391 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-03-17 22:41:28.391 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-03-17 22:41:28.513 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-03-17 22:41:28.514 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1667 ms
2022-03-17 22:41:29.591 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-03-17 22:41:30.343 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-03-17 22:41:30.345 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-03-17 22:41:30.345 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-03-17 22:41:30.583 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-03-17 22:41:30.600 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-03-17 22:41:30.610 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.439 seconds (JVM running for 24.936)
2022-03-17 22:41:36.297 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-17 22:41:36.298 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-03-17 22:41:36.299 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-03-17 22:41:36.545 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-03-17 22:41:38.015 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-03-17 22:41:38.028 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:41:38.061 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 22:41:38.183 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 22:41:38.190 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:41:38.190 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 22:41:38.292 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 22:41:38.293 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:41:38.293 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 22:41:38.410 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 22:41:38.411 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 22:41:38.411 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 22:41:38.498 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 22:41:38.669 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=user_balance, currencyId=6, balance=9642252.0406304800000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=otc_user_balance, currencyId=6, balance=224.0814000000000000, hold=null),assert_user_balance:UserBalanceChain(userId=asset_user_balance, currencyId=6, balance=97.3400000000000000, hold=null)
2022-03-17 22:42:37.756 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:42:37.758 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 22:42:38.152 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 22:42:38.153 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:42:38.153 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 22:42:38.255 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 22:42:38.256 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:42:38.257 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 22:42:38.362 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 22:42:38.364 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 22:42:38.364 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 22:42:38.457 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 22:42:38.503 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=user_balance, currencyId=6, balance=9642252.0406304800000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=otc_user_balance, currencyId=6, balance=224.0814000000000000, hold=null),assert_user_balance:UserBalanceChain(userId=asset_user_balance, currencyId=6, balance=97.3400000000000000, hold=null)
2022-03-17 22:42:42.674 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:42:42.675 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 22:42:42.788 [http-nio-10090-exec-4] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 22:42:42.789 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:42:42.790 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 22:42:42.891 [http-nio-10090-exec-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 22:42:42.892 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:42:42.893 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 22:42:42.993 [http-nio-10090-exec-4] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 22:42:42.994 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 22:42:42.995 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 22:42:43.102 [http-nio-10090-exec-4] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 22:42:43.152 [http-nio-10090-exec-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=user_balance, currencyId=6, balance=9642252.0406304800000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=otc_user_balance, currencyId=6, balance=224.0814000000000000, hold=null),assert_user_balance:UserBalanceChain(userId=asset_user_balance, currencyId=6, balance=97.3400000000000000, hold=null)
2022-03-17 22:42:44.784 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:42:44.785 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-03-17 22:42:44.891 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-03-17 22:42:44.892 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:42:44.893 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-03-17 22:42:44.998 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 0
2022-03-17 22:42:44.999 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905058' LIMIT 0,1 
2022-03-17 22:42:45.000 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-03-17 22:42:45.096 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-03-17 22:42:45.097 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905058' AND `currency_id` = '6' LIMIT 0,1000 
2022-03-17 22:42:45.098 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-03-17 22:42:45.197 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-03-17 22:42:45.236 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905058,账户user_balance:UserBalanceChain(userId=user_balance, currencyId=6, balance=9642252.0406304800000000, hold=0E-16),user_partner_balance:null,otc_user_balance:UserBalanceChain(userId=otc_user_balance, currencyId=6, balance=224.0814000000000000, hold=null),assert_user_balance:UserBalanceChain(userId=asset_user_balance, currencyId=6, balance=97.3400000000000000, hold=null)
2022-03-17 23:06:06.459 [http-nio-10090-exec-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2022-03-17 23:06:07.857 [http-nio-10090-exec-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2022-03-17 23:06:07.858 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_intgr`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_intgr`.`intgr_message` WHERE `template_params` LIKE '%code%' ) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 23:06:07.859 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==> Parameters: 
2022-03-17 23:06:09.080 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - <==      Total: 10
2022-03-17 23:06:09.178 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_intgr`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_intgr`.`intgr_message` WHERE `template_params` LIKE '%code%' ) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 23:06:09.179 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==> Parameters: 
2022-03-17 23:06:09.560 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - <==      Total: 10
2022-03-17 23:06:20.272 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_cfd`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_cfd`.`intgr_message` WHERE `template_params` LIKE '%code%' ) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 23:06:20.272 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - ==> Parameters: 
2022-03-17 23:06:20.657 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - <==      Total: 10
2022-03-17 23:06:25.663 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_intgr`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_intgr`.`intgr_message` WHERE `template_params` LIKE '%code%' ) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 23:06:25.664 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - ==> Parameters: 
2022-03-17 23:06:26.085 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.test.SmsEmailCode.getList - <==      Total: 10
2022-03-17 23:06:26.806 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - ==>  Preparing: SELECT id,created_date as createdDate,mobile,email,template_params as templateParams,status FROM `bib_cfd`.`intgr_message` WHERE `template_code` IN (SELECT DISTINCT template_code FROM `bib_cfd`.`intgr_message` WHERE `template_params` LIKE '%code%' ) ORDER BY `id` DESC LIMIT 0,10 
2022-03-17 23:06:26.807 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - ==> Parameters: 
2022-03-17 23:06:27.133 [http-nio-10090-exec-6] DEBUG com.zmj.demo.dao.dev1.SmsEmailCodeDao.getSmsList - <==      Total: 10
2022-03-17 23:10:01.781 [HikariPool-2 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Thread starvation or clock leap detected (housekeeper delta=53s795ms).
2022-03-17 23:10:02.186 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=53s858ms).
2022-03-18 10:02:02.539 [HikariPool-2 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Thread starvation or clock leap detected (housekeeper delta=10h52m739ms).
2022-03-18 10:02:02.844 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=10h52m658ms).
2022-03-18 10:02:30.927 [HikariPool-2 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Retrograde clock change detected (housekeeper delta=28s406ms), soft-evicting connections from pool.
2022-03-18 10:02:31.183 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Retrograde clock change detected (housekeeper delta=28s339ms), soft-evicting connections from pool.
2022-03-18 10:17:33.861 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2022-03-18 10:17:33.867 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2022-03-18 10:17:33.868 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-03-18 10:17:33.875 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
