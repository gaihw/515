2022-06-12 15:23:17.693 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 4996 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-06-12 15:23:22.698 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 59127 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-06-12 15:23:22.699 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-06-12 15:23:23.763 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 15:23:23.767 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-06-12 15:23:23.793 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 0 Elasticsearch repository interfaces.
2022-06-12 15:23:23.798 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 15:23:23.798 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-06-12 15:23:23.806 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-06-12 15:23:23.821 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 15:23:23.823 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-06-12 15:23:23.849 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2022-06-12 15:23:24.597 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-06-12 15:23:24.649 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-06-12 15:23:24.650 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-06-12 15:23:24.650 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-06-12 15:23:24.749 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-06-12 15:23:24.749 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1985 ms
2022-06-12 15:23:25.823 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-06-12 15:23:27.070 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-06-12 15:23:27.072 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-06-12 15:23:27.072 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-06-12 15:23:27.465 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-06-12 15:23:27.483 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-06-12 15:23:27.495 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 25.536 seconds (JVM running for 26.11)
2022-06-12 15:23:28.333 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onOpen ------
2022-06-12 15:23:28.461 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"subed","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018608571} --------
2022-06-12 15:23:28.565 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018608418,"tick":{"bids":[[0.06525,311],[0.06523,736],[0.06521,2343],[0.06519,1072],[0.06517,2056],[0.06515,2310],[0.06513,2323],[0.06511,2915],[0.06509,9181],[0.06507,8260],[0.06505,6601],[0.06503,5367],[0.06501,4979],[0.06499,2390],[0.06497,5576],[0.06495,1900],[0.06493,1419],[0.06491,4392],[0.06489,7526],[0.06487,1629],[0.06485,5906],[0.06483,7198],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,93],[0.06529,108],[0.06531,533],[0.06533,2736],[0.06535,3762],[0.06537,2784],[0.06539,3746],[0.06541,5538],[0.06543,4255],[0.06545,11268],[0.06547,7577],[0.06549,8355],[0.06551,2567],[0.06553,1818],[0.06555,6791],[0.06557,12899],[0.06559,11530],[0.06561,3195],[0.06563,13365],[0.06565,4412],[0.06567,9298],[0.06569,8717],[0.06571,10803],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018608415,"sequence":10668581}} --------
2022-06-12 15:23:28.568 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"subed","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018608600} --------
2022-06-12 15:23:28.568 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018608246,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,126],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3383],[0.07441,2813],[0.07439,5214],[0.07437,4409],[0.07435,1717],[0.07433,2959],[0.07431,3733],[0.07429,3865],[0.07427,2635],[0.07425,4257],[0.07423,1619],[0.07421,2643],[0.07419,3649],[0.07417,1921],[0.07415,1330],[0.07413,263],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,208],[0.07465,1285],[0.07467,2513],[0.07469,3761],[0.07471,3292],[0.07473,5360],[0.07475,4659],[0.07477,4720],[0.07479,3467],[0.07481,2808],[0.07483,5774],[0.07485,4258],[0.07487,741],[0.07489,3661],[0.07491,1541],[0.07493,1374],[0.07495,1789],[0.07497,2969],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018608243,"sequence":10401319}} --------
2022-06-12 15:23:28.858 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018608900,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,126],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3383],[0.07441,2813],[0.07439,5214],[0.07437,4409],[0.07435,1717],[0.07433,2959],[0.07431,3733],[0.07429,3865],[0.07427,2635],[0.07425,4257],[0.07423,1619],[0.07421,2643],[0.07419,3649],[0.07417,1921],[0.07415,1330],[0.07413,263],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,208],[0.07465,1285],[0.07467,2513],[0.07469,3761],[0.07471,3292],[0.07473,5360],[0.07475,4659],[0.07477,4720],[0.07479,3467],[0.07481,2808],[0.07483,5774],[0.07485,4258],[0.07487,741],[0.07489,3661],[0.07491,1541],[0.07493,1374],[0.07495,1789],[0.07497,2969],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018608897,"sequence":10401320}} --------
2022-06-12 15:23:28.861 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018608961,"tick":{"bids":[[0.06525,311],[0.06523,736],[0.06521,351],[0.06519,1072],[0.06517,2056],[0.06515,2310],[0.06513,2323],[0.06511,2915],[0.06509,9181],[0.06507,8260],[0.06505,6601],[0.06503,5367],[0.06501,4979],[0.06499,2390],[0.06497,5576],[0.06495,1900],[0.06493,1419],[0.06491,4392],[0.06489,7526],[0.06487,1629],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,93],[0.06529,108],[0.06531,533],[0.06533,48],[0.06535,130],[0.06537,2784],[0.06539,3746],[0.06541,5538],[0.06543,4255],[0.06545,11268],[0.06547,7577],[0.06549,8355],[0.06551,2567],[0.06553,1818],[0.06555,6791],[0.06557,12899],[0.06559,11530],[0.06561,3195],[0.06563,13365],[0.06565,4412],[0.06567,9298],[0.06569,8717],[0.06571,10803],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018608958,"sequence":10668585}} --------
2022-06-12 15:23:28.990 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018609104,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,126],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3383],[0.07441,2813],[0.07439,5214],[0.07437,4409],[0.07435,1717],[0.07433,2959],[0.07431,5339],[0.07429,2259],[0.07427,2635],[0.07425,4257],[0.07423,1619],[0.07421,2643],[0.07419,3649],[0.07417,2029],[0.07415,1454],[0.07413,263],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,208],[0.07465,1285],[0.07467,2513],[0.07469,3761],[0.07471,3292],[0.07473,5360],[0.07475,4659],[0.07477,4720],[0.07479,3467],[0.07481,2808],[0.07483,5734],[0.07485,4258],[0.07487,741],[0.07489,3939],[0.07491,1541],[0.07493,1374],[0.07495,1789],[0.07497,2969],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018609102,"sequence":10401341}} --------
2022-06-12 15:23:29.069 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018609166,"tick":{"bids":[[0.06525,311],[0.06523,736],[0.06521,351],[0.06519,1072],[0.06517,2056],[0.06515,2310],[0.06513,2323],[0.06511,2915],[0.06509,9181],[0.06507,8260],[0.06505,6601],[0.06503,5367],[0.06501,5576],[0.06499,1900],[0.06497,1419],[0.06495,4392],[0.06493,7526],[0.06491,1629],[0.06489,5906],[0.06487,7198],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,93],[0.06529,108],[0.06531,533],[0.06533,48],[0.06535,130],[0.06537,2784],[0.06539,3746],[0.06541,5538],[0.06543,4255],[0.06545,11268],[0.06547,7577],[0.06549,8355],[0.06551,2567],[0.06553,12899],[0.06555,11530],[0.06557,3195],[0.06559,13365],[0.06561,4412],[0.06563,9298],[0.06565,8717],[0.06567,10803],[0.06569,2147483647]],"symbolName":"dogeusdt","ts":1655018609164,"sequence":10668602}} --------
2022-06-12 15:23:29.371 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018609382,"tick":{"bids":[[0.06525,311],[0.06523,736],[0.06521,351],[0.06519,2310],[0.06517,1940],[0.06515,4142],[0.06513,7954],[0.06511,8260],[0.06509,6601],[0.06507,5367],[0.06505,4979],[0.06503,2390],[0.06501,5576],[0.06499,1900],[0.06497,1419],[0.06495,4392],[0.06493,7526],[0.06491,1629],[0.06489,5906],[0.06487,7198],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,93],[0.06529,108],[0.06531,533],[0.06533,48],[0.06535,130],[0.06537,5538],[0.06539,4255],[0.06541,11268],[0.06543,7455],[0.06545,8355],[0.06547,2567],[0.06549,1818],[0.06551,6791],[0.06553,12899],[0.06555,11530],[0.06557,3195],[0.06559,13365],[0.06561,4412],[0.06563,9298],[0.06565,8717],[0.06567,10803],[0.06569,2147483647]],"symbolName":"dogeusdt","ts":1655018609379,"sequence":10668619}} --------
2022-06-12 15:23:29.882 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018609959,"tick":{"bids":[[0.06525,371],[0.06523,1023],[0.06521,2170],[0.06519,2310],[0.06517,1940],[0.06515,4142],[0.06513,7954],[0.06511,8260],[0.06509,6601],[0.06507,5367],[0.06505,4979],[0.06503,2390],[0.06501,5576],[0.06499,1900],[0.06497,1419],[0.06495,4392],[0.06493,7526],[0.06491,1629],[0.06489,5906],[0.06487,7198],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,93],[0.06529,55],[0.06531,130],[0.06533,2784],[0.06535,3746],[0.06537,5538],[0.06539,4255],[0.06541,11268],[0.06543,7455],[0.06545,8355],[0.06547,2567],[0.06549,1818],[0.06551,6791],[0.06553,12899],[0.06555,11530],[0.06557,3195],[0.06559,13365],[0.06561,4412],[0.06563,9298],[0.06565,8717],[0.06567,10803],[0.06569,2147483647]],"symbolName":"dogeusdt","ts":1655018609957,"sequence":10668627}} --------
2022-06-12 15:23:30.067 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018610163,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,124],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3383],[0.07441,3393],[0.07439,5214],[0.07437,4409],[0.07435,1717],[0.07433,2959],[0.07431,5339],[0.07429,2259],[0.07427,2635],[0.07425,4257],[0.07423,1619],[0.07421,2643],[0.07419,3649],[0.07417,2029],[0.07415,1454],[0.07413,263],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,213],[0.07465,1285],[0.07467,2513],[0.07469,3869],[0.07471,3292],[0.07473,5360],[0.07475,4857],[0.07477,4720],[0.07479,3467],[0.07481,2808],[0.07483,5734],[0.07485,4258],[0.07487,741],[0.07489,3939],[0.07491,1541],[0.07493,1374],[0.07495,1789],[0.07497,2969],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018610160,"sequence":10401362}} --------
2022-06-12 15:23:30.069 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018610164,"tick":{"bids":[[0.06525,371],[0.06523,1023],[0.06521,2170],[0.06519,2310],[0.06517,1940],[0.06515,4142],[0.06513,7954],[0.06511,8260],[0.06509,6601],[0.06507,5367],[0.06505,4979],[0.06503,2390],[0.06501,5576],[0.06499,1900],[0.06497,1419],[0.06495,4392],[0.06493,7526],[0.06491,1629],[0.06489,5906],[0.06487,7198],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,93],[0.06529,55],[0.06531,130],[0.06533,2784],[0.06535,3746],[0.06537,5538],[0.06539,4255],[0.06541,11268],[0.06543,7455],[0.06545,8355],[0.06547,2567],[0.06549,1818],[0.06551,6791],[0.06553,12899],[0.06555,11530],[0.06557,3337],[0.06559,13365],[0.06561,4412],[0.06563,9298],[0.06565,8717],[0.06567,10803],[0.06569,2147483647]],"symbolName":"dogeusdt","ts":1655018610158,"sequence":10668644}} --------
2022-06-12 15:23:30.248 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018610364,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,124],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3383],[0.07441,3393],[0.07439,5214],[0.07437,4409],[0.07435,1717],[0.07433,2959],[0.07431,5457],[0.07429,2259],[0.07427,2635],[0.07425,4252],[0.07423,1619],[0.07421,2648],[0.07419,3649],[0.07417,2029],[0.07415,1579],[0.07413,263],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,213],[0.07465,1285],[0.07467,2513],[0.07469,3869],[0.07471,3292],[0.07473,5360],[0.07475,4857],[0.07477,4720],[0.07479,3467],[0.07481,2808],[0.07483,6052],[0.07485,4258],[0.07487,741],[0.07489,3779],[0.07491,1301],[0.07493,1374],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018610361,"sequence":10401386}} --------
2022-06-12 15:23:30.259 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018610369,"tick":{"bids":[[0.06525,371],[0.06523,1023],[0.06521,2553],[0.06519,1967],[0.06517,2294],[0.06515,2915],[0.06513,8809],[0.06511,8260],[0.06509,6570],[0.06507,5367],[0.06505,4979],[0.06503,2390],[0.06501,5576],[0.06499,1900],[0.06497,1419],[0.06495,4392],[0.06493,7526],[0.06491,1629],[0.06489,5906],[0.06487,7198],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,93],[0.06529,55],[0.06531,130],[0.06533,2784],[0.06535,3868],[0.06537,5538],[0.06539,4255],[0.06541,11390],[0.06543,7455],[0.06545,8355],[0.06547,2567],[0.06549,1818],[0.06551,6791],[0.06553,12899],[0.06555,11530],[0.06557,3337],[0.06559,13365],[0.06561,4412],[0.06563,9298],[0.06565,8717],[0.06567,10803],[0.06569,2147483647]],"symbolName":"dogeusdt","ts":1655018610366,"sequence":10668663}} --------
2022-06-12 15:23:30.597 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018610622,"tick":{"bids":[[0.06525,373],[0.06523,1381],[0.06521,2553],[0.06519,1967],[0.06517,2294],[0.06515,2915],[0.06513,8809],[0.06511,8260],[0.06509,6570],[0.06507,5367],[0.06505,4979],[0.06503,2390],[0.06501,5576],[0.06499,1900],[0.06497,1419],[0.06495,4392],[0.06493,7526],[0.06491,1629],[0.06489,5906],[0.06487,7198],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,93],[0.06529,56],[0.06531,130],[0.06533,2764],[0.06535,3868],[0.06537,5538],[0.06539,4255],[0.06541,11390],[0.06543,7455],[0.06545,8355],[0.06547,2567],[0.06549,1818],[0.06551,6791],[0.06553,12899],[0.06555,11530],[0.06557,3337],[0.06559,13365],[0.06561,4412],[0.06563,9298],[0.06565,8717],[0.06567,10803],[0.06569,2147483647]],"symbolName":"dogeusdt","ts":1655018610618,"sequence":10668669}} --------
2022-06-12 15:23:30.801 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018610919,"tick":{"bids":[[0.06525,373],[0.06523,1381],[0.06521,2553],[0.06519,1967],[0.06517,2294],[0.06515,2915],[0.06513,8809],[0.06511,8260],[0.06509,6570],[0.06507,5367],[0.06505,4979],[0.06503,2390],[0.06501,5576],[0.06499,1900],[0.06497,1419],[0.06495,4392],[0.06493,7526],[0.06491,1629],[0.06489,5906],[0.06487,7198],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,93],[0.06529,56],[0.06531,130],[0.06533,2764],[0.06535,3868],[0.06537,5538],[0.06539,4255],[0.06541,11390],[0.06543,7455],[0.06545,8355],[0.06547,2567],[0.06549,1818],[0.06551,6791],[0.06553,12899],[0.06555,11530],[0.06557,3337],[0.06559,13365],[0.06561,4412],[0.06563,9298],[0.06565,8717],[0.06567,10803],[0.06569,2147483647]],"symbolName":"dogeusdt","ts":1655018610916,"sequence":10668670}} --------
2022-06-12 15:23:31.111 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018611123,"tick":{"bids":[[0.06525,373],[0.06523,1381],[0.06521,2553],[0.06519,1967],[0.06517,2294],[0.06515,2915],[0.06513,8809],[0.06511,8260],[0.06509,6570],[0.06507,5367],[0.06505,4979],[0.06503,2390],[0.06502,2261],[0.06500,5576],[0.06498,2779],[0.06496,1450],[0.06494,3672],[0.06492,7366],[0.06490,1469],[0.06488,6066],[0.06486,7198],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,93],[0.06529,56],[0.06531,130],[0.06533,2764],[0.06535,3868],[0.06537,5538],[0.06539,4255],[0.06541,11390],[0.06543,7455],[0.06545,8355],[0.06547,2567],[0.06549,1818],[0.06550,6791],[0.06552,12899],[0.06554,11530],[0.06556,3337],[0.06558,13365],[0.06560,4412],[0.06562,9071],[0.06564,8045],[0.06566,11476],[0.06568,2147483647]],"symbolName":"dogeusdt","ts":1655018611121,"sequence":10668689}} --------
2022-06-12 15:23:31.156 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018611270,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,82],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3383],[0.07441,3393],[0.07439,5214],[0.07437,4409],[0.07435,1717],[0.07433,2959],[0.07431,5457],[0.07429,2259],[0.07427,2635],[0.07425,4252],[0.07423,1619],[0.07421,2648],[0.07419,3649],[0.07417,2029],[0.07415,1579],[0.07413,263],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,201],[0.07465,1285],[0.07467,2513],[0.07469,4083],[0.07471,3292],[0.07473,5360],[0.07475,4857],[0.07477,4720],[0.07479,3355],[0.07481,2808],[0.07483,6052],[0.07485,4258],[0.07487,741],[0.07489,3779],[0.07491,1301],[0.07493,1374],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018611268,"sequence":10401404}} --------
2022-06-12 15:23:31.220 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018611335,"tick":{"bids":[[0.06525,373],[0.06523,1381],[0.06521,2553],[0.06520,2877],[0.06518,1967],[0.06516,2294],[0.06514,2915],[0.06512,8809],[0.06510,8015],[0.06508,6601],[0.06506,5367],[0.06504,4979],[0.06502,2261],[0.06500,5576],[0.06498,2779],[0.06496,1450],[0.06494,3672],[0.06492,7366],[0.06490,1469],[0.06488,6066],[0.06486,7198],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,93],[0.06529,56],[0.06531,130],[0.06533,2764],[0.06534,3868],[0.06536,6158],[0.06538,4017],[0.06540,11268],[0.06542,7455],[0.06544,8355],[0.06546,2439],[0.06548,1818],[0.06550,6791],[0.06552,12899],[0.06554,11530],[0.06556,3337],[0.06558,13365],[0.06560,4412],[0.06562,9071],[0.06564,8045],[0.06566,11476],[0.06568,2147483647]],"symbolName":"dogeusdt","ts":1655018611333,"sequence":10668706}} --------
2022-06-12 15:23:31.359 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018611477,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,82],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3383],[0.07441,3393],[0.07439,5214],[0.07437,4409],[0.07435,1717],[0.07433,2959],[0.07431,5457],[0.07429,2259],[0.07427,2635],[0.07425,4252],[0.07423,1619],[0.07421,2648],[0.07419,3531],[0.07417,2029],[0.07415,1579],[0.07413,263],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,201],[0.07465,1285],[0.07467,2513],[0.07469,4083],[0.07471,3292],[0.07473,5360],[0.07475,4857],[0.07477,4720],[0.07479,3355],[0.07481,3075],[0.07483,5852],[0.07485,4338],[0.07487,581],[0.07489,4019],[0.07491,1280],[0.07493,1396],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018611474,"sequence":10401428}} --------
2022-06-12 15:23:31.725 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018611716,"tick":{"bids":[[0.06525,373],[0.06524,328],[0.06522,1082],[0.06520,2877],[0.06518,1967],[0.06516,2294],[0.06514,2915],[0.06512,8809],[0.06510,8015],[0.06508,6601],[0.06506,5367],[0.06504,4979],[0.06502,2261],[0.06500,5576],[0.06498,2779],[0.06496,1450],[0.06494,3672],[0.06492,7366],[0.06490,1469],[0.06488,6066],[0.06486,7198],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06530,150],[0.06532,2725],[0.06534,3868],[0.06536,6158],[0.06538,4017],[0.06540,11268],[0.06542,7455],[0.06544,8355],[0.06546,2439],[0.06548,1818],[0.06550,6791],[0.06552,12899],[0.06554,11530],[0.06556,3337],[0.06558,13365],[0.06560,4412],[0.06562,9071],[0.06564,8045],[0.06566,11476],[0.06568,2147483647]],"symbolName":"dogeusdt","ts":1655018611710,"sequence":10668712}} --------
2022-06-12 15:23:31.864 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018611963,"tick":{"bids":[[0.06525,373],[0.06524,328],[0.06522,1082],[0.06520,2877],[0.06518,1967],[0.06516,2294],[0.06514,2915],[0.06512,8809],[0.06510,8015],[0.06508,6601],[0.06506,5367],[0.06504,4979],[0.06502,2261],[0.06500,5576],[0.06498,2779],[0.06496,1450],[0.06494,3672],[0.06492,7366],[0.06490,1469],[0.06488,6066],[0.06486,7198],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06530,150],[0.06532,2725],[0.06534,3868],[0.06536,6158],[0.06538,4017],[0.06540,11268],[0.06542,7455],[0.06544,8355],[0.06546,2439],[0.06548,1818],[0.06550,6791],[0.06552,12899],[0.06554,11530],[0.06556,3337],[0.06558,13365],[0.06560,4412],[0.06562,9071],[0.06564,8045],[0.06566,11476],[0.06568,2147483647]],"symbolName":"dogeusdt","ts":1655018611960,"sequence":10668713}} --------
2022-06-12 15:23:32.052 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018612168,"tick":{"bids":[[0.06525,373],[0.06524,328],[0.06522,1082],[0.06520,2877],[0.06518,1967],[0.06516,2294],[0.06514,2915],[0.06512,8809],[0.06510,8015],[0.06508,6601],[0.06506,5367],[0.06504,4979],[0.06502,2261],[0.06500,5576],[0.06499,4958],[0.06497,3352],[0.06495,2710],[0.06493,5576],[0.06491,2619],[0.06489,1450],[0.06487,3672],[0.06485,7342],[0.06483,4744],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06530,150],[0.06532,2725],[0.06534,3868],[0.06536,6158],[0.06538,4017],[0.06540,11268],[0.06542,7455],[0.06544,8355],[0.06546,2439],[0.06548,1818],[0.06550,6791],[0.06552,12899],[0.06554,11530],[0.06555,11530],[0.06557,1865],[0.06559,14835],[0.06561,4412],[0.06563,9071],[0.06565,4015],[0.06567,10676],[0.06569,6511],[0.06571,1582],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018612166,"sequence":10668732}} --------
2022-06-12 15:23:32.123 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018612238,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,160],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3383],[0.07441,3393],[0.07439,5106],[0.07437,4409],[0.07435,1717],[0.07433,2959],[0.07431,5457],[0.07429,2259],[0.07427,2635],[0.07425,4252],[0.07423,1619],[0.07421,2648],[0.07419,3531],[0.07417,2029],[0.07415,1579],[0.07413,263],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,47],[0.07465,1206],[0.07467,1925],[0.07469,4858],[0.07471,3292],[0.07473,5360],[0.07475,5011],[0.07477,4720],[0.07479,3355],[0.07481,3075],[0.07483,5852],[0.07485,4338],[0.07487,581],[0.07489,4019],[0.07491,1280],[0.07493,1396],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018612236,"sequence":10401446}} --------
2022-06-12 15:23:32.265 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018612376,"tick":{"bids":[[0.06525,373],[0.06524,328],[0.06522,1082],[0.06520,2877],[0.06519,1642],[0.06517,1051],[0.06515,780],[0.06513,3170],[0.06511,2729],[0.06509,2118],[0.06507,4964],[0.06505,6953],[0.06503,8589],[0.06501,6724],[0.06499,4958],[0.06497,3352],[0.06495,2710],[0.06493,5576],[0.06491,2619],[0.06489,1450],[0.06487,3672],[0.06485,7342],[0.06483,4744],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06530,150],[0.06532,2725],[0.06534,3868],[0.06536,6158],[0.06537,3931],[0.06539,5336],[0.06541,13416],[0.06543,6025],[0.06545,6418],[0.06547,2729],[0.06549,2176],[0.06551,6791],[0.06553,7967],[0.06555,11530],[0.06557,1865],[0.06559,14835],[0.06561,4412],[0.06563,9071],[0.06565,4015],[0.06567,10676],[0.06569,6511],[0.06571,1582],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018612374,"sequence":10668751}} --------
2022-06-12 15:23:32.329 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018612443,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,160],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3383],[0.07441,3393],[0.07439,5106],[0.07437,4409],[0.07435,1717],[0.07433,2959],[0.07431,5457],[0.07429,2259],[0.07427,2635],[0.07425,4252],[0.07423,1619],[0.07421,2788],[0.07419,3391],[0.07417,2029],[0.07415,1579],[0.07413,388],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,47],[0.07465,1206],[0.07467,1925],[0.07469,4858],[0.07471,3292],[0.07473,5360],[0.07475,5011],[0.07477,4720],[0.07479,3355],[0.07481,3075],[0.07483,4285],[0.07485,5904],[0.07487,581],[0.07489,4019],[0.07491,1280],[0.07493,1374],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018612440,"sequence":10401469}} --------
2022-06-12 15:23:32.952 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018613027,"tick":{"bids":[[0.06525,373],[0.06524,328],[0.06522,1082],[0.06521,76],[0.06519,1642],[0.06517,1051],[0.06515,780],[0.06513,3170],[0.06511,2729],[0.06509,2118],[0.06507,4964],[0.06505,6953],[0.06503,8589],[0.06501,6724],[0.06499,4958],[0.06497,3352],[0.06495,2710],[0.06493,5576],[0.06491,2619],[0.06489,1450],[0.06487,3672],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06530,150],[0.06532,2725],[0.06533,1672],[0.06535,2561],[0.06537,3931],[0.06539,5336],[0.06541,13416],[0.06543,6025],[0.06545,6418],[0.06547,2729],[0.06549,2176],[0.06551,6791],[0.06553,7967],[0.06555,11530],[0.06557,1865],[0.06559,14835],[0.06561,4412],[0.06563,9071],[0.06565,4015],[0.06567,10676],[0.06569,6511],[0.06571,1582],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018613025,"sequence":10668755}} --------
2022-06-12 15:23:33.136 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018613239,"tick":{"bids":[[0.06525,373],[0.06524,328],[0.06522,1082],[0.06521,76],[0.06519,1642],[0.06517,1051],[0.06515,780],[0.06513,3170],[0.06511,2729],[0.06509,2118],[0.06507,4964],[0.06505,6612],[0.06503,4835],[0.06501,3470],[0.06499,2887],[0.06497,5271],[0.06495,2619],[0.06493,1450],[0.06491,3808],[0.06489,7342],[0.06487,4744],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06530,150],[0.06532,2725],[0.06533,1672],[0.06535,2561],[0.06537,3931],[0.06539,5336],[0.06541,13416],[0.06543,6025],[0.06545,6418],[0.06547,2729],[0.06549,8181],[0.06551,13080],[0.06553,1941],[0.06555,14970],[0.06557,3186],[0.06559,10298],[0.06561,4015],[0.06563,10817],[0.06565,6831],[0.06567,5163],[0.06569,2147483647]],"symbolName":"dogeusdt","ts":1655018613236,"sequence":10668776}} --------
2022-06-12 15:23:33.137 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018613245,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,117],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3383],[0.07441,3393],[0.07439,5214],[0.07437,3939],[0.07435,2299],[0.07433,2959],[0.07431,5457],[0.07429,2259],[0.07427,2635],[0.07425,4252],[0.07423,1619],[0.07421,2788],[0.07419,3391],[0.07417,2029],[0.07415,1579],[0.07413,388],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,69],[0.07465,1206],[0.07467,1925],[0.07469,4858],[0.07471,3292],[0.07473,5360],[0.07475,5011],[0.07477,4720],[0.07479,3355],[0.07481,3075],[0.07483,4285],[0.07485,5904],[0.07487,581],[0.07489,4019],[0.07491,1280],[0.07493,1374],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018613242,"sequence":10401489}} --------
2022-06-12 15:23:33.289 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1655018613320"} --------
2022-06-12 15:23:33.291 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655018613320"}
2022-06-12 15:23:33.326 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018613447,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,117],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3383],[0.07441,3393],[0.07439,5214],[0.07437,3939],[0.07435,1829],[0.07433,2489],[0.07431,5457],[0.07429,2259],[0.07427,2635],[0.07425,4252],[0.07423,1619],[0.07421,2788],[0.07419,3391],[0.07417,2029],[0.07415,1657],[0.07413,309],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,69],[0.07465,1206],[0.07467,1925],[0.07469,4858],[0.07471,3292],[0.07473,5360],[0.07475,5011],[0.07477,4720],[0.07479,3355],[0.07481,3075],[0.07483,4285],[0.07485,5904],[0.07487,581],[0.07489,4019],[0.07491,1280],[0.07493,1374],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018613444,"sequence":10401513}} --------
2022-06-12 15:23:33.328 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018613448,"tick":{"bids":[[0.06525,373],[0.06524,328],[0.06523,2],[0.06521,993],[0.06519,396],[0.06517,2787],[0.06515,2729],[0.06513,2173],[0.06511,4954],[0.06509,7067],[0.06507,8473],[0.06505,6612],[0.06503,4835],[0.06501,3470],[0.06499,2887],[0.06497,5271],[0.06495,2619],[0.06493,1450],[0.06491,3808],[0.06489,7342],[0.06487,4744],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06530,150],[0.06531,2178],[0.06533,4624],[0.06535,6225],[0.06537,13726],[0.06539,6056],[0.06541,4847],[0.06543,4300],[0.06545,2124],[0.06547,8590],[0.06549,8181],[0.06551,13080],[0.06553,1941],[0.06555,14970],[0.06557,3186],[0.06559,10298],[0.06561,4015],[0.06563,10817],[0.06565,6831],[0.06567,5163],[0.06569,2147483647]],"symbolName":"dogeusdt","ts":1655018613446,"sequence":10668794}} --------
2022-06-12 15:23:33.975 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018614008,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,101],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3396],[0.07441,4331],[0.07439,5214],[0.07437,3939],[0.07435,1829],[0.07433,2489],[0.07431,5457],[0.07429,2259],[0.07427,2635],[0.07425,4252],[0.07423,1619],[0.07421,2788],[0.07419,3391],[0.07417,2029],[0.07415,1657],[0.07413,309],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,87],[0.07465,1206],[0.07467,2593],[0.07469,4190],[0.07471,3292],[0.07473,5249],[0.07475,4857],[0.07477,4720],[0.07479,3355],[0.07481,3075],[0.07483,4285],[0.07485,5904],[0.07487,581],[0.07489,4019],[0.07491,1280],[0.07493,1374],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018614004,"sequence":10401531}} --------
2022-06-12 15:23:33.976 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018614051,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,993],[0.06519,396],[0.06517,2787],[0.06515,2729],[0.06513,2173],[0.06511,4954],[0.06509,7067],[0.06507,8473],[0.06505,6612],[0.06503,4835],[0.06501,3470],[0.06499,2887],[0.06497,5271],[0.06495,2619],[0.06493,1450],[0.06491,3808],[0.06489,7342],[0.06487,4744],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,4624],[0.06535,6225],[0.06537,13726],[0.06539,6056],[0.06541,4847],[0.06543,4300],[0.06545,2124],[0.06547,8590],[0.06549,8181],[0.06551,13080],[0.06553,1941],[0.06555,14970],[0.06557,3186],[0.06559,10298],[0.06561,4015],[0.06563,10817],[0.06565,6831],[0.06567,5163],[0.06569,2147483647]],"symbolName":"dogeusdt","ts":1655018614047,"sequence":10668797}} --------
2022-06-12 15:23:34.149 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018614250,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,993],[0.06519,396],[0.06517,2787],[0.06515,2729],[0.06513,2173],[0.06511,4954],[0.06509,7067],[0.06507,8473],[0.06505,6612],[0.06503,4835],[0.06501,3442],[0.06499,4835],[0.06497,6640],[0.06495,2887],[0.06493,5271],[0.06491,2619],[0.06489,1450],[0.06487,3808],[0.06485,13686],[0.06483,4744],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,4624],[0.06535,6225],[0.06537,13726],[0.06539,6056],[0.06541,4847],[0.06543,4300],[0.06545,2124],[0.06547,8590],[0.06549,8181],[0.06551,13080],[0.06553,5009],[0.06555,13080],[0.06557,1941],[0.06559,18142],[0.06561,3186],[0.06563,10298],[0.06565,788],[0.06567,14272],[0.06569,6831],[0.06571,5163],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018614248,"sequence":10668818}} --------
2022-06-12 15:23:34.377 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018614256,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,101],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3396],[0.07441,4331],[0.07439,5214],[0.07437,3939],[0.07435,1829],[0.07433,2489],[0.07431,5457],[0.07429,2259],[0.07427,2635],[0.07425,4252],[0.07423,1619],[0.07421,2788],[0.07419,3391],[0.07417,2029],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,87],[0.07465,1206],[0.07467,2593],[0.07469,4190],[0.07471,3292],[0.07473,5249],[0.07475,4857],[0.07477,4720],[0.07479,3355],[0.07481,3075],[0.07483,4285],[0.07485,5904],[0.07487,581],[0.07489,4019],[0.07491,1280],[0.07493,1374],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018614253,"sequence":10401532}} --------
2022-06-12 15:23:34.379 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018614452,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,993],[0.06519,2],[0.06517,797],[0.06515,2379],[0.06513,3324],[0.06511,2881],[0.06509,2173],[0.06507,4564],[0.06505,7190],[0.06503,8473],[0.06501,3442],[0.06499,4835],[0.06497,6640],[0.06495,2887],[0.06493,5271],[0.06491,2619],[0.06489,1450],[0.06487,3808],[0.06485,13686],[0.06483,4744],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,4624],[0.06535,3951],[0.06537,5007],[0.06539,6607],[0.06541,13086],[0.06543,7115],[0.06545,4847],[0.06547,4300],[0.06549,2124],[0.06551,8590],[0.06553,5009],[0.06555,13080],[0.06557,1941],[0.06559,18142],[0.06561,3186],[0.06563,10298],[0.06565,788],[0.06567,14272],[0.06569,6831],[0.06571,5163],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018614450,"sequence":10668836}} --------
2022-06-12 15:23:34.381 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018614464,"tick":{"bids":[[0.07456,1321],[0.07455,79],[0.07453,1611],[0.07451,101],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3396],[0.07441,4331],[0.07439,1829],[0.07437,2489],[0.07435,5457],[0.07433,2259],[0.07431,2635],[0.07429,4252],[0.07427,1619],[0.07425,2788],[0.07423,3391],[0.07421,2029],[0.07419,1579],[0.07417,388],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,208],[0.07461,1285],[0.07463,87],[0.07465,1206],[0.07467,2593],[0.07469,4190],[0.07471,3292],[0.07473,5249],[0.07475,4857],[0.07477,3075],[0.07479,5892],[0.07481,4298],[0.07483,581],[0.07485,4019],[0.07487,1280],[0.07489,1374],[0.07491,1789],[0.07493,3093],[0.07495,725],[0.07497,3302],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018614461,"sequence":10401556}} --------
2022-06-12 15:23:34.900 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018615008,"tick":{"bids":[[0.07456,1321],[0.07455,92],[0.07453,1276],[0.07451,468],[0.07449,1141],[0.07447,3396],[0.07445,4331],[0.07443,4899],[0.07441,4242],[0.07439,1829],[0.07437,2489],[0.07435,5457],[0.07433,2259],[0.07431,2635],[0.07429,4252],[0.07427,1619],[0.07425,2788],[0.07423,3391],[0.07421,2029],[0.07419,1579],[0.07417,388],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,87],[0.07461,1206],[0.07463,2593],[0.07465,4190],[0.07467,3292],[0.07469,5249],[0.07471,4857],[0.07473,4720],[0.07475,3355],[0.07477,3075],[0.07479,5892],[0.07481,4298],[0.07483,581],[0.07485,4019],[0.07487,1280],[0.07489,1374],[0.07491,1789],[0.07493,3093],[0.07495,725],[0.07497,3302],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018615000,"sequence":10401574}} --------
2022-06-12 15:23:35.017 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018615137,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,13],[0.06519,2],[0.06517,797],[0.06515,2379],[0.06513,3324],[0.06511,2881],[0.06509,2173],[0.06507,4564],[0.06505,7190],[0.06503,8473],[0.06501,3442],[0.06499,4835],[0.06497,6640],[0.06495,2887],[0.06493,5271],[0.06491,2619],[0.06489,1450],[0.06487,3808],[0.06485,13686],[0.06483,4744],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,2020],[0.06535,3951],[0.06537,5007],[0.06539,6607],[0.06541,13086],[0.06543,7115],[0.06545,4847],[0.06547,4300],[0.06549,2124],[0.06551,8590],[0.06553,5009],[0.06555,13080],[0.06557,1941],[0.06559,18142],[0.06561,3186],[0.06563,10298],[0.06565,788],[0.06567,14272],[0.06569,6831],[0.06571,5163],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018615133,"sequence":10668839}} --------
2022-06-12 15:23:35.164 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018615286,"tick":{"bids":[[0.07456,1321],[0.07455,92],[0.07453,1276],[0.07451,468],[0.07449,1141],[0.07447,3396],[0.07445,4331],[0.07443,4899],[0.07441,4242],[0.07439,1829],[0.07437,2489],[0.07435,5457],[0.07433,2259],[0.07431,2635],[0.07429,4252],[0.07427,1619],[0.07425,2788],[0.07423,3391],[0.07421,2029],[0.07419,1579],[0.07417,388],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,87],[0.07461,1206],[0.07463,2593],[0.07465,4190],[0.07467,3292],[0.07469,5249],[0.07471,4857],[0.07473,4720],[0.07475,3355],[0.07477,3075],[0.07479,5892],[0.07481,4298],[0.07483,581],[0.07485,4019],[0.07487,1280],[0.07489,1374],[0.07491,1789],[0.07493,3093],[0.07495,725],[0.07497,3302],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018615283,"sequence":10401575}} --------
2022-06-12 15:23:35.218 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018615340,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,13],[0.06519,2],[0.06517,797],[0.06515,2379],[0.06513,3324],[0.06511,2881],[0.06509,2173],[0.06507,4564],[0.06505,7190],[0.06503,8473],[0.06501,3442],[0.06499,4685],[0.06497,6640],[0.06495,2887],[0.06493,5271],[0.06491,2619],[0.06489,1450],[0.06487,5040],[0.06485,13686],[0.06483,4744],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,2020],[0.06535,3951],[0.06537,5007],[0.06539,6607],[0.06541,13086],[0.06543,7115],[0.06545,4847],[0.06547,4300],[0.06549,2124],[0.06551,8590],[0.06553,5009],[0.06555,13080],[0.06557,1799],[0.06559,18142],[0.06561,4418],[0.06563,10298],[0.06565,788],[0.06567,14272],[0.06569,6831],[0.06571,5163],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018615337,"sequence":10668858}} --------
2022-06-12 15:23:35.373 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018615490,"tick":{"bids":[[0.07456,1321],[0.07455,92],[0.07453,1276],[0.07451,468],[0.07449,1141],[0.07447,3396],[0.07445,4331],[0.07443,4899],[0.07441,4242],[0.07439,1829],[0.07437,2489],[0.07435,5457],[0.07433,2259],[0.07431,2635],[0.07429,4252],[0.07427,1619],[0.07425,2783],[0.07423,3396],[0.07421,2029],[0.07419,1579],[0.07417,388],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,87],[0.07461,1206],[0.07463,2593],[0.07465,4190],[0.07467,3292],[0.07469,5249],[0.07471,4857],[0.07473,4720],[0.07475,3355],[0.07477,3075],[0.07479,5892],[0.07481,4298],[0.07483,581],[0.07485,4302],[0.07487,1301],[0.07489,1091],[0.07491,1789],[0.07493,3093],[0.07495,725],[0.07497,3302],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018615488,"sequence":10401593}} --------
2022-06-12 15:23:35.439 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018615560,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,13],[0.06519,2],[0.06517,797],[0.06515,2379],[0.06513,2941],[0.06511,2881],[0.06509,2173],[0.06507,4676],[0.06505,7340],[0.06503,8473],[0.06501,3596],[0.06499,4685],[0.06497,6640],[0.06495,2887],[0.06493,5271],[0.06491,2619],[0.06489,1450],[0.06487,5040],[0.06485,13686],[0.06483,4744],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,2020],[0.06535,3951],[0.06537,5007],[0.06539,6607],[0.06541,13319],[0.06543,7115],[0.06545,4847],[0.06547,4300],[0.06549,2124],[0.06551,8590],[0.06553,5009],[0.06555,13080],[0.06557,1799],[0.06559,18142],[0.06561,4418],[0.06563,10298],[0.06565,788],[0.06567,14272],[0.06569,6831],[0.06571,5163],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018615551,"sequence":10668872}} --------
2022-06-12 15:23:35.579 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018615692,"tick":{"bids":[[0.07456,1321],[0.07455,92],[0.07453,1276],[0.07451,468],[0.07449,1141],[0.07447,3396],[0.07445,4331],[0.07443,4899],[0.07441,4462],[0.07439,1829],[0.07437,2489],[0.07435,5457],[0.07433,2259],[0.07431,2635],[0.07429,4252],[0.07427,1619],[0.07425,2783],[0.07423,3396],[0.07421,2029],[0.07419,1579],[0.07417,388],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,87],[0.07461,1206],[0.07463,2593],[0.07465,4190],[0.07467,3292],[0.07469,5249],[0.07471,4857],[0.07473,4720],[0.07475,4942],[0.07477,3075],[0.07479,5892],[0.07481,4298],[0.07483,581],[0.07485,4302],[0.07487,1301],[0.07489,1091],[0.07491,1789],[0.07493,3093],[0.07495,725],[0.07497,3302],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018615689,"sequence":10401608}} --------
2022-06-12 15:23:36.234 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018616224,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,15],[0.06519,42],[0.06517,1032],[0.06515,2379],[0.06513,2941],[0.06511,2881],[0.06509,2173],[0.06507,4676],[0.06505,7340],[0.06503,8473],[0.06501,3596],[0.06499,4685],[0.06497,6640],[0.06495,2887],[0.06493,5271],[0.06491,2619],[0.06489,1450],[0.06487,5040],[0.06485,13686],[0.06483,4744],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,2117],[0.06535,3951],[0.06537,4386],[0.06539,6805],[0.06541,13319],[0.06543,7115],[0.06545,4847],[0.06547,4300],[0.06549,2124],[0.06551,8590],[0.06553,5009],[0.06555,13080],[0.06557,1799],[0.06559,18142],[0.06561,4418],[0.06563,10298],[0.06565,788],[0.06567,14272],[0.06569,6831],[0.06571,5163],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018616221,"sequence":10668881}} --------
2022-06-12 15:23:36.236 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018616298,"tick":{"bids":[[0.07456,1321],[0.07455,34],[0.07453,1611],[0.07451,468],[0.07449,1141],[0.07447,3396],[0.07445,4331],[0.07443,4899],[0.07441,4462],[0.07439,1829],[0.07437,2489],[0.07435,5457],[0.07433,2259],[0.07431,2635],[0.07429,4252],[0.07427,1619],[0.07425,2783],[0.07423,3396],[0.07421,2029],[0.07419,1579],[0.07417,388],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,762],[0.07461,1396],[0.07463,2403],[0.07465,4190],[0.07467,3292],[0.07469,5249],[0.07471,4857],[0.07473,4720],[0.07475,4942],[0.07477,3075],[0.07479,5892],[0.07481,4298],[0.07483,581],[0.07485,4302],[0.07487,1301],[0.07489,1091],[0.07491,1789],[0.07493,3093],[0.07495,725],[0.07497,3302],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018616296,"sequence":10401617}} --------
2022-06-12 15:23:36.321 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018616426,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,15],[0.06519,42],[0.06517,1032],[0.06515,2379],[0.06513,2941],[0.06511,2881],[0.06509,2173],[0.06507,4676],[0.06505,7340],[0.06503,8473],[0.06501,3596],[0.06499,4685],[0.06497,6640],[0.06495,2887],[0.06493,5271],[0.06491,2619],[0.06489,1450],[0.06487,5067],[0.06485,13659],[0.06483,4744],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,2117],[0.06535,3951],[0.06537,4386],[0.06539,6805],[0.06541,13319],[0.06543,7115],[0.06545,4847],[0.06547,4300],[0.06549,2124],[0.06551,8590],[0.06553,5009],[0.06555,13080],[0.06557,1799],[0.06559,14970],[0.06561,7314],[0.06563,10298],[0.06565,788],[0.06567,14272],[0.06569,6831],[0.06571,5163],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018616424,"sequence":10668896}} --------
2022-06-12 15:23:36.397 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018616505,"tick":{"bids":[[0.07456,1321],[0.07455,34],[0.07453,1611],[0.07451,468],[0.07449,1141],[0.07447,3396],[0.07445,4331],[0.07443,4899],[0.07441,4462],[0.07439,1829],[0.07437,2489],[0.07435,5457],[0.07433,2259],[0.07431,5457],[0.07429,2259],[0.07427,2635],[0.07425,4252],[0.07423,1619],[0.07421,2783],[0.07419,3396],[0.07417,2029],[0.07415,1657],[0.07413,309],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,762],[0.07461,1396],[0.07463,2403],[0.07465,4190],[0.07467,3292],[0.07469,5249],[0.07471,4857],[0.07473,4720],[0.07475,4942],[0.07477,3075],[0.07479,5892],[0.07481,4298],[0.07483,5852],[0.07485,4298],[0.07487,581],[0.07489,4179],[0.07491,1280],[0.07493,1374],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018616502,"sequence":10401638}} --------
2022-06-12 15:23:36.528 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018616642,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,15],[0.06519,42],[0.06517,1032],[0.06515,2379],[0.06513,3324],[0.06511,2881],[0.06509,2173],[0.06507,4764],[0.06505,7340],[0.06503,8473],[0.06501,3596],[0.06499,4685],[0.06497,6640],[0.06495,2887],[0.06493,5271],[0.06491,2619],[0.06489,1450],[0.06487,5067],[0.06485,13659],[0.06483,4744],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,2117],[0.06535,3951],[0.06537,4386],[0.06539,6805],[0.06541,13319],[0.06543,6209],[0.06545,4849],[0.06547,4298],[0.06549,2124],[0.06551,8590],[0.06553,8181],[0.06555,13080],[0.06557,1799],[0.06559,14970],[0.06561,7314],[0.06563,10298],[0.06565,788],[0.06567,14272],[0.06569,6831],[0.06571,5163],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018616634,"sequence":10668913}} --------
2022-06-12 15:23:37.145 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018617204,"tick":{"bids":[[0.07456,1321],[0.07455,34],[0.07453,1611],[0.07451,48],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3396],[0.07441,4331],[0.07439,4899],[0.07437,4462],[0.07435,1829],[0.07433,2489],[0.07431,5457],[0.07429,2259],[0.07427,2635],[0.07425,4252],[0.07423,1619],[0.07421,2783],[0.07419,3396],[0.07417,2029],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,762],[0.07461,1396],[0.07463,128],[0.07465,1285],[0.07467,2513],[0.07469,4190],[0.07471,3292],[0.07473,5249],[0.07475,4607],[0.07477,4720],[0.07479,3355],[0.07481,3075],[0.07483,5852],[0.07485,4298],[0.07487,581],[0.07489,4179],[0.07491,1280],[0.07493,1374],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018617202,"sequence":10401660}} --------
2022-06-12 15:23:37.240 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018617362,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,15],[0.06519,42],[0.06517,921],[0.06515,1996],[0.06513,3324],[0.06511,2881],[0.06509,2173],[0.06507,4764],[0.06505,7340],[0.06503,8473],[0.06501,3596],[0.06499,4685],[0.06497,6640],[0.06495,2887],[0.06493,5271],[0.06491,2619],[0.06489,1450],[0.06487,5067],[0.06485,13659],[0.06483,4744],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,2304],[0.06535,4012],[0.06537,4624],[0.06539,6239],[0.06541,14370],[0.06543,6209],[0.06545,4849],[0.06547,4298],[0.06549,2124],[0.06551,8590],[0.06553,8181],[0.06555,13080],[0.06557,1799],[0.06559,14970],[0.06561,7314],[0.06563,10298],[0.06565,788],[0.06567,14272],[0.06569,6831],[0.06571,5163],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018617358,"sequence":10668923}} --------
2022-06-12 15:23:37.318 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018617413,"tick":{"bids":[[0.07456,1321],[0.07455,34],[0.07453,1611],[0.07451,48],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3396],[0.07441,4462],[0.07439,1829],[0.07437,2489],[0.07435,5457],[0.07433,2259],[0.07431,2635],[0.07429,4252],[0.07427,1619],[0.07425,2783],[0.07423,3396],[0.07421,2029],[0.07419,1657],[0.07417,309],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,762],[0.07461,1396],[0.07463,128],[0.07465,1285],[0.07467,2513],[0.07469,4190],[0.07471,3292],[0.07473,4720],[0.07475,3355],[0.07477,2808],[0.07479,5852],[0.07481,4298],[0.07483,581],[0.07485,4099],[0.07487,1280],[0.07489,1374],[0.07491,1789],[0.07493,3093],[0.07495,725],[0.07497,3302],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018617410,"sequence":10401687}} --------
2022-06-12 15:23:37.449 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018617566,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,15],[0.06519,42],[0.06517,921],[0.06515,1996],[0.06513,3324],[0.06511,2881],[0.06509,2173],[0.06507,4764],[0.06505,7340],[0.06503,8473],[0.06501,3565],[0.06499,6021],[0.06497,6511],[0.06495,2887],[0.06493,5271],[0.06491,2619],[0.06489,1450],[0.06487,5121],[0.06485,7315],[0.06483,4739],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,2304],[0.06535,4012],[0.06537,4624],[0.06539,6239],[0.06541,14370],[0.06543,6209],[0.06545,4849],[0.06547,4298],[0.06549,2124],[0.06551,8590],[0.06553,8707],[0.06555,13080],[0.06557,1799],[0.06559,14970],[0.06561,7314],[0.06563,10148],[0.06565,788],[0.06567,7928],[0.06569,5464],[0.06571,5163],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018617563,"sequence":10668944}} --------
2022-06-12 15:23:37.617 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018617739,"tick":{"bids":[[0.07456,1321],[0.07455,83],[0.07453,1276],[0.07451,468],[0.07449,1141],[0.07447,3396],[0.07445,4331],[0.07443,4899],[0.07441,4462],[0.07439,1829],[0.07437,2489],[0.07435,5457],[0.07433,2259],[0.07431,2635],[0.07429,4252],[0.07427,1619],[0.07425,2783],[0.07423,3396],[0.07421,2029],[0.07419,1657],[0.07417,309],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,128],[0.07461,1285],[0.07463,2513],[0.07465,4190],[0.07467,3226],[0.07469,5249],[0.07471,4607],[0.07473,4720],[0.07475,3355],[0.07477,2808],[0.07479,5852],[0.07481,4298],[0.07483,581],[0.07485,4099],[0.07487,1280],[0.07489,1374],[0.07491,1789],[0.07493,3093],[0.07495,725],[0.07497,3302],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018617736,"sequence":10401702}} --------
2022-06-12 15:23:37.658 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018617776,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,15],[0.06519,530],[0.06517,1711],[0.06515,1899],[0.06513,2654],[0.06511,3369],[0.06509,1853],[0.06507,4587],[0.06505,7340],[0.06503,8227],[0.06501,3565],[0.06499,6021],[0.06497,6511],[0.06495,2887],[0.06493,5271],[0.06491,2619],[0.06489,1450],[0.06487,5121],[0.06485,7315],[0.06483,4739],[0.06482,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,2304],[0.06535,4012],[0.06537,1355],[0.06539,6446],[0.06541,12015],[0.06543,8021],[0.06545,4849],[0.06547,4298],[0.06549,1818],[0.06551,8895],[0.06553,8707],[0.06555,13080],[0.06557,1799],[0.06559,14970],[0.06561,7314],[0.06563,10148],[0.06565,788],[0.06567,7928],[0.06569,5464],[0.06571,5163],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018617774,"sequence":10668961}} --------
2022-06-12 15:23:38.373 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018618381,"tick":{"bids":[[0.07456,1321],[0.07455,83],[0.07453,1276],[0.07451,468],[0.07449,1141],[0.07447,3396],[0.07445,4331],[0.07443,4899],[0.07441,4462],[0.07439,1829],[0.07437,2489],[0.07435,5457],[0.07433,2259],[0.07431,2635],[0.07429,4252],[0.07427,1619],[0.07425,2783],[0.07423,3396],[0.07421,2029],[0.07419,1657],[0.07417,309],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,128],[0.07461,1285],[0.07463,2513],[0.07465,4190],[0.07467,3226],[0.07469,5249],[0.07471,4607],[0.07473,4720],[0.07475,3355],[0.07477,2808],[0.07479,5852],[0.07481,4298],[0.07483,581],[0.07485,4099],[0.07487,1280],[0.07489,1374],[0.07491,1789],[0.07493,3093],[0.07495,725],[0.07497,3302],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018618375,"sequence":10401703}} --------
2022-06-12 15:23:38.375 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018618400,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,669],[0.06519,530],[0.06517,1711],[0.06515,1899],[0.06513,2654],[0.06511,3369],[0.06509,1853],[0.06507,4587],[0.06505,7340],[0.06503,8227],[0.06501,3565],[0.06499,6021],[0.06497,6511],[0.06495,2887],[0.06493,5271],[0.06491,2619],[0.06489,1450],[0.06487,5121],[0.06485,7315],[0.06484,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,1419],[0.06537,1355],[0.06539,6446],[0.06541,12015],[0.06543,8021],[0.06545,4849],[0.06547,4298],[0.06549,1818],[0.06551,8895],[0.06553,8707],[0.06555,13080],[0.06557,1799],[0.06559,14970],[0.06561,7314],[0.06563,10148],[0.06565,788],[0.06567,7928],[0.06569,5464],[0.06571,5163],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018618398,"sequence":10668966}} --------
2022-06-12 15:23:38.376 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1655018618321"} --------
2022-06-12 15:23:38.376 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655018618321"}
2022-06-12 15:23:38.474 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018618585,"tick":{"bids":[[0.07456,1321],[0.07455,83],[0.07453,1276],[0.07451,468],[0.07449,1141],[0.07447,3396],[0.07445,4331],[0.07443,4899],[0.07441,4462],[0.07439,1829],[0.07437,4159],[0.07435,1785],[0.07433,2489],[0.07431,5345],[0.07429,1858],[0.07427,3236],[0.07425,4370],[0.07423,1619],[0.07421,2503],[0.07419,3307],[0.07417,1797],[0.07415,1657],[0.07413,309],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,128],[0.07461,1285],[0.07463,2513],[0.07465,4190],[0.07467,3226],[0.07469,5249],[0.07471,4607],[0.07473,4720],[0.07475,3355],[0.07477,2808],[0.07479,2887],[0.07481,3564],[0.07483,5899],[0.07485,3980],[0.07487,1159],[0.07489,3774],[0.07491,1462],[0.07493,1256],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018618582,"sequence":10401729}} --------
2022-06-12 15:23:38.486 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018618608,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,669],[0.06519,530],[0.06517,1711],[0.06515,1899],[0.06513,2654],[0.06511,3369],[0.06509,1853],[0.06507,4587],[0.06505,7340],[0.06503,8227],[0.06501,9642],[0.06499,2707],[0.06497,1267],[0.06495,3328],[0.06493,6127],[0.06491,5015],[0.06489,6459],[0.06487,1005],[0.06485,5921],[0.06484,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,1419],[0.06537,1355],[0.06539,6446],[0.06541,12015],[0.06543,8021],[0.06545,4849],[0.06547,4298],[0.06549,1818],[0.06551,8895],[0.06553,8707],[0.06555,13080],[0.06557,11156],[0.06559,10825],[0.06561,9986],[0.06563,3362],[0.06565,7534],[0.06567,5544],[0.06569,3960],[0.06571,7999],[0.06573,15825],[0.06575,2147483647]],"symbolName":"dogeusdt","ts":1655018618606,"sequence":10668985}} --------
2022-06-12 15:23:38.694 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018618817,"tick":{"bids":[[0.06525,13],[0.06523,2],[0.06521,669],[0.06519,530],[0.06517,791],[0.06515,902],[0.06513,2231],[0.06511,4586],[0.06509,3731],[0.06507,1059],[0.06505,2949],[0.06503,6828],[0.06501,9642],[0.06499,2707],[0.06497,1267],[0.06495,3328],[0.06493,6127],[0.06491,5015],[0.06489,6459],[0.06487,1005],[0.06485,5921],[0.06484,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,1419],[0.06537,1355],[0.06539,6446],[0.06541,12015],[0.06543,4759],[0.06545,3977],[0.06547,4824],[0.06549,9108],[0.06551,4929],[0.06553,2804],[0.06555,948],[0.06557,11156],[0.06559,10825],[0.06561,9986],[0.06563,3362],[0.06565,7534],[0.06567,5544],[0.06569,3960],[0.06571,7999],[0.06573,15825],[0.06575,2147483647]],"symbolName":"dogeusdt","ts":1655018618815,"sequence":10669000}} --------
2022-06-12 15:23:39.398 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018619412,"tick":{"bids":[[0.06525,13],[0.06523,714],[0.06521,2357],[0.06519,1439],[0.06517,791],[0.06515,902],[0.06513,2231],[0.06511,4586],[0.06509,3731],[0.06507,1059],[0.06505,2949],[0.06503,6828],[0.06501,9642],[0.06499,2707],[0.06497,1267],[0.06495,3328],[0.06493,6127],[0.06491,5015],[0.06489,6459],[0.06487,1005],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06537,507],[0.06539,6143],[0.06541,5891],[0.06543,4759],[0.06545,3977],[0.06547,4824],[0.06549,9108],[0.06551,4929],[0.06553,2804],[0.06555,948],[0.06557,11156],[0.06559,10825],[0.06561,9986],[0.06563,3362],[0.06565,7534],[0.06567,5544],[0.06569,3960],[0.06571,7999],[0.06573,15825],[0.06575,2147483647]],"symbolName":"dogeusdt","ts":1655018619410,"sequence":10669009}} --------
2022-06-12 15:23:39.399 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018619464,"tick":{"bids":[[0.07456,1321],[0.07455,83],[0.07453,1276],[0.07451,230],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,3396],[0.07441,4775],[0.07439,5211],[0.07437,4159],[0.07435,1785],[0.07433,2489],[0.07431,5345],[0.07429,1858],[0.07427,3236],[0.07425,4370],[0.07423,1619],[0.07421,2503],[0.07419,3307],[0.07417,1797],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,128],[0.07461,1285],[0.07463,318],[0.07465,1115],[0.07467,1845],[0.07469,4858],[0.07471,3555],[0.07473,5249],[0.07475,4720],[0.07477,4720],[0.07479,2887],[0.07481,3564],[0.07483,5899],[0.07485,3980],[0.07487,1159],[0.07489,3774],[0.07491,1462],[0.07493,1256],[0.07495,1789],[0.07497,3093],[0.07499,725],[0.07501,3302],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018619461,"sequence":10401745}} --------
2022-06-12 15:23:39.495 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018619616,"tick":{"bids":[[0.06525,13],[0.06523,714],[0.06521,2357],[0.06519,1439],[0.06517,791],[0.06515,902],[0.06513,2231],[0.06511,4586],[0.06509,3731],[0.06507,1059],[0.06505,2949],[0.06503,6828],[0.06502,13463],[0.06500,1956],[0.06498,808],[0.06496,3687],[0.06494,3078],[0.06492,5109],[0.06490,6599],[0.06488,3375],[0.06486,3546],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06537,507],[0.06539,6143],[0.06541,5891],[0.06543,4759],[0.06545,3977],[0.06547,4824],[0.06549,9108],[0.06551,4929],[0.06553,2804],[0.06555,948],[0.06557,11156],[0.06559,10825],[0.06560,10752],[0.06562,11024],[0.06564,6342],[0.06566,4257],[0.06568,4028],[0.06570,8452],[0.06572,8387],[0.06574,19159],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018619614,"sequence":10669027}} --------
2022-06-12 15:23:39.550 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018619673,"tick":{"bids":[[0.07456,1321],[0.07455,83],[0.07453,1276],[0.07451,230],[0.07449,1276],[0.07447,468],[0.07445,1141],[0.07443,5308],[0.07441,4052],[0.07439,1785],[0.07437,2489],[0.07435,5366],[0.07433,1858],[0.07431,3236],[0.07429,4602],[0.07427,1619],[0.07425,2271],[0.07423,3307],[0.07421,1831],[0.07419,1579],[0.07417,388],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,128],[0.07461,1285],[0.07463,318],[0.07465,1115],[0.07467,1845],[0.07469,4858],[0.07471,3555],[0.07473,4720],[0.07475,2887],[0.07477,3602],[0.07479,4253],[0.07481,5587],[0.07483,1159],[0.07485,3774],[0.07487,1462],[0.07489,1256],[0.07491,1789],[0.07493,3093],[0.07495,725],[0.07497,3302],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018619670,"sequence":10401773}} --------
2022-06-12 15:23:39.699 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018619818,"tick":{"bids":[[0.06525,13],[0.06523,714],[0.06521,2357],[0.06520,1394],[0.06518,917],[0.06516,1880],[0.06514,3957],[0.06512,3871],[0.06510,3332],[0.06508,2529],[0.06506,3602],[0.06504,7186],[0.06502,13463],[0.06500,1956],[0.06498,808],[0.06496,3687],[0.06494,3078],[0.06492,5109],[0.06490,6599],[0.06488,3375],[0.06486,3546],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06537,507],[0.06539,6143],[0.06541,5891],[0.06542,4207],[0.06544,7020],[0.06546,5935],[0.06548,4006],[0.06550,5125],[0.06552,5075],[0.06554,2853],[0.06556,11194],[0.06558,2415],[0.06560,10752],[0.06562,11024],[0.06564,6342],[0.06566,4257],[0.06568,4028],[0.06570,8452],[0.06572,8387],[0.06574,19159],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018619816,"sequence":10669045}} --------
2022-06-12 15:23:40.325 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018620403,"tick":{"bids":[[0.07456,1321],[0.07455,18],[0.07453,1611],[0.07451,468],[0.07449,1141],[0.07447,3530],[0.07445,4775],[0.07443,5308],[0.07441,4052],[0.07439,1785],[0.07437,2489],[0.07435,5366],[0.07433,1858],[0.07431,3236],[0.07429,4602],[0.07427,1619],[0.07425,2271],[0.07423,3307],[0.07421,1831],[0.07419,1579],[0.07417,388],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,428],[0.07461,1115],[0.07463,1845],[0.07465,4992],[0.07467,3555],[0.07469,5359],[0.07471,4720],[0.07473,4720],[0.07475,2887],[0.07477,3602],[0.07479,4253],[0.07481,5587],[0.07483,1159],[0.07485,3774],[0.07487,1462],[0.07489,1256],[0.07491,1789],[0.07493,3093],[0.07495,725],[0.07497,3302],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018620400,"sequence":10401788}} --------
2022-06-12 15:23:40.331 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018620455,"tick":{"bids":[[0.06525,13],[0.06524,597],[0.06522,3007],[0.06520,1394],[0.06518,917],[0.06516,1880],[0.06514,3957],[0.06512,3871],[0.06510,3332],[0.06508,2529],[0.06506,3602],[0.06504,7186],[0.06502,13463],[0.06500,1956],[0.06498,808],[0.06496,3687],[0.06494,3078],[0.06492,5109],[0.06490,6599],[0.06488,3375],[0.06486,3546],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,2],[0.06538,368],[0.06540,3418],[0.06542,4207],[0.06544,7020],[0.06546,5935],[0.06548,4006],[0.06550,5125],[0.06552,5075],[0.06554,2853],[0.06556,11194],[0.06558,2415],[0.06560,10752],[0.06562,11024],[0.06564,6342],[0.06566,4257],[0.06568,4028],[0.06570,8452],[0.06572,8387],[0.06574,19159],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018620451,"sequence":10669051}} --------
2022-06-12 15:23:40.498 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018620613,"tick":{"bids":[[0.07456,1321],[0.07455,18],[0.07453,1611],[0.07451,468],[0.07449,1141],[0.07447,3530],[0.07445,4775],[0.07443,5308],[0.07441,4052],[0.07439,1785],[0.07437,2489],[0.07435,5366],[0.07433,5366],[0.07431,1858],[0.07429,3236],[0.07427,4602],[0.07425,1619],[0.07423,2276],[0.07421,3302],[0.07419,1831],[0.07417,1579],[0.07415,309],[0.07413,1901],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,428],[0.07461,1115],[0.07463,1845],[0.07465,4992],[0.07467,3555],[0.07469,5359],[0.07471,4720],[0.07473,4720],[0.07475,2887],[0.07477,3602],[0.07479,4253],[0.07481,2887],[0.07483,3571],[0.07485,4153],[0.07487,5967],[0.07489,919],[0.07491,4099],[0.07493,1457],[0.07495,976],[0.07497,1789],[0.07499,3093],[0.07501,725],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018620609,"sequence":10401811}} --------
2022-06-12 15:23:40.534 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018620659,"tick":{"bids":[[0.06525,13],[0.06524,597],[0.06522,3007],[0.06520,1394],[0.06518,917],[0.06516,1880],[0.06514,3957],[0.06512,3871],[0.06510,3332],[0.06508,2529],[0.06506,3602],[0.06504,7186],[0.06502,13668],[0.06500,2390],[0.06498,808],[0.06496,3382],[0.06494,1688],[0.06492,5134],[0.06490,6599],[0.06488,3375],[0.06486,3546],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,2],[0.06538,368],[0.06540,3418],[0.06542,4207],[0.06544,7020],[0.06546,5935],[0.06548,4006],[0.06550,5125],[0.06552,5075],[0.06554,2853],[0.06556,11194],[0.06558,710],[0.06560,8839],[0.06562,7911],[0.06564,9514],[0.06566,4257],[0.06568,2113],[0.06570,8452],[0.06572,8467],[0.06574,12815],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018620657,"sequence":10669071}} --------
2022-06-12 15:23:40.747 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018620871,"tick":{"bids":[[0.06525,13],[0.06524,597],[0.06522,3007],[0.06520,1777],[0.06518,831],[0.06516,1548],[0.06514,3881],[0.06512,3891],[0.06510,3312],[0.06508,2805],[0.06506,4786],[0.06504,7186],[0.06502,13668],[0.06500,2390],[0.06498,808],[0.06496,3382],[0.06494,1688],[0.06492,5134],[0.06490,6599],[0.06488,3375],[0.06486,3546],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,2],[0.06538,368],[0.06540,823],[0.06542,4751],[0.06544,10470],[0.06546,5965],[0.06548,3986],[0.06550,5519],[0.06552,6339],[0.06554,2853],[0.06556,11500],[0.06558,710],[0.06560,8839],[0.06562,7911],[0.06564,9514],[0.06566,4257],[0.06568,2113],[0.06570,8452],[0.06572,8467],[0.06574,12815],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018620868,"sequence":10669088}} --------
2022-06-12 15:23:41.447 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018621530,"tick":{"bids":[[0.06525,13],[0.06524,844],[0.06522,2967],[0.06520,1777],[0.06518,831],[0.06516,1548],[0.06514,3881],[0.06512,3891],[0.06510,3312],[0.06508,2805],[0.06506,4786],[0.06504,7186],[0.06502,13668],[0.06500,2390],[0.06498,808],[0.06496,3382],[0.06494,1688],[0.06492,5134],[0.06490,6599],[0.06488,3375],[0.06486,3546],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,3],[0.06538,348],[0.06540,823],[0.06542,4751],[0.06544,10470],[0.06546,5965],[0.06548,3986],[0.06550,5519],[0.06552,6339],[0.06554,2853],[0.06556,11500],[0.06558,710],[0.06560,8839],[0.06562,7911],[0.06564,9514],[0.06566,4257],[0.06568,2113],[0.06570,8452],[0.06572,8467],[0.06574,12815],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018621523,"sequence":10669093}} --------
2022-06-12 15:23:41.482 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018621606,"tick":{"bids":[[0.07456,1321],[0.07455,18],[0.07453,1611],[0.07451,1826],[0.07449,803],[0.07447,1366],[0.07445,3530],[0.07443,4775],[0.07441,4246],[0.07439,5113],[0.07437,1785],[0.07435,2489],[0.07433,5366],[0.07431,1858],[0.07429,3236],[0.07427,4602],[0.07425,1619],[0.07423,2276],[0.07421,3302],[0.07419,1831],[0.07417,1579],[0.07415,309],[0.07413,1901],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,428],[0.07461,1115],[0.07463,16],[0.07465,355],[0.07467,1226],[0.07469,1735],[0.07471,4992],[0.07473,3555],[0.07475,6420],[0.07477,3659],[0.07479,4720],[0.07481,2887],[0.07483,3571],[0.07485,4153],[0.07487,5967],[0.07489,919],[0.07491,4099],[0.07493,1457],[0.07495,976],[0.07497,1789],[0.07499,3093],[0.07501,725],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018621604,"sequence":10401830}} --------
2022-06-12 15:23:41.614 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018621734,"tick":{"bids":[[0.06525,13],[0.06524,844],[0.06522,2967],[0.06520,1777],[0.06518,831],[0.06516,1548],[0.06514,3881],[0.06512,3891],[0.06510,3312],[0.06508,2805],[0.06506,4786],[0.06504,7186],[0.06502,10496],[0.06500,2390],[0.06498,808],[0.06496,3382],[0.06494,1597],[0.06492,5247],[0.06490,8230],[0.06488,6648],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,3],[0.06538,348],[0.06540,823],[0.06542,4751],[0.06544,10470],[0.06546,5965],[0.06548,3986],[0.06550,5519],[0.06552,6339],[0.06554,2853],[0.06556,11500],[0.06558,710],[0.06560,8764],[0.06562,8002],[0.06564,9424],[0.06566,4257],[0.06568,5386],[0.06570,8452],[0.06572,8602],[0.06574,16088],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018621731,"sequence":10669112}} --------
2022-06-12 15:23:41.689 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018621812,"tick":{"bids":[[0.07456,1321],[0.07455,18],[0.07453,1611],[0.07451,1826],[0.07449,803],[0.07447,1366],[0.07445,3530],[0.07443,4775],[0.07441,4246],[0.07439,5113],[0.07437,1785],[0.07435,2489],[0.07433,5366],[0.07431,1858],[0.07429,3236],[0.07427,4602],[0.07425,1619],[0.07423,2276],[0.07421,3302],[0.07419,1831],[0.07417,1579],[0.07415,319],[0.07413,1901],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,428],[0.07461,1115],[0.07463,16],[0.07465,355],[0.07467,1226],[0.07469,1735],[0.07471,4992],[0.07473,3555],[0.07475,6420],[0.07477,3659],[0.07479,4720],[0.07481,2887],[0.07483,2929],[0.07485,5739],[0.07487,4680],[0.07489,599],[0.07491,3779],[0.07493,1457],[0.07495,976],[0.07497,1789],[0.07499,3093],[0.07501,725],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018621807,"sequence":10401852}} --------
2022-06-12 15:23:41.811 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018621934,"tick":{"bids":[[0.06525,13],[0.06524,844],[0.06522,2967],[0.06520,1394],[0.06518,1214],[0.06516,1891],[0.06514,4074],[0.06512,3891],[0.06510,5186],[0.06508,4257],[0.06506,7958],[0.06504,8871],[0.06502,10496],[0.06500,2390],[0.06498,808],[0.06496,3382],[0.06494,1597],[0.06492,5247],[0.06490,8230],[0.06488,6648],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,3],[0.06538,348],[0.06540,873],[0.06542,6599],[0.06544,9350],[0.06546,5842],[0.06548,3680],[0.06550,5550],[0.06552,6339],[0.06554,2932],[0.06556,11420],[0.06558,710],[0.06560,8764],[0.06562,8002],[0.06564,9424],[0.06566,4257],[0.06568,5386],[0.06570,8452],[0.06572,8602],[0.06574,16088],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018621932,"sequence":10669131}} --------
2022-06-12 15:23:42.462 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018622582,"tick":{"bids":[[0.07456,1321],[0.07455,18],[0.07453,1611],[0.07451,1526],[0.07449,890],[0.07447,1409],[0.07445,3530],[0.07443,4775],[0.07441,4342],[0.07439,5113],[0.07437,1785],[0.07435,2489],[0.07433,5366],[0.07431,1858],[0.07429,3236],[0.07427,4602],[0.07425,1619],[0.07423,2276],[0.07421,3302],[0.07419,1831],[0.07417,1579],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,428],[0.07461,1115],[0.07463,44],[0.07465,786],[0.07467,1226],[0.07469,2359],[0.07471,3936],[0.07473,3555],[0.07475,6420],[0.07477,3659],[0.07479,4720],[0.07481,3467],[0.07483,2929],[0.07485,5739],[0.07487,4680],[0.07489,599],[0.07491,3779],[0.07493,1457],[0.07495,976],[0.07497,1789],[0.07499,3093],[0.07501,725],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018622578,"sequence":10401872}} --------
2022-06-12 15:23:42.490 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018622615,"tick":{"bids":[[0.06525,13],[0.06524,622],[0.06522,2967],[0.06520,1394],[0.06518,1214],[0.06516,1891],[0.06514,4074],[0.06512,3891],[0.06510,5186],[0.06508,4257],[0.06506,7958],[0.06504,8871],[0.06502,10496],[0.06500,2390],[0.06498,808],[0.06496,3382],[0.06494,1597],[0.06492,5247],[0.06490,8230],[0.06488,6648],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,4],[0.06538,388],[0.06540,873],[0.06542,6599],[0.06544,9350],[0.06546,5842],[0.06548,3680],[0.06550,5550],[0.06552,6339],[0.06554,2932],[0.06556,11420],[0.06558,710],[0.06560,8764],[0.06562,8002],[0.06564,9424],[0.06566,4257],[0.06568,5386],[0.06570,8452],[0.06572,8602],[0.06574,16088],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018622609,"sequence":10669135}} --------
2022-06-12 15:23:42.668 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018622786,"tick":{"bids":[[0.07456,1321],[0.07455,18],[0.07453,1611],[0.07451,1526],[0.07449,890],[0.07447,1409],[0.07445,4342],[0.07443,5113],[0.07441,1785],[0.07439,2489],[0.07437,5366],[0.07435,1858],[0.07433,3236],[0.07431,4535],[0.07429,1619],[0.07427,2343],[0.07425,3302],[0.07423,1831],[0.07421,1579],[0.07419,319],[0.07417,1901],[0.07416,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,428],[0.07461,1115],[0.07463,44],[0.07465,786],[0.07467,1226],[0.07469,2359],[0.07471,6420],[0.07473,3659],[0.07475,4720],[0.07477,2927],[0.07479,3213],[0.07481,5739],[0.07483,4600],[0.07485,599],[0.07487,4019],[0.07489,1457],[0.07491,976],[0.07493,1856],[0.07495,3026],[0.07497,725],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018622783,"sequence":10401902}} --------
2022-06-12 15:23:42.721 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018622817,"tick":{"bids":[[0.06525,13],[0.06524,622],[0.06522,2967],[0.06520,1394],[0.06518,1214],[0.06516,1891],[0.06514,4074],[0.06512,3891],[0.06510,5186],[0.06508,4257],[0.06506,7958],[0.06504,8869],[0.06502,10496],[0.06500,2390],[0.06498,808],[0.06496,3382],[0.06494,3167],[0.06492,5247],[0.06490,8230],[0.06488,5078],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,4],[0.06538,388],[0.06540,873],[0.06542,6599],[0.06544,9350],[0.06546,5842],[0.06548,3680],[0.06550,5550],[0.06552,6339],[0.06554,2932],[0.06556,11194],[0.06558,786],[0.06560,10709],[0.06562,8002],[0.06564,6251],[0.06566,5483],[0.06568,5386],[0.06570,8452],[0.06572,8602],[0.06574,16088],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018622815,"sequence":10669156}} --------
2022-06-12 15:23:42.905 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018623028,"tick":{"bids":[[0.06525,13],[0.06524,622],[0.06522,2967],[0.06520,1394],[0.06518,1244],[0.06516,1468],[0.06514,4054],[0.06512,4145],[0.06510,5186],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,10496],[0.06500,2390],[0.06498,808],[0.06496,3382],[0.06494,3167],[0.06492,5247],[0.06490,8230],[0.06488,5078],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,4],[0.06538,368],[0.06540,823],[0.06542,6599],[0.06544,9733],[0.06546,5842],[0.06548,3680],[0.06550,5806],[0.06552,6970],[0.06554,2853],[0.06556,11194],[0.06558,786],[0.06560,10709],[0.06562,8002],[0.06564,6251],[0.06566,5483],[0.06568,5386],[0.06570,8452],[0.06572,8602],[0.06574,16088],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018623026,"sequence":10669174}} --------
2022-06-12 15:23:43.299 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1655018623324"} --------
2022-06-12 15:23:43.299 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655018623324"}
2022-06-12 15:23:43.383 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018623501,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07453,890],[0.07451,1409],[0.07449,3530],[0.07447,4775],[0.07445,4342],[0.07443,5113],[0.07441,1785],[0.07439,2489],[0.07437,5366],[0.07435,1858],[0.07433,3236],[0.07431,4535],[0.07429,1619],[0.07427,2343],[0.07425,3302],[0.07423,1831],[0.07421,1579],[0.07419,319],[0.07417,1901],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,47],[0.07461,786],[0.07463,1226],[0.07465,2359],[0.07467,3936],[0.07469,3555],[0.07471,6420],[0.07473,3659],[0.07475,4720],[0.07477,2927],[0.07479,3213],[0.07481,5739],[0.07483,4600],[0.07485,599],[0.07487,4019],[0.07489,1457],[0.07491,976],[0.07493,1856],[0.07495,3026],[0.07497,725],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018623497,"sequence":10401914}} --------
2022-06-12 15:23:43.590 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018623702,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07453,890],[0.07451,1409],[0.07449,3530],[0.07447,4775],[0.07445,4342],[0.07443,5113],[0.07441,1785],[0.07439,2489],[0.07437,1785],[0.07435,2489],[0.07433,5366],[0.07431,1858],[0.07429,3236],[0.07427,4535],[0.07425,1619],[0.07423,2343],[0.07421,3302],[0.07419,1831],[0.07417,1579],[0.07415,319],[0.07413,1901],[0.07412,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,47],[0.07461,786],[0.07463,1226],[0.07465,2359],[0.07467,3936],[0.07469,3555],[0.07471,6420],[0.07473,3659],[0.07475,4720],[0.07477,3659],[0.07479,4720],[0.07481,2907],[0.07483,3173],[0.07485,5739],[0.07487,4640],[0.07489,599],[0.07491,4019],[0.07493,1457],[0.07495,976],[0.07497,1856],[0.07499,3026],[0.07501,725],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018623699,"sequence":10401941}} --------
2022-06-12 15:23:43.642 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018623761,"tick":{"bids":[[0.06525,13],[0.06524,792],[0.06522,2967],[0.06520,1394],[0.06518,1244],[0.06516,1468],[0.06514,4054],[0.06512,4145],[0.06510,5186],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,10496],[0.06500,2390],[0.06498,808],[0.06496,3382],[0.06494,3167],[0.06492,5247],[0.06490,8230],[0.06488,5078],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,4],[0.06538,368],[0.06540,823],[0.06542,6599],[0.06544,9733],[0.06546,5842],[0.06548,3680],[0.06550,5806],[0.06552,6970],[0.06554,2853],[0.06556,11194],[0.06558,786],[0.06560,10709],[0.06562,8002],[0.06564,6251],[0.06566,5483],[0.06568,5386],[0.06570,8452],[0.06572,8602],[0.06574,16088],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018623759,"sequence":10669177}} --------
2022-06-12 15:23:43.847 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018623970,"tick":{"bids":[[0.06525,13],[0.06524,792],[0.06522,2967],[0.06520,1394],[0.06518,1244],[0.06516,1468],[0.06514,4054],[0.06512,4145],[0.06510,5186],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,10496],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,3167],[0.06492,5247],[0.06490,8230],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,4],[0.06538,368],[0.06540,823],[0.06542,6599],[0.06544,9733],[0.06546,5842],[0.06548,3680],[0.06550,5806],[0.06552,6970],[0.06554,2853],[0.06556,11194],[0.06558,786],[0.06560,10709],[0.06562,8002],[0.06564,6748],[0.06566,4813],[0.06568,5386],[0.06570,8452],[0.06572,9274],[0.06574,16088],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018623968,"sequence":10669191}} --------
2022-06-12 15:23:44.060 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018624180,"tick":{"bids":[[0.06525,13],[0.06524,792],[0.06522,2967],[0.06520,1394],[0.06518,1244],[0.06516,1468],[0.06514,4054],[0.06512,4450],[0.06510,5186],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,10031],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,3167],[0.06492,5247],[0.06490,8230],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,4],[0.06538,368],[0.06540,823],[0.06542,6599],[0.06544,9733],[0.06546,5842],[0.06548,3680],[0.06550,5826],[0.06552,6950],[0.06554,2853],[0.06556,11285],[0.06558,710],[0.06560,10707],[0.06562,7911],[0.06564,6748],[0.06566,4813],[0.06568,5386],[0.06570,8452],[0.06572,9274],[0.06574,16088],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018624178,"sequence":10669205}} --------
2022-06-12 15:23:44.328 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018624390,"tick":{"bids":[[0.06525,13],[0.06524,795],[0.06522,2967],[0.06520,1394],[0.06518,1244],[0.06516,1636],[0.06514,4034],[0.06512,4450],[0.06510,5186],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,10031],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,3167],[0.06492,5247],[0.06490,8230],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,5],[0.06538,368],[0.06540,873],[0.06542,6216],[0.06544,9809],[0.06546,5842],[0.06548,3680],[0.06550,5826],[0.06552,6950],[0.06554,2853],[0.06556,11285],[0.06558,710],[0.06560,10707],[0.06562,7911],[0.06564,6748],[0.06566,4813],[0.06568,5386],[0.06570,8452],[0.06572,9274],[0.06574,16088],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018624387,"sequence":10669218}} --------
2022-06-12 15:23:44.421 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018624546,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07453,890],[0.07451,1742],[0.07449,890],[0.07447,1409],[0.07445,3530],[0.07443,4775],[0.07441,4342],[0.07439,5113],[0.07437,1785],[0.07435,2489],[0.07433,5366],[0.07431,1858],[0.07429,3236],[0.07427,4535],[0.07425,1619],[0.07423,2343],[0.07421,3302],[0.07419,1831],[0.07417,1579],[0.07415,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,47],[0.07461,786],[0.07463,48],[0.07465,786],[0.07467,1226],[0.07469,2359],[0.07471,3936],[0.07473,3555],[0.07475,6420],[0.07477,3659],[0.07479,4720],[0.07481,2907],[0.07483,3173],[0.07485,5739],[0.07487,4640],[0.07489,599],[0.07491,4019],[0.07493,1457],[0.07495,976],[0.07497,1856],[0.07499,3026],[0.07501,725],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018624543,"sequence":10401957}} --------
2022-06-12 15:23:44.630 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018624755,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07453,890],[0.07451,1742],[0.07449,890],[0.07447,1409],[0.07445,3530],[0.07443,4775],[0.07441,4342],[0.07439,5113],[0.07438,2489],[0.07436,5366],[0.07434,1858],[0.07432,3236],[0.07430,4535],[0.07428,1624],[0.07426,2338],[0.07424,3302],[0.07422,1831],[0.07420,1579],[0.07418,319],[0.07416,1901],[0.07415,2147483647]],"asks":[[0.07457,1248],[0.07458,8],[0.07459,47],[0.07461,786],[0.07463,48],[0.07465,786],[0.07467,1226],[0.07469,2359],[0.07471,3936],[0.07473,3555],[0.07474,4720],[0.07476,3347],[0.07478,2769],[0.07480,5739],[0.07482,4640],[0.07484,599],[0.07486,4019],[0.07488,1457],[0.07490,976],[0.07492,1856],[0.07494,3026],[0.07496,725],[0.07498,2147483647]],"symbolName":"trxusdt","ts":1655018624752,"sequence":10401982}} --------
2022-06-12 15:23:44.692 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018624806,"tick":{"bids":[[0.06525,13],[0.06524,795],[0.06522,2967],[0.06520,1394],[0.06518,1244],[0.06516,1636],[0.06514,4034],[0.06512,4450],[0.06510,5186],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,10031],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,3167],[0.06492,5247],[0.06490,8230],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,5],[0.06538,368],[0.06540,873],[0.06542,6216],[0.06544,9809],[0.06546,5842],[0.06548,3680],[0.06550,5826],[0.06552,6950],[0.06554,2853],[0.06556,11285],[0.06558,710],[0.06560,10707],[0.06562,7911],[0.06564,6748],[0.06566,4813],[0.06568,5386],[0.06570,8452],[0.06572,9274],[0.06574,16088],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018624804,"sequence":10669219}} --------
2022-06-12 15:23:44.895 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018625020,"tick":{"bids":[[0.06525,13],[0.06524,795],[0.06522,2967],[0.06520,1394],[0.06518,1244],[0.06516,1636],[0.06514,4034],[0.06512,4450],[0.06510,5186],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,10031],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,4887],[0.06492,5156],[0.06490,6601],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,5],[0.06538,368],[0.06540,873],[0.06542,6216],[0.06544,9809],[0.06546,5842],[0.06548,3680],[0.06550,5826],[0.06552,6950],[0.06554,2853],[0.06556,11285],[0.06558,710],[0.06560,10707],[0.06562,7911],[0.06564,6748],[0.06566,4813],[0.06568,5386],[0.06570,8679],[0.06572,9274],[0.06574,22432],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018625017,"sequence":10669238}} --------
2022-06-12 15:23:45.012 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018625078,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07452,890],[0.07450,1409],[0.07448,3396],[0.07446,4775],[0.07444,4342],[0.07442,5103],[0.07440,1785],[0.07438,2489],[0.07436,5366],[0.07434,1858],[0.07432,3236],[0.07430,4535],[0.07428,1624],[0.07426,2338],[0.07424,3302],[0.07422,1831],[0.07420,1579],[0.07418,319],[0.07416,1901],[0.07415,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07460,786],[0.07462,1226],[0.07464,2359],[0.07466,3802],[0.07468,3555],[0.07470,6420],[0.07472,3659],[0.07474,4720],[0.07476,3347],[0.07478,2769],[0.07480,5739],[0.07482,4640],[0.07484,599],[0.07486,4019],[0.07488,1457],[0.07490,976],[0.07492,1856],[0.07494,3026],[0.07496,725],[0.07498,2147483647]],"symbolName":"trxusdt","ts":1655018625076,"sequence":10401999}} --------
2022-06-12 15:23:45.131 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018625228,"tick":{"bids":[[0.06525,13],[0.06524,795],[0.06522,2967],[0.06520,1394],[0.06518,1244],[0.06516,1663],[0.06514,4034],[0.06512,4450],[0.06510,5186],[0.06508,4226],[0.06506,7960],[0.06504,8869],[0.06502,10031],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,4887],[0.06492,5156],[0.06490,6601],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,5],[0.06538,368],[0.06540,873],[0.06542,6216],[0.06544,8947],[0.06546,5842],[0.06548,3680],[0.06550,4921],[0.06552,7947],[0.06554,3159],[0.06556,11285],[0.06558,710],[0.06560,10707],[0.06562,7911],[0.06564,6748],[0.06566,4813],[0.06568,5386],[0.06570,8679],[0.06572,9274],[0.06574,22432],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018625225,"sequence":10669252}} --------
2022-06-12 15:23:45.540 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018625592,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07452,890],[0.07450,1409],[0.07448,3396],[0.07446,4775],[0.07444,4342],[0.07442,5103],[0.07440,1785],[0.07438,2489],[0.07436,5366],[0.07434,1858],[0.07432,3236],[0.07430,4535],[0.07428,1624],[0.07426,2338],[0.07424,3302],[0.07422,1831],[0.07420,1579],[0.07418,319],[0.07416,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07460,786],[0.07462,1226],[0.07464,2359],[0.07466,3802],[0.07468,3555],[0.07470,6420],[0.07472,3659],[0.07474,4720],[0.07476,3347],[0.07478,2769],[0.07480,5739],[0.07482,4640],[0.07484,599],[0.07486,4019],[0.07488,1457],[0.07490,976],[0.07492,1856],[0.07494,3026],[0.07496,725],[0.07498,2147483647]],"symbolName":"trxusdt","ts":1655018625587,"sequence":10402000}} --------
2022-06-12 15:23:45.674 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018625795,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07452,890],[0.07450,1409],[0.07448,3396],[0.07446,4775],[0.07444,4342],[0.07442,5103],[0.07440,1785],[0.07438,2489],[0.07436,5366],[0.07434,2489],[0.07432,5366],[0.07430,1858],[0.07428,3236],[0.07426,4736],[0.07424,1624],[0.07422,2338],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07414,319],[0.07412,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07460,786],[0.07462,1226],[0.07464,2359],[0.07466,3802],[0.07468,3555],[0.07470,6420],[0.07472,3659],[0.07474,4720],[0.07476,3347],[0.07478,2769],[0.07480,3347],[0.07482,2809],[0.07484,5739],[0.07486,4600],[0.07488,599],[0.07490,4019],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018625792,"sequence":10402024}} --------
2022-06-12 15:23:45.842 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018625958,"tick":{"bids":[[0.06525,13],[0.06524,551],[0.06522,2967],[0.06520,1394],[0.06518,1244],[0.06516,1663],[0.06514,4034],[0.06512,4450],[0.06510,5186],[0.06508,4226],[0.06506,7960],[0.06504,8869],[0.06502,10031],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,4887],[0.06492,5156],[0.06490,6601],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,355],[0.06538,370],[0.06540,1014],[0.06542,6409],[0.06544,8947],[0.06546,5842],[0.06548,3680],[0.06550,4921],[0.06552,7947],[0.06554,3159],[0.06556,11285],[0.06558,710],[0.06560,10707],[0.06562,7911],[0.06564,6748],[0.06566,4813],[0.06568,5386],[0.06570,8679],[0.06572,9274],[0.06574,22432],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018625956,"sequence":10669261}} --------
2022-06-12 15:23:45.974 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018626097,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07452,890],[0.07450,1436],[0.07448,555],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,4342],[0.07438,5103],[0.07436,1685],[0.07434,2489],[0.07432,5366],[0.07430,1858],[0.07428,3236],[0.07426,4736],[0.07424,1624],[0.07422,2338],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07414,319],[0.07412,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07460,786],[0.07462,50],[0.07464,786],[0.07466,1226],[0.07468,2359],[0.07470,3802],[0.07472,3622],[0.07474,6420],[0.07476,3659],[0.07478,4720],[0.07480,3347],[0.07482,2809],[0.07484,5739],[0.07486,4600],[0.07488,599],[0.07490,4019],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018626094,"sequence":10402042}} --------
2022-06-12 15:23:46.048 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018626166,"tick":{"bids":[[0.06525,13],[0.06524,551],[0.06522,2967],[0.06520,1394],[0.06518,1244],[0.06516,1663],[0.06514,4034],[0.06512,4450],[0.06510,5186],[0.06508,4226],[0.06506,7960],[0.06504,8869],[0.06502,10031],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,3241],[0.06492,5033],[0.06490,6601],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,355],[0.06538,370],[0.06540,1014],[0.06542,6409],[0.06544,8947],[0.06546,5842],[0.06548,3680],[0.06550,4921],[0.06552,7947],[0.06554,3159],[0.06556,11285],[0.06558,710],[0.06560,10707],[0.06562,7911],[0.06564,6748],[0.06566,4946],[0.06568,5386],[0.06570,8452],[0.06572,9274],[0.06574,22659],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018626161,"sequence":10669273}} --------
2022-06-12 15:23:46.246 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018626369,"tick":{"bids":[[0.06525,13],[0.06524,551],[0.06522,2967],[0.06520,1394],[0.06518,1244],[0.06516,1663],[0.06514,4034],[0.06512,4450],[0.06510,5493],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,10031],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,3241],[0.06492,5033],[0.06490,6601],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,355],[0.06538,370],[0.06540,1014],[0.06542,6409],[0.06544,8947],[0.06546,5842],[0.06548,3680],[0.06550,4921],[0.06552,8099],[0.06554,3159],[0.06556,10826],[0.06558,710],[0.06560,10782],[0.06562,7911],[0.06564,6765],[0.06566,4946],[0.06568,5386],[0.06570,8452],[0.06572,9274],[0.06574,22659],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018626367,"sequence":10669287}} --------
2022-06-12 15:23:46.566 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018626635,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07452,890],[0.07450,1436],[0.07448,555],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,4342],[0.07438,5103],[0.07436,1685],[0.07434,2489],[0.07432,5366],[0.07430,1858],[0.07428,3236],[0.07426,4736],[0.07424,1624],[0.07422,2338],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07414,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07460,786],[0.07462,50],[0.07464,786],[0.07466,1226],[0.07468,2359],[0.07470,3802],[0.07472,3622],[0.07474,6420],[0.07476,3659],[0.07478,4720],[0.07480,3347],[0.07482,2809],[0.07484,5739],[0.07486,4600],[0.07488,599],[0.07490,4019],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018626631,"sequence":10402043}} --------
2022-06-12 15:23:46.715 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018626834,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07452,890],[0.07450,1436],[0.07448,555],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,4342],[0.07438,5103],[0.07436,1685],[0.07435,5366],[0.07433,1858],[0.07431,3236],[0.07429,4736],[0.07427,1624],[0.07425,2338],[0.07423,3302],[0.07421,1831],[0.07419,1579],[0.07417,319],[0.07415,1901],[0.07414,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07460,786],[0.07462,50],[0.07464,786],[0.07466,1226],[0.07468,2359],[0.07470,3802],[0.07472,3622],[0.07474,6420],[0.07476,3659],[0.07477,3347],[0.07479,2809],[0.07481,5739],[0.07483,4600],[0.07485,599],[0.07487,4019],[0.07489,1457],[0.07491,976],[0.07493,1856],[0.07495,3026],[0.07497,725],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018626832,"sequence":10402066}} --------
2022-06-12 15:23:46.919 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018627043,"tick":{"bids":[[0.06525,13],[0.06524,380],[0.06522,2603],[0.06520,1311],[0.06518,1244],[0.06516,1692],[0.06514,4034],[0.06512,5734],[0.06510,5493],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,10031],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,3241],[0.06492,5033],[0.06490,6601],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,440],[0.06538,492],[0.06540,1014],[0.06542,6409],[0.06544,8791],[0.06546,5642],[0.06548,3920],[0.06550,4952],[0.06552,8099],[0.06554,3159],[0.06556,10826],[0.06558,710],[0.06560,10782],[0.06562,7911],[0.06564,6765],[0.06566,4946],[0.06568,5386],[0.06570,8452],[0.06572,9274],[0.06574,22659],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018627040,"sequence":10669303}} --------
2022-06-12 15:23:46.920 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018627044,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07449,1409],[0.07447,3396],[0.07445,4775],[0.07443,3945],[0.07441,5517],[0.07439,1685],[0.07437,2489],[0.07435,5366],[0.07433,1858],[0.07431,3236],[0.07429,4736],[0.07427,1624],[0.07425,2338],[0.07423,3302],[0.07421,1831],[0.07419,1579],[0.07417,319],[0.07415,1901],[0.07414,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07460,786],[0.07461,786],[0.07463,1226],[0.07465,2359],[0.07467,3802],[0.07469,3555],[0.07471,6420],[0.07473,3659],[0.07475,4720],[0.07477,3347],[0.07479,2809],[0.07481,5739],[0.07483,4600],[0.07485,599],[0.07487,4019],[0.07489,1457],[0.07491,976],[0.07493,1856],[0.07495,3026],[0.07497,725],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018627041,"sequence":10402083}} --------
2022-06-12 15:23:47.123 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018627244,"tick":{"bids":[[0.06525,13],[0.06524,380],[0.06522,2603],[0.06520,1311],[0.06518,1244],[0.06516,1692],[0.06514,4034],[0.06512,5734],[0.06510,5493],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,10031],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,3243],[0.06492,5033],[0.06490,6599],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,440],[0.06538,492],[0.06540,1014],[0.06542,6409],[0.06544,8791],[0.06546,5642],[0.06548,3920],[0.06550,4952],[0.06552,8099],[0.06554,3159],[0.06556,10826],[0.06558,710],[0.06560,10782],[0.06562,7911],[0.06564,6765],[0.06566,4946],[0.06568,5386],[0.06570,8452],[0.06572,9274],[0.06574,22659],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018627242,"sequence":10669319}} --------
2022-06-12 15:23:47.320 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018627445,"tick":{"bids":[[0.06525,13],[0.06524,380],[0.06522,2603],[0.06520,1311],[0.06518,1264],[0.06516,1652],[0.06514,4167],[0.06512,5734],[0.06510,5493],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,9902],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,3243],[0.06492,5033],[0.06490,6599],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,440],[0.06538,492],[0.06540,1014],[0.06542,6409],[0.06544,8867],[0.06546,5922],[0.06548,3680],[0.06550,4952],[0.06552,8099],[0.06554,3159],[0.06556,10826],[0.06558,710],[0.06560,10782],[0.06562,7911],[0.06564,6765],[0.06566,4946],[0.06568,5386],[0.06570,8452],[0.06572,9274],[0.06574,22659],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018627443,"sequence":10669337}} --------
2022-06-12 15:23:47.454 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018627575,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07449,1409],[0.07447,3396],[0.07445,4775],[0.07443,3945],[0.07441,5517],[0.07439,1685],[0.07437,2489],[0.07435,5366],[0.07433,1858],[0.07431,3236],[0.07429,4736],[0.07427,1624],[0.07425,2338],[0.07423,3302],[0.07421,1831],[0.07419,1579],[0.07417,319],[0.07415,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07463,1226],[0.07465,2359],[0.07467,3802],[0.07469,3555],[0.07471,6420],[0.07473,3659],[0.07475,4720],[0.07477,3347],[0.07479,2809],[0.07481,5739],[0.07483,4600],[0.07485,599],[0.07487,4019],[0.07489,1457],[0.07491,976],[0.07493,1856],[0.07495,3026],[0.07497,725],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018627572,"sequence":10402085}} --------
2022-06-12 15:23:47.660 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018627778,"tick":{"bids":[[0.06525,13],[0.06524,420],[0.06522,2787],[0.06520,1512],[0.06518,1264],[0.06516,1652],[0.06514,4167],[0.06512,5734],[0.06510,5493],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,9902],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,3243],[0.06492,5033],[0.06490,6599],[0.06488,5055],[0.06486,3544],[0.06485,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06538,490],[0.06540,1014],[0.06542,6409],[0.06544,8867],[0.06546,5922],[0.06548,3680],[0.06550,4952],[0.06552,8099],[0.06554,3159],[0.06556,10826],[0.06558,710],[0.06560,10782],[0.06562,7911],[0.06564,6765],[0.06566,4946],[0.06568,5386],[0.06570,8452],[0.06572,9274],[0.06574,22659],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018627772,"sequence":10669345}} --------
2022-06-12 15:23:47.661 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018627784,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07449,1409],[0.07447,3396],[0.07445,4775],[0.07443,3945],[0.07441,5517],[0.07439,1685],[0.07437,2489],[0.07435,5366],[0.07433,1858],[0.07431,3236],[0.07429,4736],[0.07427,1624],[0.07426,4614],[0.07424,1624],[0.07422,2578],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07414,201],[0.07412,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07463,1226],[0.07465,2359],[0.07467,3802],[0.07469,3555],[0.07471,6420],[0.07473,3659],[0.07475,4720],[0.07477,3347],[0.07479,2809],[0.07481,5739],[0.07483,4600],[0.07485,599],[0.07486,4600],[0.07488,599],[0.07490,3779],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018627777,"sequence":10402102}} --------
2022-06-12 15:23:47.872 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018627987,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07449,1409],[0.07447,3396],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,3945],[0.07438,5517],[0.07436,1685],[0.07434,2489],[0.07432,5366],[0.07430,1680],[0.07428,3236],[0.07426,4614],[0.07424,1624],[0.07422,2578],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07414,201],[0.07412,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07463,1226],[0.07465,2359],[0.07467,3802],[0.07468,2359],[0.07470,4214],[0.07472,3118],[0.07474,6420],[0.07476,3659],[0.07478,4720],[0.07480,3327],[0.07482,2789],[0.07484,5939],[0.07486,4600],[0.07488,599],[0.07490,3779],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018627984,"sequence":10402121}} --------
2022-06-12 15:23:48.023 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018628132,"tick":{"bids":[[0.06525,13],[0.06524,420],[0.06522,2787],[0.06520,1512],[0.06518,1264],[0.06516,1652],[0.06514,4167],[0.06512,5734],[0.06510,5493],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,9902],[0.06500,2390],[0.06498,1305],[0.06496,3382],[0.06494,3243],[0.06492,5033],[0.06490,6599],[0.06488,5055],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06538,490],[0.06540,1014],[0.06542,6409],[0.06544,8867],[0.06546,5922],[0.06548,3680],[0.06550,4952],[0.06552,8099],[0.06554,3159],[0.06556,10826],[0.06558,710],[0.06560,10782],[0.06562,7911],[0.06564,6765],[0.06566,4946],[0.06568,5386],[0.06570,8452],[0.06572,9274],[0.06574,22659],[0.06576,2147483647]],"symbolName":"dogeusdt","ts":1655018628122,"sequence":10669346}} --------
2022-06-12 15:23:48.214 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018628325,"tick":{"bids":[[0.06525,13],[0.06524,420],[0.06522,2787],[0.06520,1512],[0.06518,1264],[0.06516,1652],[0.06514,4167],[0.06512,5734],[0.06510,5493],[0.06508,4257],[0.06506,7960],[0.06504,8869],[0.06502,9902],[0.06500,2390],[0.06499,1396],[0.06497,3382],[0.06495,3152],[0.06493,5033],[0.06491,8099],[0.06489,5055],[0.06487,3772],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06538,490],[0.06540,1014],[0.06542,6409],[0.06544,8867],[0.06546,5922],[0.06548,3680],[0.06550,4952],[0.06552,8099],[0.06554,3159],[0.06556,10826],[0.06558,710],[0.06560,10782],[0.06562,7911],[0.06564,6765],[0.06565,6765],[0.06567,4946],[0.06569,5423],[0.06571,4871],[0.06573,9238],[0.06575,22659],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018628323,"sequence":10669360}} --------
2022-06-12 15:23:48.290 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1655018628329"} --------
2022-06-12 15:23:48.291 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655018628329"}
2022-06-12 15:23:48.410 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018628535,"tick":{"bids":[[0.06525,13],[0.06524,420],[0.06522,2787],[0.06520,1512],[0.06518,1264],[0.06517,1652],[0.06515,4167],[0.06513,6277],[0.06511,5125],[0.06509,4134],[0.06507,7960],[0.06505,8747],[0.06503,9902],[0.06501,2133],[0.06499,1396],[0.06497,3382],[0.06495,3152],[0.06493,5033],[0.06491,8099],[0.06489,5055],[0.06487,3772],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06538,490],[0.06540,1014],[0.06542,6409],[0.06544,8867],[0.06545,8791],[0.06547,5922],[0.06549,3680],[0.06551,3153],[0.06553,10111],[0.06555,3159],[0.06557,10826],[0.06559,710],[0.06561,7811],[0.06563,7911],[0.06565,6765],[0.06567,4946],[0.06569,5423],[0.06571,4871],[0.06573,9238],[0.06575,22659],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018628532,"sequence":10669379}} --------
2022-06-12 15:23:48.533 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018628658,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07450,1616],[0.07448,890],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,3945],[0.07438,5517],[0.07436,1685],[0.07434,2489],[0.07432,5366],[0.07430,1680],[0.07428,3236],[0.07426,4614],[0.07424,1624],[0.07422,2578],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07414,201],[0.07412,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,52],[0.07464,786],[0.07466,1226],[0.07468,2359],[0.07470,4214],[0.07472,3118],[0.07474,6420],[0.07476,3659],[0.07478,4720],[0.07480,3327],[0.07482,2789],[0.07484,5939],[0.07486,4600],[0.07488,599],[0.07490,3779],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018628655,"sequence":10402127}} --------
2022-06-12 15:23:48.625 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018628751,"tick":{"bids":[[0.06525,661],[0.06523,2787],[0.06521,1695],[0.06519,1264],[0.06517,1652],[0.06515,4167],[0.06513,6277],[0.06511,5125],[0.06509,4134],[0.06507,7960],[0.06505,8747],[0.06503,9902],[0.06501,2133],[0.06499,1396],[0.06497,3382],[0.06495,3152],[0.06493,5033],[0.06491,8099],[0.06489,5055],[0.06487,3772],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,461],[0.06539,384],[0.06541,784],[0.06543,6430],[0.06545,8791],[0.06547,5922],[0.06549,3680],[0.06551,3153],[0.06553,10111],[0.06555,3159],[0.06557,10826],[0.06559,710],[0.06561,7811],[0.06563,7911],[0.06565,6765],[0.06567,4946],[0.06569,5423],[0.06571,4871],[0.06573,9238],[0.06575,22659],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018628748,"sequence":10669388}} --------
2022-06-12 15:23:48.747 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018628868,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07450,1616],[0.07448,890],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,3945],[0.07438,5517],[0.07436,1685],[0.07434,2489],[0.07432,5366],[0.07430,1793],[0.07428,3348],[0.07426,4614],[0.07424,1624],[0.07422,2697],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07414,201],[0.07412,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,52],[0.07464,786],[0.07466,1226],[0.07468,2359],[0.07470,4214],[0.07472,3118],[0.07474,6420],[0.07476,3659],[0.07478,4720],[0.07480,3327],[0.07482,2789],[0.07484,5939],[0.07486,4600],[0.07488,599],[0.07490,3779],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018628863,"sequence":10402150}} --------
2022-06-12 15:23:49.225 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018629253,"tick":{"bids":[[0.06525,661],[0.06523,2787],[0.06521,1695],[0.06519,1264],[0.06517,1652],[0.06515,4167],[0.06513,6277],[0.06511,5125],[0.06509,4134],[0.06507,7960],[0.06505,8747],[0.06503,9902],[0.06501,2133],[0.06499,1396],[0.06497,3382],[0.06495,3152],[0.06493,5033],[0.06491,8099],[0.06489,5055],[0.06487,3772],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,461],[0.06539,384],[0.06541,784],[0.06543,6430],[0.06545,8791],[0.06547,5922],[0.06549,3680],[0.06551,3153],[0.06553,10111],[0.06555,3159],[0.06557,10826],[0.06559,710],[0.06561,7811],[0.06563,7911],[0.06565,6765],[0.06567,4946],[0.06569,5423],[0.06571,4871],[0.06573,9238],[0.06575,22659],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018629251,"sequence":10669389}} --------
2022-06-12 15:23:49.344 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018629470,"tick":{"bids":[[0.06525,661],[0.06523,2787],[0.06521,1695],[0.06519,1264],[0.06517,1652],[0.06515,4167],[0.06513,6277],[0.06511,5125],[0.06509,4134],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,4857],[0.06495,3558],[0.06493,5198],[0.06491,12696],[0.06489,5055],[0.06487,3583],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,461],[0.06539,384],[0.06541,784],[0.06543,6430],[0.06545,8791],[0.06547,5922],[0.06549,3680],[0.06551,3153],[0.06553,10111],[0.06555,3159],[0.06557,10826],[0.06559,710],[0.06561,7886],[0.06563,7911],[0.06565,6765],[0.06567,4946],[0.06569,5423],[0.06571,4962],[0.06573,8565],[0.06575,22785],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018629468,"sequence":10669409}} --------
2022-06-12 15:23:49.353 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018629479,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07450,1613],[0.07448,890],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,3945],[0.07438,5517],[0.07436,1685],[0.07434,2489],[0.07432,5366],[0.07430,1793],[0.07428,3348],[0.07426,4614],[0.07424,1624],[0.07422,2697],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07414,201],[0.07412,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,52],[0.07464,786],[0.07466,1226],[0.07468,2359],[0.07470,4214],[0.07472,3118],[0.07474,6420],[0.07476,3659],[0.07478,4720],[0.07480,3327],[0.07482,2789],[0.07484,5939],[0.07486,4600],[0.07488,599],[0.07490,3779],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018629477,"sequence":10402169}} --------
2022-06-12 15:23:49.550 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018629676,"tick":{"bids":[[0.06525,661],[0.06523,2787],[0.06521,1695],[0.06519,1264],[0.06517,1652],[0.06515,5457],[0.06513,7070],[0.06511,5992],[0.06509,4486],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,4857],[0.06495,3558],[0.06493,5198],[0.06491,12696],[0.06489,5055],[0.06487,3583],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,461],[0.06539,368],[0.06541,1187],[0.06543,5788],[0.06545,9412],[0.06547,6421],[0.06549,4800],[0.06551,4982],[0.06553,8099],[0.06555,3159],[0.06557,10735],[0.06559,710],[0.06561,7886],[0.06563,7911],[0.06565,6765],[0.06567,4946],[0.06569,5423],[0.06571,4962],[0.06573,8565],[0.06575,22785],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018629673,"sequence":10669428}} --------
2022-06-12 15:23:49.630 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018629732,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07450,1613],[0.07448,890],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,3945],[0.07438,5517],[0.07436,1685],[0.07434,2489],[0.07432,5366],[0.07430,1793],[0.07428,3348],[0.07426,4614],[0.07424,1624],[0.07422,2697],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07414,201],[0.07412,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,52],[0.07464,786],[0.07466,1226],[0.07468,2359],[0.07470,4214],[0.07472,3118],[0.07474,6420],[0.07476,3659],[0.07478,4720],[0.07480,3327],[0.07482,2789],[0.07484,5939],[0.07486,4600],[0.07488,599],[0.07490,3779],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018629729,"sequence":10402170}} --------
2022-06-12 15:23:49.812 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018629937,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07450,1613],[0.07448,890],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,3945],[0.07438,5517],[0.07436,1685],[0.07434,2489],[0.07432,5366],[0.07430,1793],[0.07428,3348],[0.07426,4614],[0.07424,1624],[0.07422,2697],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07414,201],[0.07412,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,52],[0.07464,786],[0.07466,1226],[0.07468,2359],[0.07470,4214],[0.07472,3118],[0.07474,6420],[0.07476,3659],[0.07478,4720],[0.07480,3327],[0.07482,2789],[0.07484,5939],[0.07486,4600],[0.07488,599],[0.07490,3779],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018629934,"sequence":10402186}} --------
2022-06-12 15:23:50.026 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018630149,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07450,1613],[0.07448,890],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,3945],[0.07438,5517],[0.07436,2047],[0.07434,2503],[0.07432,4964],[0.07430,1793],[0.07428,3348],[0.07426,4614],[0.07424,1624],[0.07422,2697],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07414,201],[0.07412,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,52],[0.07464,786],[0.07466,1226],[0.07468,2359],[0.07470,4214],[0.07472,3118],[0.07474,6420],[0.07476,3919],[0.07478,5243],[0.07480,4199],[0.07482,2789],[0.07484,5081],[0.07486,4171],[0.07488,599],[0.07490,3779],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018630146,"sequence":10402204}} --------
2022-06-12 15:23:50.178 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018630305,"tick":{"bids":[[0.06525,612],[0.06523,2787],[0.06521,1695],[0.06519,1264],[0.06517,1652],[0.06515,5457],[0.06513,7070],[0.06511,5992],[0.06509,4486],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,4857],[0.06495,3558],[0.06493,5198],[0.06491,12696],[0.06489,5055],[0.06487,3583],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,456],[0.06539,368],[0.06541,1187],[0.06543,5788],[0.06545,9412],[0.06547,6421],[0.06549,4800],[0.06551,4982],[0.06553,8099],[0.06555,3159],[0.06557,10735],[0.06559,710],[0.06561,7886],[0.06563,7911],[0.06565,6765],[0.06567,4946],[0.06569,5423],[0.06571,4962],[0.06573,8565],[0.06575,22785],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018630302,"sequence":10669431}} --------
2022-06-12 15:23:50.355 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018630480,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07450,1588],[0.07448,890],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,3945],[0.07438,5517],[0.07436,2047],[0.07434,2503],[0.07432,4964],[0.07430,1793],[0.07428,3348],[0.07426,4614],[0.07424,1624],[0.07422,2697],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07414,201],[0.07412,1901],[0.07411,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,22],[0.07464,786],[0.07466,1226],[0.07468,2359],[0.07470,4214],[0.07472,3118],[0.07474,6420],[0.07476,3919],[0.07478,5243],[0.07480,4199],[0.07482,2789],[0.07484,5081],[0.07486,4171],[0.07488,599],[0.07490,3779],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018630477,"sequence":10402212}} --------
2022-06-12 15:23:50.383 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018630507,"tick":{"bids":[[0.06525,612],[0.06523,2787],[0.06521,1695],[0.06519,1264],[0.06517,1652],[0.06515,5457],[0.06513,7070],[0.06511,5992],[0.06509,4486],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,4857],[0.06495,3829],[0.06493,5223],[0.06491,11067],[0.06489,5055],[0.06487,3583],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,456],[0.06539,368],[0.06541,1187],[0.06543,5788],[0.06545,9412],[0.06547,6421],[0.06549,4800],[0.06551,4982],[0.06553,8099],[0.06555,3159],[0.06557,10735],[0.06559,710],[0.06561,7811],[0.06563,7913],[0.06565,6765],[0.06567,8748],[0.06569,5423],[0.06571,4962],[0.06573,12020],[0.06575,19330],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018630504,"sequence":10669448}} --------
2022-06-12 15:23:50.767 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018630683,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07450,1588],[0.07448,890],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,3945],[0.07438,5517],[0.07436,2047],[0.07434,2503],[0.07432,4964],[0.07430,1793],[0.07428,3348],[0.07426,4614],[0.07424,1624],[0.07422,2697],[0.07420,3302],[0.07418,1831],[0.07416,1579],[0.07415,2083],[0.07414,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,22],[0.07464,786],[0.07466,1226],[0.07468,2359],[0.07470,4214],[0.07472,3118],[0.07474,6420],[0.07476,3919],[0.07478,5243],[0.07480,4199],[0.07482,2789],[0.07484,5081],[0.07486,4171],[0.07488,599],[0.07490,3779],[0.07492,1457],[0.07494,976],[0.07496,1856],[0.07498,3026],[0.07500,725],[0.07503,1298],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018630679,"sequence":10402216}} --------
2022-06-12 15:23:50.768 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018630712,"tick":{"bids":[[0.06525,612],[0.06523,2787],[0.06521,1695],[0.06519,1591],[0.06517,1692],[0.06515,5417],[0.06513,7070],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,4857],[0.06495,3829],[0.06493,5223],[0.06491,11067],[0.06489,5055],[0.06487,3583],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,456],[0.06539,368],[0.06541,1187],[0.06543,4943],[0.06545,10297],[0.06547,6421],[0.06549,4640],[0.06551,4982],[0.06553,8099],[0.06555,3159],[0.06557,10735],[0.06559,3565],[0.06561,7811],[0.06563,7913],[0.06565,6765],[0.06567,8748],[0.06569,5423],[0.06571,4962],[0.06573,12020],[0.06575,19330],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018630710,"sequence":10669466}} --------
2022-06-12 15:23:50.770 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018630894,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,1601],[0.07451,890],[0.07450,1588],[0.07448,890],[0.07446,1409],[0.07444,3396],[0.07442,4775],[0.07440,3945],[0.07438,5517],[0.07436,2047],[0.07435,3899],[0.07433,2047],[0.07431,2604],[0.07429,4418],[0.07427,1680],[0.07425,3139],[0.07423,4413],[0.07421,1624],[0.07419,2804],[0.07417,3302],[0.07415,2083],[0.07414,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,22],[0.07464,786],[0.07466,1226],[0.07468,2359],[0.07470,4214],[0.07472,3118],[0.07474,6420],[0.07476,3919],[0.07478,5243],[0.07480,4199],[0.07482,2789],[0.07483,4221],[0.07485,619],[0.07487,4099],[0.07489,1715],[0.07491,714],[0.07493,2139],[0.07495,1472],[0.07497,585],[0.07499,3302],[0.07501,18882],[0.07503,1298],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018630890,"sequence":10402236}} --------
2022-06-12 15:23:51.072 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018631103,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,43],[0.07451,803],[0.07449,941],[0.07447,618],[0.07445,615],[0.07443,1416],[0.07441,3904],[0.07439,6365],[0.07437,3443],[0.07435,3899],[0.07433,2047],[0.07431,2604],[0.07429,4418],[0.07427,1680],[0.07425,3139],[0.07423,4413],[0.07421,1624],[0.07419,2804],[0.07417,3302],[0.07415,2083],[0.07414,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,22],[0.07464,786],[0.07465,892],[0.07467,2425],[0.07469,3807],[0.07471,5207],[0.07473,5067],[0.07475,5306],[0.07477,4205],[0.07479,4367],[0.07481,5936],[0.07483,4221],[0.07485,619],[0.07487,4099],[0.07489,1715],[0.07491,714],[0.07493,2139],[0.07495,1472],[0.07497,585],[0.07499,3302],[0.07501,18882],[0.07503,1298],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018631098,"sequence":10402254}} --------
2022-06-12 15:23:51.203 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018631330,"tick":{"bids":[[0.06525,674],[0.06523,2787],[0.06521,1346],[0.06519,1591],[0.06517,1692],[0.06515,5417],[0.06513,7070],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,4857],[0.06495,3829],[0.06493,5223],[0.06491,11067],[0.06489,5055],[0.06487,3583],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,372],[0.06539,368],[0.06541,784],[0.06543,4943],[0.06545,10297],[0.06547,6421],[0.06549,4640],[0.06551,4982],[0.06553,8099],[0.06555,3159],[0.06557,10735],[0.06559,3565],[0.06561,7811],[0.06563,7913],[0.06565,6765],[0.06567,8748],[0.06569,5423],[0.06571,4962],[0.06573,12020],[0.06575,19330],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018631327,"sequence":10669473}} --------
2022-06-12 15:23:51.355 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018631480,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,43],[0.07451,803],[0.07449,941],[0.07447,618],[0.07445,615],[0.07443,1416],[0.07441,3904],[0.07439,6365],[0.07437,3443],[0.07435,3899],[0.07433,2047],[0.07431,2604],[0.07429,4418],[0.07427,1680],[0.07425,3139],[0.07423,4413],[0.07421,1624],[0.07419,2804],[0.07417,3302],[0.07415,2083],[0.07414,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,22],[0.07464,786],[0.07465,892],[0.07467,2425],[0.07469,3807],[0.07471,5207],[0.07473,5067],[0.07475,5306],[0.07477,4205],[0.07479,4367],[0.07481,5936],[0.07483,4221],[0.07485,619],[0.07487,4099],[0.07489,1715],[0.07491,714],[0.07493,2139],[0.07495,1472],[0.07497,585],[0.07499,3302],[0.07501,18882],[0.07503,1298],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018631476,"sequence":10402255}} --------
2022-06-12 15:23:51.407 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018631533,"tick":{"bids":[[0.06525,674],[0.06523,2787],[0.06521,1346],[0.06519,1591],[0.06517,1692],[0.06515,5417],[0.06513,7070],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,5177],[0.06495,5458],[0.06493,5033],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,372],[0.06539,368],[0.06541,784],[0.06543,4943],[0.06545,10297],[0.06547,6421],[0.06549,4640],[0.06551,4982],[0.06553,8099],[0.06555,3159],[0.06557,10735],[0.06559,3565],[0.06561,7811],[0.06563,7913],[0.06565,6765],[0.06567,7360],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,19330],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018631530,"sequence":10669489}} --------
2022-06-12 15:23:51.565 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018631691,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,43],[0.07451,803],[0.07449,941],[0.07447,618],[0.07445,615],[0.07443,1416],[0.07441,3904],[0.07439,6365],[0.07437,3443],[0.07435,3899],[0.07433,2047],[0.07431,2604],[0.07429,4418],[0.07427,1680],[0.07425,3139],[0.07423,4413],[0.07421,1624],[0.07419,2804],[0.07417,3302],[0.07415,2083],[0.07414,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,22],[0.07464,786],[0.07465,892],[0.07467,2425],[0.07469,3807],[0.07471,5207],[0.07473,5067],[0.07475,5306],[0.07477,4205],[0.07479,4367],[0.07481,5936],[0.07483,4221],[0.07485,619],[0.07487,4099],[0.07489,1715],[0.07491,714],[0.07493,2139],[0.07495,1472],[0.07497,585],[0.07499,3302],[0.07501,18882],[0.07503,1298],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018631688,"sequence":10402256}} --------
2022-06-12 15:23:51.617 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018631740,"tick":{"bids":[[0.06525,674],[0.06523,2787],[0.06521,1346],[0.06519,1591],[0.06517,1623],[0.06515,5417],[0.06513,7070],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,5177],[0.06495,5458],[0.06493,5033],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,372],[0.06539,368],[0.06541,784],[0.06543,4943],[0.06545,10297],[0.06547,6293],[0.06549,4517],[0.06551,5748],[0.06553,7659],[0.06555,3159],[0.06557,11169],[0.06559,3565],[0.06561,7886],[0.06563,7913],[0.06565,6765],[0.06567,7360],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,19330],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018631733,"sequence":10669505}} --------
2022-06-12 15:23:51.787 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018631895,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,43],[0.07451,803],[0.07449,941],[0.07447,618],[0.07445,615],[0.07443,1416],[0.07441,3904],[0.07439,6365],[0.07437,3443],[0.07435,3899],[0.07433,2604],[0.07431,4305],[0.07429,1680],[0.07427,3258],[0.07425,4413],[0.07423,1624],[0.07421,2804],[0.07419,3302],[0.07417,2004],[0.07415,1657],[0.07414,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,22],[0.07464,786],[0.07465,892],[0.07467,2425],[0.07469,3807],[0.07471,5207],[0.07473,5067],[0.07475,5306],[0.07477,4205],[0.07479,4367],[0.07481,5936],[0.07483,4221],[0.07485,2226],[0.07487,4457],[0.07489,1715],[0.07491,693],[0.07493,3410],[0.07495,1472],[0.07497,585],[0.07499,3302],[0.07501,20696],[0.07503,1298],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018631892,"sequence":10402277}} --------
2022-06-12 15:23:51.976 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018632099,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,27],[0.07451,954],[0.07449,1681],[0.07447,529],[0.07445,1359],[0.07443,5099],[0.07441,5948],[0.07439,3550],[0.07437,3900],[0.07435,2047],[0.07433,2604],[0.07431,4305],[0.07429,1680],[0.07427,3258],[0.07425,4413],[0.07423,1624],[0.07421,2804],[0.07419,3302],[0.07417,2004],[0.07415,1657],[0.07414,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,22],[0.07464,786],[0.07465,2228],[0.07467,3147],[0.07469,4828],[0.07471,4570],[0.07473,4592],[0.07475,5665],[0.07477,6353],[0.07479,5353],[0.07481,3608],[0.07483,4179],[0.07485,2226],[0.07487,4457],[0.07489,1715],[0.07491,693],[0.07493,3410],[0.07495,1472],[0.07497,585],[0.07499,3302],[0.07501,20696],[0.07503,1298],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018632096,"sequence":10402297}} --------
2022-06-12 15:23:52.405 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018632403,"tick":{"bids":[[0.06525,619],[0.06523,2506],[0.06521,954],[0.06519,1591],[0.06517,1623],[0.06515,5417],[0.06513,7070],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,5177],[0.06495,5458],[0.06493,5033],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,7],[0.06539,525],[0.06541,1167],[0.06543,6026],[0.06545,8831],[0.06547,6293],[0.06549,4517],[0.06551,5748],[0.06553,7659],[0.06555,3159],[0.06557,11169],[0.06559,3565],[0.06561,7886],[0.06563,7913],[0.06565,6765],[0.06567,7360],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,19330],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018632399,"sequence":10669516}} --------
2022-06-12 15:23:52.489 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018632611,"tick":{"bids":[[0.06525,619],[0.06523,2506],[0.06521,954],[0.06519,1591],[0.06517,1623],[0.06515,5417],[0.06513,7070],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,6747],[0.06495,3888],[0.06493,5183],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,7],[0.06539,525],[0.06541,1167],[0.06543,6026],[0.06545,8831],[0.06547,6293],[0.06549,4517],[0.06551,5748],[0.06553,7659],[0.06555,3159],[0.06557,11169],[0.06559,3565],[0.06561,7886],[0.06563,7913],[0.06565,5296],[0.06567,8778],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,19330],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018632608,"sequence":10669532}} --------
2022-06-12 15:23:52.622 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018632748,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,27],[0.07451,954],[0.07449,1681],[0.07447,529],[0.07445,1359],[0.07443,5099],[0.07441,5948],[0.07439,3550],[0.07437,3900],[0.07435,2047],[0.07433,2604],[0.07431,4305],[0.07429,1680],[0.07427,3258],[0.07425,4413],[0.07423,1624],[0.07421,2804],[0.07419,3302],[0.07417,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,22],[0.07464,786],[0.07465,2228],[0.07467,3147],[0.07469,4828],[0.07471,4570],[0.07473,4592],[0.07475,5665],[0.07477,6353],[0.07479,5353],[0.07481,3608],[0.07483,4179],[0.07485,2226],[0.07487,4457],[0.07489,1715],[0.07491,693],[0.07493,3410],[0.07495,1472],[0.07497,585],[0.07499,3302],[0.07501,20696],[0.07503,1298],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018632739,"sequence":10402298}} --------
2022-06-12 15:23:52.696 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018632815,"tick":{"bids":[[0.06525,619],[0.06523,2506],[0.06521,954],[0.06519,1591],[0.06517,1616],[0.06515,6010],[0.06513,6317],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,6747],[0.06495,3888],[0.06493,5183],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,7],[0.06539,525],[0.06541,1167],[0.06543,6026],[0.06545,9337],[0.06547,6293],[0.06549,4517],[0.06551,5748],[0.06553,7659],[0.06555,3159],[0.06557,11169],[0.06559,3565],[0.06561,7886],[0.06563,7913],[0.06565,5296],[0.06567,8778],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,19330],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018632812,"sequence":10669549}} --------
2022-06-12 15:23:52.820 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018632946,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,27],[0.07451,954],[0.07449,1681],[0.07447,529],[0.07445,1359],[0.07443,5099],[0.07441,5948],[0.07439,3550],[0.07437,3900],[0.07435,2047],[0.07433,2604],[0.07432,4305],[0.07430,1680],[0.07428,3258],[0.07426,4413],[0.07424,1624],[0.07422,2804],[0.07420,3380],[0.07418,2004],[0.07417,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,22],[0.07464,786],[0.07465,2228],[0.07467,3147],[0.07469,4828],[0.07471,4570],[0.07473,4592],[0.07475,5665],[0.07477,6353],[0.07479,5353],[0.07481,3608],[0.07483,4179],[0.07485,2226],[0.07486,1715],[0.07488,698],[0.07490,3432],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,20696],[0.07500,1298],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018632942,"sequence":10402315}} --------
2022-06-12 15:23:53.023 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018633147,"tick":{"bids":[[0.07456,1321],[0.07455,1696],[0.07454,1743],[0.07453,27],[0.07451,954],[0.07450,1594],[0.07448,485],[0.07446,1359],[0.07444,5233],[0.07442,6056],[0.07440,3550],[0.07438,3900],[0.07436,2159],[0.07434,2604],[0.07432,4305],[0.07430,1680],[0.07428,3258],[0.07426,4413],[0.07424,1624],[0.07422,2804],[0.07420,3380],[0.07418,2004],[0.07417,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,22],[0.07464,786],[0.07465,2228],[0.07467,3147],[0.07468,4570],[0.07470,4592],[0.07472,5665],[0.07474,6353],[0.07476,5143],[0.07478,3328],[0.07480,4459],[0.07482,2729],[0.07484,4342],[0.07486,1715],[0.07488,698],[0.07490,3432],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,20696],[0.07500,1298],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018633144,"sequence":10402333}} --------
2022-06-12 15:23:53.321 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1655018633330"} --------
2022-06-12 15:23:53.321 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655018633330"}
2022-06-12 15:23:53.361 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018633485,"tick":{"bids":[[0.06525,726],[0.06523,2679],[0.06521,1428],[0.06519,1208],[0.06517,1616],[0.06515,6010],[0.06513,6317],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,6747],[0.06495,3888],[0.06493,5183],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,229],[0.06539,348],[0.06541,784],[0.06543,6408],[0.06545,9337],[0.06547,6293],[0.06549,4517],[0.06551,5748],[0.06553,7659],[0.06555,3159],[0.06557,11169],[0.06559,3565],[0.06561,7886],[0.06563,7913],[0.06565,5296],[0.06567,8778],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,19330],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018633483,"sequence":10669558}} --------
2022-06-12 15:23:53.567 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018633693,"tick":{"bids":[[0.06525,726],[0.06523,2679],[0.06521,1428],[0.06519,1208],[0.06517,1616],[0.06515,6010],[0.06513,6317],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,6747],[0.06495,3888],[0.06493,5183],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,229],[0.06539,348],[0.06541,784],[0.06543,6408],[0.06545,9337],[0.06547,6293],[0.06549,4517],[0.06551,5748],[0.06553,7659],[0.06555,3159],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8469],[0.06567,8778],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,12986],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018633691,"sequence":10669577}} --------
2022-06-12 15:23:53.729 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018633855,"tick":{"bids":[[0.07456,32],[0.07454,131],[0.07452,738],[0.07450,1594],[0.07448,485],[0.07446,1359],[0.07444,5233],[0.07442,6056],[0.07440,3550],[0.07438,3900],[0.07436,2159],[0.07434,2604],[0.07432,4305],[0.07430,1680],[0.07428,3258],[0.07426,4413],[0.07424,1624],[0.07422,2804],[0.07420,3380],[0.07418,2004],[0.07417,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,2209],[0.07464,3147],[0.07466,4935],[0.07468,4570],[0.07470,4592],[0.07472,5665],[0.07474,6353],[0.07476,5143],[0.07478,3328],[0.07480,4459],[0.07482,2729],[0.07484,4342],[0.07486,1715],[0.07488,698],[0.07490,3432],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,20696],[0.07500,1298],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018633853,"sequence":10402340}} --------
2022-06-12 15:23:53.793 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018633903,"tick":{"bids":[[0.06525,711],[0.06523,2679],[0.06521,3028],[0.06519,1208],[0.06517,1663],[0.06515,6035],[0.06513,6317],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,6747],[0.06495,3888],[0.06493,5183],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,229],[0.06539,368],[0.06541,786],[0.06543,5788],[0.06545,10161],[0.06547,6293],[0.06549,4389],[0.06551,5748],[0.06553,7659],[0.06555,3159],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8469],[0.06567,8778],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,12986],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018633900,"sequence":10669598}} --------
2022-06-12 15:23:53.934 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018634061,"tick":{"bids":[[0.07456,32],[0.07454,131],[0.07452,738],[0.07450,1594],[0.07448,485],[0.07446,1359],[0.07444,5233],[0.07442,6056],[0.07440,3550],[0.07438,3680],[0.07436,2159],[0.07434,2491],[0.07432,4305],[0.07430,1680],[0.07428,3258],[0.07426,4413],[0.07424,1624],[0.07422,2804],[0.07420,3380],[0.07418,2004],[0.07417,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,2209],[0.07464,3147],[0.07466,4935],[0.07468,4570],[0.07470,4592],[0.07472,5665],[0.07474,6353],[0.07476,5143],[0.07478,3328],[0.07480,4419],[0.07482,2729],[0.07484,4422],[0.07486,1715],[0.07488,698],[0.07490,3432],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,18696],[0.07500,1293],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018634059,"sequence":10402364}} --------
2022-06-12 15:23:54.202 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018634309,"tick":{"bids":[[0.06525,711],[0.06523,2679],[0.06521,3028],[0.06519,1208],[0.06517,1663],[0.06515,6035],[0.06513,6317],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,6747],[0.06495,3888],[0.06493,5183],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,229],[0.06539,368],[0.06541,786],[0.06543,5788],[0.06545,10161],[0.06547,6293],[0.06549,4389],[0.06551,5748],[0.06553,7659],[0.06555,3159],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8469],[0.06567,8778],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,12986],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018634307,"sequence":10669600}} --------
2022-06-12 15:23:54.554 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018634570,"tick":{"bids":[[0.06525,711],[0.06523,2679],[0.06521,3028],[0.06519,1208],[0.06517,1663],[0.06515,6035],[0.06513,6317],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,9773],[0.06501,2004],[0.06499,1585],[0.06497,6747],[0.06495,3888],[0.06493,5183],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,229],[0.06539,368],[0.06541,786],[0.06543,5788],[0.06545,10161],[0.06547,6293],[0.06549,4389],[0.06551,5748],[0.06553,7659],[0.06555,3159],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8469],[0.06567,8778],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,12986],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018634568,"sequence":10669601}} --------
2022-06-12 15:23:54.650 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018634777,"tick":{"bids":[[0.06525,711],[0.06523,2679],[0.06521,3028],[0.06519,1208],[0.06517,1663],[0.06515,6035],[0.06513,6317],[0.06511,5992],[0.06509,4517],[0.06507,7960],[0.06505,8769],[0.06503,10079],[0.06501,1569],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,229],[0.06539,368],[0.06541,786],[0.06543,5788],[0.06545,10161],[0.06547,6293],[0.06549,4389],[0.06551,5748],[0.06553,7659],[0.06555,3159],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8469],[0.06567,8508],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,12986],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018634775,"sequence":10669623}} --------
2022-06-12 15:23:54.836 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018634958,"tick":{"bids":[[0.07456,384],[0.07454,548],[0.07452,497],[0.07450,1521],[0.07448,654],[0.07446,1359],[0.07444,5702],[0.07442,5957],[0.07440,3550],[0.07438,3680],[0.07436,2159],[0.07434,2491],[0.07432,4305],[0.07430,1680],[0.07428,3258],[0.07426,4413],[0.07424,1624],[0.07422,2804],[0.07420,3380],[0.07418,2004],[0.07417,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,892],[0.07464,3227],[0.07466,4935],[0.07468,4483],[0.07470,5092],[0.07472,5665],[0.07474,6353],[0.07476,5574],[0.07478,3288],[0.07480,4419],[0.07482,2729],[0.07484,4422],[0.07486,1715],[0.07488,698],[0.07490,3432],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,18696],[0.07500,1293],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018634955,"sequence":10402382}} --------
2022-06-12 15:23:54.861 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018634984,"tick":{"bids":[[0.06525,711],[0.06523,2575],[0.06521,3280],[0.06519,1248],[0.06517,1719],[0.06515,6533],[0.06513,6317],[0.06511,6130],[0.06509,4256],[0.06507,7960],[0.06505,8769],[0.06503,10079],[0.06501,1569],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,229],[0.06539,348],[0.06541,784],[0.06543,4322],[0.06545,12009],[0.06547,6013],[0.06549,4549],[0.06551,5748],[0.06553,7659],[0.06555,3024],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8469],[0.06567,8508],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,12986],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018634982,"sequence":10669640}} --------
2022-06-12 15:23:55.166 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018635197,"tick":{"bids":[[0.07456,384],[0.07454,548],[0.07452,497],[0.07450,1521],[0.07448,654],[0.07446,1359],[0.07444,5702],[0.07442,5957],[0.07440,3550],[0.07438,3680],[0.07436,2159],[0.07434,2491],[0.07432,4305],[0.07430,1680],[0.07428,3258],[0.07426,3258],[0.07424,4413],[0.07422,1624],[0.07420,2804],[0.07418,3302],[0.07416,1975],[0.07415,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,892],[0.07464,3227],[0.07466,4935],[0.07468,4483],[0.07470,5092],[0.07472,5665],[0.07474,6353],[0.07476,5574],[0.07478,3288],[0.07480,4419],[0.07482,2729],[0.07484,4422],[0.07486,1715],[0.07488,698],[0.07490,3432],[0.07492,1472],[0.07494,585],[0.07496,1472],[0.07498,585],[0.07500,3302],[0.07502,18696],[0.07504,1293],[0.07506,2147483647]],"symbolName":"trxusdt","ts":1655018635193,"sequence":10402395}} --------
2022-06-12 15:23:55.282 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018635410,"tick":{"bids":[[0.07456,384],[0.07454,548],[0.07452,497],[0.07450,1521],[0.07448,654],[0.07446,1359],[0.07444,2585],[0.07442,6507],[0.07440,5957],[0.07438,2745],[0.07436,3680],[0.07434,2159],[0.07432,2491],[0.07430,4305],[0.07428,1680],[0.07426,3258],[0.07424,4413],[0.07422,1624],[0.07420,2804],[0.07418,3302],[0.07416,1975],[0.07415,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,892],[0.07464,3227],[0.07466,4935],[0.07468,4483],[0.07470,5092],[0.07472,5665],[0.07474,6353],[0.07476,5574],[0.07478,6465],[0.07480,5567],[0.07482,3288],[0.07484,4419],[0.07486,2729],[0.07488,4422],[0.07490,1720],[0.07492,693],[0.07494,3432],[0.07496,1472],[0.07498,585],[0.07500,3302],[0.07502,18696],[0.07504,1293],[0.07506,2147483647]],"symbolName":"trxusdt","ts":1655018635407,"sequence":10402413}} --------
2022-06-12 15:23:55.579 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018635659,"tick":{"bids":[[0.06525,898],[0.06523,2575],[0.06521,3280],[0.06519,1248],[0.06517,1719],[0.06515,6533],[0.06513,6317],[0.06511,6130],[0.06509,4256],[0.06507,7960],[0.06505,8769],[0.06503,10079],[0.06501,1569],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,212],[0.06539,348],[0.06541,784],[0.06543,4322],[0.06545,12009],[0.06547,6013],[0.06549,4549],[0.06551,5748],[0.06553,7659],[0.06555,3024],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8469],[0.06567,8508],[0.06569,6649],[0.06571,4871],[0.06573,12020],[0.06575,12986],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018635654,"sequence":10669643}} --------
2022-06-12 15:23:55.883 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018635882,"tick":{"bids":[[0.06525,898],[0.06523,2575],[0.06521,3280],[0.06519,1248],[0.06517,1719],[0.06515,6533],[0.06513,6317],[0.06511,6130],[0.06509,4256],[0.06507,7960],[0.06505,8769],[0.06503,10079],[0.06501,1705],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,212],[0.06539,348],[0.06541,784],[0.06543,4322],[0.06545,12009],[0.06547,6013],[0.06549,4549],[0.06551,5748],[0.06553,7659],[0.06555,3024],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,5296],[0.06567,8507],[0.06569,6649],[0.06571,4871],[0.06573,9238],[0.06575,15768],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018635879,"sequence":10669660}} --------
2022-06-12 15:23:55.885 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018635947,"tick":{"bids":[[0.07456,384],[0.07454,340],[0.07452,548],[0.07450,500],[0.07448,1521],[0.07446,654],[0.07444,2585],[0.07442,6507],[0.07440,5957],[0.07438,2745],[0.07436,3680],[0.07434,2159],[0.07432,2491],[0.07430,4305],[0.07428,1680],[0.07426,3258],[0.07424,4413],[0.07422,1624],[0.07420,2804],[0.07419,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,892],[0.07464,3227],[0.07466,830],[0.07468,3559],[0.07470,4935],[0.07472,4483],[0.07474,5092],[0.07476,5665],[0.07478,6465],[0.07480,5567],[0.07482,3288],[0.07484,4419],[0.07486,2729],[0.07488,4422],[0.07490,1720],[0.07492,693],[0.07494,3432],[0.07496,1472],[0.07498,585],[0.07500,3302],[0.07502,18696],[0.07504,1293],[0.07506,2147483647]],"symbolName":"trxusdt","ts":1655018635941,"sequence":10402425}} --------
2022-06-12 15:23:55.962 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018636088,"tick":{"bids":[[0.06525,898],[0.06523,2575],[0.06521,3280],[0.06519,1208],[0.06517,1719],[0.06515,6575],[0.06513,6317],[0.06511,6259],[0.06509,4256],[0.06507,7960],[0.06505,8769],[0.06503,10079],[0.06501,1705],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,212],[0.06539,348],[0.06541,784],[0.06543,5788],[0.06545,10161],[0.06547,6013],[0.06549,4492],[0.06551,5748],[0.06553,7659],[0.06555,3152],[0.06557,11169],[0.06559,6735],[0.06561,4714],[0.06563,7913],[0.06565,5296],[0.06567,8507],[0.06569,6649],[0.06571,4871],[0.06573,9238],[0.06575,15768],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018636086,"sequence":10669679}} --------
2022-06-12 15:23:56.024 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018636151,"tick":{"bids":[[0.07456,384],[0.07454,340],[0.07452,548],[0.07450,500],[0.07448,1521],[0.07446,654],[0.07444,2585],[0.07442,2745],[0.07440,3573],[0.07438,2052],[0.07436,2491],[0.07434,4305],[0.07432,1680],[0.07430,3258],[0.07428,4413],[0.07426,1624],[0.07424,2804],[0.07422,3302],[0.07420,1975],[0.07419,2147483647]],"asks":[[0.07457,1248],[0.07458,50],[0.07459,18],[0.07461,786],[0.07462,892],[0.07464,3227],[0.07466,830],[0.07468,3559],[0.07470,4935],[0.07472,4483],[0.07474,5092],[0.07476,5665],[0.07478,6465],[0.07480,4419],[0.07482,2729],[0.07484,4422],[0.07486,1720],[0.07488,693],[0.07490,3432],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,15038],[0.07500,1293],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018636148,"sequence":10402449}} --------
2022-06-12 15:23:56.603 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018636705,"tick":{"bids":[[0.06525,765],[0.06523,2363],[0.06521,3280],[0.06519,1208],[0.06517,1719],[0.06515,6575],[0.06513,6317],[0.06511,6259],[0.06509,4256],[0.06507,7960],[0.06505,8769],[0.06503,10079],[0.06501,1705],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,268],[0.06539,498],[0.06541,1167],[0.06543,5788],[0.06545,10161],[0.06547,6013],[0.06549,4492],[0.06551,5748],[0.06553,7659],[0.06555,3152],[0.06557,11169],[0.06559,6735],[0.06561,4714],[0.06563,7913],[0.06565,5296],[0.06567,8507],[0.06569,6649],[0.06571,4871],[0.06573,9238],[0.06575,15768],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018636702,"sequence":10669685}} --------
2022-06-12 15:23:56.786 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018636909,"tick":{"bids":[[0.06525,765],[0.06523,2363],[0.06521,3280],[0.06519,1208],[0.06517,1719],[0.06515,6575],[0.06513,6317],[0.06511,6259],[0.06509,4256],[0.06507,7960],[0.06505,8769],[0.06503,10079],[0.06501,1705],[0.06499,1585],[0.06497,6747],[0.06495,3777],[0.06493,5158],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,268],[0.06539,498],[0.06541,1167],[0.06543,5788],[0.06545,10161],[0.06547,6013],[0.06549,4492],[0.06551,5748],[0.06553,7659],[0.06555,3152],[0.06557,11169],[0.06559,6735],[0.06561,4639],[0.06563,7913],[0.06565,5431],[0.06567,8507],[0.06569,6649],[0.06571,4871],[0.06573,9238],[0.06575,18839],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018636907,"sequence":10669704}} --------
2022-06-12 15:23:56.991 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018637112,"tick":{"bids":[[0.07458,33],[0.07456,303],[0.07454,612],[0.07452,1723],[0.07450,636],[0.07448,2477],[0.07446,6507],[0.07444,5957],[0.07442,2745],[0.07440,3573],[0.07438,2052],[0.07436,2491],[0.07434,4305],[0.07432,1680],[0.07430,3258],[0.07428,4413],[0.07426,1624],[0.07424,2804],[0.07422,3302],[0.07420,1975],[0.07410,2147483647]],"asks":[[0.07459,18],[0.07461,786],[0.07462,1087],[0.07464,3480],[0.07466,4801],[0.07468,4851],[0.07470,5065],[0.07472,5505],[0.07474,6465],[0.07476,5567],[0.07478,3288],[0.07480,4419],[0.07482,2729],[0.07484,4422],[0.07486,1720],[0.07488,693],[0.07490,3432],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,15038],[0.07500,1293],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018637097,"sequence":10402468}} --------
2022-06-12 15:23:57.018 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018637139,"tick":{"bids":[[0.06525,765],[0.06523,2363],[0.06521,3280],[0.06519,1208],[0.06517,1759],[0.06515,5879],[0.06513,7101],[0.06511,6137],[0.06509,4256],[0.06507,7960],[0.06505,8640],[0.06503,10079],[0.06501,1705],[0.06499,1585],[0.06497,6747],[0.06495,3777],[0.06493,5158],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,268],[0.06539,498],[0.06541,1167],[0.06543,5788],[0.06545,11586],[0.06547,6013],[0.06549,4612],[0.06551,5748],[0.06553,7659],[0.06555,3152],[0.06557,11169],[0.06559,6735],[0.06561,4639],[0.06563,7913],[0.06565,5431],[0.06567,8507],[0.06569,6649],[0.06571,4871],[0.06573,9238],[0.06575,18839],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018637117,"sequence":10669719}} --------
2022-06-12 15:23:57.182 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018637309,"tick":{"bids":[[0.07458,33],[0.07456,303],[0.07454,612],[0.07452,1723],[0.07450,636],[0.07448,2477],[0.07446,6507],[0.07444,5957],[0.07442,2745],[0.07440,3573],[0.07438,2052],[0.07436,2491],[0.07435,3573],[0.07433,2052],[0.07430,2604],[0.07428,4186],[0.07425,1793],[0.07423,3258],[0.07420,4535],[0.07418,1624],[0.07416,2801],[0.07413,3302],[0.07411,1975],[0.07410,2147483647]],"asks":[[0.07459,18],[0.07461,786],[0.07462,1087],[0.07464,3480],[0.07466,4801],[0.07468,4851],[0.07470,5065],[0.07472,5505],[0.07474,6465],[0.07476,5567],[0.07478,3288],[0.07480,4419],[0.07482,2729],[0.07484,4422],[0.07486,1720],[0.07487,2729],[0.07490,4102],[0.07492,1960],[0.07495,693],[0.07497,3432],[0.07500,1472],[0.07502,585],[0.07504,3302],[0.07507,15038],[0.07509,1293],[0.07511,2147483647]],"symbolName":"trxusdt","ts":1655018637305,"sequence":10402490}} --------
2022-06-12 15:23:57.620 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018637719,"tick":{"bids":[[0.06525,784],[0.06523,2363],[0.06521,2963],[0.06519,1208],[0.06517,1759],[0.06515,5879],[0.06513,7101],[0.06511,6137],[0.06509,4256],[0.06507,7960],[0.06505,8640],[0.06503,10079],[0.06501,1705],[0.06499,1585],[0.06497,6747],[0.06495,3777],[0.06493,5158],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,213],[0.06539,376],[0.06541,1147],[0.06543,4322],[0.06545,11586],[0.06547,6013],[0.06549,4612],[0.06551,5748],[0.06553,7659],[0.06555,3152],[0.06557,11169],[0.06559,6735],[0.06561,4639],[0.06563,7913],[0.06565,5431],[0.06567,8507],[0.06569,6649],[0.06571,4871],[0.06573,9238],[0.06575,18839],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018637717,"sequence":10669727}} --------
2022-06-12 15:23:57.796 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018637921,"tick":{"bids":[[0.06525,784],[0.06523,2363],[0.06521,2963],[0.06519,1208],[0.06517,1759],[0.06515,5879],[0.06513,7101],[0.06511,6137],[0.06509,4256],[0.06507,7960],[0.06505,8640],[0.06503,10079],[0.06501,1705],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,213],[0.06539,376],[0.06541,1147],[0.06543,4322],[0.06545,11586],[0.06547,6013],[0.06549,4612],[0.06551,5748],[0.06553,7659],[0.06555,3152],[0.06557,11169],[0.06559,6735],[0.06561,4714],[0.06563,7913],[0.06565,8738],[0.06567,8507],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,21964],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018637918,"sequence":10669745}} --------
2022-06-12 15:23:58.016 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018638126,"tick":{"bids":[[0.06525,784],[0.06523,2363],[0.06521,3019],[0.06519,1581],[0.06517,2967],[0.06515,5879],[0.06513,7344],[0.06511,6007],[0.06509,4133],[0.06507,7960],[0.06505,8355],[0.06503,10079],[0.06501,1705],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,213],[0.06539,376],[0.06541,712],[0.06543,4322],[0.06545,10973],[0.06547,6013],[0.06549,4643],[0.06551,5845],[0.06553,7659],[0.06555,3152],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8738],[0.06567,8507],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,21964],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018638123,"sequence":10669765}} --------
2022-06-12 15:23:58.221 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018638283,"tick":{"bids":[[0.07458,33],[0.07457,33],[0.07454,303],[0.07452,741],[0.07450,1723],[0.07447,507],[0.07445,2370],[0.07442,6507],[0.07440,6064],[0.07437,2745],[0.07435,3573],[0.07433,2052],[0.07430,2604],[0.07428,4186],[0.07425,1793],[0.07423,3258],[0.07420,4535],[0.07418,1624],[0.07416,2801],[0.07413,3302],[0.07411,1975],[0.07410,2147483647]],"asks":[[0.07459,18],[0.07461,786],[0.07462,1087],[0.07463,1479],[0.07466,3480],[0.07468,4801],[0.07470,4851],[0.07473,5065],[0.07475,5505],[0.07478,6465],[0.07480,5567],[0.07483,3288],[0.07485,4459],[0.07487,2729],[0.07490,4102],[0.07492,1960],[0.07495,693],[0.07497,3432],[0.07500,1472],[0.07502,585],[0.07504,3302],[0.07507,15038],[0.07509,1293],[0.07511,2147483647]],"symbolName":"trxusdt","ts":1655018638281,"sequence":10402510}} --------
2022-06-12 15:23:58.510 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1655018638332"} --------
2022-06-12 15:23:58.511 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655018638332"}
2022-06-12 15:23:58.511 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018638485,"tick":{"bids":[[0.07458,33],[0.07457,33],[0.07454,303],[0.07452,741],[0.07450,1723],[0.07447,507],[0.07445,2370],[0.07442,6507],[0.07440,6064],[0.07437,2745],[0.07435,3573],[0.07433,2052],[0.07430,2604],[0.07428,4186],[0.07426,1793],[0.07423,3258],[0.07421,4535],[0.07418,1624],[0.07416,2873],[0.07413,3302],[0.07411,1975],[0.07410,2147483647]],"asks":[[0.07459,18],[0.07461,786],[0.07462,1087],[0.07463,1479],[0.07466,3480],[0.07468,4801],[0.07470,4851],[0.07473,5065],[0.07475,5505],[0.07478,6465],[0.07480,5567],[0.07483,3288],[0.07485,4459],[0.07487,2729],[0.07490,4102],[0.07492,1960],[0.07494,693],[0.07497,3432],[0.07499,1472],[0.07502,585],[0.07504,3302],[0.07507,15038],[0.07509,1298],[0.07511,2147483647]],"symbolName":"trxusdt","ts":1655018638482,"sequence":10402529}} --------
2022-06-12 15:23:58.694 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018638819,"tick":{"bids":[[0.06525,879],[0.06523,2617],[0.06521,3019],[0.06519,1581],[0.06517,2967],[0.06515,5879],[0.06513,7344],[0.06511,6007],[0.06509,4133],[0.06507,7960],[0.06505,8355],[0.06503,10079],[0.06501,1705],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,14340],[0.06489,1782],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,9],[0.06539,455],[0.06541,712],[0.06543,4322],[0.06545,10973],[0.06547,6013],[0.06549,4643],[0.06551,5845],[0.06553,7659],[0.06555,3152],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8738],[0.06567,8507],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,21964],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018638816,"sequence":10669770}} --------
2022-06-12 15:23:58.759 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-06-12 15:23:58.759 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-06-12 15:23:58.761 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2022-06-12 15:23:58.957 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018639024,"tick":{"bids":[[0.06525,879],[0.06523,2617],[0.06521,3019],[0.06519,1581],[0.06517,2967],[0.06515,5879],[0.06513,7344],[0.06511,6007],[0.06509,4133],[0.06507,7960],[0.06505,8355],[0.06503,10079],[0.06501,1705],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,11067],[0.06489,5055],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,9],[0.06539,455],[0.06541,712],[0.06543,4322],[0.06545,10973],[0.06547,6013],[0.06549,4643],[0.06551,5845],[0.06553,7659],[0.06555,3152],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8738],[0.06567,8507],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,22105],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018639020,"sequence":10669787}} --------
2022-06-12 15:23:59.095 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018639220,"tick":{"bids":[[0.07458,33],[0.07457,39],[0.07455,303],[0.07452,741],[0.07450,1721],[0.07447,507],[0.07445,2372],[0.07443,6507],[0.07440,6064],[0.07438,2745],[0.07435,3573],[0.07433,2052],[0.07430,2604],[0.07428,4186],[0.07426,1793],[0.07423,3258],[0.07421,4535],[0.07418,1624],[0.07416,2873],[0.07413,3302],[0.07411,1975],[0.07410,2147483647]],"asks":[[0.07459,18],[0.07461,786],[0.07462,1087],[0.07463,1480],[0.07465,3480],[0.07468,4801],[0.07470,4741],[0.07473,5003],[0.07475,5505],[0.07477,7905],[0.07480,4157],[0.07482,3288],[0.07485,4459],[0.07487,2729],[0.07490,4102],[0.07492,1960],[0.07494,693],[0.07497,3432],[0.07499,1472],[0.07502,585],[0.07504,3302],[0.07507,15038],[0.07509,1298],[0.07511,2147483647]],"symbolName":"trxusdt","ts":1655018639217,"sequence":10402552}} --------
2022-06-12 15:23:59.104 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018639227,"tick":{"bids":[[0.06525,879],[0.06523,2617],[0.06521,3019],[0.06519,1158],[0.06517,3007],[0.06515,5879],[0.06513,7350],[0.06511,5385],[0.06509,4133],[0.06507,8612],[0.06505,8355],[0.06503,10079],[0.06501,1705],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,11067],[0.06489,5055],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,9],[0.06539,455],[0.06541,712],[0.06543,4322],[0.06545,8136],[0.06547,8783],[0.06549,4643],[0.06551,5571],[0.06553,7933],[0.06555,3152],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8738],[0.06567,8507],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,22105],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018639222,"sequence":10669805}} --------
2022-06-12 15:23:59.304 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018639431,"tick":{"bids":[[0.07458,33],[0.07457,39],[0.07455,303],[0.07452,741],[0.07450,1721],[0.07447,507],[0.07445,2372],[0.07443,6507],[0.07440,6064],[0.07438,2745],[0.07435,3573],[0.07433,2052],[0.07430,2604],[0.07429,3258],[0.07427,4540],[0.07425,1619],[0.07423,2873],[0.07421,3302],[0.07419,1975],[0.07418,2147483647]],"asks":[[0.07459,18],[0.07461,786],[0.07462,1087],[0.07463,1480],[0.07465,3480],[0.07468,4801],[0.07470,4741],[0.07473,5003],[0.07475,5505],[0.07477,7905],[0.07480,4157],[0.07482,3288],[0.07485,4459],[0.07487,2729],[0.07489,3432],[0.07491,1472],[0.07493,585],[0.07495,3302],[0.07497,15038],[0.07499,1298],[0.07501,2147483647]],"symbolName":"trxusdt","ts":1655018639425,"sequence":10402566}} --------
2022-06-12 15:23:59.511 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018639636,"tick":{"bids":[[0.07458,33],[0.07457,39],[0.07455,303],[0.07452,741],[0.07450,1721],[0.07449,507],[0.07447,2372],[0.07445,6507],[0.07443,6064],[0.07441,2745],[0.07439,3573],[0.07437,2052],[0.07435,2604],[0.07433,4186],[0.07431,1793],[0.07429,3258],[0.07427,4540],[0.07425,1619],[0.07423,2873],[0.07421,3302],[0.07419,1975],[0.07418,2147483647]],"asks":[[0.07459,18],[0.07461,786],[0.07462,1087],[0.07463,1480],[0.07465,3480],[0.07468,4801],[0.07470,4741],[0.07471,5505],[0.07473,6465],[0.07475,5596],[0.07477,3288],[0.07479,4699],[0.07481,2489],[0.07483,4102],[0.07485,1960],[0.07487,693],[0.07489,3432],[0.07491,1472],[0.07493,585],[0.07495,3302],[0.07497,15038],[0.07499,1298],[0.07501,2147483647]],"symbolName":"trxusdt","ts":1655018639633,"sequence":10402585}} --------
2022-06-12 15:23:59.876 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018639881,"tick":{"bids":[[0.06525,1004],[0.06523,2472],[0.06521,3254],[0.06519,1158],[0.06517,3007],[0.06515,5879],[0.06513,7350],[0.06511,5385],[0.06509,4133],[0.06507,8612],[0.06505,8355],[0.06503,10079],[0.06501,1705],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,11067],[0.06489,5055],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,200],[0.06539,498],[0.06541,696],[0.06543,4322],[0.06545,8136],[0.06547,8783],[0.06549,4643],[0.06551,5571],[0.06553,7933],[0.06555,3152],[0.06557,11169],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8738],[0.06567,8507],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,22105],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018639879,"sequence":10669812}} --------
2022-06-12 15:23:59.976 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018640088,"tick":{"bids":[[0.06525,1004],[0.06523,2472],[0.06521,3254],[0.06519,1158],[0.06517,3007],[0.06515,5879],[0.06513,7350],[0.06511,5385],[0.06509,4133],[0.06507,5440],[0.06505,8355],[0.06503,12945],[0.06501,2010],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,11067],[0.06489,5055],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,200],[0.06539,498],[0.06541,696],[0.06543,4322],[0.06545,8136],[0.06547,8783],[0.06549,4643],[0.06551,5571],[0.06553,7933],[0.06555,3152],[0.06557,11169],[0.06559,6735],[0.06561,4639],[0.06563,7913],[0.06565,5566],[0.06567,8667],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,22105],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018640083,"sequence":10669834}} --------
2022-06-12 15:24:00.128 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018640235,"tick":{"bids":[[0.07458,33],[0.07457,19],[0.07455,303],[0.07453,741],[0.07451,1721],[0.07449,507],[0.07447,2372],[0.07445,6507],[0.07443,6064],[0.07441,2745],[0.07439,3573],[0.07437,2052],[0.07435,2604],[0.07433,4186],[0.07431,1793],[0.07429,3258],[0.07427,4540],[0.07425,1619],[0.07423,2873],[0.07421,3302],[0.07419,1975],[0.07418,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07463,3480],[0.07465,4912],[0.07467,4741],[0.07469,5065],[0.07471,5505],[0.07473,6465],[0.07475,5596],[0.07477,3288],[0.07479,4699],[0.07481,2489],[0.07483,4102],[0.07485,1960],[0.07487,693],[0.07489,3432],[0.07491,1472],[0.07493,585],[0.07495,3302],[0.07497,15038],[0.07499,1298],[0.07501,2147483647]],"symbolName":"trxusdt","ts":1655018640226,"sequence":10402595}} --------
2022-06-12 15:24:00.174 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018640293,"tick":{"bids":[[0.06525,1004],[0.06523,2669],[0.06521,2794],[0.06519,1581],[0.06517,3350],[0.06515,6786],[0.06513,6683],[0.06511,5385],[0.06509,4133],[0.06507,5440],[0.06505,8355],[0.06503,12945],[0.06501,2010],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,11067],[0.06489,5055],[0.06487,3263],[0.06486,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,200],[0.06539,449],[0.06541,1095],[0.06543,4322],[0.06545,8136],[0.06547,8783],[0.06549,4643],[0.06551,5571],[0.06553,7933],[0.06555,3152],[0.06557,11169],[0.06559,6735],[0.06561,4639],[0.06563,7913],[0.06565,5566],[0.06567,8667],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,22105],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018640287,"sequence":10669851}} --------
2022-06-12 15:24:00.320 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018640442,"tick":{"bids":[[0.07458,33],[0.07457,19],[0.07455,303],[0.07453,741],[0.07451,1721],[0.07449,507],[0.07447,2372],[0.07445,6507],[0.07443,6064],[0.07441,2745],[0.07439,3573],[0.07437,2052],[0.07435,2604],[0.07433,4186],[0.07431,1793],[0.07429,3258],[0.07427,4540],[0.07426,3538],[0.07424,4260],[0.07422,1619],[0.07420,3083],[0.07418,3092],[0.07416,1975],[0.07415,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07463,3480],[0.07465,4912],[0.07467,4741],[0.07469,5065],[0.07471,5505],[0.07473,6465],[0.07475,5596],[0.07477,3288],[0.07479,4699],[0.07481,2489],[0.07483,4102],[0.07485,1960],[0.07487,693],[0.07489,3432],[0.07491,1472],[0.07493,585],[0.07494,3410],[0.07496,1472],[0.07498,585],[0.07500,3302],[0.07502,15038],[0.07504,1298],[0.07506,2147483647]],"symbolName":"trxusdt","ts":1655018640432,"sequence":10402609}} --------
2022-06-12 15:24:00.511 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018640639,"tick":{"bids":[[0.07458,33],[0.07457,19],[0.07455,303],[0.07453,741],[0.07451,1721],[0.07449,507],[0.07448,1893],[0.07446,507],[0.07444,2372],[0.07442,6507],[0.07440,5957],[0.07438,2745],[0.07436,3573],[0.07434,2052],[0.07432,2604],[0.07430,4186],[0.07428,1793],[0.07426,3538],[0.07424,4260],[0.07422,1619],[0.07420,3083],[0.07418,3092],[0.07416,1975],[0.07415,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07463,3480],[0.07465,4912],[0.07467,4741],[0.07469,5065],[0.07471,5505],[0.07472,4741],[0.07474,4973],[0.07476,5505],[0.07478,6465],[0.07480,5596],[0.07482,3288],[0.07484,4699],[0.07486,2489],[0.07488,4102],[0.07490,1960],[0.07492,693],[0.07494,3410],[0.07496,1472],[0.07498,585],[0.07500,3302],[0.07502,15038],[0.07504,1298],[0.07506,2147483647]],"symbolName":"trxusdt","ts":1655018640636,"sequence":10402631}} --------
2022-06-12 15:24:01.017 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018641037,"tick":{"bids":[[0.06525,877],[0.06523,2669],[0.06521,2794],[0.06519,1581],[0.06517,3350],[0.06515,6786],[0.06513,6683],[0.06511,5385],[0.06509,4133],[0.06507,5440],[0.06505,8355],[0.06503,12945],[0.06501,2010],[0.06499,1585],[0.06497,6747],[0.06495,3913],[0.06493,5158],[0.06491,11067],[0.06490,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,200],[0.06539,449],[0.06541,1095],[0.06543,4322],[0.06545,8136],[0.06547,8783],[0.06549,4643],[0.06551,5571],[0.06553,7933],[0.06555,3152],[0.06557,11169],[0.06559,6735],[0.06561,4639],[0.06563,7913],[0.06565,5566],[0.06567,8667],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,22105],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018641033,"sequence":10669854}} --------
2022-06-12 15:24:01.116 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018641242,"tick":{"bids":[[0.06525,877],[0.06523,2669],[0.06521,2794],[0.06519,1581],[0.06517,3350],[0.06515,6786],[0.06513,6683],[0.06511,5569],[0.06509,8355],[0.06507,12945],[0.06505,2010],[0.06503,1585],[0.06501,7466],[0.06499,3913],[0.06497,5158],[0.06495,10213],[0.06493,5055],[0.06491,3263],[0.06490,2147483647]],"asks":[[0.06527,574],[0.06528,53],[0.06529,2010],[0.06531,2178],[0.06533,622],[0.06535,10],[0.06536,457],[0.06537,200],[0.06539,449],[0.06541,1095],[0.06543,4322],[0.06545,8136],[0.06547,8783],[0.06549,4643],[0.06551,3024],[0.06553,11489],[0.06555,6735],[0.06557,4639],[0.06559,7913],[0.06561,5566],[0.06563,8667],[0.06565,6514],[0.06567,4871],[0.06569,9238],[0.06571,15761],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018641240,"sequence":10669877}} --------
2022-06-12 15:24:01.253 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018641382,"tick":{"bids":[[0.07458,33],[0.07457,19],[0.07455,303],[0.07454,22],[0.07452,131],[0.07450,752],[0.07448,1893],[0.07446,507],[0.07444,2372],[0.07442,6507],[0.07440,5957],[0.07438,2745],[0.07436,3573],[0.07434,2052],[0.07432,2604],[0.07430,4186],[0.07428,1793],[0.07426,3538],[0.07424,4260],[0.07422,1619],[0.07420,3083],[0.07419,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07463,3480],[0.07465,4912],[0.07466,1607],[0.07468,3480],[0.07470,4912],[0.07472,4741],[0.07474,4973],[0.07476,5505],[0.07478,6465],[0.07480,5596],[0.07482,3288],[0.07484,4699],[0.07486,2489],[0.07488,4102],[0.07490,1960],[0.07492,693],[0.07494,3410],[0.07496,1472],[0.07498,585],[0.07500,3302],[0.07502,15038],[0.07504,1298],[0.07506,2147483647]],"symbolName":"trxusdt","ts":1655018641379,"sequence":10402638}} --------
2022-06-12 15:24:01.817 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018641589,"tick":{"bids":[[0.07458,33],[0.07457,19],[0.07455,303],[0.07454,22],[0.07452,131],[0.07450,752],[0.07448,1893],[0.07446,507],[0.07444,2372],[0.07442,6507],[0.07440,5957],[0.07438,2745],[0.07436,2604],[0.07434,4186],[0.07432,1793],[0.07430,3645],[0.07428,4260],[0.07426,1619],[0.07424,2976],[0.07422,3092],[0.07420,1975],[0.07419,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07463,3480],[0.07465,4912],[0.07466,1607],[0.07468,3480],[0.07470,4912],[0.07472,4741],[0.07474,4973],[0.07476,5505],[0.07478,6465],[0.07480,5596],[0.07482,3288],[0.07484,4102],[0.07486,1960],[0.07488,693],[0.07490,3431],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,15038],[0.07500,1298],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018641587,"sequence":10402657}} --------
2022-06-12 15:24:01.868 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018641926,"tick":{"bids":[[0.07458,22],[0.07456,131],[0.07454,752],[0.07452,2093],[0.07450,644],[0.07448,2372],[0.07446,6507],[0.07444,5957],[0.07442,2745],[0.07440,3680],[0.07438,1945],[0.07436,2604],[0.07434,4186],[0.07432,1793],[0.07430,3645],[0.07428,4260],[0.07426,1619],[0.07424,2976],[0.07422,3092],[0.07420,1975],[0.07419,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,1586],[0.07464,3480],[0.07466,4245],[0.07468,5409],[0.07470,5065],[0.07472,5505],[0.07474,6465],[0.07476,5596],[0.07478,3288],[0.07480,4479],[0.07482,2689],[0.07484,4102],[0.07486,1960],[0.07488,693],[0.07490,3431],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,15038],[0.07500,1298],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018641921,"sequence":10402680}} --------
2022-06-12 15:24:01.985 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018642108,"tick":{"bids":[[0.06529,882],[0.06527,2591],[0.06525,3242],[0.06523,1581],[0.06521,2967],[0.06519,6001],[0.06517,7468],[0.06515,5385],[0.06513,4133],[0.06511,5569],[0.06509,8355],[0.06507,12945],[0.06505,2010],[0.06503,1585],[0.06501,7466],[0.06499,3913],[0.06497,5158],[0.06495,10213],[0.06493,5055],[0.06491,3263],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,276],[0.06535,449],[0.06537,1095],[0.06539,4322],[0.06541,8136],[0.06543,8783],[0.06545,4643],[0.06547,5571],[0.06549,7613],[0.06551,3024],[0.06553,11489],[0.06555,6735],[0.06557,4639],[0.06559,7913],[0.06561,5566],[0.06563,8667],[0.06565,6514],[0.06567,4871],[0.06569,9238],[0.06571,15761],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018642106,"sequence":10669896}} --------
2022-06-12 15:24:02.197 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018642313,"tick":{"bids":[[0.06529,882],[0.06527,2591],[0.06525,3242],[0.06523,1581],[0.06521,2967],[0.06519,6001],[0.06517,7468],[0.06515,5385],[0.06513,4133],[0.06511,5569],[0.06509,8355],[0.06507,5440],[0.06505,8355],[0.06503,12945],[0.06501,2010],[0.06499,1585],[0.06497,7466],[0.06495,3777],[0.06493,5008],[0.06491,10213],[0.06489,5539],[0.06487,3128],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,276],[0.06535,449],[0.06537,1095],[0.06539,4322],[0.06541,8136],[0.06543,8783],[0.06545,4643],[0.06547,5571],[0.06549,7613],[0.06551,3024],[0.06553,11489],[0.06555,6735],[0.06557,11489],[0.06559,3563],[0.06561,7886],[0.06563,7913],[0.06565,5701],[0.06567,8667],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,15761],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018642310,"sequence":10669918}} --------
2022-06-12 15:24:02.342 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018642467,"tick":{"bids":[[0.07458,22],[0.07456,131],[0.07454,752],[0.07452,2093],[0.07450,644],[0.07448,2372],[0.07446,6507],[0.07444,5957],[0.07442,2745],[0.07440,3680],[0.07438,1945],[0.07436,2604],[0.07434,4186],[0.07432,1793],[0.07430,3645],[0.07428,4260],[0.07426,1619],[0.07424,2976],[0.07422,3092],[0.07420,1975],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,1586],[0.07464,3480],[0.07466,4245],[0.07468,5409],[0.07470,5065],[0.07472,5505],[0.07474,6465],[0.07476,5596],[0.07478,3288],[0.07480,4479],[0.07482,2689],[0.07484,4102],[0.07486,1960],[0.07488,693],[0.07490,3431],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,15038],[0.07500,1298],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018642461,"sequence":10402681}} --------
2022-06-12 15:24:02.397 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018642523,"tick":{"bids":[[0.06529,882],[0.06527,2591],[0.06525,876],[0.06523,816],[0.06521,3254],[0.06519,1541],[0.06517,3007],[0.06515,6549],[0.06513,6381],[0.06511,5824],[0.06509,4133],[0.06507,5440],[0.06505,8355],[0.06503,12945],[0.06501,2010],[0.06499,1585],[0.06497,7466],[0.06495,3777],[0.06493,5008],[0.06491,10213],[0.06489,5539],[0.06487,3128],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,276],[0.06535,449],[0.06537,296],[0.06539,465],[0.06541,1079],[0.06543,4322],[0.06545,8432],[0.06547,8783],[0.06549,5082],[0.06551,5571],[0.06553,7613],[0.06555,3177],[0.06557,11489],[0.06559,3563],[0.06561,7886],[0.06563,7913],[0.06565,5701],[0.06567,8667],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,15761],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018642520,"sequence":10669937}} --------
2022-06-12 15:24:02.540 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018642665,"tick":{"bids":[[0.07458,22],[0.07456,131],[0.07454,752],[0.07452,2093],[0.07450,644],[0.07448,2372],[0.07446,6507],[0.07444,5957],[0.07442,2745],[0.07440,3680],[0.07438,3680],[0.07436,1945],[0.07434,2604],[0.07432,4186],[0.07430,1793],[0.07428,3527],[0.07426,4260],[0.07424,1619],[0.07422,3089],[0.07420,3092],[0.07418,1975],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,1586],[0.07464,3480],[0.07466,4245],[0.07468,5409],[0.07470,5065],[0.07472,5505],[0.07474,6465],[0.07476,5596],[0.07478,3288],[0.07480,4479],[0.07482,2406],[0.07484,4386],[0.07486,1960],[0.07488,693],[0.07490,3410],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,15038],[0.07500,1293],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018642662,"sequence":10402704}} --------
2022-06-12 15:24:02.962 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018642994,"tick":{"bids":[[0.07458,22],[0.07456,13],[0.07454,131],[0.07452,752],[0.07450,2093],[0.07448,644],[0.07446,2372],[0.07444,6615],[0.07442,5957],[0.07440,2745],[0.07438,3680],[0.07436,1945],[0.07434,2604],[0.07432,4186],[0.07430,1793],[0.07428,3527],[0.07426,4260],[0.07424,1619],[0.07422,3089],[0.07420,3092],[0.07418,1975],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,1608],[0.07464,3480],[0.07466,4245],[0.07468,5342],[0.07470,5132],[0.07472,5505],[0.07474,6572],[0.07476,4013],[0.07478,3288],[0.07480,4479],[0.07482,2406],[0.07484,4386],[0.07486,1960],[0.07488,693],[0.07490,3410],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,15038],[0.07500,1293],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018642990,"sequence":10402723}} --------
2022-06-12 15:24:03.151 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018643269,"tick":{"bids":[[0.06529,882],[0.06527,2591],[0.06525,876],[0.06523,816],[0.06521,3254],[0.06519,1541],[0.06517,3007],[0.06515,6549],[0.06513,6381],[0.06511,5824],[0.06509,4133],[0.06507,5440],[0.06505,8355],[0.06503,12945],[0.06501,2010],[0.06499,1585],[0.06497,7466],[0.06495,3777],[0.06493,5008],[0.06491,10213],[0.06489,5539],[0.06487,3128],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,276],[0.06535,449],[0.06537,296],[0.06539,465],[0.06541,1079],[0.06543,4322],[0.06545,8432],[0.06547,8783],[0.06549,5082],[0.06551,5571],[0.06553,7613],[0.06555,3177],[0.06557,11489],[0.06559,3563],[0.06561,7886],[0.06563,7913],[0.06565,5701],[0.06567,8667],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,15761],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018643265,"sequence":10669938}} --------
2022-06-12 15:24:03.276 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1655018643334"} --------
2022-06-12 15:24:03.276 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655018643334"}
2022-06-12 15:24:03.344 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018643471,"tick":{"bids":[[0.06529,882],[0.06527,2591],[0.06525,876],[0.06523,816],[0.06521,3254],[0.06519,1541],[0.06517,3007],[0.06515,6549],[0.06513,6381],[0.06511,5824],[0.06509,4133],[0.06507,5440],[0.06505,8355],[0.06503,9773],[0.06501,2010],[0.06499,1585],[0.06497,7466],[0.06495,3777],[0.06493,5144],[0.06491,10213],[0.06489,5539],[0.06487,3128],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,276],[0.06535,449],[0.06537,296],[0.06539,465],[0.06541,1079],[0.06543,4322],[0.06545,8432],[0.06547,8783],[0.06549,5082],[0.06551,5571],[0.06553,7613],[0.06555,3177],[0.06557,11489],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8873],[0.06567,8667],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,15761],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018643468,"sequence":10669957}} --------
2022-06-12 15:24:03.427 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018643551,"tick":{"bids":[[0.07458,22],[0.07456,13],[0.07454,131],[0.07452,752],[0.07450,2093],[0.07448,644],[0.07446,2372],[0.07444,6615],[0.07442,5957],[0.07440,2745],[0.07438,3680],[0.07436,1945],[0.07434,2604],[0.07432,4186],[0.07430,1793],[0.07428,3527],[0.07426,4260],[0.07424,1619],[0.07422,3089],[0.07420,3092],[0.07418,1975],[0.07415,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,1608],[0.07464,3480],[0.07466,4245],[0.07468,5342],[0.07470,5132],[0.07472,5505],[0.07474,6572],[0.07476,4013],[0.07478,3288],[0.07480,4479],[0.07482,2406],[0.07484,4386],[0.07486,1960],[0.07488,693],[0.07490,3410],[0.07492,1472],[0.07494,585],[0.07496,3302],[0.07498,15038],[0.07500,1293],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018643546,"sequence":10402724}} --------
2022-06-12 15:24:03.552 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018643678,"tick":{"bids":[[0.06529,882],[0.06527,2591],[0.06525,876],[0.06523,1044],[0.06521,3254],[0.06519,1541],[0.06517,3007],[0.06515,7270],[0.06513,5592],[0.06511,5987],[0.06509,7305],[0.06507,5440],[0.06505,8355],[0.06503,9773],[0.06501,2010],[0.06499,1585],[0.06497,7466],[0.06495,3777],[0.06493,5144],[0.06491,10213],[0.06489,5539],[0.06487,3128],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,276],[0.06535,449],[0.06537,296],[0.06539,376],[0.06541,771],[0.06543,4322],[0.06545,8432],[0.06547,8783],[0.06549,5082],[0.06551,5571],[0.06553,7613],[0.06555,3177],[0.06557,11489],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8873],[0.06567,8667],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,15761],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018643675,"sequence":10669977}} --------
2022-06-12 15:24:03.630 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018643756,"tick":{"bids":[[0.07458,22],[0.07456,13],[0.07454,131],[0.07452,752],[0.07450,2093],[0.07448,644],[0.07446,2372],[0.07444,6615],[0.07442,5957],[0.07440,2745],[0.07438,2745],[0.07436,3680],[0.07434,1945],[0.07432,2378],[0.07430,4186],[0.07428,1793],[0.07426,3527],[0.07424,4260],[0.07422,1619],[0.07420,3089],[0.07418,3852],[0.07416,1975],[0.07415,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,1608],[0.07464,3480],[0.07466,4245],[0.07468,5342],[0.07470,5132],[0.07472,5505],[0.07474,6572],[0.07476,4013],[0.07478,3288],[0.07480,4479],[0.07482,3288],[0.07484,4479],[0.07486,2406],[0.07488,4386],[0.07490,1960],[0.07492,693],[0.07494,3431],[0.07496,1472],[0.07498,585],[0.07500,3302],[0.07502,15156],[0.07504,1293],[0.07506,2147483647]],"symbolName":"trxusdt","ts":1655018643753,"sequence":10402749}} --------
2022-06-12 15:24:03.814 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018643931,"tick":{"bids":[[0.06529,882],[0.06527,2591],[0.06525,965],[0.06523,1044],[0.06521,3254],[0.06519,1541],[0.06517,3007],[0.06515,7270],[0.06513,5592],[0.06511,5987],[0.06509,7305],[0.06507,5440],[0.06505,8355],[0.06503,9773],[0.06501,2010],[0.06499,1585],[0.06497,7466],[0.06495,3777],[0.06493,5144],[0.06491,10213],[0.06489,5539],[0.06487,3128],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,276],[0.06535,449],[0.06537,275],[0.06539,376],[0.06541,771],[0.06543,4322],[0.06545,8432],[0.06547,8783],[0.06549,5082],[0.06551,5571],[0.06553,7613],[0.06555,3177],[0.06557,11489],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8873],[0.06567,8667],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,15761],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018643928,"sequence":10669980}} --------
2022-06-12 15:24:04.179 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018644183,"tick":{"bids":[[0.06529,882],[0.06527,2591],[0.06525,965],[0.06523,1044],[0.06521,3254],[0.06519,1541],[0.06517,3007],[0.06515,7270],[0.06513,5592],[0.06511,5987],[0.06509,7305],[0.06507,5440],[0.06505,8355],[0.06503,9773],[0.06501,2010],[0.06499,1585],[0.06497,7466],[0.06495,3777],[0.06493,5144],[0.06491,10213],[0.06490,2147483647]],"asks":[[0.06531,2178],[0.06533,276],[0.06535,449],[0.06537,275],[0.06539,376],[0.06541,771],[0.06543,4322],[0.06545,8432],[0.06547,8783],[0.06549,5082],[0.06551,5571],[0.06553,7613],[0.06555,3177],[0.06557,11489],[0.06559,3563],[0.06561,4714],[0.06563,7913],[0.06565,8873],[0.06567,8667],[0.06569,6514],[0.06571,4871],[0.06573,9238],[0.06575,15761],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018644179,"sequence":10669981}} --------
2022-06-12 15:24:04.261 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018644388,"tick":{"bids":[[0.06529,882],[0.06527,2591],[0.06525,965],[0.06523,1044],[0.06521,3254],[0.06519,1541],[0.06517,3007],[0.06515,7270],[0.06513,5592],[0.06511,5987],[0.06509,7305],[0.06507,8344],[0.06505,8807],[0.06503,2010],[0.06501,1944],[0.06499,7106],[0.06497,3639],[0.06495,5144],[0.06493,10207],[0.06491,5539],[0.06490,2147483647]],"asks":[[0.06531,2178],[0.06533,276],[0.06535,449],[0.06537,275],[0.06539,376],[0.06541,771],[0.06543,4322],[0.06545,8432],[0.06547,8783],[0.06549,5082],[0.06551,5571],[0.06553,7613],[0.06555,4714],[0.06557,7913],[0.06559,8553],[0.06561,8986],[0.06563,6514],[0.06565,4871],[0.06567,9238],[0.06569,15777],[0.06571,2875],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018644385,"sequence":10670000}} --------
2022-06-12 15:24:04.466 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018644589,"tick":{"bids":[[0.06529,882],[0.06527,1113],[0.06525,878],[0.06523,2981],[0.06521,1486],[0.06519,2884],[0.06517,6204],[0.06515,5732],[0.06513,6374],[0.06511,7305],[0.06509,5452],[0.06507,8344],[0.06505,8807],[0.06503,2010],[0.06501,1944],[0.06499,7106],[0.06497,3639],[0.06495,5144],[0.06493,10207],[0.06491,5539],[0.06490,2147483647]],"asks":[[0.06531,2178],[0.06533,276],[0.06535,1018],[0.06537,3846],[0.06539,7357],[0.06541,10001],[0.06543,3626],[0.06545,5571],[0.06547,7613],[0.06549,3177],[0.06551,11489],[0.06553,3563],[0.06555,4714],[0.06557,7913],[0.06559,8553],[0.06561,8986],[0.06563,6514],[0.06565,4871],[0.06567,9238],[0.06569,15777],[0.06571,2875],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018644587,"sequence":10670020}} --------
2022-06-12 15:24:04.572 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018644692,"tick":{"bids":[[0.07458,22],[0.07456,13],[0.07454,641],[0.07452,543],[0.07450,812],[0.07448,1558],[0.07446,731],[0.07444,2372],[0.07442,6829],[0.07440,5957],[0.07438,2745],[0.07436,3680],[0.07434,1945],[0.07432,2378],[0.07430,4186],[0.07428,1793],[0.07426,3527],[0.07424,4260],[0.07422,1619],[0.07420,3089],[0.07419,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,1608],[0.07464,3480],[0.07466,408],[0.07468,3649],[0.07470,4649],[0.07472,4654],[0.07474,5282],[0.07476,5665],[0.07478,6572],[0.07480,4013],[0.07482,3288],[0.07484,4479],[0.07486,2406],[0.07488,4386],[0.07490,1960],[0.07492,693],[0.07494,3431],[0.07496,1472],[0.07498,585],[0.07500,3302],[0.07502,15156],[0.07504,1293],[0.07506,2147483647]],"symbolName":"trxusdt","ts":1655018644689,"sequence":10402766}} --------
2022-06-12 15:24:04.777 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018644899,"tick":{"bids":[[0.07458,22],[0.07456,13],[0.07454,641],[0.07452,543],[0.07450,812],[0.07448,1558],[0.07446,731],[0.07444,2372],[0.07442,6829],[0.07440,3680],[0.07438,1945],[0.07436,2265],[0.07434,4186],[0.07432,1793],[0.07430,3527],[0.07428,4147],[0.07426,1619],[0.07424,3089],[0.07422,3852],[0.07420,2100],[0.07419,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,1608],[0.07464,3480],[0.07466,408],[0.07468,3649],[0.07470,4649],[0.07472,4654],[0.07474,5282],[0.07476,5665],[0.07478,6572],[0.07480,4013],[0.07482,2406],[0.07484,4386],[0.07486,1960],[0.07488,693],[0.07490,3431],[0.07492,1472],[0.07494,665],[0.07496,3302],[0.07498,15156],[0.07500,1293],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018644896,"sequence":10402788}} --------
2022-06-12 15:24:05.106 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018645137,"tick":{"bids":[[0.07458,661],[0.07456,543],[0.07454,812],[0.07452,1558],[0.07450,731],[0.07448,2372],[0.07446,7151],[0.07444,5849],[0.07442,2858],[0.07440,3680],[0.07438,1945],[0.07436,2265],[0.07434,4186],[0.07432,1793],[0.07430,3527],[0.07428,4147],[0.07426,1619],[0.07424,3089],[0.07422,3852],[0.07420,2100],[0.07419,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07464,3569],[0.07466,4649],[0.07468,4654],[0.07470,5282],[0.07472,5665],[0.07474,6572],[0.07476,4013],[0.07478,3288],[0.07480,4479],[0.07482,2406],[0.07484,4386],[0.07486,1960],[0.07488,693],[0.07490,3431],[0.07492,1472],[0.07494,665],[0.07496,3302],[0.07498,15156],[0.07500,1293],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018645134,"sequence":10402808}} --------
2022-06-12 15:24:05.127 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018645250,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,878],[0.06523,2981],[0.06521,1486],[0.06519,2884],[0.06517,6204],[0.06515,5732],[0.06513,6374],[0.06511,7305],[0.06509,5452],[0.06507,8344],[0.06505,8807],[0.06503,2010],[0.06501,1944],[0.06499,7106],[0.06497,3639],[0.06495,5144],[0.06493,10207],[0.06491,5539],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,3846],[0.06539,7357],[0.06541,10001],[0.06543,3626],[0.06545,5571],[0.06547,7613],[0.06549,3177],[0.06551,11489],[0.06553,3563],[0.06555,4714],[0.06557,7913],[0.06559,8553],[0.06561,8986],[0.06563,6514],[0.06565,4871],[0.06567,9238],[0.06569,15777],[0.06571,2875],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018645248,"sequence":10670023}} --------
2022-06-12 15:24:05.331 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018645457,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,878],[0.06523,2981],[0.06521,1486],[0.06519,2884],[0.06517,6204],[0.06515,5732],[0.06513,6374],[0.06511,7305],[0.06509,5452],[0.06507,8344],[0.06505,5452],[0.06503,8344],[0.06501,11979],[0.06499,2010],[0.06497,1944],[0.06495,6978],[0.06493,3639],[0.06491,5144],[0.06489,10207],[0.06487,5539],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,3846],[0.06539,7357],[0.06541,10001],[0.06543,3626],[0.06545,5571],[0.06547,7613],[0.06549,3177],[0.06551,11489],[0.06553,3563],[0.06555,4714],[0.06557,3563],[0.06559,4714],[0.06561,7913],[0.06563,8553],[0.06565,8986],[0.06567,6514],[0.06569,4871],[0.06571,9238],[0.06573,15777],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018645455,"sequence":10670044}} --------
2022-06-12 15:24:05.532 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018645660,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,573],[0.06523,1120],[0.06521,1601],[0.06519,2327],[0.06517,1192],[0.06515,3277],[0.06513,6663],[0.06511,4506],[0.06509,6374],[0.06507,4133],[0.06505,5452],[0.06503,8344],[0.06501,11979],[0.06499,2010],[0.06497,1944],[0.06495,6978],[0.06493,3639],[0.06491,5144],[0.06489,10207],[0.06487,5539],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,637],[0.06539,526],[0.06541,3421],[0.06543,7337],[0.06545,10153],[0.06547,3779],[0.06549,5443],[0.06551,7613],[0.06553,3177],[0.06555,11489],[0.06557,3563],[0.06559,4714],[0.06561,7913],[0.06563,8553],[0.06565,8986],[0.06567,6514],[0.06569,4871],[0.06571,9238],[0.06573,15777],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018645658,"sequence":10670064}} --------
2022-06-12 15:24:05.664 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018645793,"tick":{"bids":[[0.07458,661],[0.07456,543],[0.07454,812],[0.07452,1558],[0.07450,731],[0.07448,2372],[0.07446,7151],[0.07444,5849],[0.07442,2858],[0.07440,3680],[0.07438,1945],[0.07436,2265],[0.07434,4186],[0.07432,1793],[0.07430,3527],[0.07428,4147],[0.07426,1619],[0.07424,3089],[0.07422,3852],[0.07420,2100],[0.07418,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07464,3569],[0.07466,4649],[0.07468,4654],[0.07470,5282],[0.07472,5665],[0.07474,6572],[0.07476,4013],[0.07478,3288],[0.07480,4479],[0.07482,2406],[0.07484,4386],[0.07486,1960],[0.07488,693],[0.07490,3431],[0.07492,1472],[0.07494,665],[0.07496,3302],[0.07498,15156],[0.07500,1293],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018645791,"sequence":10402809}} --------
2022-06-12 15:24:06.020 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018645998,"tick":{"bids":[[0.07458,661],[0.07456,543],[0.07454,812],[0.07452,1558],[0.07450,731],[0.07448,2372],[0.07446,7151],[0.07444,5849],[0.07442,2858],[0.07440,3680],[0.07439,3527],[0.07437,1945],[0.07435,2133],[0.07433,4126],[0.07431,1793],[0.07429,3527],[0.07427,4147],[0.07425,1619],[0.07423,3089],[0.07421,3852],[0.07419,2100],[0.07418,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07464,3569],[0.07466,4649],[0.07468,4654],[0.07470,5282],[0.07472,5665],[0.07474,6572],[0.07476,4013],[0.07478,3288],[0.07480,4479],[0.07481,4459],[0.07483,2326],[0.07485,4422],[0.07487,1964],[0.07489,553],[0.07491,2296],[0.07493,3026],[0.07495,585],[0.07497,3302],[0.07499,15156],[0.07501,1293],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018645995,"sequence":10402832}} --------
2022-06-12 15:24:06.326 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018646369,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,573],[0.06523,1120],[0.06521,1601],[0.06519,2327],[0.06517,1192],[0.06515,3277],[0.06513,6663],[0.06511,4506],[0.06509,6374],[0.06507,4133],[0.06505,5452],[0.06503,8344],[0.06501,11979],[0.06499,2010],[0.06497,1944],[0.06495,6978],[0.06493,3639],[0.06491,5144],[0.06489,10207],[0.06487,5539],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,637],[0.06539,526],[0.06541,3421],[0.06543,7337],[0.06545,10153],[0.06547,3779],[0.06549,5443],[0.06551,7613],[0.06553,3177],[0.06555,11489],[0.06557,3563],[0.06559,4714],[0.06561,7913],[0.06563,8553],[0.06565,8986],[0.06567,6514],[0.06569,4871],[0.06571,9238],[0.06573,15777],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018646367,"sequence":10670065}} --------
2022-06-12 15:24:06.449 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018646578,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,573],[0.06523,1120],[0.06521,1601],[0.06519,2327],[0.06517,1192],[0.06515,3277],[0.06513,6663],[0.06511,4506],[0.06509,6374],[0.06507,4516],[0.06505,5452],[0.06503,8344],[0.06501,12576],[0.06499,2515],[0.06497,1944],[0.06495,6978],[0.06493,4190],[0.06491,5144],[0.06489,10207],[0.06487,5109],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,637],[0.06539,526],[0.06541,3421],[0.06543,7337],[0.06545,10153],[0.06547,3779],[0.06549,5443],[0.06551,7613],[0.06553,3177],[0.06555,11489],[0.06557,3643],[0.06559,4760],[0.06561,7393],[0.06563,5932],[0.06565,12158],[0.06567,5917],[0.06569,5453],[0.06571,9238],[0.06573,15777],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018646576,"sequence":10670087}} --------
2022-06-12 15:24:06.457 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018646585,"tick":{"bids":[[0.07458,661],[0.07457,879],[0.07455,878],[0.07453,813],[0.07451,1856],[0.07449,731],[0.07447,2370],[0.07445,7259],[0.07443,5466],[0.07441,3001],[0.07439,3527],[0.07437,1945],[0.07435,2133],[0.07433,4126],[0.07431,1793],[0.07429,3527],[0.07427,4147],[0.07425,1619],[0.07423,3089],[0.07421,3852],[0.07419,2100],[0.07418,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07463,234],[0.07465,3022],[0.07467,3847],[0.07469,4963],[0.07471,5503],[0.07473,6193],[0.07475,6572],[0.07477,4013],[0.07479,3268],[0.07481,4459],[0.07483,2326],[0.07485,4422],[0.07487,1964],[0.07489,553],[0.07491,2296],[0.07493,3026],[0.07495,585],[0.07497,3302],[0.07499,15156],[0.07501,1293],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018646582,"sequence":10402851}} --------
2022-06-12 15:24:06.838 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018646853,"tick":{"bids":[[0.07458,661],[0.07457,879],[0.07455,878],[0.07453,813],[0.07451,1856],[0.07449,731],[0.07447,2370],[0.07445,7259],[0.07443,5466],[0.07441,3001],[0.07439,3527],[0.07437,1945],[0.07435,2133],[0.07433,4126],[0.07431,1793],[0.07429,3527],[0.07427,4147],[0.07425,1619],[0.07423,3089],[0.07421,3852],[0.07419,2100],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07463,234],[0.07465,3022],[0.07467,3847],[0.07469,4963],[0.07471,5503],[0.07473,6193],[0.07475,6572],[0.07477,4013],[0.07479,3268],[0.07481,4459],[0.07483,2326],[0.07485,4422],[0.07487,1964],[0.07489,553],[0.07491,2296],[0.07493,3026],[0.07495,585],[0.07497,3302],[0.07499,15156],[0.07501,1293],[0.07503,2147483647]],"symbolName":"trxusdt","ts":1655018646850,"sequence":10402852}} --------
2022-06-12 15:24:06.932 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018647058,"tick":{"bids":[[0.07458,661],[0.07457,879],[0.07455,878],[0.07453,813],[0.07451,1856],[0.07449,731],[0.07447,1856],[0.07445,731],[0.07443,2370],[0.07441,7259],[0.07439,5466],[0.07437,3001],[0.07435,3482],[0.07433,1945],[0.07431,2133],[0.07429,4126],[0.07427,1793],[0.07425,3527],[0.07423,3992],[0.07421,1619],[0.07419,3089],[0.07417,3852],[0.07415,2100],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07463,234],[0.07465,3022],[0.07467,3847],[0.07469,4963],[0.07471,5503],[0.07473,5503],[0.07475,6193],[0.07477,6572],[0.07479,4013],[0.07481,3268],[0.07483,4459],[0.07485,2326],[0.07487,4706],[0.07489,1680],[0.07491,553],[0.07493,2296],[0.07495,3026],[0.07497,585],[0.07499,3302],[0.07501,15156],[0.07503,1293],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018647053,"sequence":10402886}} --------
2022-06-12 15:24:07.250 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018647274,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,576],[0.06523,1120],[0.06521,1601],[0.06519,2710],[0.06517,1192],[0.06515,3154],[0.06513,6598],[0.06511,4506],[0.06509,6374],[0.06507,4516],[0.06505,5452],[0.06503,8344],[0.06501,12576],[0.06499,2515],[0.06497,1944],[0.06495,6978],[0.06493,4190],[0.06491,5144],[0.06489,10207],[0.06487,5109],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,657],[0.06539,526],[0.06541,3414],[0.06543,7720],[0.06545,10064],[0.06547,3677],[0.06549,6476],[0.06551,7478],[0.06553,3238],[0.06555,11409],[0.06557,3643],[0.06559,4760],[0.06561,7393],[0.06563,5932],[0.06565,12158],[0.06567,5917],[0.06569,5453],[0.06571,9238],[0.06573,15777],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018647271,"sequence":10670107}} --------
2022-06-12 15:24:07.353 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018647480,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,576],[0.06523,1120],[0.06521,1601],[0.06519,2710],[0.06517,1192],[0.06515,3154],[0.06513,6598],[0.06511,4506],[0.06509,6374],[0.06507,4516],[0.06505,5452],[0.06503,11517],[0.06501,9580],[0.06499,2210],[0.06497,1944],[0.06495,6978],[0.06493,4190],[0.06491,5334],[0.06489,10207],[0.06487,5109],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,657],[0.06539,526],[0.06541,3414],[0.06543,7720],[0.06545,10064],[0.06547,3677],[0.06549,6476],[0.06551,7478],[0.06553,3238],[0.06555,11409],[0.06557,3643],[0.06559,4760],[0.06561,7393],[0.06563,5932],[0.06565,11998],[0.06567,5917],[0.06569,5453],[0.06571,9238],[0.06573,15777],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018647478,"sequence":10670126}} --------
2022-06-12 15:24:07.565 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018647690,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,576],[0.06523,1120],[0.06521,1601],[0.06519,2710],[0.06517,1315],[0.06515,3154],[0.06513,6720],[0.06511,4506],[0.06509,6252],[0.06507,4516],[0.06505,5452],[0.06503,11517],[0.06501,9580],[0.06499,2210],[0.06497,1944],[0.06495,6978],[0.06493,4190],[0.06491,5334],[0.06489,10207],[0.06487,5109],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,657],[0.06539,526],[0.06541,3340],[0.06543,7720],[0.06545,10024],[0.06547,3717],[0.06549,6476],[0.06551,7478],[0.06553,3238],[0.06555,11409],[0.06557,3643],[0.06559,4760],[0.06561,7393],[0.06563,5932],[0.06565,11998],[0.06567,5917],[0.06569,5453],[0.06571,9238],[0.06573,15777],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018647688,"sequence":10670146}} --------
2022-06-12 15:24:07.970 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018647966,"tick":{"bids":[[0.07458,661],[0.07457,879],[0.07455,878],[0.07453,838],[0.07451,878],[0.07449,813],[0.07447,1856],[0.07445,731],[0.07443,2370],[0.07441,7259],[0.07439,5466],[0.07437,3001],[0.07435,3482],[0.07433,1945],[0.07431,2133],[0.07429,4126],[0.07427,1793],[0.07425,3527],[0.07423,3992],[0.07421,1619],[0.07419,3089],[0.07417,3852],[0.07415,2100],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07463,234],[0.07465,232],[0.07467,3022],[0.07469,3847],[0.07471,4963],[0.07473,5503],[0.07475,6193],[0.07477,6572],[0.07479,4013],[0.07481,3268],[0.07483,4459],[0.07485,2326],[0.07487,4706],[0.07489,1680],[0.07491,553],[0.07493,2296],[0.07495,3026],[0.07497,585],[0.07499,3302],[0.07501,15156],[0.07503,1293],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018647963,"sequence":10402894}} --------
2022-06-12 15:24:08.050 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018648167,"tick":{"bids":[[0.07458,661],[0.07457,879],[0.07455,878],[0.07453,838],[0.07451,878],[0.07449,813],[0.07447,1856],[0.07445,731],[0.07443,2370],[0.07441,7626],[0.07439,5143],[0.07437,3108],[0.07435,3482],[0.07433,3664],[0.07431,960],[0.07429,2520],[0.07427,1793],[0.07425,3527],[0.07423,3992],[0.07421,1619],[0.07419,3089],[0.07417,3852],[0.07415,2100],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07463,234],[0.07465,232],[0.07467,3022],[0.07469,3847],[0.07471,4963],[0.07473,5503],[0.07475,6193],[0.07477,6572],[0.07479,3843],[0.07481,3268],[0.07483,4439],[0.07485,2326],[0.07487,4422],[0.07489,1959],[0.07491,558],[0.07493,2296],[0.07495,3026],[0.07497,585],[0.07499,3302],[0.07501,15156],[0.07503,1293],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018648164,"sequence":10402924}} --------
2022-06-12 15:24:08.376 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1655018648338"} --------
2022-06-12 15:24:08.377 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655018648338"}
2022-06-12 15:24:08.378 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018648425,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,665],[0.06523,1120],[0.06521,1601],[0.06519,2710],[0.06517,1315],[0.06515,3154],[0.06513,6720],[0.06511,4506],[0.06509,6252],[0.06507,4516],[0.06505,5452],[0.06503,11517],[0.06501,9580],[0.06499,2210],[0.06497,1944],[0.06495,6978],[0.06493,4190],[0.06491,5334],[0.06489,10207],[0.06487,5109],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,639],[0.06539,526],[0.06541,3340],[0.06543,7720],[0.06545,10024],[0.06547,3717],[0.06549,6476],[0.06551,7478],[0.06553,3238],[0.06555,11409],[0.06557,3643],[0.06559,4760],[0.06561,7393],[0.06563,5932],[0.06565,11998],[0.06567,5917],[0.06569,5453],[0.06571,9238],[0.06573,15777],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018648422,"sequence":10670149}} --------
2022-06-12 15:24:08.506 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018648629,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,665],[0.06523,1120],[0.06521,1601],[0.06519,2710],[0.06517,1315],[0.06515,3154],[0.06513,6720],[0.06511,4506],[0.06509,6252],[0.06507,4516],[0.06505,4823],[0.06503,11517],[0.06501,9519],[0.06499,2286],[0.06497,2306],[0.06495,6978],[0.06493,4101],[0.06491,5177],[0.06489,7136],[0.06487,1858],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,639],[0.06539,526],[0.06541,3340],[0.06543,7720],[0.06545,10024],[0.06547,3717],[0.06549,6476],[0.06551,7478],[0.06553,3238],[0.06555,11409],[0.06557,3643],[0.06559,4714],[0.06561,10925],[0.06563,5978],[0.06565,8826],[0.06567,5917],[0.06569,5361],[0.06571,9238],[0.06573,15777],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018648627,"sequence":10670169}} --------
2022-06-12 15:24:08.887 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018648971,"tick":{"bids":[[0.07458,661],[0.07457,879],[0.07455,878],[0.07453,836],[0.07451,878],[0.07449,813],[0.07447,1856],[0.07445,731],[0.07443,2370],[0.07441,7626],[0.07439,5143],[0.07437,3108],[0.07435,3482],[0.07433,3664],[0.07431,960],[0.07429,2520],[0.07427,1793],[0.07425,3527],[0.07423,3992],[0.07421,1619],[0.07419,3089],[0.07417,3852],[0.07415,2100],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07463,234],[0.07465,232],[0.07467,3022],[0.07469,3847],[0.07471,4963],[0.07473,5503],[0.07475,6193],[0.07477,6572],[0.07479,3843],[0.07481,3268],[0.07483,4439],[0.07485,2326],[0.07487,4422],[0.07489,1959],[0.07491,558],[0.07493,2296],[0.07495,3026],[0.07497,585],[0.07499,3302],[0.07501,15156],[0.07503,1293],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018648963,"sequence":10402937}} --------
2022-06-12 15:24:09.061 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018649176,"tick":{"bids":[[0.07458,661],[0.07457,879],[0.07455,878],[0.07453,836],[0.07451,878],[0.07449,813],[0.07447,1856],[0.07445,731],[0.07443,2370],[0.07441,7626],[0.07439,5143],[0.07437,3108],[0.07435,3482],[0.07433,3664],[0.07431,960],[0.07429,2520],[0.07427,1793],[0.07425,3527],[0.07423,3992],[0.07421,1619],[0.07419,3089],[0.07417,3852],[0.07416,2100],[0.07415,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07463,234],[0.07465,232],[0.07467,3022],[0.07469,3847],[0.07471,4963],[0.07473,5503],[0.07475,6193],[0.07477,6572],[0.07479,3843],[0.07481,3268],[0.07483,4439],[0.07485,2326],[0.07487,4422],[0.07489,1959],[0.07491,558],[0.07493,2296],[0.07495,3026],[0.07497,585],[0.07499,3302],[0.07501,15156],[0.07503,1293],[0.07504,3255],[0.07506,2147483647]],"symbolName":"trxusdt","ts":1655018649167,"sequence":10402941}} --------
2022-06-12 15:24:09.272 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018649374,"tick":{"bids":[[0.07458,661],[0.07457,879],[0.07455,878],[0.07453,836],[0.07451,878],[0.07449,813],[0.07447,1856],[0.07446,731],[0.07444,2370],[0.07442,7841],[0.07440,5143],[0.07438,3953],[0.07436,3925],[0.07434,3303],[0.07432,563],[0.07430,2064],[0.07428,1680],[0.07426,3527],[0.07424,3992],[0.07422,1619],[0.07420,3089],[0.07418,3852],[0.07416,2100],[0.07415,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07463,234],[0.07465,232],[0.07467,3022],[0.07469,3847],[0.07471,4963],[0.07473,5503],[0.07474,5973],[0.07476,6596],[0.07478,6224],[0.07480,4232],[0.07482,3187],[0.07484,4760],[0.07486,2206],[0.07488,4786],[0.07490,1523],[0.07492,558],[0.07494,2296],[0.07496,3026],[0.07498,665],[0.07500,3302],[0.07502,13343],[0.07504,3255],[0.07506,2147483647]],"symbolName":"trxusdt","ts":1655018649371,"sequence":10402971}} --------
2022-06-12 15:24:09.386 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018649510,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,601],[0.06523,1254],[0.06521,1601],[0.06519,2710],[0.06517,1315],[0.06515,3154],[0.06513,6767],[0.06511,4965],[0.06509,6123],[0.06507,4577],[0.06505,4823],[0.06503,11517],[0.06501,9519],[0.06499,2286],[0.06497,2306],[0.06495,6978],[0.06493,4101],[0.06491,5177],[0.06489,7136],[0.06487,1858],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,639],[0.06539,670],[0.06541,3340],[0.06543,6752],[0.06545,10024],[0.06547,3717],[0.06549,6436],[0.06551,7518],[0.06553,3161],[0.06555,11409],[0.06557,3643],[0.06559,4714],[0.06561,10925],[0.06563,5978],[0.06565,8826],[0.06567,5917],[0.06569,5361],[0.06571,9238],[0.06573,15777],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018649507,"sequence":10670191}} --------
2022-06-12 15:24:09.589 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018649715,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,601],[0.06523,1254],[0.06521,1601],[0.06519,2710],[0.06517,1315],[0.06515,3154],[0.06513,6767],[0.06511,4965],[0.06509,6123],[0.06507,4577],[0.06505,4823],[0.06503,11517],[0.06501,9655],[0.06499,2286],[0.06497,2306],[0.06495,6978],[0.06493,4116],[0.06491,5177],[0.06489,7136],[0.06487,2779],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,639],[0.06539,670],[0.06541,3340],[0.06543,6752],[0.06545,10024],[0.06547,3717],[0.06549,6436],[0.06551,7518],[0.06553,3161],[0.06555,11409],[0.06557,3643],[0.06559,4714],[0.06561,10605],[0.06563,6298],[0.06565,8666],[0.06567,6077],[0.06569,5361],[0.06571,9158],[0.06573,15857],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018649712,"sequence":10670210}} --------
2022-06-12 15:24:09.793 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018649921,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,601],[0.06523,1254],[0.06521,1601],[0.06519,2710],[0.06517,1315],[0.06515,3277],[0.06513,6881],[0.06511,4965],[0.06509,6137],[0.06507,4577],[0.06505,4823],[0.06503,11517],[0.06501,9655],[0.06499,2286],[0.06497,2306],[0.06495,6978],[0.06493,4116],[0.06491,5177],[0.06489,7136],[0.06487,2779],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,639],[0.06539,670],[0.06541,3394],[0.06543,6539],[0.06545,9641],[0.06547,4312],[0.06549,6436],[0.06551,7106],[0.06553,3300],[0.06555,11409],[0.06557,3643],[0.06559,4714],[0.06561,10605],[0.06563,6298],[0.06565,8666],[0.06567,6077],[0.06569,5361],[0.06571,9158],[0.06573,15857],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018649919,"sequence":10670228}} --------
2022-06-12 15:24:10.215 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018650292,"tick":{"bids":[[0.07458,661],[0.07457,879],[0.07455,878],[0.07454,858],[0.07452,878],[0.07450,813],[0.07448,1856],[0.07446,731],[0.07444,2370],[0.07442,7841],[0.07440,5143],[0.07438,3953],[0.07436,3925],[0.07434,3303],[0.07432,563],[0.07430,2064],[0.07428,1680],[0.07426,3527],[0.07424,3992],[0.07422,1619],[0.07420,3089],[0.07419,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07463,234],[0.07465,232],[0.07466,19],[0.07468,3216],[0.07470,3957],[0.07472,4385],[0.07474,5973],[0.07476,6596],[0.07478,6224],[0.07480,4232],[0.07482,3187],[0.07484,4760],[0.07486,2206],[0.07488,4786],[0.07490,1523],[0.07492,558],[0.07494,2296],[0.07496,3026],[0.07498,665],[0.07500,3302],[0.07502,13343],[0.07504,3255],[0.07506,2147483647]],"symbolName":"trxusdt","ts":1655018650289,"sequence":10402980}} --------
2022-06-12 15:24:10.365 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018650494,"tick":{"bids":[[0.07458,661],[0.07457,879],[0.07455,878],[0.07454,858],[0.07452,878],[0.07450,813],[0.07448,1856],[0.07446,731],[0.07444,2370],[0.07442,7841],[0.07440,5143],[0.07438,3083],[0.07436,1169],[0.07434,2183],[0.07432,1680],[0.07430,3527],[0.07428,5089],[0.07426,1382],[0.07424,3089],[0.07422,2147],[0.07420,2100],[0.07419,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07463,234],[0.07465,232],[0.07466,19],[0.07468,3216],[0.07470,3957],[0.07472,4385],[0.07474,5973],[0.07476,6596],[0.07478,6224],[0.07480,4232],[0.07482,599],[0.07484,6188],[0.07486,1528],[0.07488,553],[0.07490,1690],[0.07492,3309],[0.07494,665],[0.07496,1597],[0.07498,13949],[0.07500,3255],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018650491,"sequence":10403001}} --------
2022-06-12 15:24:10.472 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018650601,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,619],[0.06523,1254],[0.06521,1601],[0.06519,2710],[0.06517,1315],[0.06515,3277],[0.06513,6881],[0.06511,4965],[0.06509,6137],[0.06507,4577],[0.06505,4823],[0.06503,11517],[0.06501,9655],[0.06499,2286],[0.06497,2306],[0.06495,6978],[0.06493,4116],[0.06491,5177],[0.06490,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,639],[0.06539,670],[0.06541,3394],[0.06543,6539],[0.06545,9641],[0.06547,4312],[0.06549,6436],[0.06551,7106],[0.06553,3300],[0.06555,11409],[0.06557,3643],[0.06559,4714],[0.06561,10605],[0.06563,6298],[0.06565,8666],[0.06567,6077],[0.06569,5361],[0.06571,9158],[0.06573,15857],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018650598,"sequence":10670233}} --------
2022-06-12 15:24:10.573 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018650701,"tick":{"bids":[[0.07458,661],[0.07457,879],[0.07456,878],[0.07454,813],[0.07452,1856],[0.07450,731],[0.07448,2370],[0.07446,7626],[0.07444,4482],[0.07442,3953],[0.07440,3925],[0.07438,3083],[0.07436,1169],[0.07434,2183],[0.07432,1680],[0.07430,3527],[0.07428,5089],[0.07426,1382],[0.07424,3089],[0.07422,2147],[0.07420,2100],[0.07419,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,407],[0.07463,234],[0.07464,3216],[0.07466,3957],[0.07468,4385],[0.07470,5973],[0.07472,6596],[0.07474,6224],[0.07476,3971],[0.07478,3187],[0.07480,4740],[0.07482,599],[0.07484,6188],[0.07486,1528],[0.07488,553],[0.07490,1690],[0.07492,3309],[0.07494,665],[0.07496,1597],[0.07498,13949],[0.07500,3255],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018650698,"sequence":10403019}} --------
2022-06-12 15:24:10.680 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018650809,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,619],[0.06523,1254],[0.06521,1601],[0.06519,2710],[0.06517,1315],[0.06515,3277],[0.06513,6881],[0.06511,4965],[0.06509,6137],[0.06507,4577],[0.06505,9655],[0.06503,2286],[0.06501,2306],[0.06499,6978],[0.06497,4116],[0.06495,5177],[0.06493,7136],[0.06491,4679],[0.06490,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,639],[0.06539,670],[0.06541,3394],[0.06543,6539],[0.06545,9641],[0.06547,4312],[0.06549,6436],[0.06551,7106],[0.06553,3300],[0.06555,11409],[0.06557,7433],[0.06559,6298],[0.06561,11839],[0.06563,6077],[0.06565,5361],[0.06567,9158],[0.06569,15857],[0.06571,2875],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018650806,"sequence":10670250}} --------
2022-06-12 15:24:10.936 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018651020,"tick":{"bids":[[0.06529,206],[0.06527,1113],[0.06525,619],[0.06523,1254],[0.06521,1315],[0.06519,3277],[0.06517,6881],[0.06515,4965],[0.06513,6421],[0.06511,7749],[0.06509,4823],[0.06507,8344],[0.06505,9655],[0.06503,2286],[0.06501,2306],[0.06499,6978],[0.06497,4116],[0.06495,5177],[0.06493,7136],[0.06491,4679],[0.06490,2147483647]],"asks":[[0.06531,2178],[0.06533,391],[0.06535,1018],[0.06537,639],[0.06539,670],[0.06541,3394],[0.06543,4312],[0.06545,6436],[0.06547,7552],[0.06549,3300],[0.06551,11409],[0.06553,3643],[0.06555,4639],[0.06557,7433],[0.06559,6298],[0.06561,11839],[0.06563,6077],[0.06565,5361],[0.06567,9158],[0.06569,15857],[0.06571,2875],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018651017,"sequence":10670265}} --------
2022-06-12 15:24:11.341 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018651406,"tick":{"bids":[[0.07458,858],[0.07456,878],[0.07454,813],[0.07452,1856],[0.07450,731],[0.07448,2370],[0.07446,7626],[0.07444,4482],[0.07442,3953],[0.07440,3925],[0.07438,3083],[0.07436,1169],[0.07434,2183],[0.07432,1680],[0.07430,3527],[0.07428,5089],[0.07426,1382],[0.07424,3089],[0.07422,2147],[0.07420,2100],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,19],[0.07464,3216],[0.07466,3957],[0.07468,4385],[0.07470,5973],[0.07472,6596],[0.07474,6224],[0.07476,3971],[0.07478,3187],[0.07480,4740],[0.07482,599],[0.07484,6188],[0.07486,1528],[0.07488,553],[0.07490,1690],[0.07492,3309],[0.07494,665],[0.07496,1597],[0.07498,13949],[0.07500,3255],[0.07502,2147483647]],"symbolName":"trxusdt","ts":1655018651403,"sequence":10403023}} --------
2022-06-12 15:24:11.485 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018651609,"tick":{"bids":[[0.07458,858],[0.07456,878],[0.07454,813],[0.07452,1856],[0.07450,731],[0.07448,2370],[0.07446,7626],[0.07444,4482],[0.07442,3953],[0.07440,3925],[0.07438,3083],[0.07436,1169],[0.07434,2183],[0.07432,1680],[0.07431,2273],[0.07429,2183],[0.07427,1680],[0.07425,3527],[0.07423,4853],[0.07421,1382],[0.07419,3089],[0.07417,2147],[0.07415,2100],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,19],[0.07464,3216],[0.07466,3957],[0.07468,4385],[0.07470,5973],[0.07472,6596],[0.07474,6224],[0.07476,3971],[0.07478,3187],[0.07480,4740],[0.07482,599],[0.07484,6188],[0.07486,1528],[0.07488,553],[0.07489,1528],[0.07491,553],[0.07493,1690],[0.07495,3309],[0.07497,585],[0.07499,1597],[0.07501,13949],[0.07503,3255],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018651606,"sequence":10403041}} --------
2022-06-12 15:24:11.507 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018651633,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,956],[0.06523,2710],[0.06521,1315],[0.06519,3277],[0.06517,6881],[0.06515,4965],[0.06513,6421],[0.06511,7749],[0.06509,4823],[0.06507,8344],[0.06505,9655],[0.06503,2286],[0.06501,2306],[0.06499,6978],[0.06497,4116],[0.06495,5177],[0.06493,7136],[0.06491,4679],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,3723],[0.06539,6539],[0.06541,9804],[0.06543,4312],[0.06545,6436],[0.06547,7552],[0.06549,3300],[0.06551,11409],[0.06553,3643],[0.06555,4639],[0.06557,7433],[0.06559,6298],[0.06561,11839],[0.06563,6077],[0.06565,5361],[0.06567,9158],[0.06569,15857],[0.06571,2875],[0.06573,2147483647]],"symbolName":"dogeusdt","ts":1655018651629,"sequence":10670275}} --------
2022-06-12 15:24:11.683 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018651812,"tick":{"bids":[[0.07458,858],[0.07456,878],[0.07454,813],[0.07452,1856],[0.07450,731],[0.07448,2370],[0.07447,1460],[0.07445,731],[0.07443,2587],[0.07441,7733],[0.07439,4858],[0.07437,4178],[0.07435,3925],[0.07433,3083],[0.07431,2273],[0.07429,2183],[0.07427,1680],[0.07425,3527],[0.07423,4853],[0.07421,1382],[0.07419,3089],[0.07417,2147],[0.07415,2100],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,19],[0.07464,3216],[0.07466,3957],[0.07468,4385],[0.07470,5973],[0.07471,4385],[0.07473,5973],[0.07475,6596],[0.07477,6224],[0.07479,3971],[0.07481,3187],[0.07483,4940],[0.07485,839],[0.07487,5708],[0.07489,1528],[0.07491,553],[0.07493,1690],[0.07495,3309],[0.07497,585],[0.07499,1597],[0.07501,13949],[0.07503,3255],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018651809,"sequence":10403058}} --------
2022-06-12 15:24:11.710 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018651837,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,956],[0.06523,2710],[0.06521,1315],[0.06519,3277],[0.06517,6881],[0.06515,4965],[0.06513,6421],[0.06511,7749],[0.06509,4823],[0.06507,8344],[0.06505,9655],[0.06503,2286],[0.06501,9519],[0.06499,2422],[0.06497,2306],[0.06495,6978],[0.06493,4116],[0.06491,5177],[0.06489,7136],[0.06487,4679],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,3723],[0.06539,6539],[0.06541,9804],[0.06543,4312],[0.06545,6436],[0.06547,7552],[0.06549,3300],[0.06551,11409],[0.06553,3643],[0.06555,4639],[0.06557,7433],[0.06559,6298],[0.06561,7433],[0.06563,6298],[0.06565,12039],[0.06567,2804],[0.06569,5361],[0.06571,9158],[0.06573,12568],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018651835,"sequence":10670292}} --------
2022-06-12 15:24:11.979 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018652049,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,956],[0.06523,2710],[0.06521,1315],[0.06519,3277],[0.06517,1698],[0.06515,3154],[0.06513,6881],[0.06511,4589],[0.06509,6292],[0.06507,8377],[0.06505,4823],[0.06503,6799],[0.06501,9519],[0.06499,2422],[0.06497,2306],[0.06495,6978],[0.06493,4116],[0.06491,5177],[0.06489,7136],[0.06487,4679],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,3723],[0.06539,6539],[0.06541,9804],[0.06543,4312],[0.06545,9804],[0.06547,5396],[0.06549,5403],[0.06551,7552],[0.06553,3300],[0.06555,11409],[0.06557,3643],[0.06559,4714],[0.06561,7433],[0.06563,6298],[0.06565,12039],[0.06567,2804],[0.06569,5361],[0.06571,9158],[0.06573,12568],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018652046,"sequence":10670308}} --------
2022-06-12 15:24:12.263 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018652341,"tick":{"bids":[[0.07458,858],[0.07456,878],[0.07454,813],[0.07453,33],[0.07451,878],[0.07449,738],[0.07447,1460],[0.07445,731],[0.07443,2587],[0.07441,7733],[0.07439,4858],[0.07437,4178],[0.07435,3925],[0.07433,3083],[0.07431,2273],[0.07429,2183],[0.07427,1680],[0.07425,3527],[0.07423,4853],[0.07421,1382],[0.07419,3089],[0.07417,2147],[0.07415,2100],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,19],[0.07464,3216],[0.07465,730],[0.07467,3326],[0.07469,3846],[0.07471,4385],[0.07473,5973],[0.07475,6596],[0.07477,6224],[0.07479,3971],[0.07481,3187],[0.07483,4940],[0.07485,839],[0.07487,5708],[0.07489,1528],[0.07491,553],[0.07493,1690],[0.07495,3309],[0.07497,585],[0.07499,1597],[0.07501,13949],[0.07503,3255],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018652338,"sequence":10403066}} --------
2022-06-12 15:24:12.428 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018652550,"tick":{"bids":[[0.07458,858],[0.07456,878],[0.07454,813],[0.07453,33],[0.07451,878],[0.07449,738],[0.07447,1460],[0.07445,731],[0.07443,2587],[0.07441,7733],[0.07439,4858],[0.07437,4178],[0.07435,3925],[0.07433,4216],[0.07431,2183],[0.07429,1680],[0.07427,2029],[0.07425,4853],[0.07423,1382],[0.07421,3089],[0.07419,2064],[0.07417,2021],[0.07415,896],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,19],[0.07464,3216],[0.07465,730],[0.07467,3326],[0.07469,3846],[0.07471,4385],[0.07473,5973],[0.07475,6596],[0.07477,6224],[0.07479,3971],[0.07481,3187],[0.07483,4940],[0.07485,4740],[0.07487,2446],[0.07489,4427],[0.07491,1528],[0.07493,553],[0.07495,1690],[0.07497,3026],[0.07499,585],[0.07501,1597],[0.07503,13949],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018652547,"sequence":10403087}} --------
2022-06-12 15:24:12.620 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018652733,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,356],[0.06523,771],[0.06521,612],[0.06519,2672],[0.06517,1698],[0.06515,3154],[0.06513,6881],[0.06511,4589],[0.06509,6292],[0.06507,8377],[0.06505,4823],[0.06503,6799],[0.06501,9519],[0.06499,2422],[0.06497,2306],[0.06495,6978],[0.06493,4116],[0.06491,5177],[0.06489,7136],[0.06487,4679],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,558],[0.06539,1296],[0.06541,3723],[0.06543,6156],[0.06545,9804],[0.06547,5396],[0.06549,5403],[0.06551,7552],[0.06553,3300],[0.06555,11409],[0.06557,3643],[0.06559,4714],[0.06561,7433],[0.06563,6298],[0.06565,12039],[0.06567,2804],[0.06569,5361],[0.06571,9158],[0.06573,12568],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018652731,"sequence":10670317}} --------
2022-06-12 15:24:12.633 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018652753,"tick":{"bids":[[0.07458,858],[0.07456,878],[0.07454,813],[0.07453,33],[0.07451,878],[0.07449,1761],[0.07447,731],[0.07445,2479],[0.07443,6753],[0.07441,5876],[0.07439,4065],[0.07437,3925],[0.07435,3083],[0.07433,4216],[0.07431,2183],[0.07429,1680],[0.07427,2029],[0.07425,4853],[0.07423,1382],[0.07421,3089],[0.07419,2064],[0.07417,2021],[0.07415,896],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,19],[0.07464,3216],[0.07465,730],[0.07467,3326],[0.07469,3326],[0.07471,4164],[0.07473,3864],[0.07475,5973],[0.07477,7128],[0.07479,4825],[0.07481,2792],[0.07483,4372],[0.07485,4740],[0.07487,2446],[0.07489,4427],[0.07491,1528],[0.07493,553],[0.07495,1690],[0.07497,3026],[0.07499,585],[0.07501,1597],[0.07503,13949],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018652750,"sequence":10403103}} --------
2022-06-12 15:24:12.824 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018652941,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,356],[0.06523,771],[0.06521,612],[0.06519,2672],[0.06517,1698],[0.06515,3154],[0.06513,6881],[0.06511,4589],[0.06509,6292],[0.06507,8377],[0.06505,4823],[0.06503,6799],[0.06501,9519],[0.06499,2422],[0.06497,2306],[0.06495,5407],[0.06493,5686],[0.06491,5177],[0.06489,7136],[0.06487,4679],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,558],[0.06539,1296],[0.06541,3723],[0.06543,6156],[0.06545,9804],[0.06547,5396],[0.06549,5403],[0.06551,7552],[0.06553,3300],[0.06555,11409],[0.06557,3643],[0.06559,4714],[0.06561,7433],[0.06563,6298],[0.06565,8776],[0.06567,6077],[0.06569,5452],[0.06571,9023],[0.06573,15841],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018652939,"sequence":10670330}} --------
2022-06-12 15:24:13.028 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018653151,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,356],[0.06523,771],[0.06521,612],[0.06519,2672],[0.06517,1698],[0.06515,3154],[0.06513,6881],[0.06511,4315],[0.06509,6292],[0.06507,8377],[0.06505,4823],[0.06503,6799],[0.06501,9519],[0.06499,2422],[0.06497,2306],[0.06495,5407],[0.06493,5686],[0.06491,5177],[0.06489,7136],[0.06487,4679],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,558],[0.06539,1296],[0.06541,3723],[0.06543,6156],[0.06545,9804],[0.06547,4896],[0.06549,5403],[0.06551,7857],[0.06553,3300],[0.06555,11104],[0.06557,3643],[0.06559,7811],[0.06561,7509],[0.06563,6298],[0.06565,8776],[0.06567,6077],[0.06569,5452],[0.06571,9023],[0.06573,15841],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018653148,"sequence":10670348}} --------
2022-06-12 15:24:13.396 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1655018653340"} --------
2022-06-12 15:24:13.397 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655018653340"}
2022-06-12 15:24:13.398 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018653486,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,356],[0.06523,1229],[0.06521,612],[0.06519,3055],[0.06517,1698],[0.06515,3154],[0.06513,6881],[0.06511,4315],[0.06509,6292],[0.06507,8377],[0.06505,4823],[0.06503,6799],[0.06501,9519],[0.06499,2422],[0.06497,2306],[0.06495,5407],[0.06493,5686],[0.06491,5177],[0.06489,7136],[0.06487,4679],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,556],[0.06539,772],[0.06541,3793],[0.06543,6156],[0.06545,10304],[0.06547,4896],[0.06549,5403],[0.06551,7857],[0.06553,3300],[0.06555,11104],[0.06557,3643],[0.06559,7811],[0.06561,7509],[0.06563,6298],[0.06565,8776],[0.06567,6077],[0.06569,5452],[0.06571,9023],[0.06573,15841],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018653479,"sequence":10670359}} --------
2022-06-12 15:24:13.399 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018653502,"tick":{"bids":[[0.07458,858],[0.07456,878],[0.07454,813],[0.07453,968],[0.07451,909],[0.07449,1761],[0.07447,731],[0.07445,2479],[0.07443,6753],[0.07441,5876],[0.07439,4065],[0.07437,3925],[0.07435,3083],[0.07433,4216],[0.07431,2183],[0.07429,1680],[0.07427,2029],[0.07425,4853],[0.07423,1382],[0.07421,3089],[0.07419,2064],[0.07417,2021],[0.07415,896],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,19],[0.07464,3216],[0.07465,176],[0.07467,1150],[0.07469,3326],[0.07471,4164],[0.07473,3864],[0.07475,5973],[0.07477,7128],[0.07479,4825],[0.07481,2792],[0.07483,4372],[0.07485,4740],[0.07487,2446],[0.07489,4427],[0.07491,1528],[0.07493,553],[0.07495,1690],[0.07497,3026],[0.07499,585],[0.07501,1597],[0.07503,13949],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018653492,"sequence":10403108}} --------
2022-06-12 15:24:13.575 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018653702,"tick":{"bids":[[0.07458,858],[0.07456,878],[0.07454,813],[0.07453,968],[0.07451,909],[0.07449,1761],[0.07447,731],[0.07445,2479],[0.07443,6753],[0.07441,5876],[0.07439,4065],[0.07437,3925],[0.07435,3083],[0.07433,4334],[0.07431,2183],[0.07429,1680],[0.07427,2029],[0.07425,3841],[0.07423,1382],[0.07421,3213],[0.07419,2064],[0.07417,2021],[0.07415,896],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,19],[0.07464,3216],[0.07465,176],[0.07467,1150],[0.07469,3326],[0.07471,4164],[0.07473,3864],[0.07475,5973],[0.07477,7128],[0.07479,4825],[0.07481,2792],[0.07483,4372],[0.07485,4740],[0.07487,2446],[0.07489,4267],[0.07491,1288],[0.07493,553],[0.07495,1690],[0.07497,3026],[0.07499,585],[0.07501,1597],[0.07503,12937],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018653699,"sequence":10403128}} --------
2022-06-12 15:24:13.714 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018653841,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,356],[0.06523,1229],[0.06521,612],[0.06519,3055],[0.06517,1698],[0.06515,3154],[0.06513,6881],[0.06511,4315],[0.06509,6292],[0.06507,8377],[0.06505,4823],[0.06503,6799],[0.06501,9519],[0.06499,2422],[0.06497,2306],[0.06495,5407],[0.06493,5686],[0.06491,5177],[0.06489,7136],[0.06487,4679],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,556],[0.06539,772],[0.06541,3793],[0.06543,6156],[0.06545,10304],[0.06547,4896],[0.06549,5403],[0.06551,7857],[0.06553,3300],[0.06555,11104],[0.06557,3643],[0.06559,7811],[0.06561,7509],[0.06563,6298],[0.06565,8776],[0.06567,6077],[0.06569,5452],[0.06571,9023],[0.06573,15841],[0.06575,2875],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018653839,"sequence":10670360}} --------
2022-06-12 15:24:13.815 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018653917,"tick":{"bids":[[0.07458,858],[0.07456,878],[0.07454,813],[0.07453,968],[0.07451,909],[0.07449,1688],[0.07447,731],[0.07445,2587],[0.07443,6753],[0.07441,5989],[0.07439,4065],[0.07437,3925],[0.07435,3084],[0.07433,4334],[0.07431,2183],[0.07429,1680],[0.07427,2029],[0.07425,3841],[0.07423,1382],[0.07421,3213],[0.07419,2064],[0.07417,2021],[0.07415,896],[0.07414,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,19],[0.07464,3216],[0.07465,176],[0.07467,1150],[0.07469,3326],[0.07471,4593],[0.07473,3864],[0.07475,6311],[0.07477,7128],[0.07479,4713],[0.07481,2792],[0.07483,4511],[0.07485,4860],[0.07487,2446],[0.07489,4267],[0.07491,1288],[0.07493,553],[0.07495,1690],[0.07497,3026],[0.07499,585],[0.07501,1597],[0.07503,12937],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018653914,"sequence":10403144}} --------
2022-06-12 15:24:13.921 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018654048,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,356],[0.06523,1229],[0.06521,612],[0.06519,3055],[0.06517,1698],[0.06515,3154],[0.06513,6881],[0.06511,4315],[0.06509,6292],[0.06507,8377],[0.06505,4823],[0.06503,6799],[0.06501,9519],[0.06499,5661],[0.06497,6987],[0.06495,3863],[0.06493,3879],[0.06491,2655],[0.06489,12253],[0.06487,371],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,556],[0.06539,772],[0.06541,3793],[0.06543,6156],[0.06545,10304],[0.06547,4896],[0.06549,5403],[0.06551,7857],[0.06553,3300],[0.06555,11104],[0.06557,3643],[0.06559,7811],[0.06561,7509],[0.06563,3643],[0.06565,8021],[0.06567,7509],[0.06569,3883],[0.06571,8634],[0.06573,6077],[0.06575,6252],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018654046,"sequence":10670375}} --------
2022-06-12 15:24:14.212 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018654253,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,356],[0.06523,1229],[0.06521,612],[0.06519,3055],[0.06517,4603],[0.06515,6265],[0.06513,5841],[0.06511,2917],[0.06509,6636],[0.06507,7594],[0.06505,2444],[0.06503,2311],[0.06501,3932],[0.06499,5661],[0.06497,6987],[0.06495,3863],[0.06493,3879],[0.06491,2655],[0.06489,12253],[0.06487,371],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,556],[0.06539,772],[0.06541,3793],[0.06543,6156],[0.06545,1338],[0.06547,5256],[0.06549,6091],[0.06551,10243],[0.06553,2852],[0.06555,5635],[0.06557,6546],[0.06559,3096],[0.06561,10975],[0.06563,3643],[0.06565,8021],[0.06567,7509],[0.06569,3883],[0.06571,8634],[0.06573,6077],[0.06575,6252],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018654251,"sequence":10670393}} --------
2022-06-12 15:24:14.358 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018654485,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,29],[0.06523,1248],[0.06521,2108],[0.06519,6127],[0.06517,4603],[0.06515,6265],[0.06513,5841],[0.06511,2917],[0.06509,6636],[0.06507,7594],[0.06505,2444],[0.06503,2311],[0.06501,3932],[0.06499,5661],[0.06497,6987],[0.06495,3863],[0.06493,3879],[0.06491,2655],[0.06489,12253],[0.06487,371],[0.06486,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,70],[0.06539,1009],[0.06541,2172],[0.06543,3304],[0.06545,1338],[0.06547,5256],[0.06549,6091],[0.06551,10243],[0.06553,2852],[0.06555,5635],[0.06557,6546],[0.06559,3096],[0.06561,10975],[0.06563,3643],[0.06565,8021],[0.06567,7509],[0.06569,3883],[0.06571,8634],[0.06573,6077],[0.06575,6252],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018654477,"sequence":10670402}} --------
2022-06-12 15:24:14.373 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018654498,"tick":{"bids":[[0.07458,858],[0.07456,878],[0.07454,813],[0.07453,991],[0.07451,983],[0.07449,1688],[0.07447,731],[0.07445,2587],[0.07443,6753],[0.07441,5989],[0.07439,4065],[0.07437,3925],[0.07435,3084],[0.07433,4334],[0.07431,2183],[0.07429,1680],[0.07427,2029],[0.07425,3841],[0.07423,1382],[0.07421,3213],[0.07419,2064],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,19],[0.07464,3216],[0.07465,6],[0.07467,1070],[0.07469,3406],[0.07471,4593],[0.07473,3864],[0.07475,6311],[0.07477,7128],[0.07479,4713],[0.07481,2792],[0.07483,4511],[0.07485,4860],[0.07487,2446],[0.07489,4267],[0.07491,1288],[0.07493,553],[0.07495,1690],[0.07497,3026],[0.07499,585],[0.07501,1597],[0.07503,12937],[0.07505,2147483647]],"symbolName":"trxusdt","ts":1655018654492,"sequence":10403151}} --------
2022-06-12 15:24:14.576 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018654703,"tick":{"bids":[[0.07458,858],[0.07456,878],[0.07454,813],[0.07453,991],[0.07451,983],[0.07449,1688],[0.07447,731],[0.07445,2587],[0.07443,6753],[0.07441,5989],[0.07439,4065],[0.07437,3925],[0.07435,3084],[0.07434,1876],[0.07432,4451],[0.07430,1866],[0.07428,3352],[0.07426,2301],[0.07424,2465],[0.07422,928],[0.07420,2076],[0.07418,1323],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,19],[0.07464,3216],[0.07465,6],[0.07467,1070],[0.07469,3406],[0.07471,4593],[0.07473,3864],[0.07475,6311],[0.07477,7128],[0.07479,4713],[0.07481,2792],[0.07482,1809],[0.07484,4692],[0.07486,1079],[0.07488,3844],[0.07490,1561],[0.07492,693],[0.07494,1059],[0.07496,4037],[0.07498,585],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018654700,"sequence":10403170}} --------
2022-06-12 15:24:14.753 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018654857,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,29],[0.06523,1248],[0.06521,2108],[0.06519,6127],[0.06517,4603],[0.06515,6265],[0.06513,5841],[0.06511,2917],[0.06509,6636],[0.06507,7594],[0.06505,2444],[0.06503,2311],[0.06501,3932],[0.06499,5661],[0.06497,6987],[0.06495,3863],[0.06493,3879],[0.06491,2655],[0.06489,12253],[0.06488,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,70],[0.06539,1009],[0.06541,2172],[0.06543,3304],[0.06545,1338],[0.06547,5256],[0.06549,6091],[0.06551,10243],[0.06553,2852],[0.06555,5635],[0.06557,6546],[0.06559,3096],[0.06561,10975],[0.06563,3643],[0.06565,8021],[0.06567,7509],[0.06569,3883],[0.06571,8634],[0.06573,6077],[0.06575,6252],[0.06577,2147483647]],"symbolName":"dogeusdt","ts":1655018654854,"sequence":10670403}} --------
2022-06-12 15:24:14.795 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018654911,"tick":{"bids":[[0.07458,858],[0.07456,878],[0.07454,813],[0.07453,991],[0.07452,1137],[0.07450,2367],[0.07448,3128],[0.07446,2980],[0.07444,4746],[0.07442,1879],[0.07440,4055],[0.07438,2785],[0.07436,3399],[0.07434,1876],[0.07432,4451],[0.07430,1866],[0.07428,3352],[0.07426,2301],[0.07424,2465],[0.07422,928],[0.07420,2076],[0.07418,1323],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07461,1482],[0.07462,19],[0.07464,3216],[0.07465,6],[0.07466,2252],[0.07468,4318],[0.07470,4319],[0.07472,4133],[0.07474,5776],[0.07476,4226],[0.07478,5919],[0.07480,2819],[0.07482,1809],[0.07484,4692],[0.07486,1079],[0.07488,3844],[0.07490,1561],[0.07492,693],[0.07494,1059],[0.07496,4037],[0.07498,585],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018654908,"sequence":10403187}} --------
2022-06-12 15:24:14.960 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018655079,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,29],[0.06523,1248],[0.06521,2108],[0.06519,6127],[0.06517,4603],[0.06515,6265],[0.06513,5841],[0.06511,2917],[0.06509,6636],[0.06507,7594],[0.06505,2444],[0.06503,2311],[0.06501,3932],[0.06499,10273],[0.06497,3976],[0.06495,3857],[0.06493,5656],[0.06491,6340],[0.06489,2799],[0.06488,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,70],[0.06539,1009],[0.06541,2172],[0.06543,3304],[0.06545,1338],[0.06547,5256],[0.06549,6091],[0.06551,10243],[0.06553,2852],[0.06555,5635],[0.06557,6546],[0.06559,6728],[0.06561,7160],[0.06563,3883],[0.06565,7518],[0.06567,6077],[0.06569,6542],[0.06571,2147483647]],"symbolName":"dogeusdt","ts":1655018655076,"sequence":10670416}} --------
2022-06-12 15:24:15.319 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018655287,"tick":{"bids":[[0.06529,772],[0.06527,1279],[0.06525,29],[0.06523,1248],[0.06521,2108],[0.06519,6127],[0.06517,4603],[0.06515,4668],[0.06513,3445],[0.06511,6182],[0.06509,10322],[0.06507,2457],[0.06505,3173],[0.06503,4289],[0.06501,4543],[0.06499,10273],[0.06497,3976],[0.06495,3857],[0.06493,5656],[0.06491,6340],[0.06489,2799],[0.06488,2147483647]],"asks":[[0.06531,2178],[0.06533,538],[0.06535,670],[0.06537,70],[0.06539,1009],[0.06541,2172],[0.06543,5129],[0.06545,9550],[0.06547,3028],[0.06549,5549],[0.06551,5752],[0.06553,2651],[0.06555,8716],[0.06557,3899],[0.06559,6728],[0.06561,7160],[0.06563,3883],[0.06565,7518],[0.06567,6077],[0.06569,6542],[0.06571,2147483647]],"symbolName":"dogeusdt","ts":1655018655284,"sequence":10670432}} --------
2022-06-12 15:24:15.407 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018655534,"tick":{"bids":[[0.07458,858],[0.07456,192],[0.07454,545],[0.07452,1137],[0.07450,2367],[0.07448,3128],[0.07446,2980],[0.07444,4746],[0.07442,1879],[0.07440,4055],[0.07438,2785],[0.07436,3399],[0.07434,1876],[0.07432,4451],[0.07430,1866],[0.07428,3352],[0.07426,2301],[0.07424,2465],[0.07422,928],[0.07420,2076],[0.07418,1323],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07460,526],[0.07462,2195],[0.07464,1264],[0.07466,2252],[0.07468,4318],[0.07470,4319],[0.07472,4133],[0.07474,5776],[0.07476,4226],[0.07478,5919],[0.07480,2819],[0.07482,1809],[0.07484,4692],[0.07486,1079],[0.07488,3844],[0.07490,1561],[0.07492,693],[0.07494,1059],[0.07496,4037],[0.07498,585],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018655531,"sequence":10403194}} --------
2022-06-12 15:24:15.629 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018655742,"tick":{"bids":[[0.07458,858],[0.07456,192],[0.07454,545],[0.07452,1137],[0.07450,2367],[0.07448,3128],[0.07446,2980],[0.07444,4746],[0.07442,1879],[0.07440,4055],[0.07438,2785],[0.07436,3769],[0.07434,1719],[0.07432,3353],[0.07430,1865],[0.07428,3623],[0.07426,4016],[0.07424,2214],[0.07422,685],[0.07420,2327],[0.07418,1074],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07460,526],[0.07462,2195],[0.07464,1264],[0.07466,2252],[0.07468,4318],[0.07470,4319],[0.07472,4133],[0.07474,5776],[0.07476,4226],[0.07478,5919],[0.07480,2819],[0.07482,2369],[0.07484,4512],[0.07486,883],[0.07488,5884],[0.07490,1537],[0.07492,693],[0.07494,1059],[0.07496,3089],[0.07498,703],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018655739,"sequence":10403214}} --------
2022-06-12 15:24:15.820 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018655949,"tick":{"bids":[[0.07458,858],[0.07456,144],[0.07454,545],[0.07452,910],[0.07450,1620],[0.07448,2686],[0.07446,2765],[0.07444,4631],[0.07442,1984],[0.07440,3706],[0.07438,2911],[0.07436,3769],[0.07434,1719],[0.07432,3353],[0.07430,1865],[0.07428,3623],[0.07426,4016],[0.07424,2214],[0.07422,685],[0.07420,2327],[0.07418,1074],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07460,526],[0.07462,2093],[0.07464,1094],[0.07466,2519],[0.07468,4994],[0.07470,4077],[0.07472,5242],[0.07474,5622],[0.07476,5416],[0.07478,4946],[0.07480,2739],[0.07482,2369],[0.07484,4512],[0.07486,883],[0.07488,5884],[0.07490,1537],[0.07492,693],[0.07494,1059],[0.07496,3089],[0.07498,703],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018655945,"sequence":10403234}} --------
2022-06-12 15:24:15.877 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018655995,"tick":{"bids":[[0.06529,772],[0.06527,450],[0.06525,694],[0.06523,647],[0.06521,2915],[0.06519,4410],[0.06517,5544],[0.06515,4668],[0.06513,3445],[0.06511,6182],[0.06509,10322],[0.06507,2457],[0.06505,3173],[0.06503,4289],[0.06501,4543],[0.06499,10273],[0.06497,3976],[0.06495,3857],[0.06493,5656],[0.06491,6340],[0.06489,2799],[0.06484,2147483647]],"asks":[[0.06531,188],[0.06533,692],[0.06535,2961],[0.06537,3222],[0.06539,3322],[0.06541,9556],[0.06543,5129],[0.06545,9550],[0.06547,3028],[0.06549,5549],[0.06551,5752],[0.06553,2651],[0.06555,8716],[0.06557,3899],[0.06559,6728],[0.06561,7160],[0.06563,3883],[0.06565,7518],[0.06567,6077],[0.06569,6542],[0.06571,2147483647]],"symbolName":"dogeusdt","ts":1655018655993,"sequence":10670445}} --------
2022-06-12 15:24:16.073 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018656201,"tick":{"bids":[[0.06529,772],[0.06527,450],[0.06525,694],[0.06523,647],[0.06521,2915],[0.06519,4410],[0.06517,5544],[0.06515,4668],[0.06513,3445],[0.06511,6182],[0.06509,10322],[0.06507,2457],[0.06505,3173],[0.06503,4289],[0.06501,6345],[0.06499,4595],[0.06497,2958],[0.06495,8671],[0.06493,3976],[0.06491,3857],[0.06489,5656],[0.06487,6340],[0.06485,1114],[0.06484,2147483647]],"asks":[[0.06531,188],[0.06533,692],[0.06535,2961],[0.06537,3222],[0.06539,3322],[0.06541,9556],[0.06543,5129],[0.06545,9550],[0.06547,3028],[0.06549,5549],[0.06551,5752],[0.06553,2651],[0.06555,8716],[0.06557,2651],[0.06559,8716],[0.06561,3800],[0.06563,6728],[0.06565,10333],[0.06567,3883],[0.06569,7518],[0.06571,6098],[0.06573,6542],[0.06575,2147483647]],"symbolName":"dogeusdt","ts":1655018656198,"sequence":10670464}} --------
2022-06-12 15:24:16.285 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018656413,"tick":{"bids":[[0.06529,772],[0.06527,450],[0.06525,694],[0.06523,647],[0.06521,594],[0.06519,1594],[0.06517,2935],[0.06515,5083],[0.06513,5544],[0.06511,4688],[0.06509,3405],[0.06507,6182],[0.06505,10018],[0.06503,4016],[0.06501,6345],[0.06499,4595],[0.06497,2958],[0.06495,8671],[0.06493,3976],[0.06491,3857],[0.06489,5656],[0.06487,6340],[0.06485,1114],[0.06484,2147483647]],"asks":[[0.06531,188],[0.06533,692],[0.06535,2961],[0.06537,3222],[0.06539,2446],[0.06541,3202],[0.06543,3475],[0.06545,9626],[0.06547,5018],[0.06549,9680],[0.06551,3043],[0.06553,5877],[0.06555,5546],[0.06557,2651],[0.06559,8716],[0.06561,3800],[0.06563,6728],[0.06565,10333],[0.06567,3883],[0.06569,7518],[0.06571,6098],[0.06573,6542],[0.06575,2147483647]],"symbolName":"dogeusdt","ts":1655018656411,"sequence":10670483}} --------
2022-06-12 15:24:16.566 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018656630,"tick":{"bids":[[0.07458,858],[0.07456,144],[0.07454,545],[0.07452,910],[0.07450,1620],[0.07448,2686],[0.07446,2765],[0.07444,4631],[0.07442,1984],[0.07440,3706],[0.07438,2911],[0.07436,3769],[0.07434,1719],[0.07432,3353],[0.07430,1865],[0.07428,3623],[0.07426,4016],[0.07424,2214],[0.07422,685],[0.07420,2327],[0.07418,1074],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07460,1626],[0.07462,2093],[0.07464,1094],[0.07466,2519],[0.07468,4994],[0.07470,4077],[0.07472,5242],[0.07474,5622],[0.07476,5416],[0.07478,4946],[0.07480,2739],[0.07482,2369],[0.07484,4512],[0.07486,883],[0.07488,5884],[0.07490,1537],[0.07492,693],[0.07494,1059],[0.07496,3089],[0.07498,703],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018656627,"sequence":10403236}} --------
2022-06-12 15:24:16.707 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018656834,"tick":{"bids":[[0.07458,858],[0.07456,144],[0.07454,545],[0.07452,910],[0.07450,1620],[0.07448,2686],[0.07446,2765],[0.07444,4631],[0.07442,1984],[0.07440,3706],[0.07438,3024],[0.07436,2080],[0.07434,3325],[0.07432,3353],[0.07430,1865],[0.07428,4518],[0.07426,3779],[0.07424,2214],[0.07422,685],[0.07420,327],[0.07418,1074],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07460,1626],[0.07462,2093],[0.07464,1094],[0.07466,2519],[0.07468,4994],[0.07470,4077],[0.07472,5242],[0.07474,5622],[0.07476,5416],[0.07478,4946],[0.07480,3066],[0.07482,2369],[0.07484,4531],[0.07486,864],[0.07488,5724],[0.07490,1518],[0.07492,693],[0.07494,1059],[0.07496,3089],[0.07498,703],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018656831,"sequence":10403258}} --------
2022-06-12 15:24:16.921 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018657048,"tick":{"bids":[[0.07458,858],[0.07456,717],[0.07454,545],[0.07452,933],[0.07450,1613],[0.07448,2686],[0.07446,2872],[0.07444,4985],[0.07442,1984],[0.07440,3818],[0.07438,3024],[0.07436,2080],[0.07434,3325],[0.07432,3353],[0.07430,1865],[0.07428,4518],[0.07426,3779],[0.07424,2214],[0.07422,685],[0.07420,327],[0.07418,1074],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07460,1626],[0.07462,1483],[0.07464,2000],[0.07466,4247],[0.07468,3907],[0.07470,4157],[0.07472,5242],[0.07474,4954],[0.07476,5524],[0.07478,4966],[0.07480,3066],[0.07482,2369],[0.07484,4531],[0.07486,864],[0.07488,5724],[0.07490,1518],[0.07492,693],[0.07494,1059],[0.07496,3089],[0.07498,703],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018657045,"sequence":10403276}} --------
2022-06-12 15:24:17.081 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018657081,"tick":{"bids":[[0.06529,772],[0.06527,450],[0.06525,694],[0.06523,577],[0.06521,594],[0.06519,1594],[0.06517,2935],[0.06515,5083],[0.06513,5544],[0.06511,4688],[0.06509,3405],[0.06507,6182],[0.06505,10018],[0.06503,4016],[0.06501,6345],[0.06499,4595],[0.06497,2958],[0.06495,8671],[0.06493,3976],[0.06491,3857],[0.06489,5656],[0.06487,6340],[0.06485,1114],[0.06484,2147483647]],"asks":[[0.06531,188],[0.06533,692],[0.06535,87],[0.06537,307],[0.06539,2446],[0.06541,3202],[0.06543,3475],[0.06545,9626],[0.06547,5018],[0.06549,9680],[0.06551,3043],[0.06553,5877],[0.06555,5546],[0.06557,2651],[0.06559,8716],[0.06561,3800],[0.06563,6728],[0.06565,10333],[0.06567,3883],[0.06569,7518],[0.06571,6098],[0.06573,6542],[0.06575,2147483647]],"symbolName":"dogeusdt","ts":1655018657079,"sequence":10670487}} --------
2022-06-12 15:24:17.159 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018657283,"tick":{"bids":[[0.06529,772],[0.06527,450],[0.06525,694],[0.06523,577],[0.06521,594],[0.06519,1594],[0.06517,2935],[0.06515,5083],[0.06513,5544],[0.06511,4688],[0.06509,3405],[0.06507,6182],[0.06505,10018],[0.06503,4016],[0.06501,6345],[0.06499,4595],[0.06497,2958],[0.06495,8671],[0.06493,3976],[0.06491,3948],[0.06489,5565],[0.06487,6081],[0.06485,1114],[0.06484,2147483647]],"asks":[[0.06531,188],[0.06533,692],[0.06535,87],[0.06537,307],[0.06539,2446],[0.06541,3202],[0.06543,3475],[0.06545,9626],[0.06547,5018],[0.06549,9680],[0.06551,3043],[0.06553,5877],[0.06555,5546],[0.06557,2651],[0.06559,8716],[0.06561,3800],[0.06563,6728],[0.06565,10333],[0.06567,2679],[0.06569,7518],[0.06571,3646],[0.06573,6542],[0.06575,2147483647]],"symbolName":"dogeusdt","ts":1655018657281,"sequence":10670502}} --------
2022-06-12 15:24:17.360 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018657487,"tick":{"bids":[[0.06529,772],[0.06527,450],[0.06525,694],[0.06523,577],[0.06521,594],[0.06519,1594],[0.06517,2935],[0.06515,5215],[0.06513,5818],[0.06511,4185],[0.06509,3589],[0.06507,6182],[0.06505,10018],[0.06503,4016],[0.06501,6480],[0.06499,4595],[0.06497,2958],[0.06495,8671],[0.06493,3976],[0.06491,3948],[0.06489,5565],[0.06487,6081],[0.06485,1114],[0.06484,2147483647]],"asks":[[0.06531,188],[0.06533,692],[0.06535,87],[0.06537,307],[0.06539,2446],[0.06541,3202],[0.06543,3475],[0.06545,9748],[0.06547,5703],[0.06549,9517],[0.06551,3043],[0.06553,6103],[0.06555,5319],[0.06557,2651],[0.06559,9786],[0.06561,3800],[0.06563,6728],[0.06565,10333],[0.06567,2679],[0.06569,7518],[0.06571,3646],[0.06573,6542],[0.06575,2147483647]],"symbolName":"dogeusdt","ts":1655018657485,"sequence":10670519}} --------
2022-06-12 15:24:17.691 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018657759,"tick":{"bids":[[0.07458,858],[0.07456,717],[0.07454,545],[0.07452,933],[0.07450,1613],[0.07448,2686],[0.07446,2872],[0.07444,4985],[0.07442,1984],[0.07440,3818],[0.07438,3024],[0.07436,2080],[0.07434,3325],[0.07432,3353],[0.07430,1865],[0.07428,4518],[0.07426,3779],[0.07424,2214],[0.07422,685],[0.07420,327],[0.07418,1074],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07460,455],[0.07462,1483],[0.07464,2000],[0.07466,4247],[0.07468,3907],[0.07470,4157],[0.07472,5242],[0.07474,4954],[0.07476,5524],[0.07478,4966],[0.07480,3066],[0.07482,2369],[0.07484,4531],[0.07486,864],[0.07488,5724],[0.07490,1518],[0.07492,693],[0.07494,1059],[0.07496,3089],[0.07498,703],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018657756,"sequence":10403278}} --------
2022-06-12 15:24:17.849 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018657975,"tick":{"bids":[[0.07458,858],[0.07456,717],[0.07454,545],[0.07452,933],[0.07450,1613],[0.07448,2686],[0.07446,2872],[0.07444,4985],[0.07442,1984],[0.07440,3818],[0.07438,3024],[0.07436,2080],[0.07434,3325],[0.07432,3353],[0.07430,1865],[0.07428,4518],[0.07426,3779],[0.07424,2214],[0.07422,685],[0.07420,327],[0.07418,1074],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07460,455],[0.07462,1483],[0.07464,2000],[0.07466,4247],[0.07468,3907],[0.07470,4157],[0.07472,5242],[0.07474,4954],[0.07476,5524],[0.07478,4966],[0.07480,2301],[0.07482,2289],[0.07484,4531],[0.07486,869],[0.07488,5719],[0.07490,1518],[0.07492,693],[0.07494,1059],[0.07496,3089],[0.07498,703],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018657967,"sequence":10403299}} --------
2022-06-12 15:24:18.034 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018658163,"tick":{"bids":[[0.06529,772],[0.06527,450],[0.06525,694],[0.06523,747],[0.06521,594],[0.06519,1211],[0.06517,2935],[0.06515,5215],[0.06513,5818],[0.06511,4185],[0.06509,3589],[0.06507,6182],[0.06505,10018],[0.06503,4016],[0.06501,6480],[0.06499,4595],[0.06497,2958],[0.06495,8671],[0.06493,3976],[0.06491,3948],[0.06489,5565],[0.06488,2147483647]],"asks":[[0.06531,188],[0.06533,692],[0.06535,88],[0.06537,327],[0.06539,2586],[0.06541,3099],[0.06543,3475],[0.06545,9748],[0.06547,5703],[0.06549,9517],[0.06551,3043],[0.06553,6103],[0.06555,5319],[0.06557,2651],[0.06559,9786],[0.06561,3800],[0.06563,6728],[0.06565,10333],[0.06567,2679],[0.06569,7518],[0.06571,3646],[0.06573,6542],[0.06575,2147483647]],"symbolName":"dogeusdt","ts":1655018658161,"sequence":10670530}} --------
2022-06-12 15:24:18.095 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018658176,"tick":{"bids":[[0.07458,858],[0.07456,470],[0.07454,545],[0.07452,933],[0.07450,1613],[0.07448,2686],[0.07446,2872],[0.07444,4940],[0.07442,1984],[0.07440,3818],[0.07438,3024],[0.07436,2080],[0.07434,3325],[0.07432,3353],[0.07430,1865],[0.07428,4518],[0.07426,3779],[0.07424,2214],[0.07422,685],[0.07420,327],[0.07418,1074],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07460,455],[0.07462,1312],[0.07464,2000],[0.07466,4077],[0.07468,3495],[0.07470,4157],[0.07472,5242],[0.07474,5718],[0.07476,5544],[0.07478,3724],[0.07480,2301],[0.07482,2289],[0.07484,4531],[0.07486,869],[0.07488,5719],[0.07490,1518],[0.07492,693],[0.07494,1059],[0.07496,3089],[0.07498,703],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018658173,"sequence":10403318}} --------
2022-06-12 15:24:18.243 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018658369,"tick":{"bids":[[0.06529,772],[0.06527,450],[0.06525,694],[0.06523,747],[0.06521,594],[0.06519,1211],[0.06517,2935],[0.06515,5215],[0.06513,5818],[0.06511,4185],[0.06509,3589],[0.06507,6182],[0.06505,10018],[0.06503,5698],[0.06501,4289],[0.06499,2958],[0.06497,8696],[0.06495,3976],[0.06493,3948],[0.06491,5565],[0.06489,6209],[0.06488,2147483647]],"asks":[[0.06531,188],[0.06533,692],[0.06535,88],[0.06537,327],[0.06539,2586],[0.06541,3099],[0.06543,3475],[0.06545,9748],[0.06547,5703],[0.06549,9517],[0.06551,3043],[0.06553,6103],[0.06555,8471],[0.06557,8340],[0.06559,7160],[0.06561,5374],[0.06563,8835],[0.06565,3646],[0.06567,5742],[0.06569,9430],[0.06571,2147483647]],"symbolName":"dogeusdt","ts":1655018658367,"sequence":10670547}} --------
2022-06-12 15:24:18.276 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"ping":"1655018658343"} --------
2022-06-12 15:24:18.277 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655018658343"}
2022-06-12 15:24:18.454 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018658578,"tick":{"bids":[[0.06529,772],[0.06527,450],[0.06525,694],[0.06523,747],[0.06521,939],[0.06519,3196],[0.06517,3702],[0.06515,6134],[0.06513,4145],[0.06511,3620],[0.06509,7366],[0.06507,9933],[0.06505,2444],[0.06503,5698],[0.06501,4289],[0.06499,2958],[0.06497,8696],[0.06495,3976],[0.06493,3948],[0.06491,5565],[0.06489,6209],[0.06488,2147483647]],"asks":[[0.06531,188],[0.06533,692],[0.06535,88],[0.06537,327],[0.06539,7754],[0.06541,5814],[0.06543,11312],[0.06545,2420],[0.06547,7957],[0.06549,4055],[0.06551,2481],[0.06553,9786],[0.06555,8471],[0.06557,8340],[0.06559,7160],[0.06561,5374],[0.06563,8835],[0.06565,3646],[0.06567,5742],[0.06569,9430],[0.06571,2147483647]],"symbolName":"dogeusdt","ts":1655018658575,"sequence":10670564}} --------
2022-06-12 15:24:18.469 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018658593,"tick":{"bids":[[0.07458,858],[0.07456,470],[0.07454,545],[0.07452,933],[0.07450,1613],[0.07448,2686],[0.07446,2872],[0.07444,4940],[0.07442,1984],[0.07440,3818],[0.07438,3024],[0.07436,2080],[0.07434,3325],[0.07432,3353],[0.07430,1865],[0.07428,4518],[0.07426,3779],[0.07424,2214],[0.07422,685],[0.07420,327],[0.07418,1074],[0.07417,2147483647]],"asks":[[0.07459,18],[0.07460,307],[0.07462,1312],[0.07464,2000],[0.07466,4077],[0.07468,3495],[0.07470,4157],[0.07472,5242],[0.07474,5718],[0.07476,5544],[0.07478,3724],[0.07480,2301],[0.07482,2289],[0.07484,4531],[0.07486,869],[0.07488,5719],[0.07490,1518],[0.07492,693],[0.07494,1059],[0.07496,3089],[0.07498,703],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018658589,"sequence":10403320}} --------
2022-06-12 15:24:18.763 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018658892,"tick":{"bids":[[0.07458,858],[0.07456,470],[0.07454,545],[0.07452,933],[0.07450,1613],[0.07448,2686],[0.07446,2872],[0.07444,4940],[0.07442,1984],[0.07440,3818],[0.07438,3024],[0.07436,2080],[0.07434,3325],[0.07432,3353],[0.07430,1865],[0.07428,4518],[0.07426,3779],[0.07424,2214],[0.07422,685],[0.07420,327],[0.07418,1074],[0.07416,2147483647]],"asks":[[0.07459,18],[0.07460,307],[0.07462,1312],[0.07464,2000],[0.07466,4077],[0.07468,3495],[0.07470,4157],[0.07472,5242],[0.07474,5718],[0.07476,5544],[0.07478,3724],[0.07480,2301],[0.07482,2289],[0.07484,4531],[0.07486,869],[0.07488,5719],[0.07490,1518],[0.07492,693],[0.07494,1059],[0.07496,3089],[0.07498,703],[0.07500,2147483647]],"symbolName":"trxusdt","ts":1655018658889,"sequence":10403321}} --------
2022-06-12 15:24:19.126 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018659100,"tick":{"bids":[[0.07458,858],[0.07456,470],[0.07454,545],[0.07452,933],[0.07450,1613],[0.07448,2686],[0.07446,2872],[0.07444,4940],[0.07442,1984],[0.07440,3818],[0.07438,3024],[0.07436,2080],[0.07434,3325],[0.07433,3325],[0.07431,3353],[0.07429,1865],[0.07427,4513],[0.07425,3779],[0.07423,1982],[0.07421,685],[0.07419,327],[0.07417,1074],[0.07416,2147483647]],"asks":[[0.07459,18],[0.07460,307],[0.07462,1312],[0.07464,2000],[0.07466,4077],[0.07468,3495],[0.07470,4157],[0.07472,5242],[0.07474,5718],[0.07476,5544],[0.07478,3724],[0.07480,2301],[0.07481,2289],[0.07483,4531],[0.07485,869],[0.07487,5719],[0.07489,1518],[0.07491,693],[0.07493,1059],[0.07495,3985],[0.07497,703],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018659094,"sequence":10403340}} --------
2022-06-12 15:24:19.127 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018659197,"tick":{"bids":[[0.06529,772],[0.06527,2],[0.06525,1128],[0.06523,950],[0.06521,939],[0.06519,3196],[0.06517,3702],[0.06515,6134],[0.06513,4145],[0.06511,3620],[0.06509,7366],[0.06507,9933],[0.06505,2444],[0.06503,5698],[0.06501,4289],[0.06499,2958],[0.06497,8696],[0.06495,3976],[0.06493,3948],[0.06491,5565],[0.06489,6209],[0.06483,2147483647]],"asks":[[0.06531,1600],[0.06533,904],[0.06535,3237],[0.06537,3504],[0.06539,7754],[0.06541,5814],[0.06543,11312],[0.06545,2420],[0.06547,7957],[0.06549,4055],[0.06551,2481],[0.06553,9786],[0.06555,8471],[0.06557,8340],[0.06559,7160],[0.06561,5374],[0.06563,8835],[0.06565,3646],[0.06567,5742],[0.06569,9430],[0.06571,2147483647]],"symbolName":"dogeusdt","ts":1655018659194,"sequence":10670573}} --------
2022-06-12 15:24:19.213 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018659298,"tick":{"bids":[[0.07458,858],[0.07456,470],[0.07455,144],[0.07453,545],[0.07451,933],[0.07449,1506],[0.07447,2686],[0.07445,2980],[0.07443,5002],[0.07441,1984],[0.07439,3818],[0.07437,3024],[0.07435,2080],[0.07433,3325],[0.07431,3353],[0.07429,1865],[0.07427,4513],[0.07425,3779],[0.07423,1982],[0.07421,685],[0.07419,327],[0.07417,1074],[0.07416,2147483647]],"asks":[[0.07459,460],[0.07461,1312],[0.07463,2000],[0.07465,4077],[0.07467,3860],[0.07469,4610],[0.07471,5082],[0.07473,5173],[0.07475,6027],[0.07477,3724],[0.07479,2189],[0.07481,2289],[0.07483,4531],[0.07485,869],[0.07487,5719],[0.07489,1518],[0.07491,693],[0.07493,1059],[0.07495,3985],[0.07497,703],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018659295,"sequence":10403362}} --------
2022-06-12 15:24:19.278 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018659406,"tick":{"bids":[[0.06529,772],[0.06527,2],[0.06525,1128],[0.06523,950],[0.06521,939],[0.06519,3196],[0.06517,3702],[0.06515,6134],[0.06513,4145],[0.06511,3620],[0.06509,7366],[0.06507,9933],[0.06505,2444],[0.06503,5698],[0.06501,4289],[0.06499,2958],[0.06498,4289],[0.06496,2958],[0.06494,5261],[0.06492,5542],[0.06490,3857],[0.06488,5565],[0.06486,2621],[0.06484,1256],[0.06483,2147483647]],"asks":[[0.06531,1600],[0.06533,904],[0.06535,3237],[0.06537,3504],[0.06539,7754],[0.06541,5814],[0.06543,11312],[0.06545,2420],[0.06547,7957],[0.06549,4055],[0.06551,2481],[0.06553,9786],[0.06555,8471],[0.06557,8340],[0.06558,11176],[0.06560,8471],[0.06562,8265],[0.06564,5771],[0.06566,5374],[0.06568,8835],[0.06570,3647],[0.06572,6542],[0.06574,2147483647]],"symbolName":"dogeusdt","ts":1655018659403,"sequence":10670590}} --------
2022-06-12 15:24:19.478 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018659607,"tick":{"bids":[[0.06529,772],[0.06527,2],[0.06525,1128],[0.06523,950],[0.06521,939],[0.06519,3196],[0.06517,3702],[0.06516,3683],[0.06514,4607],[0.06512,5122],[0.06510,3606],[0.06508,6028],[0.06506,6022],[0.06504,9397],[0.06502,4219],[0.06500,5698],[0.06498,4289],[0.06496,2958],[0.06494,5261],[0.06492,5542],[0.06490,3857],[0.06488,5565],[0.06486,2621],[0.06484,1256],[0.06483,2147483647]],"asks":[[0.06531,1600],[0.06533,904],[0.06535,3237],[0.06537,3504],[0.06539,7754],[0.06540,2940],[0.06542,3128],[0.06544,9955],[0.06546,5442],[0.06548,9430],[0.06550,2553],[0.06552,6387],[0.06554,5625],[0.06556,2481],[0.06558,11176],[0.06560,8471],[0.06562,8265],[0.06564,5771],[0.06566,5374],[0.06568,8835],[0.06570,3647],[0.06572,6542],[0.06574,2147483647]],"symbolName":"dogeusdt","ts":1655018659604,"sequence":10670608}} --------
2022-06-12 15:24:19.949 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018659964,"tick":{"bids":[[0.07458,858],[0.07456,470],[0.07455,144],[0.07453,545],[0.07451,933],[0.07449,1506],[0.07447,2686],[0.07445,2980],[0.07443,5002],[0.07441,1984],[0.07439,3818],[0.07437,3024],[0.07435,2080],[0.07433,3325],[0.07431,3353],[0.07429,1865],[0.07427,4513],[0.07425,3779],[0.07423,1982],[0.07421,685],[0.07419,327],[0.07417,1074],[0.07416,2147483647]],"asks":[[0.07459,460],[0.07461,1312],[0.07463,2000],[0.07465,4077],[0.07467,3860],[0.07469,4610],[0.07471,5082],[0.07473,5173],[0.07475,6027],[0.07477,3724],[0.07479,2189],[0.07481,2289],[0.07483,4531],[0.07485,869],[0.07487,5719],[0.07489,1518],[0.07491,693],[0.07493,1059],[0.07495,3985],[0.07497,703],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018659961,"sequence":10403363}} --------
2022-06-12 15:24:20.102 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018660176,"tick":{"bids":[[0.07458,858],[0.07456,470],[0.07455,144],[0.07453,545],[0.07451,933],[0.07449,1506],[0.07447,2686],[0.07445,2980],[0.07443,5002],[0.07441,1984],[0.07439,4028],[0.07437,3024],[0.07435,2080],[0.07433,3325],[0.07431,2342],[0.07429,1865],[0.07427,4513],[0.07425,3779],[0.07423,1982],[0.07421,685],[0.07419,327],[0.07417,1074],[0.07416,2147483647]],"asks":[[0.07459,460],[0.07461,1312],[0.07463,2000],[0.07465,4077],[0.07467,3860],[0.07469,4610],[0.07471,5082],[0.07473,5173],[0.07475,6027],[0.07477,3724],[0.07479,2149],[0.07481,2289],[0.07483,4551],[0.07485,869],[0.07487,5879],[0.07489,1518],[0.07491,693],[0.07493,1059],[0.07495,2973],[0.07497,703],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018660169,"sequence":10403387}} --------
2022-06-12 15:24:20.195 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018660286,"tick":{"bids":[[0.06529,772],[0.06527,2],[0.06525,1128],[0.06523,950],[0.06522,605],[0.06520,836],[0.06518,1299],[0.06516,3683],[0.06514,4607],[0.06512,5122],[0.06510,3606],[0.06508,6028],[0.06506,6022],[0.06504,9397],[0.06502,4219],[0.06500,5698],[0.06498,4289],[0.06496,2958],[0.06494,5261],[0.06492,5542],[0.06490,3857],[0.06488,5565],[0.06487,2147483647]],"asks":[[0.06531,1600],[0.06533,904],[0.06534,7],[0.06536,38],[0.06538,1464],[0.06540,2940],[0.06542,3128],[0.06544,9955],[0.06546,5442],[0.06548,9430],[0.06550,2553],[0.06552,6387],[0.06554,5625],[0.06556,2481],[0.06558,11176],[0.06560,8471],[0.06562,8265],[0.06564,5771],[0.06566,5374],[0.06568,8835],[0.06570,3647],[0.06572,6542],[0.06574,2147483647]],"symbolName":"dogeusdt","ts":1655018660283,"sequence":10670615}} --------
2022-06-12 15:24:20.368 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018660493,"tick":{"bids":[[0.06529,772],[0.06527,2],[0.06525,1128],[0.06523,950],[0.06522,605],[0.06520,836],[0.06518,1299],[0.06516,3683],[0.06514,4607],[0.06512,5122],[0.06510,3606],[0.06508,6028],[0.06506,6022],[0.06504,8465],[0.06502,4289],[0.06500,2958],[0.06498,3691],[0.06496,8743],[0.06494,7130],[0.06492,2479],[0.06490,2621],[0.06488,1256],[0.06487,2147483647]],"asks":[[0.06531,1600],[0.06533,904],[0.06534,7],[0.06536,38],[0.06538,1464],[0.06540,2940],[0.06542,3128],[0.06544,9955],[0.06546,5442],[0.06548,9430],[0.06550,2553],[0.06552,2481],[0.06554,11176],[0.06556,8471],[0.06558,5093],[0.06560,8943],[0.06562,5465],[0.06564,8744],[0.06566,3647],[0.06568,5742],[0.06570,2147483647]],"symbolName":"dogeusdt","ts":1655018660490,"sequence":10670634}} --------
2022-06-12 15:24:20.573 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018660702,"tick":{"bids":[[0.06529,772],[0.06527,2],[0.06525,1128],[0.06524,836],[0.06522,1653],[0.06520,3683],[0.06518,4760],[0.06516,4522],[0.06514,4054],[0.06512,6028],[0.06510,7108],[0.06508,8212],[0.06506,4219],[0.06504,8465],[0.06502,4289],[0.06500,2958],[0.06498,3691],[0.06496,8743],[0.06494,7130],[0.06492,2479],[0.06490,2621],[0.06488,1256],[0.06487,2147483647]],"asks":[[0.06531,1600],[0.06533,904],[0.06534,1143],[0.06536,3156],[0.06538,3281],[0.06540,10154],[0.06542,5442],[0.06544,9399],[0.06546,2553],[0.06548,6387],[0.06550,5625],[0.06552,2481],[0.06554,11176],[0.06556,8471],[0.06558,5093],[0.06560,8943],[0.06562,5465],[0.06564,8744],[0.06566,3647],[0.06568,5742],[0.06570,2147483647]],"symbolName":"dogeusdt","ts":1655018660699,"sequence":10670653}} --------
2022-06-12 15:24:20.868 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018660927,"tick":{"bids":[[0.07458,858],[0.07456,470],[0.07455,661],[0.07453,545],[0.07451,913],[0.07449,1343],[0.07447,2686],[0.07445,2980],[0.07443,5405],[0.07441,1984],[0.07439,4028],[0.07437,3024],[0.07435,2080],[0.07433,3325],[0.07431,2342],[0.07429,1865],[0.07427,4513],[0.07425,3779],[0.07423,1982],[0.07421,685],[0.07419,327],[0.07417,1074],[0.07416,2147483647]],"asks":[[0.07459,484],[0.07461,1142],[0.07463,2000],[0.07465,4077],[0.07467,3860],[0.07469,4450],[0.07471,5242],[0.07473,5173],[0.07475,6096],[0.07477,3724],[0.07479,2149],[0.07481,2289],[0.07483,4551],[0.07485,869],[0.07487,5879],[0.07489,1518],[0.07491,693],[0.07493,1059],[0.07495,2973],[0.07497,703],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018660924,"sequence":10403405}} --------
2022-06-12 15:24:21.054 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018661165,"tick":{"bids":[[0.07458,858],[0.07456,470],[0.07455,661],[0.07453,545],[0.07451,913],[0.07449,1343],[0.07447,2686],[0.07445,2980],[0.07443,5405],[0.07441,1984],[0.07439,4028],[0.07437,3024],[0.07435,2080],[0.07433,3325],[0.07431,2342],[0.07429,1865],[0.07427,4513],[0.07425,3779],[0.07423,1982],[0.07421,685],[0.07419,327],[0.07417,1074],[0.07415,2147483647]],"asks":[[0.07459,484],[0.07461,1142],[0.07463,2000],[0.07465,4077],[0.07467,3860],[0.07469,4450],[0.07471,5242],[0.07473,5173],[0.07475,6096],[0.07477,3724],[0.07479,2149],[0.07481,2289],[0.07483,4551],[0.07485,869],[0.07487,5879],[0.07489,1518],[0.07491,693],[0.07493,1059],[0.07495,2973],[0.07497,703],[0.07499,2147483647]],"symbolName":"trxusdt","ts":1655018661162,"sequence":10403406}} --------
2022-06-12 15:24:21.270 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018661352,"tick":{"bids":[[0.06529,772],[0.06527,2],[0.06526,781],[0.06524,836],[0.06522,1653],[0.06520,3683],[0.06518,4760],[0.06516,4522],[0.06514,4054],[0.06512,6028],[0.06510,7108],[0.06508,8212],[0.06506,4219],[0.06504,8465],[0.06502,4289],[0.06500,2958],[0.06498,3691],[0.06496,8743],[0.06494,7130],[0.06492,2479],[0.06490,2621],[0.06488,1256],[0.06483,2147483647]],"asks":[[0.06530,7],[0.06532,38],[0.06534,1143],[0.06536,3156],[0.06538,3281],[0.06540,10154],[0.06542,5442],[0.06544,9399],[0.06546,2553],[0.06548,6387],[0.06550,5625],[0.06552,2481],[0.06554,11176],[0.06556,8471],[0.06558,5093],[0.06560,8943],[0.06562,5465],[0.06564,8744],[0.06566,3647],[0.06568,5742],[0.06570,2147483647]],"symbolName":"dogeusdt","ts":1655018661346,"sequence":10670657}} --------
2022-06-12 15:24:21.271 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018661366,"tick":{"bids":[[0.07458,858],[0.07456,470],[0.07455,661],[0.07453,545],[0.07451,913],[0.07449,1343],[0.07447,2686],[0.07445,2980],[0.07443,5405],[0.07442,5292],[0.07440,1984],[0.07438,4028],[0.07436,3024],[0.07434,2080],[0.07432,3207],[0.07430,3353],[0.07428,1865],[0.07426,4513],[0.07424,3779],[0.07422,1982],[0.07420,685],[0.07418,327],[0.07416,1074],[0.07415,2147483647]],"asks":[[0.07459,484],[0.07461,1142],[0.07463,2000],[0.07465,4077],[0.07467,3860],[0.07469,4450],[0.07471,5242],[0.07472,5173],[0.07474,6096],[0.07476,3724],[0.07478,2149],[0.07480,2369],[0.07482,4531],[0.07484,869],[0.07486,5879],[0.07488,1518],[0.07490,693],[0.07492,1059],[0.07494,3861],[0.07496,703],[0.07498,2147483647]],"symbolName":"trxusdt","ts":1655018661363,"sequence":10403434}} --------
2022-06-12 15:24:21.427 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018661549,"tick":{"bids":[[0.06529,772],[0.06527,2],[0.06526,781],[0.06524,836],[0.06522,1653],[0.06520,3683],[0.06518,4760],[0.06516,4522],[0.06514,4054],[0.06512,6028],[0.06510,7108],[0.06508,8212],[0.06506,4219],[0.06504,8465],[0.06502,4231],[0.06500,4988],[0.06498,4595],[0.06496,2958],[0.06494,3691],[0.06492,7115],[0.06490,7130],[0.06488,2479],[0.06486,2621],[0.06484,1256],[0.06483,2147483647]],"asks":[[0.06530,7],[0.06532,38],[0.06534,1143],[0.06536,3156],[0.06538,3281],[0.06540,10154],[0.06542,5442],[0.06544,9399],[0.06546,2553],[0.06548,6387],[0.06550,5625],[0.06552,2481],[0.06554,11176],[0.06556,2481],[0.06558,11176],[0.06560,8473],[0.06562,5093],[0.06564,8941],[0.06566,5465],[0.06568,8072],[0.06570,3647],[0.06572,7214],[0.06574,2147483647]],"symbolName":"dogeusdt","ts":1655018661547,"sequence":10670677}} --------
2022-06-12 15:24:21.634 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.dogeusdt_depth_step0","ts":1655018661756,"tick":{"bids":[[0.06529,772],[0.06527,2],[0.06526,781],[0.06524,836],[0.06522,1653],[0.06520,837],[0.06518,1287],[0.06516,3613],[0.06514,4840],[0.06512,4674],[0.06510,4236],[0.06508,6028],[0.06506,9096],[0.06504,9385],[0.06502,4231],[0.06500,4988],[0.06498,4595],[0.06496,2958],[0.06494,3691],[0.06492,7115],[0.06490,7130],[0.06488,2479],[0.06486,2621],[0.06484,1256],[0.06483,2147483647]],"asks":[[0.06530,7],[0.06532,38],[0.06534,1143],[0.06536,3156],[0.06538,1183],[0.06540,3156],[0.06542,3586],[0.06544,10231],[0.06546,5442],[0.06548,9432],[0.06550,2825],[0.06552,6387],[0.06554,5625],[0.06556,2481],[0.06558,11176],[0.06560,8473],[0.06562,5093],[0.06564,8941],[0.06566,5465],[0.06568,8072],[0.06570,3647],[0.06572,7214],[0.06574,2147483647]],"symbolName":"dogeusdt","ts":1655018661751,"sequence":10670695}} --------
2022-06-12 15:24:22.198 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - -------- ByteBuffer接收到服务端数据：{"status":"ok","event_rep":"","cb_id":"","channel":"market_FaJ6.trxusdt_depth_step0","ts":1655018662288,"tick":{"bids":[[0.07456,470],[0.07455,661],[0.07454,670],[0.07452,545],[0.07450,913],[0.07448,1343],[0.07446,2686],[0.07444,2980],[0.07442,5292],[0.07440,1984],[0.07438,4028],[0.07436,3024],[0.07434,2080],[0.07432,3207],[0.07430,3353],[0.07428,1865],[0.07426,4513],[0.07424,3779],[0.07422,1982],[0.07420,685],[0.07418,327],[0.07416,1074],[0.07411,2147483647]],"asks":[[0.07458,484],[0.07460,1142],[0.07462,2000],[0.07464,4077],[0.07466,3993],[0.07468,4641],[0.07470,5082],[0.07472,5173],[0.07474,6096],[0.07476,3724],[0.07478,2149],[0.07480,2369],[0.07482,4531],[0.07484,869],[0.07486,5879],[0.07488,1518],[0.07490,693],[0.07492,1059],[0.07494,3861],[0.07496,703],[0.07498,2147483647]],"symbolName":"trxusdt","ts":1655018662285,"sequence":10403448}} --------
2022-06-12 17:21:16.857 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5003 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-06-12 17:21:21.869 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 59966 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-06-12 17:21:21.871 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-06-12 17:21:22.760 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 17:21:22.763 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-06-12 17:21:22.786 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 Elasticsearch repository interfaces.
2022-06-12 17:21:22.790 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 17:21:22.791 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-06-12 17:21:22.799 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-06-12 17:21:22.811 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 17:21:22.812 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-06-12 17:21:22.834 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2022-06-12 17:21:23.578 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-06-12 17:21:23.596 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-06-12 17:21:23.596 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-06-12 17:21:23.597 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-06-12 17:21:23.762 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-06-12 17:21:23.763 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1827 ms
2022-06-12 17:21:24.907 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-06-12 17:21:25.921 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-06-12 17:21:25.923 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-06-12 17:21:25.923 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-06-12 17:21:26.271 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onOpen ------
2022-06-12 17:21:26.286 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-06-12 17:21:26.305 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-06-12 17:21:26.316 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.995 seconds (JVM running for 25.494)
2022-06-12 17:21:31.275 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025690352"}
2022-06-12 17:21:36.277 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025695354"}
2022-06-12 17:21:41.270 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025700357"}
2022-06-12 17:21:46.526 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025705361"}
2022-06-12 17:21:51.272 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025710362"}
2022-06-12 17:21:56.275 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025715363"}
2022-06-12 17:22:01.283 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025720366"}
2022-06-12 17:22:06.277 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025725368"}
2022-06-12 17:22:11.288 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025730372"}
2022-06-12 17:22:16.272 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025735376"}
2022-06-12 17:22:21.290 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025740378"}
2022-06-12 17:22:26.289 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025745381"}
2022-06-12 17:22:28.142 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-06-12 17:22:28.142 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-06-12 17:22:28.144 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-06-12 17:22:28.509 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-06-12 17:22:31.311 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025750384"}
2022-06-12 17:22:35.377 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-06-12 17:22:35.391 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-09 17:59:30' and user_id = ? and type not in (16,27,38) 
2022-06-12 17:22:35.438 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:22:35.691 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 17:22:35.695 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 17:22:35.696 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 17:22:35.862 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 17:22:35.863 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:35.864 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 17:22:36.059 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 17:22:36.060 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1018.7239247200000002,hold:0E-16
2022-06-12 17:22:36.060 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1035.34210576,操作后，账户变化金额:-16.6181810399999998,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1018.7239247200000002,操作后，数据库存储的总金额:1018.7239247200000002
2022-06-12 17:22:36.061 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:36.062 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:22:36.269 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:22:36.295 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-09 17:59:30' 
2022-06-12 17:22:36.296 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 17:22:36.314 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025755387"}
2022-06-12 17:22:36.437 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:22:36.438 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:36.438 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:22:36.587 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:22:36.588 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.2000000000000000,hold:0E-16
2022-06-12 17:22:36.589 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:1.598676704,操作后，账户变化金额:0,操作后，计算剩余的金额:1.598676704,操作后，数据库存储的总金额:0.2000000000000000
2022-06-12 17:22:36.618 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-09 17:59:30' and user_id = ? and type in (5,6) 
2022-06-12 17:22:36.619 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:22:36.789 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 17:22:36.790 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:36.790 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 17:22:36.984 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 17:22:36.986 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 17:22:36.986 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 17:22:37.134 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 17:22:37.135 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 17:22:37.136 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 17:22:37.137 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-09 17:59:30' 
2022-06-12 17:22:37.137 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 17:22:37.359 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 16
2022-06-12 17:22:37.359 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=0E-16, preBalance=1035.3421057600000000, postBalance=1035.3421057600000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77841, note=全仓市价开仓,订单号:77841,成交价格:30532.8000000000000000,开仓数量:132.0000000000000000,开仓保证金:-40.7104000000000000,开仓手续费:-1.6121318400000000, createdDate=2022-06-09 17:59:46, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.6121318400000000, preBalance=1035.3421057600000000, postBalance=1033.7299739200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77841, note=全仓市价开仓,订单号:77841,成交价格:30532.8000000000000000,开仓数量:132.0000000000000000,开仓保证金:-40.7104000000000000,开仓手续费:-1.6121318400000000, createdDate=2022-06-09 17:59:46, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=0E-16, preBalance=1033.7299739200000000, postBalance=1033.7299739200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77842, note=全仓市价开仓,订单号:77842,成交价格:30532.2000000000000000,开仓数量:539.0000000000000000,开仓保证金:-166.2308666666666666,开仓手续费:-6.5827423200000000, createdDate=2022-06-09 17:59:51, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-6.5827423200000000, preBalance=1033.7299739200000000, postBalance=1027.1472316000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77842, note=全仓市价开仓,订单号:77842,成交价格:30532.2000000000000000,开仓数量:539.0000000000000000,开仓保证金:-166.2308666666666666,开仓手续费:-6.5827423200000000, createdDate=2022-06-09 17:59:51, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=-1.0428000000000000, preBalance=1027.1472316000000000, postBalance=1024.4927168800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77843, note=全仓市价全部平仓,订单号:77843,仓位id:566348515004977152,成交价格:30524.9000000000000000,平仓数量:132.0000000000000000,平仓盈亏:-1.0428000000000000,手续费:-1.6117147200000000, createdDate=2022-06-09 18:02:17, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=3.8808000000000000, preBalance=1024.4927168800000000, postBalance=1021.7923268800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77844, note=全仓市价全部平仓,订单号:77844,仓位id:566348536621277184,成交价格:30525.0000000000000000,平仓数量:539.0000000000000000,平仓盈亏:3.8808000000000000,手续费:-6.5811900000000000, createdDate=2022-06-09 18:02:17, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.6117147200000000, preBalance=1021.7923268800000000, postBalance=1021.7923268800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77843, note=全仓市价全部平仓,订单号:77843,仓位id:566348515004977152,成交价格:30524.9000000000000000,平仓数量:132.0000000000000000,平仓手续费:-1.6117147200000000, createdDate=2022-06-09 18:02:17, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-6.5811900000000000, preBalance=1021.7923268800000000, postBalance=1021.7923268800000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77844, note=全仓市价全部平仓,订单号:77844,仓位id:566348536621277184,成交价格:30525.0000000000000000,平仓数量:539.0000000000000000,平仓手续费:-6.5811900000000000, createdDate=2022-06-09 18:02:17, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-9.5547636363636363, preBalance=1021.7923268800000000, postBalance=1012.2375632436363637, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77845, note=逐仓市价开仓,订单号:77845,成交价格:30513.6000000000000000,开仓数量:31.0000000000000000,开仓保证金:-9.5547636363636363,开仓手续费:-0.3783686400000000, createdDate=2022-06-09 18:02:25, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3783686400000000, preBalance=1012.2375632436363637, postBalance=1011.8591946036363637, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77845, note=逐仓市价开仓,订单号:77845,成交价格:30513.6000000000000000,开仓数量:31.0000000000000000,开仓保证金:-9.5547636363636363,开仓手续费:-0.3783686400000000, createdDate=2022-06-09 18:02:25, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-19.4169818181818181, preBalance=1011.8591946036363637, postBalance=992.4422127854545456, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77846, note=逐仓市价开仓,订单号:77846,成交价格:30512.4000000000000000,开仓数量:63.0000000000000000,开仓保证金:-19.4169818181818181,开仓手续费:-0.7689124800000000, createdDate=2022-06-09 18:02:29, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.7689124800000000, preBalance=992.4422127854545456, postBalance=991.6733003054545456, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77846, note=逐仓市价开仓,订单号:77846,成交价格:30512.4000000000000000,开仓数量:63.0000000000000000,开仓保证金:-19.4169818181818181,开仓手续费:-0.7689124800000000, createdDate=2022-06-09 18:02:29, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=10.2181636363636364, preBalance=991.6733003054545456, postBalance=1001.5128299418181820, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77847, note=逐仓市价全部平仓,订单号:77847,仓位id:566349183308050432,金额:9.5547636363636364,成交价格:30535.0000000000000000,平仓数量:31.0000000000000000,平仓盈亏:0.6634000000000000,手续费:-0.3786340000000000, createdDate=2022-06-09 18:03:15, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=17.9805818181818182, preBalance=1001.5128299418181820, postBalance=1018.7239247200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77848, note=逐仓市价全部平仓,订单号:77848,仓位id:566349200695152640,金额:19.4169818181818182,成交价格:30535.2000000000000000,平仓数量:63.0000000000000000,平仓盈亏:-1.4364000000000000,手续费:-0.7694870400000000, createdDate=2022-06-09 18:03:15, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3786340000000000, preBalance=1018.7239247200000002, postBalance=1018.7239247200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77847, note=逐仓市价全部平仓,订单号:77847,仓位id:566349183308050432,金额:9.5547636363636364,成交价格:30535.0000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3786340000000000, createdDate=2022-06-09 18:03:15, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.7694870400000000, preBalance=1018.7239247200000002, postBalance=1018.7239247200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77848, note=逐仓市价全部平仓,订单号:77848,仓位id:566349200695152640,金额:19.4169818181818182,成交价格:30535.2000000000000000,平仓数量:63.0000000000000000,平仓手续费:-0.7694870400000000, createdDate=2022-06-09 18:03:15, fromUserId=0, total=null)]
2022-06-12 17:22:37.361 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:22:37.362 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:0E-16
2022-06-12 17:22:37.362 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-19.4169818181818181
2022-06-12 17:22:37.363 [pool-5-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77846' LIMIT 0,1 
2022-06-12 17:22:37.363 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77841' LIMIT 0,1 
2022-06-12 17:22:37.364 [pool-5-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:22:37.364 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:22:37.523 [pool-5-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:22:37.524 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:37.524 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:37.535 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:22:37.536 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:37.536 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:37.636 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:37.637 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.7689124800000000
2022-06-12 17:22:37.639 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:37.640 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:37.743 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:37.744 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=77841) 
2022-06-12 17:22:37.745 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-06-12 17:22:37.795 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:37.797 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:22:37.798 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:37.947 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-06-12 17:22:37.948 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 保证金计算不正确--->,用户:51905047,订单:77841,类型:3,数据库:0E-16,计算:40.710400
2022-06-12 17:22:37.949 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.6121318400000000
2022-06-12 17:22:37.949 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:37.950 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:37.986 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:37.987 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:22:37.988 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77846' LIMIT 0,1000 
2022-06-12 17:22:37.988 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:38.106 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:38.107 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:22:38.107 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:38.167 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:38.168 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:38.169 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:38.273 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:38.275 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:22:38.275 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77841' LIMIT 0,1000 
2022-06-12 17:22:38.276 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:38.327 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:38.328 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:38.329 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:22:38.484 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:22:38.485 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:38.486 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:38.486 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77846' and type=? limit 0,100 
2022-06-12 17:22:38.486 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:38.486 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:22:38.634 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-06-12 17:22:38.635 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:10.2181636363636364
2022-06-12 17:22:38.636 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:38.637 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:38.681 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:38.683 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:38.683 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:22:38.789 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:38.789 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:22:38.789 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:38.844 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:22:38.845 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77841' and type=? limit 0,100 
2022-06-12 17:22:38.846 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:22:38.986 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:38.987 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:22:38.988 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77847' LIMIT 0,1000 
2022-06-12 17:22:38.988 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:39.034 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-06-12 17:22:39.035 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:0E-16
2022-06-12 17:22:39.037 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77842' LIMIT 0,1 
2022-06-12 17:22:39.037 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:22:39.143 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:39.144 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:39.144 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:39.240 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:22:39.241 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:39.241 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:39.296 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:39.297 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77847' LIMIT 0,1000 
2022-06-12 17:22:39.298 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:39.440 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:39.440 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==>  Preparing: SELECT f_seq_id fSeqId,f_match_result_content fMatchResultContent from `bib_cfd`.`match_result_fingerprint` where f_seq_id = (select sequence from `bib_cfd`.`swap_order` where id=77842) 
2022-06-12 17:22:39.441 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - ==> Parameters: 
2022-06-12 17:22:39.539 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:39.540 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:39.541 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:39.626 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.matchResultFingerprint - <==      Total: 1
2022-06-12 17:22:39.627 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 保证金计算不正确--->,用户:51905047,订单:77842,类型:3,数据库:0E-16,计算:166.230866
2022-06-12 17:22:39.628 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-6.5827423200000000
2022-06-12 17:22:39.628 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:39.629 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:39.693 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:39.695 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77847' and type=? limit 0,1 
2022-06-12 17:22:39.695 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:22:39.816 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:39.817 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:22:39.817 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:39.891 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:22:39.892 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77847,计算得:0.663400
2022-06-12 17:22:39.892 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:17.9805818181818182
2022-06-12 17:22:39.893 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:39.893 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:40.028 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:40.029 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:22:40.030 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77842' LIMIT 0,1000 
2022-06-12 17:22:40.031 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:40.116 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:40.117 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:22:40.118 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:40.269 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:40.270 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:40.270 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:40.366 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:40.367 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:22:40.369 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77848' LIMIT 0,1000 
2022-06-12 17:22:40.370 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:40.527 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:40.528 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:40.528 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:22:40.628 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:40.629 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:40.629 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:40.727 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:22:40.729 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77842' and type=? limit 0,100 
2022-06-12 17:22:40.729 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:22:40.847 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:40.848 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77848' LIMIT 0,1000 
2022-06-12 17:22:40.848 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:40.910 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-06-12 17:22:40.910 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:-1.0428000000000000
2022-06-12 17:22:40.911 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:40.911 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:41.128 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:41.129 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:41.129 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:41.247 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:41.247 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:22:41.247 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:41.306 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:41.308 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77848' and type=? limit 0,1 
2022-06-12 17:22:41.308 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:22:41.421 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025760388"}
2022-06-12 17:22:41.449 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:41.449 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:22:41.450 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77843' LIMIT 0,1000 
2022-06-12 17:22:41.451 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:41.691 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:22:41.692 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77848,计算得:-1.436400
2022-06-12 17:22:41.692 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3786340000000000
2022-06-12 17:22:41.693 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:41.693 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:41.793 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:41.795 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:41.795 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:41.930 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:41.931 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:22:41.931 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:42.026 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:42.027 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77843' LIMIT 0,1000 
2022-06-12 17:22:42.027 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:42.077 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:42.077 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:22:42.078 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77847' LIMIT 0,1000 
2022-06-12 17:22:42.078 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:42.289 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:42.290 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:42.290 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:42.356 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:42.357 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:42.358 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:42.470 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:42.472 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77843' and type=? limit 0,1 
2022-06-12 17:22:42.472 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:22:42.678 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:42.679 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:42.680 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:22:42.838 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:22:42.839 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77843,计算得:-1.042800
2022-06-12 17:22:42.839 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:3.8808000000000000
2022-06-12 17:22:42.839 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:42.839 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:43.013 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:22:43.014 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77847' and type=? limit 0,100 
2022-06-12 17:22:43.015 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:22:43.376 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:43.378 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:22:43.378 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:43.407 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-06-12 17:22:43.408 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.7694870400000000
2022-06-12 17:22:43.409 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:43.409 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:43.663 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:43.664 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:22:43.665 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77844' LIMIT 0,1000 
2022-06-12 17:22:43.665 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:43.726 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:43.727 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:22:43.727 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:43.937 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:43.938 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:43.939 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:43.983 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:43.983 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:22:43.984 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77848' LIMIT 0,1000 
2022-06-12 17:22:43.984 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:44.127 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:44.128 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77844' LIMIT 0,1000 
2022-06-12 17:22:44.128 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:44.212 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:44.212 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:44.213 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:44.453 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:44.454 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:44.455 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:22:44.459 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:44.460 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:44.460 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:44.634 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:22:44.635 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77848' and type=? limit 0,100 
2022-06-12 17:22:44.636 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:22:44.784 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:44.786 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77844' and type=? limit 0,1 
2022-06-12 17:22:44.787 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:22:44.895 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-06-12 17:22:45.043 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:22:45.044 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77844,计算得:3.880800
2022-06-12 17:22:45.045 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.6117147200000000
2022-06-12 17:22:45.045 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:45.046 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:45.498 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:45.499 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:22:45.499 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:45.687 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:45.688 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:22:45.689 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77843' LIMIT 0,1000 
2022-06-12 17:22:45.690 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:46.311 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:46.313 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:46.313 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:46.369 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025765390"}
2022-06-12 17:22:46.786 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:46.788 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:46.788 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:22:47.057 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:22:47.059 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77843' and type=? limit 0,100 
2022-06-12 17:22:47.059 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:22:47.260 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-06-12 17:22:47.261 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-6.5811900000000000
2022-06-12 17:22:47.262 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:47.262 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:47.417 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:47.418 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:22:47.419 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:47.891 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:47.892 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:22:47.894 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77844' LIMIT 0,1000 
2022-06-12 17:22:47.894 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:48.101 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:48.102 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:48.103 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:48.304 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:48.305 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:48.306 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:22:48.462 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:22:48.464 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77844' and type=? limit 0,100 
2022-06-12 17:22:48.464 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:22:48.634 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-06-12 17:22:48.634 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-9.5547636363636363
2022-06-12 17:22:48.635 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77845' LIMIT 0,1 
2022-06-12 17:22:48.636 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:22:48.797 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:22:48.797 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:48.798 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:48.972 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:48.973 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3783686400000000
2022-06-12 17:22:48.973 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:48.974 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:49.127 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:49.128 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:22:49.130 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:22:49.280 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:22:49.280 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:22:49.281 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77845' LIMIT 0,1000 
2022-06-12 17:22:49.282 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:22:49.536 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:22:49.537 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:22:49.538 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:22:49.708 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:22:49.709 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:22:49.709 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:22:49.857 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:22:49.858 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77845' and type=? limit 0,100 
2022-06-12 17:22:49.858 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:22:50.037 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 0
2022-06-12 17:22:50.038 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:22:51.275 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025770394"}
2022-06-12 17:22:56.314 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025775395"}
2022-06-12 17:23:01.295 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025780398"}
2022-06-12 17:23:06.333 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025785401"}
2022-06-12 17:23:11.413 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025790403"}
2022-06-12 17:23:16.291 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025795410"}
2022-06-12 17:23:21.284 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025800412"}
2022-06-12 17:23:26.276 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025805415"}
2022-06-12 17:23:31.362 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025810418"}
2022-06-12 17:23:36.342 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025815419"}
2022-06-12 17:23:41.278 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025820422"}
2022-06-12 17:23:46.279 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025825424"}
2022-06-12 17:23:51.542 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025830427"}
2022-06-12 17:23:56.281 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025835433"}
2022-06-12 17:24:01.281 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025840434"}
2022-06-12 17:24:08.669 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025845438"}
2022-06-12 17:24:11.335 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025850441"}
2022-06-12 17:24:16.293 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025855443"}
2022-06-12 17:24:21.278 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025860445"}
2022-06-12 17:24:26.324 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025865448"}
2022-06-12 17:24:31.388 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025870450"}
2022-06-12 17:24:36.298 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025875452"}
2022-06-12 17:24:41.438 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025880455"}
2022-06-12 17:24:46.278 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025885458"}
2022-06-12 17:24:51.324 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025890461"}
2022-06-12 17:24:56.284 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025895464"}
2022-06-12 17:25:01.339 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025900468"}
2022-06-12 17:25:01.579 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserInfo - ==>  Preparing: SELECT ui.id as userId,ui.mobile as mobile ,ub.balance as balance,ub.hold as hold from `bib_cfd`.`user_info` as ui,`bib_cfd`.`user_balance` as ub WHERE ui.id=ub.user_id AND ui.id = '51905047' LIMIT 0,1 
2022-06-12 17:25:01.579 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserInfo - ==> Parameters: 
2022-06-12 17:25:01.737 [http-nio-10090-exec-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserInfo - <==      Total: 1
2022-06-12 17:25:06.320 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025905470"}
2022-06-12 17:25:11.609 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025910473"}
2022-06-12 17:25:16.281 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025915476"}
2022-06-12 17:25:21.363 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655025920479"}
2022-06-12 17:25:26.516 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onClose ------
2022-06-12 17:25:31.416 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:25:31.417 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 17:25:31.582 [http-nio-10090-exec-6] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 17:25:31.582 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:25:31.583 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:25:31.742 [http-nio-10090-exec-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:25:31.743 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:25:31.743 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 17:25:31.900 [http-nio-10090-exec-6] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 17:25:31.901 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 17:25:31.902 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 17:25:32.079 [http-nio-10090-exec-6] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 17:25:32.175 [http-nio-10090-exec-6] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,账户user_balance:UserBalanceChain(userId=user_balance, currencyId=6, balance=1018.7239247200000002, hold=0E-16, freeze=null, borrow=null),user_partner_balance:UserBalanceChain(userId=user_partner_balance, currencyId=6, balance=0.2000000000000000, hold=0E-16, freeze=null, borrow=null),otc_user_balance:UserBalanceChain(userId=otc_user_balance, currencyId=6, balance=0E-16, hold=null, freeze=null, borrow=null),assert_user_balance:UserBalanceChain(userId=asset_user_balance, currencyId=6, balance=10.1100000000000000, hold=null, freeze=null, borrow=null)
2022-06-12 17:26:08.816 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 17:26:08.817 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:26:08.983 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 17:26:08.984 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 17:26:08.984 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 17:26:09.146 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 17:26:09.147 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:09.147 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 17:26:09.297 [http-nio-10090-exec-8] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 17:26:09.297 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:965.1710237636363639,hold:0E-16
2022-06-12 17:26:09.297 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-53.5529009563636363,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:965.1710237636363637,操作后，数据库存储的总金额:965.1710237636363639
2022-06-12 17:26:09.298 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:09.298 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:09.458 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:09.473 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 17:26:09.473 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 17:26:09.653 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:09.654 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:09.654 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:09.805 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:09.806 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.4050411320000000,hold:0E-16
2022-06-12 17:26:09.806 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.2050411320000000,操作后，计算剩余的金额:0.4050411320000000,操作后，数据库存储的总金额:0.4050411320000000
2022-06-12 17:26:09.827 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 17:26:09.828 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:26:09.954 [http-nio-10090-exec-8] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 17:26:09.954 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:09.954 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 17:26:10.110 [http-nio-10090-exec-8] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 17:26:10.111 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 17:26:10.112 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 17:26:10.260 [http-nio-10090-exec-8] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 17:26:10.261 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 17:26:10.261 [http-nio-10090-exec-8] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 17:26:10.261 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 17:26:10.262 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 17:26:10.498 [http-nio-10090-exec-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 9
2022-06-12 17:26:10.498 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null)]
2022-06-12 17:26:10.500 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:26:10.500 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 17:26:10.501 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 17:26:10.502 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:26:10.705 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:26:10.706 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:10.706 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:10.860 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:10.860 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 17:26:10.861 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:10.861 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:11.017 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:11.017 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:26:11.018 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:11.176 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:11.176 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:26:11.177 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 17:26:11.177 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:11.404 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:11.405 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:11.406 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:11.598 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:11.598 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:11.598 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:11.762 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:11.763 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:26:11.764 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:26:11.966 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:11.966 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 17:26:11.967 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:26:11.968 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:26:12.193 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:12.193 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 17:26:12.193 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 17:26:12.193 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 17:26:12.194 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 17:26:12.194 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 17:26:12.194 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:26:12.400 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:26:12.400 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:12.400 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:12.556 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:12.556 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 17:26:12.557 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:12.557 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:12.720 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:12.721 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:26:12.722 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:12.873 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:12.874 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:26:12.875 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 17:26:12.875 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:13.143 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:13.145 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:13.145 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:13.302 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:13.303 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:13.303 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:13.469 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:13.470 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:26:13.471 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:26:13.693 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:13.694 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 17:26:13.695 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:26:13.696 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:26:13.896 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:13.897 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 17:26:13.897 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 17:26:13.898 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 17:26:13.898 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:26:14.096 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:26:14.097 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:14.097 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:14.248 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:14.249 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 17:26:14.249 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:14.250 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:14.414 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:14.415 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:26:14.416 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:14.584 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:14.585 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:26:14.586 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 17:26:14.586 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:14.817 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:14.817 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:14.818 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:15.001 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:15.003 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:15.004 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:15.176 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:15.177 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:26:15.178 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:26:15.426 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:15.427 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 17:26:15.427 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:26:15.428 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:26:15.625 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:15.626 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 17:26:15.626 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 17:26:15.626 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 17:26:15.626 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 17:26:15.626 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 17:26:15.627 [http-nio-10090-exec-8] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:26:49.659 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 17:26:49.660 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:26:50.401 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 17:26:50.401 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 17:26:50.401 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 17:26:50.605 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 17:26:50.606 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:50.607 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 17:26:50.773 [http-nio-10090-exec-10] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 17:26:50.774 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1013.0257914000000002,hold:0E-16
2022-06-12 17:26:50.775 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-5.6981333200000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1013.0257914000000000,操作后，数据库存储的总金额:1013.0257914000000002
2022-06-12 17:26:50.776 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:50.777 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:50.937 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:50.954 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 17:26:50.954 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 17:26:51.124 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:51.125 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:51.125 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:51.313 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:51.313 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.6099233320000000,hold:0E-16
2022-06-12 17:26:51.314 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.4099233320000000,操作后，计算剩余的金额:0.6099233320000000,操作后，数据库存储的总金额:0.6099233320000000
2022-06-12 17:26:51.337 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 17:26:51.337 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:26:51.481 [http-nio-10090-exec-10] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 17:26:51.482 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:51.483 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 17:26:51.651 [http-nio-10090-exec-10] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 17:26:51.651 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 17:26:51.651 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 17:26:51.843 [http-nio-10090-exec-10] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 17:26:51.844 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 17:26:51.844 [http-nio-10090-exec-10] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 17:26:51.845 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 17:26:51.845 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 17:26:52.120 [http-nio-10090-exec-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 18
2022-06-12 17:26:52.120 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null)]
2022-06-12 17:26:52.121 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:26:52.122 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 17:26:52.122 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 17:26:52.123 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:52.123 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:52.316 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 17:26:52.316 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:26:52.373 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:52.374 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:26:52.374 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:52.542 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:26:52.543 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:52.544 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:52.605 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:52.606 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:26:52.607 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:26:52.607 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:52.713 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:52.714 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 17:26:52.714 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:52.715 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:52.867 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:52.868 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:52.868 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:52.869 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:52.869 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:26:52.870 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:53.032 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:53.033 [pool-7-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:26:53.034 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 17:26:53.034 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:53.080 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:53.081 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:26:53.082 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:53.239 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:53.239 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:53.240 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:53.299 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:53.299 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:53.299 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:53.393 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:53.394 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:53.395 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:53.477 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:53.478 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 17:26:53.478 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:26:53.527 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:53.528 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:26:53.528 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:26:53.671 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:26:53.672 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 17:26:53.672 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 17:26:53.672 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:53.672 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:53.677 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:53.677 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 17:26:53.678 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:26:53.679 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:26:53.785 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:53.786 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:26:53.786 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:53.835 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:53.835 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 17:26:53.835 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 17:26:53.836 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 17:26:53.836 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 17:26:53.836 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 17:26:53.837 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:26:53.939 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:53.939 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:26:53.940 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:26:53.941 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:53.987 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:26:53.988 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:53.988 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:54.140 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:54.140 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:54.140 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 17:26:54.141 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:54.141 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:54.141 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:54.141 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:54.296 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:54.297 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:26:54.297 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:54.357 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:54.357 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:54.358 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:54.478 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:54.478 [pool-7-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:26:54.479 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 17:26:54.479 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:54.532 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:54.534 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 17:26:54.534 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:26:54.684 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:54.685 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:54.685 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:54.738 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:54.739 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 17:26:54.740 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 17:26:54.740 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:26:54.797 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:54.798 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:54.799 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:54.975 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:54.976 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:54.976 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:26:54.976 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 17:26:54.977 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 17:26:54.977 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:26:54.977 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:54.977 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:55.119 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:55.120 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 17:26:55.121 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:26:55.122 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:26:55.423 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:55.424 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:26:55.424 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:55.476 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:55.476 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 17:26:55.476 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 17:26:55.477 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 17:26:55.477 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:26:55.590 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:55.590 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:26:55.591 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:26:55.591 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:55.637 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:26:55.638 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:55.638 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:55.792 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:55.793 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:55.793 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:55.840 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:55.841 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 17:26:55.841 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:55.842 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:55.991 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:55.992 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:55.993 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:56.042 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:56.043 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:26:56.044 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:56.189 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:56.189 [pool-7-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:26:56.190 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 17:26:56.191 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:56.235 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:56.236 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 17:26:56.237 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:26:56.381 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:56.381 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:56.381 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:56.432 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:56.433 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 17:26:56.434 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 17:26:56.434 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:26:56.484 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:56.485 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:56.485 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:56.630 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:56.631 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:56.631 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 17:26:56.632 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 17:26:56.632 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:26:56.632 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:56.632 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:26:56.633 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:56.783 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:56.784 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 17:26:56.785 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:26:56.785 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:26:56.851 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:56.852 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:26:56.853 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:57.017 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:57.018 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 17:26:57.018 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 17:26:57.018 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 17:26:57.018 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 17:26:57.018 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 17:26:57.018 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 17:26:57.019 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:57.019 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:57.065 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:57.065 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:26:57.066 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:26:57.066 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:57.161 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:57.162 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:26:57.163 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:57.305 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:57.305 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:57.306 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:57.362 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:57.362 [pool-7-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:26:57.363 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:26:57.363 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:57.474 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:57.475 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:26:57.476 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:57.522 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:57.523 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:57.523 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:57.681 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:57.682 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:57.683 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:26:57.683 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:57.683 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:57.683 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:57.888 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:57.888 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:57.889 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:57.889 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 17:26:57.889 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:57.890 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:26:58.049 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:58.049 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 17:26:58.050 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:26:58.105 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:26:58.106 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 17:26:58.106 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 17:26:58.107 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:58.107 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:58.254 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:26:58.254 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 17:26:58.307 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:58.308 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:26:58.309 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:26:58.499 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:26:58.500 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:26:58.500 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:26:58.500 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:26:58.780 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:26:58.780 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:26:58.781 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:26:58.968 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:26:58.969 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:26:58.969 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:26:59.159 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:26:59.161 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 17:26:59.161 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:26:59.371 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:59.371 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 17:26:59.372 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 17:26:59.372 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:26:59.597 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:26:59.598 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 17:26:59.598 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 17:26:59.598 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 17:26:59.598 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 17:26:59.598 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 17:26:59.598 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 17:26:59.599 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 17:26:59.599 [http-nio-10090-exec-10] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:28:40.224 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-06-12 17:28:40.234 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-06-12 17:28:59.940 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5005 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-06-12 17:29:04.954 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 60061 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-06-12 17:29:04.955 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-06-12 17:29:05.761 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 17:29:05.764 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-06-12 17:29:05.786 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 Elasticsearch repository interfaces.
2022-06-12 17:29:05.791 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 17:29:05.792 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-06-12 17:29:05.799 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-06-12 17:29:05.813 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 17:29:05.815 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-06-12 17:29:05.831 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-06-12 17:29:06.481 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-06-12 17:29:06.528 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-06-12 17:29:06.529 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-06-12 17:29:06.529 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-06-12 17:29:06.613 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-06-12 17:29:06.613 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1602 ms
2022-06-12 17:29:07.590 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-06-12 17:29:08.586 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-06-12 17:29:08.587 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-06-12 17:29:08.587 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-06-12 17:29:08.712 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onOpen ------
2022-06-12 17:29:08.949 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-06-12 17:29:08.967 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-06-12 17:29:08.982 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.593 seconds (JVM running for 25.061)
2022-06-12 17:29:13.772 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026153619"}
2022-06-12 17:29:14.125 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-06-12 17:29:14.125 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-06-12 17:29:14.127 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-06-12 17:29:14.428 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-06-12 17:29:19.062 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026158621"}
2022-06-12 17:29:19.202 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-06-12 17:29:19.213 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 17:29:19.243 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:29:19.380 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 17:29:19.385 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 17:29:19.385 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 17:29:19.511 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 17:29:19.512 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:19.513 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 17:29:19.700 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 17:29:19.701 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1013.0257914000000002,hold:0E-16
2022-06-12 17:29:19.702 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-5.6981333200000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1013.0257914000000000,操作后，数据库存储的总金额:1013.0257914000000002
2022-06-12 17:29:19.705 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:19.706 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:29:19.863 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:19.887 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 17:29:19.887 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 17:29:20.053 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:20.054 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:20.055 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:29:20.257 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:20.257 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.6099233320000000,hold:0E-16
2022-06-12 17:29:20.258 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.4099233320000000,操作后，计算剩余的金额:0.6099233320000000,操作后，数据库存储的总金额:0.6099233320000000
2022-06-12 17:29:20.280 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 17:29:20.281 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:29:20.420 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 17:29:20.422 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:20.422 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 17:29:20.562 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 17:29:20.563 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 17:29:20.563 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 17:29:20.723 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 17:29:20.724 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 17:29:20.724 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 17:29:20.725 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 17:29:20.726 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 17:29:21.029 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 18
2022-06-12 17:29:21.030 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null)]
2022-06-12 17:29:21.031 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:29:21.034 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:29:21.035 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 17:29:21.035 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 17:29:21.036 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:21.036 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:21.036 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 17:29:21.037 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:29:21.204 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:21.205 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:29:21.206 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:21.263 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:29:21.264 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:21.264 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:21.357 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:21.358 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:29:21.362 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:29:21.362 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:21.474 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:21.475 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 17:29:21.476 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:21.478 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:21.498 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:21.500 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:21.500 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:21.623 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:21.626 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:29:21.626 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:21.670 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:21.671 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:29:21.672 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:21.781 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:21.781 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:29:21.782 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 17:29:21.782 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:21.804 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:21.805 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:21.805 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:21.966 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:21.967 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:21.968 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 17:29:21.968 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:21.969 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:21.969 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:29:22.220 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:22.221 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:29:22.222 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 17:29:22.222 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:22.223 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:29:22.223 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 17:29:22.223 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:22.224 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:22.394 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:22.396 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:29:22.396 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:22.475 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:22.476 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:29:22.477 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:29:22.535 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:22.535 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:29:22.536 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:29:22.537 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:22.677 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:22.677 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 17:29:22.678 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:29:22.679 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:29:22.726 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:22.727 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:22.728 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:22.856 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:22.857 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 17:29:22.857 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 17:29:22.858 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 17:29:22.858 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 17:29:22.859 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 17:29:22.859 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:29:22.939 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:22.941 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:22.941 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:29:22.988 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:29:22.989 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:22.990 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:23.098 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:23.100 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 17:29:23.100 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:29:23.656 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:23.657 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 17:29:23.660 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:23.660 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:23.696 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:23.697 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 17:29:23.698 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 17:29:23.699 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:29:23.705 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026163623"}
2022-06-12 17:29:23.802 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:23.803 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:29:23.803 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:23.849 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:23.850 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 17:29:23.850 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 17:29:23.850 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:23.851 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:24.005 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:24.006 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:29:24.007 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 17:29:24.007 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:24.055 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:24.056 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:29:24.056 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:24.154 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:24.155 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:24.156 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:24.206 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:24.206 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:29:24.207 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:29:24.208 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:24.350 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:24.352 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:24.353 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:29:24.357 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:24.358 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:24.358 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:24.460 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:24.462 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:29:24.463 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:29:24.509 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:24.511 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:24.511 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:29:24.614 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:24.614 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 17:29:24.615 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:29:24.616 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:29:24.664 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:24.665 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 17:29:24.666 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:29:24.816 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:24.816 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:24.817 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 17:29:24.817 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 17:29:24.818 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 17:29:24.818 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 17:29:24.818 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 17:29:24.819 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:29:24.819 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:29:24.984 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:24.984 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 17:29:24.985 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 17:29:24.985 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:24.986 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:25.023 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:29:25.024 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:25.024 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:25.135 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:25.136 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:29:25.136 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:25.693 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:25.694 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 17:29:25.694 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:25.695 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:25.744 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:25.745 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:29:25.745 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:29:25.746 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:25.864 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:25.866 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:29:25.866 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:25.896 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:25.897 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:25.898 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:26.047 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:26.048 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:29:26.049 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 17:29:26.050 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:26.050 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:26.051 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:29:26.052 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:26.204 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:26.204 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:26.204 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:26.211 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:26.211 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:26.211 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:26.843 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:26.843 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:26.844 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 17:29:26.844 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:26.844 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:29:26.844 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:29:26.947 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:29:26.948 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 17:29:26.948 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 17:29:26.949 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:26.949 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:26.996 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:26.998 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:29:26.998 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:29:27.098 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:27.101 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:29:27.101 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:27.201 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:27.202 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 17:29:27.203 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:29:27.204 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:29:27.257 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:27.258 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:29:27.258 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:29:27.259 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:27.363 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:27.363 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 17:29:27.364 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 17:29:27.364 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 17:29:27.364 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 17:29:27.365 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 17:29:27.365 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 17:29:27.366 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:27.366 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:27.422 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:27.423 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:27.423 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:27.532 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:27.533 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:29:27.534 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:27.584 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:27.586 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:27.587 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:29:27.731 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:27.731 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:29:27.732 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:29:27.732 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:27.737 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:27.738 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 17:29:27.740 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:29:27.841 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:27.842 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:27.843 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:27.890 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:27.890 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 17:29:27.891 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 17:29:27.892 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:29:27.996 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:27.997 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:29:27.998 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:28.047 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:28.047 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 17:29:28.048 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 17:29:28.048 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 17:29:28.048 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 17:29:28.048 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 17:29:28.048 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 17:29:28.048 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 17:29:28.149 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:28.150 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:28.151 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:28.331 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:28.332 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 17:29:28.333 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:29:28.539 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:29:28.540 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 17:29:28.860 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026168626"}
2022-06-12 17:29:33.710 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026173629"}
2022-06-12 17:29:38.705 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026178632"}
2022-06-12 17:29:43.746 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026183634"}
2022-06-12 17:29:48.699 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026188637"}
2022-06-12 17:29:53.700 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026193640"}
2022-06-12 17:29:55.461 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 17:29:55.462 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:29:55.663 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 17:29:55.664 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 17:29:55.664 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 17:29:55.795 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 17:29:55.795 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:55.796 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 17:29:55.949 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 17:29:55.950 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1013.0257914000000002,hold:0E-16
2022-06-12 17:29:55.950 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-5.6981333200000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1013.0257914000000000,操作后，数据库存储的总金额:1013.0257914000000002
2022-06-12 17:29:55.951 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:55.951 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:29:56.162 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:56.172 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 17:29:56.172 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 17:29:56.363 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:56.364 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:56.364 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:29:56.564 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:56.564 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.6099233320000000,hold:0E-16
2022-06-12 17:29:56.564 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.4099233320000000,操作后，计算剩余的金额:0.6099233320000000,操作后，数据库存储的总金额:0.6099233320000000
2022-06-12 17:29:56.581 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 17:29:56.582 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:29:56.729 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 17:29:56.730 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:56.731 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 17:29:57.054 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 17:29:57.055 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 17:29:57.056 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 17:29:57.212 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 17:29:57.212 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 17:29:57.212 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 17:29:57.213 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 17:29:57.213 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 17:29:57.439 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 18
2022-06-12 17:29:57.439 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null)]
2022-06-12 17:29:57.441 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:29:57.441 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 17:29:57.441 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:29:57.442 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 17:29:57.443 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:57.444 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:57.643 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 17:29:57.644 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:29:57.644 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:57.645 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:29:57.645 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:58.082 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:58.082 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:29:58.083 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:29:58.084 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:58.141 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:29:58.142 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:58.142 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:58.259 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:58.260 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:58.261 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:58.317 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:58.318 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 17:29:58.319 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:58.319 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:58.418 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:58.419 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:29:58.420 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:58.482 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:58.483 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:29:58.483 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:58.626 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:58.627 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:58.628 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:58.686 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:58.687 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:29:58.688 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 17:29:58.688 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:58.746 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026198646"}
2022-06-12 17:29:58.798 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:58.799 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 17:29:58.800 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:29:58.937 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:58.938 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:58.938 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:58.986 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:29:58.986 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 17:29:58.987 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 17:29:58.988 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:58.988 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:59.086 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:59.087 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:59.087 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:29:59.136 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:59.136 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:29:59.137 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:29:59.270 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:59.271 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:29:59.271 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:29:59.325 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:29:59.326 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:29:59.326 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:29:59.327 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:29:59.474 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:59.475 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 17:29:59.475 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:29:59.475 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:29:59.530 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:29:59.531 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:59.531 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:59.687 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:29:59.687 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 17:29:59.687 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 17:29:59.687 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 17:29:59.687 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 17:29:59.687 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 17:29:59.688 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:29:59.734 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:59.735 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:59.735 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:29:59.842 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:29:59.842 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:29:59.842 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:29:59.942 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:29:59.944 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 17:29:59.944 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:29:59.993 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:29:59.994 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 17:29:59.994 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:29:59.994 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:30:00.098 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:30:00.098 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 17:30:00.100 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 17:30:00.100 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:30:00.181 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:30:00.182 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:30:00.182 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:30:00.293 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:30:00.294 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 17:30:00.294 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 17:30:00.295 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:30:00.295 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:30:00.351 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:30:00.352 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:30:00.353 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 17:30:00.353 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:30:00.453 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:30:00.454 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:30:00.455 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:30:00.633 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:30:00.634 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:30:00.634 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:30:00.692 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:30:00.692 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:30:00.693 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:30:00.693 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:30:00.812 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:30:00.813 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:30:00.814 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:30:00.864 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:30:00.865 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:30:00.865 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:30:00.967 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:30:00.969 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:30:00.969 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:30:01.018 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:30:01.019 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:30:01.019 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:30:01.200 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:30:01.201 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:30:01.201 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 17:30:01.202 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:30:01.202 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 17:30:01.202 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:30:01.202 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:30:01.342 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:30:01.342 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:30:01.343 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 17:30:01.343 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 17:30:01.343 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 17:30:01.344 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 17:30:01.344 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 17:30:01.344 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:30:01.344 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:30:01.507 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:30:01.508 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 17:30:01.508 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 17:30:01.509 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:30:01.509 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:30:01.554 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:30:01.555 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:30:01.555 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:30:02.150 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:30:02.150 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:30:02.150 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 17:30:02.151 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:30:02.151 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:30:02.151 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:30:02.151 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:30:02.323 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:30:02.323 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:30:02.324 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:30:02.324 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:30:02.324 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:30:02.324 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:30:02.325 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:30:02.518 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:30:02.519 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:30:02.519 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:30:02.528 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:30:02.528 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:30:02.529 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 17:30:02.529 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:30:02.630 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:30:02.631 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:30:02.632 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:30:02.769 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:30:02.769 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:30:02.769 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:30:02.831 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:30:02.832 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:30:02.832 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:30:02.982 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:30:02.983 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:30:02.983 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:30:03.028 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:30:03.029 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 17:30:03.030 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:30:03.172 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:30:03.173 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:30:03.173 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:30:03.270 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:30:03.271 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 17:30:03.271 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 17:30:03.272 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:30:03.272 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:30:03.391 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:30:03.392 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 17:30:03.393 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:30:03.393 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:30:03.457 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:30:03.458 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:30:03.459 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:30:03.581 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:30:03.581 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 17:30:03.581 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 17:30:03.581 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 17:30:03.581 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 17:30:03.582 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 17:30:03.582 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 17:30:03.582 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:30:03.582 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:30:03.627 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:30:03.628 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:30:03.628 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:30:03.629 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:30:03.691 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026203647"}
2022-06-12 17:30:03.745 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:30:03.746 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:30:03.747 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:30:03.831 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:30:03.832 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:30:03.832 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:30:04.160 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:30:04.160 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:30:04.161 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:30:04.162 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:30:04.213 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:30:04.214 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:30:04.215 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:30:04.342 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:30:04.343 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:30:04.343 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:30:04.395 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:30:04.396 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 17:30:04.396 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:30:04.545 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:30:04.546 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:30:04.546 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:30:04.598 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:30:04.599 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 17:30:04.600 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 17:30:04.601 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:30:04.736 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:30:04.737 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:30:04.737 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:30:04.793 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:30:04.793 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 17:30:04.793 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 17:30:04.794 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 17:30:04.794 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 17:30:04.794 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 17:30:04.794 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 17:30:04.794 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 17:30:04.918 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:30:04.919 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 17:30:04.920 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:30:05.094 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:30:05.094 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 17:30:08.749 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026208650"}
2022-06-12 17:30:13.685 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026213653"}
2022-06-12 17:30:17.644 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-06-12 17:30:17.655 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-06-12 17:33:35.333 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5003 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-06-12 17:33:40.347 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 60098 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-06-12 17:33:40.348 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-06-12 17:33:41.282 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 17:33:41.285 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-06-12 17:33:41.308 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 0 Elasticsearch repository interfaces.
2022-06-12 17:33:41.312 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 17:33:41.313 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-06-12 17:33:41.320 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-06-12 17:33:41.331 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 17:33:41.333 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-06-12 17:33:41.356 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-06-12 17:33:42.060 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-06-12 17:33:42.114 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-06-12 17:33:42.114 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-06-12 17:33:42.114 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-06-12 17:33:42.213 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-06-12 17:33:42.213 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1807 ms
2022-06-12 17:33:43.198 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-06-12 17:33:44.060 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-06-12 17:33:44.062 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-06-12 17:33:44.062 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-06-12 17:33:44.195 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onOpen ------
2022-06-12 17:33:44.475 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-06-12 17:33:44.496 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-06-12 17:33:44.512 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.769 seconds (JVM running for 25.402)
2022-06-12 17:33:48.106 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-06-12 17:33:48.106 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-06-12 17:33:48.107 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-06-12 17:33:48.398 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-06-12 17:33:49.200 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026428765"}
2022-06-12 17:33:50.782 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-06-12 17:33:50.793 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 17:33:50.822 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:33:50.981 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 17:33:50.986 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 17:33:50.986 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 17:33:51.173 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 17:33:51.175 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:51.175 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 17:33:51.628 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 17:33:51.629 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1013.0257914000000002,hold:0E-16
2022-06-12 17:33:51.630 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-5.6981333200000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1013.0257914000000000,操作后，数据库存储的总金额:1013.0257914000000002
2022-06-12 17:33:51.633 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:51.634 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:33:51.887 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:33:51.908 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 17:33:51.909 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 17:33:52.094 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:33:52.095 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:52.096 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:33:52.277 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:33:52.278 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.6099233320000000,hold:0E-16
2022-06-12 17:33:52.278 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.4099233320000000,操作后，计算剩余的金额:0.6099233320000000,操作后，数据库存储的总金额:0.6099233320000000
2022-06-12 17:33:52.301 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 17:33:52.302 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:33:52.442 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 17:33:52.443 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:52.444 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 17:33:52.612 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 17:33:52.613 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 17:33:52.614 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 17:33:52.823 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 17:33:52.824 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 17:33:52.825 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 17:33:52.826 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 17:33:52.826 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 17:33:53.138 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 18
2022-06-12 17:33:53.139 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null)]
2022-06-12 17:33:53.141 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:33:53.143 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 17:33:53.143 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 17:33:53.144 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:53.144 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 17:33:53.144 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:53.145 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:33:53.305 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:33:53.307 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:53.307 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:53.362 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:53.363 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:33:53.363 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:53.482 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:53.483 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 17:33:53.485 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:53.485 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:53.535 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:53.536 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:33:53.538 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:33:53.540 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:33:53.656 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:53.658 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:33:53.658 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:53.709 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:33:53.712 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:53.713 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:53.820 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:53.821 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:33:53.822 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 17:33:53.823 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:33:53.868 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:53.870 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:33:53.871 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:33:53.983 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:33:53.984 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:53.984 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:54.054 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:33:54.056 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:54.057 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:54.168 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:54.171 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:54.172 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:33:54.223 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026433767"}
2022-06-12 17:33:54.224 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:54.226 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 17:33:54.227 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:33:54.388 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:33:54.391 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:33:54.392 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:33:54.434 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:33:54.434 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 17:33:54.435 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 17:33:54.436 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:54.437 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:54.584 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:33:54.585 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 17:33:54.587 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:33:54.587 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:33:54.589 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:54.590 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:33:54.590 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:54.756 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:54.757 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:33:54.758 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:33:54.758 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:33:54.806 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:33:54.807 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 17:33:54.808 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 17:33:54.808 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 17:33:54.809 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 17:33:54.809 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 17:33:54.810 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:33:54.916 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:33:54.917 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:54.917 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:54.963 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:33:54.964 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:54.965 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:55.091 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:55.092 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:55.093 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:33:55.150 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:55.151 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 17:33:55.152 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:55.153 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:55.294 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:33:55.295 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 17:33:55.296 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:33:55.348 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:55.349 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:33:55.350 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:55.860 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:55.861 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:33:55.861 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:33:55.861 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 17:33:55.862 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 17:33:55.862 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 17:33:55.862 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:33:55.862 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:33:56.011 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:33:56.012 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:33:56.012 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:56.012 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 17:33:56.013 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:56.013 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 17:33:56.013 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:56.014 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:56.167 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:56.169 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:56.169 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:33:56.221 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:56.223 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:33:56.223 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:56.332 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:33:56.334 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:33:56.335 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:33:56.387 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:56.387 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:33:56.388 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:33:56.389 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:33:56.499 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:33:56.500 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 17:33:56.501 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:33:56.502 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:33:56.579 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:33:56.580 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:56.580 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:56.724 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:33:56.724 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 17:33:56.725 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 17:33:56.726 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 17:33:56.726 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:33:56.782 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:56.784 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:56.785 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:33:57.005 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:33:57.006 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:57.007 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:57.070 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:33:57.071 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 17:33:57.071 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:33:57.240 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:57.241 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 17:33:57.242 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:57.242 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:57.303 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:33:57.304 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 17:33:57.305 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 17:33:57.305 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:33:57.683 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:57.684 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:33:57.685 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:57.732 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:33:57.733 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 17:33:57.733 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 17:33:57.733 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:57.734 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:57.803 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:57.804 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:33:57.806 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 17:33:57.806 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:33:57.856 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:57.857 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:33:57.857 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:58.002 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:33:58.003 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:58.004 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:58.010 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:58.010 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:33:58.011 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:33:58.012 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:33:58.114 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:58.116 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:58.116 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:33:58.214 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:33:58.215 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:58.216 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:58.264 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:33:58.266 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:33:58.266 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:33:58.369 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:58.370 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:33:58.370 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:33:58.468 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:33:58.469 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 17:33:58.469 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:33:58.470 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:33:58.519 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:33:58.520 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:58.520 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:58.688 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:33:58.689 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 17:33:58.689 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 17:33:58.689 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 17:33:58.689 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 17:33:58.690 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 17:33:58.690 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 17:33:58.690 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:58.691 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:58.749 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:58.751 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 17:33:58.751 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:33:58.852 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:58.853 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:33:58.853 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:58.980 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:33:58.981 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 17:33:58.981 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 17:33:58.981 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:33:58.981 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:59.040 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:59.041 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:33:59.042 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:33:59.042 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:33:59.216 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:59.216 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:33:59.217 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:33:59.266 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:33:59.267 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:59.267 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:59.799 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:33:59.800 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:33:59.800 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:33:59.801 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:33:59.801 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:33:59.802 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:33:59.802 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:33:59.971 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:33:59.972 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:33:59.972 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:59.972 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:33:59.973 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:33:59.973 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:00.162 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:00.163 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:00.163 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:34:00.227 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:00.228 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 17:34:00.229 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:34:00.330 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:00.332 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 17:34:00.332 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:34:00.384 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:34:00.385 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 17:34:00.486 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:00.487 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 17:34:00.487 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 17:34:00.488 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:34:00.727 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:00.727 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 17:34:00.728 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 17:34:00.728 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 17:34:00.729 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 17:34:00.729 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 17:34:00.729 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 17:34:00.729 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 17:34:00.729 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:34:11.270 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026438769"}
2022-06-12 17:34:11.378 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655026443770"}
2022-06-12 17:34:11.643 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onError ------{}
javax.net.ssl.SSLException: Connection reset
	at sun.security.ssl.Alert.createSSLException(Alert.java:127)
	at sun.security.ssl.TransportContext.fatal(TransportContext.java:324)
	at sun.security.ssl.TransportContext.fatal(TransportContext.java:267)
	at sun.security.ssl.TransportContext.fatal(TransportContext.java:262)
	at sun.security.ssl.SSLTransport.decode(SSLTransport.java:138)
	at sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1395)
	at sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1363)
	at sun.security.ssl.SSLSocketImpl.access$300(SSLSocketImpl.java:73)
	at sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:957)
	at java.io.InputStream.read(InputStream.java:101)
	at org.java_websocket.client.WebSocketClient.run(WebSocketClient.java:277)
	at java.lang.Thread.run(Thread.java:748)
	Suppressed: java.net.SocketException: Broken pipe (Write failed)
		at java.net.SocketOutputStream.socketWrite0(Native Method)
		at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:111)
		at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
		at sun.security.ssl.SSLSocketOutputRecord.encodeAlert(SSLSocketOutputRecord.java:81)
		at sun.security.ssl.TransportContext.fatal(TransportContext.java:355)
		... 10 common frames omitted
Caused by: java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:464)
	at sun.security.ssl.SSLSocketInputRecord.decodeInputRecord(SSLSocketInputRecord.java:237)
	at sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:190)
	at sun.security.ssl.SSLTransport.decode(SSLTransport.java:109)
	... 7 common frames omitted
2022-06-12 17:34:11.644 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onClose ------
2022-06-12 17:34:33.574 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 17:34:33.575 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:34:34.210 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 17:34:34.211 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 17:34:34.212 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 17:34:35.152 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 17:34:35.153 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:35.153 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 17:34:35.370 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 17:34:35.370 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:980.1243129600000002,hold:0.5354907600000000
2022-06-12 17:34:35.371 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-38.0641210000000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:980.6598037200000000,操作后，数据库存储的总金额:980.6598037200000002
2022-06-12 17:34:35.372 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:35.372 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:34:35.560 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:35.575 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 17:34:35.576 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 17:34:35.718 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:35.719 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:35.719 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:34:35.898 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:35.898 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.7344079000000000,hold:0E-16
2022-06-12 17:34:35.899 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.5344079000000000,操作后，计算剩余的金额:0.7344079000000000,操作后，数据库存储的总金额:0.7344079000000000
2022-06-12 17:34:35.920 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 17:34:35.920 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:34:36.057 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 17:34:36.058 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:36.059 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 17:34:36.311 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 17:34:36.312 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 17:34:36.313 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 17:34:36.527 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 17:34:36.528 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 17:34:36.528 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 17:34:36.529 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 17:34:36.529 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 17:34:37.450 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 27
2022-06-12 17:34:37.451 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null)]
2022-06-12 17:34:37.452 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:34:37.453 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 17:34:37.453 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 17:34:37.453 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 17:34:37.453 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 17:34:37.454 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 17:34:37.454 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 17:34:37.455 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:34:38.014 [pool-6-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 17:34:38.015 [pool-6-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:34:38.783 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:38.783 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:38.788 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:34:38.789 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:38.789 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:39.115 [pool-6-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:34:39.116 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:34:39.116 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:40.322 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:40.322 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:40.322 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:40.322 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 17:34:40.322 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 17:34:40.323 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:34:40.323 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:40.323 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:40.323 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:40.323 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:40.323 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:40.884 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:40.885 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:34:40.885 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:40.896 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:40.896 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:40.897 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:34:40.897 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:34:40.898 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:40.899 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:34:40.899 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:41.120 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:41.121 [pool-6-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:34:41.122 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 17:34:41.122 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:41.241 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:41.241 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:34:41.242 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 17:34:41.243 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:41.264 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:41.265 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:41.266 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:41.340 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:41.341 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:34:41.341 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:41.426 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:41.427 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:41.427 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:41.482 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:41.483 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:34:41.483 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:41.530 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:41.532 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:41.532 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:34:41.584 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:41.585 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:41.586 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:34:41.710 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:41.710 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:41.710 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:41.711 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:41.711 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 17:34:41.712 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:34:41.775 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:41.776 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:34:41.777 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:34:41.956 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:41.957 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:41.957 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 17:34:41.957 [pool-6-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 17:34:41.958 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:34:41.958 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 17:34:41.959 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:34:42.002 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:42.002 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 17:34:42.003 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:34:42.004 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:34:42.626 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:42.626 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:42.626 [pool-6-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 17:34:42.627 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 17:34:42.627 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 17:34:42.628 [pool-6-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 17:34:42.628 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 17:34:42.629 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 17:34:42.629 [pool-6-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:34:42.629 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 17:34:42.629 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 17:34:42.630 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:34:42.720 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:34:42.721 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 17:34:42.721 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 17:34:42.721 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:42.722 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:43.145 [pool-6-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:34:43.145 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:34:43.146 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:43.146 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:34:43.146 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:43.146 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:43.194 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:43.195 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:34:43.196 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:43.794 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:43.795 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 17:34:43.796 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:43.796 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:43.862 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:43.863 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:43.863 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 17:34:43.863 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:34:43.863 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:43.864 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:43.864 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:34:43.864 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:43.957 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:43.958 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:34:43.959 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:44.097 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:44.097 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:44.097 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:44.098 [pool-6-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:34:44.098 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:44.098 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:34:44.098 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:44.098 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:44.098 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 17:34:44.099 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:44.916 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:44.916 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:44.916 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:44.916 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:34:44.917 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:34:44.917 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:44.917 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 17:34:44.917 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:44.917 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:44.917 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:34:45.080 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:45.080 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:45.081 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:45.081 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 17:34:45.081 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:34:45.082 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:34:45.088 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:45.089 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:45.089 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:45.244 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:45.245 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 17:34:45.246 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:34:45.393 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:45.394 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 17:34:45.395 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 17:34:45.396 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:34:45.475 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:45.476 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:45.476 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:34:45.556 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:45.557 [pool-6-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 17:34:45.558 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 17:34:45.558 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:34:45.637 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:45.638 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 17:34:45.638 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 17:34:45.638 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:45.639 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:46.293 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:46.294 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:46.295 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:34:46.295 [pool-6-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 17:34:46.295 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 17:34:46.296 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:34:46.296 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 17:34:46.296 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 17:34:46.296 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 17:34:46.356 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:46.357 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:34:46.358 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:46.508 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:46.508 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 17:34:46.509 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:34:46.510 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:34:46.560 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:46.560 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:34:46.561 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:34:46.562 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:46.761 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:46.762 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 17:34:46.762 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 17:34:46.763 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 17:34:46.763 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:34:46.829 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:46.830 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:46.830 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:47.040 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:34:47.041 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:47.042 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:47.113 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:47.115 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:47.115 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:34:47.241 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:47.241 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 17:34:47.242 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:47.242 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:47.345 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:47.347 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 17:34:47.347 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:34:47.398 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:47.399 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:34:47.400 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:47.578 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:47.578 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:47.578 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:34:47.579 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 17:34:47.580 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 17:34:47.580 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 17:34:47.580 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:47.580 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:34:47.727 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:47.728 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:47.728 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:47.810 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:47.811 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 17:34:47.811 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 17:34:47.812 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:47.812 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:47.952 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:47.953 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:47.953 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:34:48.062 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:48.063 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:34:48.063 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:48.112 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:48.113 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:34:48.113 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:34:48.229 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:48.229 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:34:48.230 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:34:48.231 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:48.390 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:48.390 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 17:34:48.391 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:34:48.392 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:34:48.451 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:48.451 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:48.452 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:48.696 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:48.697 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:34:48.697 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:48.697 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:48.697 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 17:34:48.698 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 17:34:48.698 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 17:34:48.698 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 17:34:48.698 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 17:34:48.698 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 17:34:48.698 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:48.699 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:49.020 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:49.020 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:49.021 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:49.021 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:34:49.021 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:49.021 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:49.171 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:49.172 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 17:34:49.173 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:34:49.229 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:49.230 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:34:49.231 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:34:49.231 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:49.392 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:34:49.393 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 17:34:49.393 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 17:34:49.394 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:49.395 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:49.453 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:49.453 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:49.454 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:49.570 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:49.572 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:34:49.572 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:49.629 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:49.630 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:34:49.630 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:49.722 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:49.723 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:34:49.724 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:34:49.724 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:49.778 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:49.779 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:49.779 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:50.447 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:50.447 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:50.448 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:34:50.448 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 17:34:50.448 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:50.448 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:34:50.677 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:50.678 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:34:50.678 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:50.679 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 17:34:50.679 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:34:50.935 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:50.936 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 17:34:50.936 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:34:51.198 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:51.198 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 17:34:51.199 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 17:34:51.199 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:34:51.463 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:34:51.464 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 17:34:51.464 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 17:34:51.464 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 17:34:51.464 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 17:34:51.465 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 17:34:51.465 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 17:34:51.465 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 17:34:51.465 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 17:34:51.465 [pool-6-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 17:34:51.465 [pool-6-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:34:51.683 [pool-6-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:34:51.683 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:34:51.684 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:51.835 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:51.836 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 17:34:51.836 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:51.837 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:58.092 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:58.093 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:34:58.094 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:34:59.259 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:34:59.259 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:34:59.260 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 17:34:59.261 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:34:59.546 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:34:59.547 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:34:59.547 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:34:59.709 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:34:59.710 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:34:59.711 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:34:59.863 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:34:59.864 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 17:34:59.864 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:00.092 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:00.092 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 17:35:00.093 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 17:35:00.093 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:00.479 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:00.479 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 17:35:00.480 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:35:29.621 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 17:35:29.622 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:35:29.767 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 17:35:29.768 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 17:35:29.769 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 17:35:29.925 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 17:35:29.926 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:29.927 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 17:35:30.082 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 17:35:30.083 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 17:35:30.083 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 17:35:30.084 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:30.084 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:30.241 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:30.256 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 17:35:30.256 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 17:35:30.389 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:30.389 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:30.390 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:30.537 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:30.538 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 17:35:30.538 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 17:35:30.561 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 17:35:30.561 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 17:35:30.692 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 17:35:30.693 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:30.693 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 17:35:30.856 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 17:35:30.857 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 17:35:30.858 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 17:35:31.016 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 17:35:31.016 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 17:35:31.017 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 17:35:31.018 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 17:35:31.018 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 17:35:31.378 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 17:35:31.379 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 17:35:31.382 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:35:31.383 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 17:35:31.385 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 17:35:31.385 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 17:35:31.386 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:35:31.386 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 17:35:31.386 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 17:35:31.386 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 17:35:31.386 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 17:35:31.554 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:31.555 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:31.555 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:31.555 [pool-7-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 17:35:31.555 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:31.555 [pool-7-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:35:31.609 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:35:31.610 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:31.610 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:31.660 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:31.661 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:31.661 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:31.678 [pool-7-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:35:31.678 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:31.678 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:31.710 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:31.711 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:31.711 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:31.765 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:31.766 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 17:35:31.766 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:31.767 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:31.816 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:31.816 [pool-7-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:31.816 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 17:35:31.816 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:31.835 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:31.835 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 17:35:31.836 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:31.836 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:31.893 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:31.893 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:31.894 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:35:31.894 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:31.936 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:31.937 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:31.937 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:31.963 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:31.964 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:31.964 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:32.023 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:32.024 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:32.024 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:32.080 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:32.080 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:32.081 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:32.081 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 17:35:32.081 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:32.081 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:32.135 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:32.136 [pool-7-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:32.136 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 17:35:32.136 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:32.203 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:32.203 [pool-7-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:32.204 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 17:35:32.204 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:32.251 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:32.251 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:32.252 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:35:32.252 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:32.252 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:32.252 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:32.342 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:32.343 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:32.343 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:32.367 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:32.367 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:32.368 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:32.425 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:32.426 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:32.426 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 17:35:32.427 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:32.427 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:35:32.427 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:32.478 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:32.480 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:32.480 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:32.528 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:32.529 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:32.529 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:32.578 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:32.579 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:35:32.579 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 17:35:32.579 [pool-7-thread-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 17:35:32.579 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:35:32.579 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 17:35:32.580 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:32.580 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:32.659 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:32.660 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:35:32.661 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:32.710 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:32.711 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 17:35:32.711 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:32.761 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:32.762 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:35:32.763 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:32.762 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 17:35:32.763 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:32.763 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 17:35:32.764 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:32.764 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:32.813 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:32.813 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 17:35:32.814 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 17:35:32.814 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:32.867 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:32.868 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 17:35:32.868 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 17:35:32.868 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:32.949 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:32.950 [pool-7-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:32.950 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 17:35:32.950 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:32.990 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:32.990 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:32.991 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:33.005 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:33.005 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 17:35:33.006 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 17:35:33.006 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 17:35:33.006 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 17:35:33.007 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 17:35:33.007 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:35:33.054 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:33.055 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 17:35:33.055 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 17:35:33.055 [pool-7-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 17:35:33.055 [pool-7-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:35:33.106 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:33.107 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:33.107 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:33.146 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:33.146 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:33.147 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:35:33.147 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:33.154 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:35:33.155 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:33.155 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:33.201 [pool-7-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:35:33.202 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:33.202 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:33.256 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:33.257 [pool-7-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:33.257 [pool-7-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:33.315 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:33.315 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:33.315 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 17:35:33.315 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:33.316 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:33.316 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:33.316 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:33.361 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:33.362 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 17:35:33.362 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:33.363 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:33.441 [pool-7-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:33.443 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 17:35:33.443 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:33.459 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:33.460 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:33.461 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:33.500 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:33.500 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:33.500 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:33.550 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:33.551 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:33.551 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:33.964 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:33.965 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:33.965 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:33.965 [pool-7-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:33.965 [pool-7-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 17:35:33.965 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 17:35:33.966 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 17:35:33.966 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 17:35:33.966 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:33.966 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:33.966 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:34.015 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:34.015 [pool-7-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:34.015 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 17:35:34.016 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:34.097 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:34.098 [pool-7-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 17:35:34.098 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 17:35:34.098 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:34.098 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:34.125 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:34.126 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 17:35:34.126 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 17:35:34.126 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:34.149 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:34.149 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:34.149 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:34.173 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:34.174 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:34.174 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:34.230 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:34.231 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:34.231 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:34.278 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:34.279 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:34.279 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 17:35:34.279 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:34.279 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 17:35:34.280 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:34.280 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:34.280 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:34.332 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:34.333 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:34.334 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:34.398 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:34.398 [pool-7-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:34.399 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 17:35:34.399 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:34.442 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:34.443 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:34.444 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:34.450 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:34.451 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:35:34.451 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:34.501 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:34.501 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 17:35:34.502 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:34.548 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:34.548 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:34.549 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:34.559 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:34.560 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:34.560 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 17:35:34.560 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:34.633 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:34.634 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 17:35:34.634 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 17:35:34.635 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:34.698 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:34.698 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:34.698 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 17:35:34.699 [pool-7-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:34.699 [pool-7-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:34.699 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 17:35:34.700 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:34.811 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:34.811 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:34.811 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 17:35:34.811 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:34.811 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 17:35:34.811 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:34.812 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 17:35:34.812 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:35:34.919 [pool-7-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:34.919 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:34.920 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 17:35:34.920 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 17:35:34.920 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 17:35:34.920 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 17:35:34.920 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 17:35:34.920 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:34.920 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 17:35:34.921 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 17:35:34.921 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:34.921 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:35.111 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:35.112 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:35:35.112 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:35.113 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:35.113 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:35.113 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:35.167 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:35.167 [pool-7-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 17:35:35.167 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 17:35:35.168 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:35.189 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:35.190 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:35.190 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:35.296 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:35.297 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 17:35:35.297 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:35.326 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:35.326 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 17:35:35.327 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:35.327 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:35.371 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:35.372 [pool-7-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 17:35:35.372 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 17:35:35.372 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 17:35:35.372 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 17:35:35.372 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 17:35:35.372 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 17:35:35.372 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 17:35:35.463 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:35.463 [pool-7-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:35.464 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 17:35:35.464 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:35.499 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:35.500 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 17:35:35.500 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 17:35:35.501 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:35.560 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:35.561 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:35.561 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:35.660 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:35.661 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:35.661 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:35.723 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:35.723 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 17:35:35.723 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 17:35:35.724 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:35.724 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:35.777 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:35.778 [pool-7-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:35.779 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 17:35:35.779 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:35.830 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:35.831 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 17:35:35.831 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:35.886 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:35.887 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:35.887 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:35.977 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:35.977 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:35.977 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:35.977 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:35.977 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:35.977 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:36.052 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:36.053 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:36.053 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:35:36.053 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:36.215 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:36.215 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:36.216 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 17:35:36.216 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:35:36.216 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:36.216 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:36.237 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:36.238 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:36.238 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:36.339 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:35:36.340 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 17:35:36.340 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 17:35:36.340 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:36.340 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:36.389 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:36.390 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:36.391 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:35:36.391 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:35:36.391 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:36.391 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:36.490 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:36.490 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:36.490 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:36.592 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:36.592 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 17:35:36.593 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 17:35:36.594 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:36.647 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:36.647 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:36.648 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:36.693 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:36.694 [pool-7-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:36.694 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 17:35:36.694 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:36.816 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:36.816 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:36.816 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 17:35:36.816 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 17:35:36.817 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 17:35:36.817 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 17:35:36.817 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 17:35:36.817 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 17:35:36.817 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 17:35:36.817 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:35:36.817 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:36.817 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:36.866 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:36.866 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:36.866 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:36.970 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:36.970 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:36.971 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:37.021 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:35:37.021 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 17:35:37.021 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 17:35:37.021 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:37.022 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:37.074 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:37.075 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 17:35:37.075 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:37.122 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:37.122 [pool-7-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:37.123 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:35:37.123 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:37.184 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:37.185 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:37.185 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:37.238 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:37.238 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:37.238 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:37.330 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:37.331 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:37.331 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:37.341 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:37.341 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:37.342 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 17:35:37.342 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:37.441 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:37.441 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:37.442 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 17:35:37.442 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 17:35:37.443 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:37.443 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:35:37.487 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:37.487 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:37.488 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:37.583 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:37.584 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 17:35:37.584 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:37.630 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:35:37.630 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 17:35:37.630 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 17:35:37.631 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:37.631 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:37.680 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:37.681 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:37.681 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:37.728 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:37.729 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 17:35:37.730 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 17:35:37.777 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:37.778 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:37.779 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:37.841 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:37.841 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 17:35:37.842 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:37.895 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 17:35:37.896 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 17:35:37.957 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:37.958 [pool-7-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:37.958 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 17:35:37.958 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:38.005 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:38.005 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 17:35:38.006 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 17:35:38.006 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:38.160 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:38.161 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:38.161 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:38.208 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:38.209 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 17:35:38.209 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 17:35:38.209 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 17:35:38.209 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 17:35:38.209 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 17:35:38.209 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 17:35:38.210 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 17:35:38.210 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 17:35:38.210 [pool-7-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 17:35:38.211 [pool-7-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 17:35:38.298 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:38.299 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:38.299 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:38.480 [pool-7-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 17:35:38.480 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:38.481 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:38.546 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:38.548 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 17:35:38.548 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:38.654 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:38.655 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 17:35:38.655 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:38.655 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:38.799 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:38.800 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 17:35:38.800 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 17:35:38.801 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:38.860 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:38.860 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 17:35:38.861 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 17:35:39.035 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:39.036 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 17:35:39.045 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 17:35:39.046 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 17:35:39.047 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 17:35:39.047 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 17:35:39.253 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 17:35:39.254 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 17:35:39.254 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 17:35:39.438 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 17:35:39.439 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 17:35:39.439 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 17:35:39.643 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 17:35:39.643 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 17:35:39.644 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 17:35:40.208 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:40.209 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣不正确，请检查--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 17:35:40.210 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 17:35:40.211 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 17:35:40.466 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 17:35:40.467 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 17:35:40.467 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 17:42:53.643 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-06-12 17:42:53.653 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-06-12 18:40:06.873 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5003 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-06-12 18:40:11.886 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 60865 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-06-12 18:40:11.887 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-06-12 18:40:12.932 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 18:40:12.936 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-06-12 18:40:12.963 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 0 Elasticsearch repository interfaces.
2022-06-12 18:40:12.968 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 18:40:12.968 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-06-12 18:40:12.977 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-06-12 18:40:12.994 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 18:40:12.996 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-06-12 18:40:13.015 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2022-06-12 18:40:13.761 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-06-12 18:40:13.812 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-06-12 18:40:13.812 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-06-12 18:40:13.812 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-06-12 18:40:13.925 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-06-12 18:40:13.925 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1956 ms
2022-06-12 18:40:14.961 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-06-12 18:40:16.131 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-06-12 18:40:16.133 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-06-12 18:40:16.133 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-06-12 18:40:16.415 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-06-12 18:40:16.432 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-06-12 18:40:16.445 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 25.313 seconds (JVM running for 25.885)
2022-06-12 18:40:17.179 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onOpen ------
2022-06-12 18:40:22.217 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655030422030"}
2022-06-12 18:40:27.202 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655030427034"}
2022-06-12 18:40:29.314 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-06-12 18:40:29.314 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-06-12 18:40:29.315 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-06-12 18:40:29.607 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-06-12 18:40:31.984 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-06-12 18:40:32.000 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 18:40:32.038 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 18:40:32.173 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655030432038"}
2022-06-12 18:40:32.217 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 18:40:32.223 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 18:40:32.224 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 18:40:32.437 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 18:40:32.438 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:32.439 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 18:40:32.586 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 18:40:32.586 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 18:40:32.587 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 18:40:32.591 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:32.592 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:32.735 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:32.758 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 18:40:32.759 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 18:40:32.937 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:32.938 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:32.939 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:33.146 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:33.147 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 18:40:33.147 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 18:40:33.169 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 18:40:33.170 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 18:40:33.725 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 18:40:33.727 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:33.728 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 18:40:33.919 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 18:40:33.920 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 18:40:33.920 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 18:40:34.107 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 18:40:34.108 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 18:40:34.109 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 18:40:34.110 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 18:40:34.110 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 18:40:34.667 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 18:40:34.667 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 18:40:34.669 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 18:40:34.669 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 18:40:34.682 [thread-run-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 18:40:34.682 [thread-run-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:40:34.954 [thread-run-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:40:34.955 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:34.956 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:35.147 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:35.148 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 18:40:35.149 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:35.150 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:35.329 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:35.330 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:35.331 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:35.506 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:35.507 [thread-run-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:35.510 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 18:40:35.510 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:35.648 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:35.649 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:35.651 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:35.807 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:35.810 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:35.811 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:35.994 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:35.996 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 18:40:35.997 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:40:36.150 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:36.150 [thread-run-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 18:40:36.151 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 18:40:36.152 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:40:36.349 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:36.350 [thread-run-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 18:40:36.350 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 18:40:36.351 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 18:40:36.352 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 18:40:36.354 [thread-run-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 18:40:36.354 [thread-run-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:40:36.539 [thread-run-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:40:36.541 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:36.541 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:36.679 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:36.679 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 18:40:36.680 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:36.681 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:36.829 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:36.830 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:36.830 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:36.982 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:36.983 [thread-run-5] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:36.984 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 18:40:36.984 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:37.189 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655030437042"}
2022-06-12 18:40:37.189 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:37.190 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:37.191 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:37.349 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:37.351 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:37.352 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:37.497 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:37.499 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 18:40:37.500 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:40:37.654 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:37.655 [thread-run-5] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 18:40:37.657 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 18:40:37.677 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:40:37.805 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:37.806 [thread-run-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 18:40:37.806 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 18:40:37.808 [thread-run-6] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 18:40:37.808 [thread-run-6] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:40:37.994 [thread-run-6] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:40:37.995 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:37.996 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:38.137 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:38.138 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 18:40:38.140 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:38.141 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:38.303 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:38.305 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:38.305 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:38.506 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:38.507 [thread-run-7] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:38.508 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 18:40:38.508 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:38.680 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:38.681 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:38.681 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:38.885 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:38.887 [thread-run-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:38.887 [thread-run-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:39.035 [thread-run-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:39.037 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 18:40:39.038 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:40:39.247 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:39.248 [thread-run-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 18:40:39.249 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 18:40:39.250 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:40:39.492 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:39.493 [thread-run-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 18:40:39.494 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 18:40:39.494 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 18:40:39.495 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 18:40:39.496 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 18:40:39.496 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 18:40:39.497 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:39.498 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:39.698 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:39.699 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:39.700 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:39.854 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:39.855 [thread-run-10] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:39.856 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:40:39.857 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:40.005 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:40.007 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:40.007 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:40.171 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:40.172 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:40:40.173 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:40.392 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:40.393 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:40.394 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:40.538 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:40.541 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 18:40:40.541 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:40:40.696 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:40:40.697 [thread-run-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 18:40:40.697 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 18:40:40.699 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:40.699 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:40.846 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:40.847 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:40.848 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:41.043 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:41.044 [thread-run-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:41.045 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:40:41.046 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:41.195 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:41.196 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:41.197 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:41.358 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:41.359 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:40:41.360 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:41.515 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:41.516 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:41.517 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:41.665 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:41.666 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 18:40:41.667 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:40:41.850 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:40:41.850 [thread-run-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 18:40:41.851 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 18:40:41.852 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:41.852 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:42.006 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:42.007 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:42.008 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:42.157 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:42.158 [thread-run-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:42.159 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:40:42.160 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:42.207 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655030442045"}
2022-06-12 18:40:42.261 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:42.262 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:42.262 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:42.413 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:42.414 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:42.415 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:42.556 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:42.558 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 18:40:42.559 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:40:42.719 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:42.719 [thread-run-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 18:40:42.720 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 18:40:42.721 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:40:42.890 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:42.890 [thread-run-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 18:40:42.891 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 18:40:42.891 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:42.892 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:43.045 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:43.046 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:43.047 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:43.228 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:43.229 [thread-run-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:43.230 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:40:43.230 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:43.435 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:43.436 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:43.436 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:43.580 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:43.581 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:43.582 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:43.743 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:43.744 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 18:40:43.745 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:40:43.943 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:43.944 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 18:40:43.945 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 18:40:43.946 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:40:44.107 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:44.107 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 18:40:44.108 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 18:40:44.109 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:44.110 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:44.258 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:44.260 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:44.260 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:44.462 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:44.462 [thread-run-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:44.463 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:40:44.463 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:44.689 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:44.690 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:44.690 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:44.864 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:44.865 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:40:44.866 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:45.024 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:45.025 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:45.026 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:45.147 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:45.149 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 18:40:45.150 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:40:45.364 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:40:45.364 [thread-run-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 18:40:45.365 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 18:40:45.366 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:45.367 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:45.509 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:45.510 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:45.511 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:45.674 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:45.675 [thread-run-5] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:45.676 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:40:45.676 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:45.840 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:45.841 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:40:45.842 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:46.025 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:46.026 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:46.027 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:46.175 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:46.176 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 18:40:46.176 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:40:46.372 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:46.372 [thread-run-5] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 18:40:46.373 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 18:40:46.374 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:40:46.533 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:46.533 [thread-run-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 18:40:46.534 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 18:40:46.534 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 18:40:46.535 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 18:40:46.535 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 18:40:46.535 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 18:40:46.536 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 18:40:46.536 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 18:40:46.537 [thread-run-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 18:40:46.537 [thread-run-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:40:46.681 [thread-run-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:40:46.681 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:46.682 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:46.857 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:46.858 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 18:40:46.859 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:46.860 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:46.970 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:46.972 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:46.972 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:47.116 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:47.116 [thread-run-10] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:47.118 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 18:40:47.118 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:47.219 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655030447047"}
2022-06-12 18:40:47.220 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:47.221 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:47.221 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:47.426 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:47.428 [thread-run-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:47.429 [thread-run-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:47.542 [thread-run-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:47.543 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 18:40:47.545 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:40:47.733 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:47.734 [thread-run-10] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 18:40:47.734 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 18:40:47.735 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:40:47.976 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:47.977 [thread-run-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 18:40:47.978 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 18:40:47.978 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 18:40:47.979 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 18:40:47.980 [thread-run-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 18:40:47.980 [thread-run-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:40:48.173 [thread-run-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:40:48.174 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:48.175 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:48.345 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:48.346 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 18:40:48.347 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:48.348 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:48.527 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:48.528 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:48.529 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:48.676 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:48.676 [thread-run-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:48.678 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 18:40:48.678 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:48.873 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:48.873 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:48.874 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:49.014 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:49.016 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:49.017 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:49.170 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:49.171 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 18:40:49.172 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:40:49.363 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:49.363 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 18:40:49.365 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 18:40:49.366 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:40:49.520 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:49.520 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 18:40:49.520 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 18:40:49.521 [thread-run-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 18:40:49.522 [thread-run-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:40:49.683 [thread-run-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:40:49.684 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:49.684 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:49.835 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:49.835 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 18:40:49.836 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:49.836 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:50.077 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:50.078 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:50.079 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:50.244 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:50.245 [thread-run-5] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:50.245 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 18:40:50.246 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:50.441 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:50.442 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:50.443 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:50.601 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:50.602 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:50.602 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:50.784 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:50.785 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 18:40:50.785 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:40:50.937 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:50.938 [thread-run-5] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 18:40:50.939 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 18:40:50.939 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:40:51.141 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:51.141 [thread-run-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 18:40:51.142 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 18:40:51.142 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 18:40:51.143 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 18:40:51.143 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 18:40:51.143 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 18:40:51.144 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:51.144 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:51.333 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:51.334 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:51.334 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:51.512 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:51.512 [thread-run-8] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:51.514 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:40:51.515 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:51.677 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:51.678 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:51.679 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:51.822 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:51.824 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:40:51.824 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:52.036 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:52.037 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:52.038 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:52.138 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:52.139 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 18:40:52.140 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:40:52.189 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655030452050"}
2022-06-12 18:40:52.293 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:40:52.293 [thread-run-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 18:40:52.294 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 18:40:52.295 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:52.295 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:52.499 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:52.500 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:52.500 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:52.649 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:52.649 [thread-run-9] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:52.650 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:40:52.651 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:52.835 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:52.836 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:52.837 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:52.937 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:52.938 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:40:52.938 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:53.092 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:53.093 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:53.093 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:53.238 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:53.239 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 18:40:53.240 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:40:53.482 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:40:53.483 [thread-run-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 18:40:53.483 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 18:40:53.484 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:53.485 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:53.723 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:53.724 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:53.724 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:53.880 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:53.881 [thread-run-10] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:53.882 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:40:53.882 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:54.111 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:54.112 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:54.112 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:54.331 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:54.332 [thread-run-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:54.333 [thread-run-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:54.515 [thread-run-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:54.516 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 18:40:54.517 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:40:54.682 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:54.682 [thread-run-10] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 18:40:54.683 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 18:40:54.683 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:40:54.905 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:54.906 [thread-run-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 18:40:54.906 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 18:40:54.908 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:54.909 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:55.099 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:55.100 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:55.101 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:55.238 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:55.239 [thread-run-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:55.239 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:40:55.240 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:55.443 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:55.444 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:55.445 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:55.587 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:55.588 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:40:55.588 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:55.780 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:55.781 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:55.781 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:55.933 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:55.934 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 18:40:55.934 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:40:56.176 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:40:56.176 [thread-run-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 18:40:56.177 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 18:40:56.178 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:56.178 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:56.335 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:56.336 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:56.336 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:56.484 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:56.484 [thread-run-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:56.485 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:40:56.485 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:56.646 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:56.647 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:56.648 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:56.820 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:56.822 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:56.822 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:57.022 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:57.023 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 18:40:57.023 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:40:57.168 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655030457053"}
2022-06-12 18:40:57.218 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:57.218 [thread-run-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 18:40:57.219 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 18:40:57.220 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:40:57.420 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:57.421 [thread-run-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 18:40:57.421 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 18:40:57.422 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:57.422 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:57.618 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:57.619 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:40:57.619 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:40:57.822 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:40:57.822 [thread-run-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:40:57.823 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:40:57.824 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:40:58.005 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:40:58.006 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:40:58.007 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:40:58.181 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:40:58.182 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:40:58.182 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:40:58.317 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:40:58.318 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 18:40:58.319 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:40:58.530 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:58.531 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 18:40:58.532 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 18:40:58.532 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:40:58.694 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:40:58.695 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 18:40:58.695 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 18:40:58.695 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 18:40:58.696 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 18:40:58.696 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 18:40:58.696 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 18:40:58.696 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 18:40:58.697 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 18:41:02.441 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onClose ------
2022-06-12 18:41:23.312 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 18:41:23.313 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 18:41:23.459 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 18:41:23.459 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 18:41:23.459 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 18:41:23.601 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 18:41:23.602 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:23.603 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 18:41:23.743 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 18:41:23.743 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 18:41:23.744 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 18:41:23.744 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:23.744 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:23.886 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:23.895 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 18:41:23.896 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 18:41:24.037 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:24.038 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:24.039 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:24.234 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:24.235 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 18:41:24.235 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 18:41:24.255 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 18:41:24.256 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 18:41:24.399 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 18:41:24.400 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:24.400 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 18:41:24.548 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 18:41:24.549 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 18:41:24.549 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 18:41:24.694 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 18:41:24.695 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 18:41:24.695 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 18:41:24.696 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 18:41:24.696 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 18:41:24.992 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 18:41:24.993 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 18:41:24.996 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 18:41:24.996 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 18:41:24.997 [thread-run-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 18:41:24.997 [thread-run-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:41:25.234 [thread-run-7] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:41:25.235 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:25.235 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:25.392 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:25.392 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 18:41:25.394 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:25.394 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:25.527 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:25.528 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:25.529 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:25.682 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:25.683 [thread-run-8] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:25.685 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 18:41:25.685 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:25.881 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:25.882 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:25.882 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:26.027 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:26.029 [thread-run-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:26.029 [thread-run-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:26.173 [thread-run-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:26.175 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 18:41:26.175 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:41:26.377 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:26.377 [thread-run-8] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 18:41:26.378 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 18:41:26.379 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:41:26.590 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:26.591 [thread-run-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 18:41:26.591 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 18:41:26.591 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 18:41:26.592 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 18:41:26.592 [thread-run-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 18:41:26.592 [thread-run-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:41:26.806 [thread-run-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:41:26.807 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:26.807 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:26.961 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:26.962 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 18:41:26.963 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:26.963 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:27.163 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:27.164 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:27.165 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:27.315 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:27.315 [thread-run-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:27.316 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 18:41:27.317 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:27.521 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:27.522 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:27.523 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:27.664 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:27.665 [thread-run-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:27.666 [thread-run-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:27.818 [thread-run-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:27.819 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 18:41:27.819 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:41:28.010 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:28.011 [thread-run-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 18:41:28.013 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 18:41:28.013 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:41:28.219 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:28.220 [thread-run-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 18:41:28.220 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 18:41:28.222 [thread-run-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 18:41:28.222 [thread-run-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:41:28.417 [thread-run-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:41:28.418 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:28.418 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:28.561 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:28.562 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 18:41:28.563 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:28.564 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:28.757 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:28.758 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:28.758 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:28.901 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:28.901 [thread-run-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:28.902 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 18:41:28.902 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:29.105 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:29.107 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:29.107 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:29.252 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:29.253 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:29.254 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:29.405 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:29.406 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 18:41:29.406 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:41:29.607 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:29.608 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 18:41:29.609 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 18:41:29.609 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:41:29.811 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:29.812 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 18:41:29.812 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 18:41:29.813 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 18:41:29.813 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 18:41:29.813 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 18:41:29.813 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 18:41:29.814 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:29.814 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:30.016 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:30.017 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:30.018 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:30.175 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:30.175 [thread-run-6] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:30.176 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:41:30.177 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:30.396 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:30.397 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:30.397 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:30.555 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:30.557 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:41:30.558 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:30.749 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:30.750 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:30.751 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:30.948 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:30.949 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 18:41:30.950 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:41:31.154 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:41:31.154 [thread-run-6] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 18:41:31.154 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 18:41:31.155 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:31.155 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:31.348 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:31.349 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:31.349 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:31.495 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:31.496 [thread-run-7] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:31.496 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:41:31.497 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:31.695 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:31.696 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:31.697 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:31.840 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:31.841 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:41:31.841 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:32.041 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:32.042 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:32.043 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:32.194 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:32.195 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 18:41:32.196 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:41:32.388 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:41:32.389 [thread-run-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 18:41:32.389 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 18:41:32.390 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:32.391 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:32.588 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:32.589 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:32.590 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:32.741 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:32.742 [thread-run-8] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:32.743 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:41:32.743 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:33.005 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:33.006 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:33.006 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:33.156 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:33.157 [thread-run-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:33.158 [thread-run-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:33.320 [thread-run-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:33.321 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 18:41:33.321 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:41:33.570 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:33.570 [thread-run-8] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 18:41:33.571 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 18:41:33.572 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:41:33.833 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:33.834 [thread-run-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 18:41:33.834 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 18:41:33.835 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:33.836 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:34.090 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:34.091 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:34.092 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:34.357 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:34.376 [thread-run-9] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:34.379 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:41:34.381 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:34.607 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:34.608 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:34.608 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:34.751 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:34.752 [thread-run-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:34.753 [thread-run-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:34.853 [thread-run-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:34.854 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 18:41:34.855 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:41:35.096 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:35.096 [thread-run-9] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 18:41:35.097 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 18:41:35.098 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:41:35.303 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:35.303 [thread-run-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 18:41:35.303 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 18:41:35.304 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:35.304 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:35.498 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:35.499 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:35.499 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:35.652 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:35.653 [thread-run-10] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:35.653 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:41:35.654 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:35.861 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:35.861 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:35.862 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:36.010 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:36.011 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:41:36.012 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:36.206 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:36.206 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:36.206 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:36.310 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:36.311 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 18:41:36.311 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:41:36.516 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:41:36.517 [thread-run-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 18:41:36.517 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 18:41:36.518 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:36.518 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:36.617 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:36.618 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:36.618 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:36.780 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:36.780 [thread-run-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:36.780 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:41:36.781 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:36.914 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:36.915 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:41:36.915 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:37.081 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:37.082 [thread-run-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:37.082 [thread-run-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:37.236 [thread-run-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:37.237 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 18:41:37.238 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:41:37.500 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:37.501 [thread-run-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 18:41:37.502 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 18:41:37.502 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:41:37.681 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:37.681 [thread-run-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 18:41:37.682 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 18:41:37.682 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 18:41:37.683 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 18:41:37.683 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 18:41:37.684 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 18:41:37.684 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 18:41:37.684 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 18:41:37.685 [thread-run-5] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 18:41:37.686 [thread-run-5] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:41:37.863 [thread-run-5] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:41:37.864 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:37.864 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:38.005 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:38.006 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 18:41:38.007 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:38.007 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:38.206 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:38.207 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:38.207 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:38.374 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:38.375 [thread-run-6] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:38.376 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 18:41:38.376 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:38.579 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:38.580 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:38.580 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:38.766 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:38.768 [thread-run-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:38.768 [thread-run-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:38.878 [thread-run-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:38.879 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 18:41:38.880 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:41:39.096 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:39.097 [thread-run-6] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 18:41:39.097 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 18:41:39.098 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:41:39.351 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:39.352 [thread-run-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 18:41:39.352 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 18:41:39.353 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 18:41:39.353 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 18:41:39.354 [thread-run-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 18:41:39.355 [thread-run-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:41:39.549 [thread-run-8] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:41:39.550 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:39.550 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:39.709 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:39.709 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 18:41:39.710 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:39.711 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:39.911 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:39.911 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:39.912 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:40.056 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:40.056 [thread-run-9] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:40.057 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 18:41:40.058 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:40.254 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:40.255 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:40.255 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:40.401 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:40.402 [thread-run-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:40.402 [thread-run-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:40.548 [thread-run-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:40.549 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 18:41:40.550 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:41:40.752 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:40.752 [thread-run-9] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 18:41:40.753 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 18:41:40.753 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:41:40.945 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:40.946 [thread-run-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 18:41:40.947 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 18:41:40.948 [thread-run-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 18:41:40.949 [thread-run-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:41:41.140 [thread-run-10] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:41:41.141 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:41.141 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:41.283 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:41.284 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 18:41:41.285 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:41.286 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:41.493 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:41.494 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:41.494 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:41.649 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:41.649 [thread-run-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:41.650 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 18:41:41.650 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:41.847 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:41.847 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:41.848 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:42.014 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:42.015 [thread-run-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:42.015 [thread-run-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:42.164 [thread-run-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:42.165 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 18:41:42.165 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:41:42.369 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:42.369 [thread-run-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 18:41:42.370 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 18:41:42.371 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:41:42.561 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:42.561 [thread-run-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 18:41:42.562 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 18:41:42.562 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 18:41:42.563 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 18:41:42.563 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 18:41:42.563 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 18:41:42.564 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:42.564 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:42.769 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:42.769 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:42.770 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:42.952 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:42.952 [thread-run-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:42.953 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:41:42.954 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:43.137 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:43.138 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:43.139 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:43.244 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:43.245 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:41:43.246 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:43.445 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:43.446 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:43.446 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:43.606 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:43.608 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 18:41:43.608 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:41:43.784 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:41:43.784 [thread-run-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 18:41:43.784 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 18:41:43.785 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:43.785 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:43.981 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:43.982 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:43.982 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:44.128 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:44.128 [thread-run-5] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:44.129 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:41:44.130 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:44.336 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:44.337 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:44.337 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:44.478 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:44.479 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:41:44.480 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:44.673 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:44.673 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:44.674 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:44.824 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:44.826 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 18:41:44.826 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:41:45.021 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:41:45.022 [thread-run-5] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 18:41:45.022 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 18:41:45.024 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:45.024 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:45.170 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:45.171 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:45.171 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:45.279 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:45.280 [thread-run-6] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:45.281 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:41:45.281 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:45.490 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:45.490 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:45.490 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:45.636 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:45.637 [thread-run-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:45.638 [thread-run-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:45.790 [thread-run-6] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:45.791 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 18:41:45.791 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:41:46.005 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:46.006 [thread-run-6] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 18:41:46.007 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 18:41:46.008 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:41:46.208 [thread-run-6] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:46.208 [thread-run-6] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 18:41:46.209 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 18:41:46.210 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:46.210 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:46.414 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:46.415 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:46.415 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:46.575 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:46.576 [thread-run-7] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:46.576 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:41:46.577 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:46.779 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:46.780 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:46.780 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:46.976 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:46.977 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:41:46.977 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:47.181 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:47.182 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:47.182 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:47.340 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:47.341 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 18:41:47.342 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:41:47.540 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:41:47.541 [thread-run-7] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 18:41:47.541 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 18:41:47.542 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:47.543 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:47.745 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:47.746 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:47.746 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:47.930 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:47.931 [thread-run-8] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:47.931 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:41:47.932 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:48.153 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:48.153 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:48.153 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:48.316 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:48.317 [thread-run-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:48.318 [thread-run-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:48.481 [thread-run-8] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:48.482 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 18:41:48.482 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:41:48.697 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:48.697 [thread-run-8] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 18:41:48.698 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 18:41:48.699 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:41:48.912 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:48.912 [thread-run-8] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 18:41:48.912 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 18:41:48.913 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:48.913 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:49.081 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:49.082 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:41:49.082 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:41:49.239 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:41:49.239 [thread-run-9] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:41:49.240 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:41:49.240 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:41:49.437 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:41:49.438 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:41:49.438 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:41:49.580 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:41:49.582 [thread-run-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:41:49.582 [thread-run-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:41:49.731 [thread-run-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:41:49.732 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 18:41:49.733 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:41:49.923 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:49.923 [thread-run-9] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 18:41:49.924 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 18:41:49.925 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:41:50.158 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:41:50.159 [thread-run-9] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 18:41:50.159 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 18:41:50.159 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 18:41:50.159 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 18:41:50.160 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 18:41:50.160 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 18:41:50.160 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 18:41:50.160 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 18:50:01.097 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-06-12 18:50:01.107 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-06-12 18:52:47.712 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5003 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-06-12 18:52:52.722 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 60954 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-06-12 18:52:52.723 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-06-12 18:52:53.534 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 18:52:53.537 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-06-12 18:52:53.556 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Elasticsearch repository interfaces.
2022-06-12 18:52:53.560 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 18:52:53.561 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-06-12 18:52:53.568 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-06-12 18:52:53.578 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 18:52:53.580 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-06-12 18:52:53.601 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2022-06-12 18:52:54.280 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-06-12 18:52:54.291 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-06-12 18:52:54.292 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-06-12 18:52:54.292 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-06-12 18:52:54.371 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-06-12 18:52:54.371 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1591 ms
2022-06-12 18:52:55.266 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-06-12 18:52:56.116 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-06-12 18:52:56.117 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-06-12 18:52:56.117 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-06-12 18:52:56.227 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onOpen ------
2022-06-12 18:52:56.470 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-06-12 18:52:56.487 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-06-12 18:52:56.501 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.34 seconds (JVM running for 24.834)
2022-06-12 18:53:00.610 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-06-12 18:53:00.611 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-06-12 18:53:00.613 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2022-06-12 18:53:00.908 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-06-12 18:53:01.219 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031180471"}
2022-06-12 18:53:04.933 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-06-12 18:53:04.944 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 18:53:04.974 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 18:53:05.204 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 18:53:05.209 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 18:53:05.209 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 18:53:05.321 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 18:53:05.322 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:05.323 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 18:53:05.468 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 18:53:05.469 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 18:53:05.469 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 18:53:05.472 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:05.472 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:05.620 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:05.644 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 18:53:05.644 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 18:53:05.788 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:05.790 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:05.790 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:05.944 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:05.945 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 18:53:05.945 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 18:53:05.966 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 18:53:05.967 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 18:53:06.195 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 18:53:06.197 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:06.198 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 18:53:06.277 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031185474"}
2022-06-12 18:53:06.437 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 18:53:06.438 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 18:53:06.439 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 18:53:06.605 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 18:53:06.606 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 18:53:06.606 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 18:53:06.607 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 18:53:06.608 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 18:53:06.949 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 18:53:06.950 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 18:53:06.952 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 18:53:06.952 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 18:53:06.953 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 18:53:06.953 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:53:07.134 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:53:07.135 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:07.136 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:07.339 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:07.340 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 18:53:07.340 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:07.341 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:07.572 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:07.574 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:07.574 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:07.738 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:07.738 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:07.740 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 18:53:07.741 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:07.885 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:07.887 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:07.888 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:08.073 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:08.076 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:08.077 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:08.222 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:08.224 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 18:53:08.225 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:53:08.426 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:08.427 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 18:53:08.428 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 18:53:08.428 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:53:08.574 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:08.575 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 18:53:08.575 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 18:53:08.575 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 18:53:08.576 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 18:53:08.577 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 18:53:08.577 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:53:08.778 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:53:08.780 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:08.781 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:08.931 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:08.932 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 18:53:08.932 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:08.933 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:09.075 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:09.076 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:09.077 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:09.241 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:09.242 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:09.243 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 18:53:09.243 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:09.465 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:09.467 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:09.467 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:09.613 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:09.614 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:09.615 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:09.769 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:09.770 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 18:53:09.771 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:53:09.974 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:09.974 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 18:53:09.975 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 18:53:09.976 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:53:10.185 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:10.186 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 18:53:10.186 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 18:53:10.187 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 18:53:10.187 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:53:10.390 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:53:10.391 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:10.391 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:10.534 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:10.535 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 18:53:10.536 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:10.536 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:10.673 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:10.674 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:10.675 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:10.840 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:10.841 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:10.842 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 18:53:10.843 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:11.048 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:11.050 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:11.051 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:11.254 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:11.254 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031190477"}
2022-06-12 18:53:11.256 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:11.256 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:11.462 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:11.464 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 18:53:11.464 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:53:11.665 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:11.665 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 18:53:11.667 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 18:53:11.667 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:53:11.854 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:11.856 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 18:53:11.857 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 18:53:11.857 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 18:53:11.857 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 18:53:11.857 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 18:53:11.857 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 18:53:11.858 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:11.859 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:12.004 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:12.005 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:12.006 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:12.212 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:12.213 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:12.214 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:53:12.215 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:12.363 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:12.364 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:12.364 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:12.555 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:12.557 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:53:12.557 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:12.742 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:12.742 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:12.743 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:12.909 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:12.912 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 18:53:12.913 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:53:13.240 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:53:13.241 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 18:53:13.241 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 18:53:13.242 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:13.242 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:13.391 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:13.392 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:13.393 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:13.592 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:13.593 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:13.594 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:53:13.594 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:13.814 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:13.814 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:13.815 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:14.007 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:14.009 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:53:14.010 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:14.210 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:14.211 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:14.211 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:14.397 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:14.398 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 18:53:14.398 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:53:14.605 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:53:14.605 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 18:53:14.606 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 18:53:14.606 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:14.607 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:14.811 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:14.812 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:14.812 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:15.000 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:15.000 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:15.001 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:53:15.001 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:15.221 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:15.222 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:15.222 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:15.385 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:15.386 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:15.387 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:15.546 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:15.547 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 18:53:15.548 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:53:15.746 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:15.746 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 18:53:15.747 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 18:53:15.747 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:53:15.968 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:15.969 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 18:53:15.969 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 18:53:15.969 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:15.970 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:16.126 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:16.127 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:16.128 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:16.231 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031195480"}
2022-06-12 18:53:16.331 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:16.331 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:16.332 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:53:16.332 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:16.554 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:16.555 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:16.555 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:16.759 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:16.760 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:16.761 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:16.954 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:16.955 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 18:53:16.956 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:53:17.161 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:17.162 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 18:53:17.163 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 18:53:17.164 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:53:17.359 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:17.360 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 18:53:17.360 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 18:53:17.361 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:17.361 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:17.552 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:17.554 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:17.555 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:17.708 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:17.709 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:17.709 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:53:17.710 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:17.861 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:17.862 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:17.863 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:18.021 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:18.022 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:53:18.023 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:18.257 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:18.258 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:18.259 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:18.422 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:18.423 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 18:53:18.425 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:53:18.665 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:53:18.666 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 18:53:18.666 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 18:53:18.667 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:18.667 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:18.902 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:18.903 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:18.904 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:19.088 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:19.088 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:19.090 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:53:19.090 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:19.335 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:19.336 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:53:19.336 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:19.557 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:19.559 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:19.559 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:19.711 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:19.713 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 18:53:19.713 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:53:19.873 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:19.873 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 18:53:19.874 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 18:53:19.874 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:53:20.011 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:20.011 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 18:53:20.012 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 18:53:20.012 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 18:53:20.012 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 18:53:20.012 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 18:53:20.012 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 18:53:20.012 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 18:53:20.012 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 18:53:20.013 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 18:53:20.013 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:53:20.224 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:53:20.225 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:20.225 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:20.468 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:20.468 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 18:53:20.469 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:20.469 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:20.672 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:20.674 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:20.674 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:20.819 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:20.819 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:20.820 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 18:53:20.820 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:20.996 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:20.997 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:20.998 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:21.197 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:21.198 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:21.198 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:21.246 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031200484"}
2022-06-12 18:53:21.347 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:21.348 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 18:53:21.349 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:53:21.547 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:21.548 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 18:53:21.548 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 18:53:21.549 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:53:21.698 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:21.698 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 18:53:21.699 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 18:53:21.699 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 18:53:21.699 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 18:53:21.700 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 18:53:21.700 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:53:21.909 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:53:21.910 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:21.910 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:22.117 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:22.118 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 18:53:22.119 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:22.119 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:22.368 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:22.368 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:22.368 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:23.031 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:23.032 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:23.033 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 18:53:23.033 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:23.199 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:23.200 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:23.200 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:23.408 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:23.410 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:23.410 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:23.580 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:23.582 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 18:53:23.583 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:53:23.785 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:23.786 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 18:53:23.787 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 18:53:23.788 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:53:23.956 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:23.956 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 18:53:23.957 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 18:53:23.958 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 18:53:23.958 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:53:24.179 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:53:24.180 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:24.180 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:24.416 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:24.417 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 18:53:24.417 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:24.418 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:24.626 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:24.627 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:24.627 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:24.822 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:24.823 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:24.823 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 18:53:24.824 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:25.045 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:25.045 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:25.046 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:25.240 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:25.241 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:25.241 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:25.440 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:25.441 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 18:53:25.442 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:53:25.651 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:25.652 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 18:53:25.652 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 18:53:25.653 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:53:25.854 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:25.854 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 18:53:25.855 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 18:53:25.855 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 18:53:25.855 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 18:53:25.855 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 18:53:25.855 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 18:53:25.856 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:25.856 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:26.056 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:26.057 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:26.058 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:26.201 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031205487"}
2022-06-12 18:53:26.261 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:26.261 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:26.263 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:53:26.263 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:26.460 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:26.461 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:26.462 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:26.615 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:26.616 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:53:26.616 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:26.806 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:26.807 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:26.808 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:26.926 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:26.927 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 18:53:26.928 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:53:27.145 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:53:27.146 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 18:53:27.146 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 18:53:27.146 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:27.147 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:27.302 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:27.303 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:27.304 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:27.407 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:27.408 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:27.409 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:53:27.409 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:27.612 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:27.613 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:27.614 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:27.765 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:27.766 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:53:27.767 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:27.944 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:27.945 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:27.946 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:28.081 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:28.083 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 18:53:28.083 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:53:28.269 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:53:28.269 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 18:53:28.270 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 18:53:28.270 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:28.271 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:28.479 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:28.480 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:28.480 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:28.662 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:28.662 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:28.663 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:53:28.664 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:28.869 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:28.870 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:28.871 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:29.038 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:29.039 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:29.039 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:29.208 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:29.209 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 18:53:29.210 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:53:29.433 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:29.433 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 18:53:29.434 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 18:53:29.435 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:53:29.691 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:29.691 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 18:53:29.692 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 18:53:29.693 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:29.694 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:29.946 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:29.947 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:29.948 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:30.095 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:30.096 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:30.097 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:53:30.098 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:30.307 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:30.308 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:30.308 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:30.512 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:30.513 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:53:30.513 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:30.735 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:30.736 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:30.736 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:30.866 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:30.867 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 18:53:30.867 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:53:31.027 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:53:31.027 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 18:53:31.027 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 18:53:31.028 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:31.029 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:31.192 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:31.193 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:31.193 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:31.243 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031210490"}
2022-06-12 18:53:31.365 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:31.366 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:31.366 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:53:31.367 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:31.506 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:31.507 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:31.507 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:31.631 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:31.632 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:31.633 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:31.787 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:31.788 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 18:53:31.788 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:53:31.973 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:31.974 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 18:53:31.975 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 18:53:31.975 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:53:32.179 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:32.179 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 18:53:32.180 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 18:53:32.180 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:32.180 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:32.341 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:32.342 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:53:32.342 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:53:32.579 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:53:32.579 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:53:32.579 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:53:32.580 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:53:33.181 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:53:33.182 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:53:33.182 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:53:33.371 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:53:33.372 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:53:33.373 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:53:33.560 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:53:33.562 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 18:53:33.562 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:53:33.774 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:33.774 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 18:53:33.775 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 18:53:33.776 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:53:34.087 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:53:34.088 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 18:53:34.088 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 18:53:34.089 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 18:53:34.089 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 18:53:34.089 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 18:53:34.090 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 18:53:34.090 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 18:53:34.091 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 18:53:36.201 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031215493"}
2022-06-12 18:53:41.206 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031220497"}
2022-06-12 18:53:46.204 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031225500"}
2022-06-12 18:53:51.327 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031230504"}
2022-06-12 18:53:56.295 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031235507"}
2022-06-12 18:54:01.270 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031240509"}
2022-06-12 18:54:06.245 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031245511"}
2022-06-12 18:54:11.210 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031250513"}
2022-06-12 18:54:16.280 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031255515"}
2022-06-12 18:54:21.255 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031260518"}
2022-06-12 18:54:26.209 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031265521"}
2022-06-12 18:54:31.221 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031270524"}
2022-06-12 18:54:33.068 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 18:54:33.069 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 18:54:33.261 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 18:54:33.262 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 18:54:33.262 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 18:54:33.450 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 18:54:33.451 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:33.451 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 18:54:33.586 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 18:54:33.586 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 18:54:33.587 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 18:54:33.588 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:33.588 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:33.743 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:33.757 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 18:54:33.757 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 18:54:33.892 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:33.893 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:33.893 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:34.051 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:34.051 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 18:54:34.051 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 18:54:34.075 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 18:54:34.075 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 18:54:34.246 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 18:54:34.246 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:34.246 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 18:54:34.499 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 18:54:34.500 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 18:54:34.503 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 18:54:34.662 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 18:54:34.663 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 18:54:34.664 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 18:54:34.665 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 18:54:34.665 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 18:54:35.030 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 18:54:35.030 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 18:54:35.033 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 18:54:35.033 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 18:54:35.033 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 18:54:35.034 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:54:35.209 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:54:35.210 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:35.210 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:35.426 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:35.426 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 18:54:35.427 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:35.427 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:35.651 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:35.652 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:35.652 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:35.841 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:35.842 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:35.843 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 18:54:35.843 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:36.004 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:36.005 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:36.006 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:36.145 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:36.146 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:36.147 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:36.257 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031275525"}
2022-06-12 18:54:36.320 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:36.321 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 18:54:36.321 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:54:36.562 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:36.563 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 18:54:36.564 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 18:54:36.565 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:54:36.767 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:36.768 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 18:54:36.768 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 18:54:36.768 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 18:54:36.768 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 18:54:36.769 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 18:54:36.769 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:54:36.979 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:54:36.980 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:36.980 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:37.136 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:37.136 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 18:54:37.137 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:37.138 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:37.288 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:37.289 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:37.289 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:37.431 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:37.432 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:37.432 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 18:54:37.433 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:37.684 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:37.685 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:37.685 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:37.848 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:37.849 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:37.849 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:38.057 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:38.058 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 18:54:38.060 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:54:38.208 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:38.209 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 18:54:38.210 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 18:54:38.210 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:54:38.407 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:38.408 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 18:54:38.408 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 18:54:38.409 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 18:54:38.409 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:54:38.615 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:54:38.616 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:38.617 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:38.763 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:38.764 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 18:54:38.764 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:38.764 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:38.870 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:38.871 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:38.871 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:39.048 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:39.048 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:39.049 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 18:54:39.050 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:39.262 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:39.262 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:39.263 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:39.451 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:39.452 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:39.452 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:39.660 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:39.662 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 18:54:39.663 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:54:39.843 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:39.843 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 18:54:39.844 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 18:54:39.845 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:54:40.003 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:40.004 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 18:54:40.004 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 18:54:40.004 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 18:54:40.005 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 18:54:40.005 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 18:54:40.005 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 18:54:40.005 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:40.006 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:40.193 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:40.194 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:40.194 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:40.323 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:40.323 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:40.323 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:54:40.324 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:40.690 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:40.690 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:40.691 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:40.835 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:40.836 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:54:40.837 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:41.049 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:41.050 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:41.051 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:41.207 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031280528"}
2022-06-12 18:54:41.258 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:41.258 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 18:54:41.259 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:54:41.473 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:54:41.474 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 18:54:41.474 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 18:54:41.475 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:41.475 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:41.678 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:41.679 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:41.680 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:41.864 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:41.864 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:41.865 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:54:41.865 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:42.068 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:42.069 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:42.070 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:42.221 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:42.222 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:54:42.222 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:42.375 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:42.376 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:42.377 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:42.582 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:42.583 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 18:54:42.583 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:54:42.782 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:54:42.782 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 18:54:42.783 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 18:54:42.783 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:42.784 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:42.931 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:42.932 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:42.932 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:43.059 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:43.059 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:43.060 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:54:43.060 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:43.256 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:43.257 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:43.257 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:43.473 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:43.474 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:43.474 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:43.705 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:43.706 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 18:54:43.706 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:54:43.888 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:43.888 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 18:54:43.888 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 18:54:43.889 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:54:44.099 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:44.099 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 18:54:44.100 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 18:54:44.101 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:44.101 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:44.295 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:44.296 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:44.296 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:44.475 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:44.476 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:44.477 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:54:44.477 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:44.677 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:44.678 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:44.679 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:44.832 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:44.833 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:44.833 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:44.956 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:44.957 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 18:54:44.958 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:54:45.146 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:45.146 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 18:54:45.147 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 18:54:45.148 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:54:45.347 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:45.348 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 18:54:45.348 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 18:54:45.349 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:45.349 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:45.557 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:45.558 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:45.558 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:45.933 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:45.933 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:45.934 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:54:45.934 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:46.166 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:46.167 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:46.167 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:46.214 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031285531"}
2022-06-12 18:54:46.354 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:46.356 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:54:46.356 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:46.549 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:46.550 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:46.550 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:46.698 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:46.699 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 18:54:46.699 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:54:46.900 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:54:46.901 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 18:54:46.902 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 18:54:46.902 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:46.902 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:47.088 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:47.089 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:47.089 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:47.239 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:47.240 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:47.240 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:54:47.240 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:47.465 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:47.467 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:54:47.467 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:47.633 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:47.634 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:47.634 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:47.772 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:47.773 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 18:54:47.773 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:54:48.017 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:48.018 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 18:54:48.020 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 18:54:48.021 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:54:48.269 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:48.270 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 18:54:48.270 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 18:54:48.271 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 18:54:48.271 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 18:54:48.271 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 18:54:48.271 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 18:54:48.271 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 18:54:48.271 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 18:54:48.272 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 18:54:48.272 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:54:48.491 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:54:48.492 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:48.492 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:48.642 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:48.643 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 18:54:48.643 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:48.644 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:48.844 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:48.845 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:48.846 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:49.004 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:49.004 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:49.006 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 18:54:49.006 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:49.136 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:49.137 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:49.138 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:49.279 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:49.280 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:49.280 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:49.437 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:49.438 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 18:54:49.439 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:54:49.616 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:49.616 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 18:54:49.617 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 18:54:49.618 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:54:49.828 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:49.828 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 18:54:49.829 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 18:54:49.829 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 18:54:49.829 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 18:54:49.829 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 18:54:49.830 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:54:50.042 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:54:50.043 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:50.043 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:50.183 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:50.183 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 18:54:50.184 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:50.185 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:50.382 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:50.383 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:50.383 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:50.534 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:50.535 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:50.536 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 18:54:50.536 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:50.748 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:50.748 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:50.749 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:50.978 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:50.979 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:50.980 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:51.130 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:51.132 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 18:54:51.132 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:54:51.232 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031290535"}
2022-06-12 18:54:51.284 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:51.285 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 18:54:51.286 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 18:54:51.286 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:54:51.462 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:51.463 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 18:54:51.463 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 18:54:51.463 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 18:54:51.464 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:54:51.651 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:54:51.652 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:51.652 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:51.795 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:51.796 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 18:54:51.797 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:51.798 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:51.968 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:51.969 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:51.969 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:52.112 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:52.113 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:52.114 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 18:54:52.114 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:52.322 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:52.323 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:52.323 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:52.482 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:52.483 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:52.483 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:52.647 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:52.648 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 18:54:52.649 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:54:52.837 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:52.837 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 18:54:52.838 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 18:54:52.839 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:54:53.042 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:53.043 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 18:54:53.043 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 18:54:53.043 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 18:54:53.044 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 18:54:53.044 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 18:54:53.044 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 18:54:53.045 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:53.045 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:53.201 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:53.202 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:53.203 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:53.392 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:53.392 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:53.393 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:54:53.393 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:53.609 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:53.609 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:53.610 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:53.811 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:53.812 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:54:53.813 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:54.033 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:54.034 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:54.034 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:54.252 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:54.253 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 18:54:54.253 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:54:54.445 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:54:54.445 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 18:54:54.446 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 18:54:54.446 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:54.447 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:54.647 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:54.648 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:54.649 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:54.797 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:54.797 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:54.798 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:54:54.799 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:55.022 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:55.023 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:55.023 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:55.258 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:55.259 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:54:55.260 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:55.511 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:55.512 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:55.513 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:55.766 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:55.767 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 18:54:55.768 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:54:55.979 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:54:55.979 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 18:54:55.980 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 18:54:55.980 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:55.981 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:56.137 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:56.138 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:56.139 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:56.207 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031295538"}
2022-06-12 18:54:56.316 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:56.316 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:56.317 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:54:56.318 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:56.495 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:56.496 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:56.496 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:56.602 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:56.603 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:56.604 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:56.764 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:56.765 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 18:54:56.766 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:54:56.988 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:56.989 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 18:54:56.989 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 18:54:56.990 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:54:57.239 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:57.239 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 18:54:57.240 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 18:54:57.240 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:57.240 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:57.416 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:57.417 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:57.417 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:57.603 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:57.604 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:57.605 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:54:57.605 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:57.842 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:57.843 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:57.843 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:58.020 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:58.021 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:54:58.022 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:58.253 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:58.253 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:58.254 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:58.441 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:58.442 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 18:54:58.443 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:54:58.649 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:54:58.650 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 18:54:58.650 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 18:54:58.651 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:58.651 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:58.834 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:58.835 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:54:58.835 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:54:59.044 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:54:59.045 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:54:59.046 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:54:59.046 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:54:59.245 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:54:59.246 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:54:59.246 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:54:59.390 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:54:59.391 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:59.391 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:54:59.547 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:54:59.548 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 18:54:59.549 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:54:59.785 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:59.786 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 18:54:59.787 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 18:54:59.787 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:54:59.991 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:54:59.992 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 18:54:59.992 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 18:54:59.992 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:54:59.993 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:55:00.167 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:55:00.168 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:55:00.169 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:55:00.367 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:55:00.368 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:55:00.369 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:55:00.369 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:55:00.619 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:55:00.620 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:55:00.620 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:55:00.810 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:55:00.811 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:55:00.812 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:55:01.000 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:55:01.001 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 18:55:01.001 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:55:01.156 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:55:01.157 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 18:55:01.158 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 18:55:01.158 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:55:01.208 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031300540"}
2022-06-12 18:55:01.320 [http-nio-10090-exec-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:55:01.321 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 18:55:01.321 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 18:55:01.321 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 18:55:01.321 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 18:55:01.321 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 18:55:01.321 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 18:55:01.322 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 18:55:01.322 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 18:55:06.264 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031305547"}
2022-06-12 18:55:11.206 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031310550"}
2022-06-12 18:55:16.359 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031315553"}
2022-06-12 18:55:21.204 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031320556"}
2022-06-12 18:55:26.207 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031325558"}
2022-06-12 18:55:31.205 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031330561"}
2022-06-12 18:55:36.206 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031335565"}
2022-06-12 18:55:41.213 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031340568"}
2022-06-12 18:55:46.439 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031345571"}
2022-06-12 18:55:51.348 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031350574"}
2022-06-12 18:55:56.371 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031355578"}
2022-06-12 18:56:01.251 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031360579"}
2022-06-12 18:56:06.219 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031365581"}
2022-06-12 18:56:11.256 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031370583"}
2022-06-12 18:56:16.206 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031375588"}
2022-06-12 18:56:21.244 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031380589"}
2022-06-12 18:56:26.243 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031385591"}
2022-06-12 18:56:31.290 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031390595"}
2022-06-12 18:56:36.728 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031395598"}
2022-06-12 18:56:41.236 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031400600"}
2022-06-12 18:56:46.220 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031405603"}
2022-06-12 18:56:51.254 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031410606"}
2022-06-12 18:56:56.293 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031415609"}
2022-06-12 18:57:28.019 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031420612"}
2022-06-12 18:57:28.189 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031425614"}
2022-06-12 18:57:28.359 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onError ------{}
javax.net.ssl.SSLException: Connection reset
	at sun.security.ssl.Alert.createSSLException(Alert.java:127)
	at sun.security.ssl.TransportContext.fatal(TransportContext.java:324)
	at sun.security.ssl.TransportContext.fatal(TransportContext.java:267)
	at sun.security.ssl.TransportContext.fatal(TransportContext.java:262)
	at sun.security.ssl.SSLTransport.decode(SSLTransport.java:138)
	at sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1395)
	at sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1363)
	at sun.security.ssl.SSLSocketImpl.access$300(SSLSocketImpl.java:73)
	at sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:957)
	at java.io.InputStream.read(InputStream.java:101)
	at org.java_websocket.client.WebSocketClient.run(WebSocketClient.java:277)
	at java.lang.Thread.run(Thread.java:748)
	Suppressed: java.net.SocketException: Broken pipe (Write failed)
		at java.net.SocketOutputStream.socketWrite0(Native Method)
		at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:111)
		at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
		at sun.security.ssl.SSLSocketOutputRecord.encodeAlert(SSLSocketOutputRecord.java:81)
		at sun.security.ssl.TransportContext.fatal(TransportContext.java:355)
		... 10 common frames omitted
Caused by: java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:464)
	at sun.security.ssl.SSLSocketInputRecord.decodeInputRecord(SSLSocketInputRecord.java:237)
	at sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:190)
	at sun.security.ssl.SSLTransport.decode(SSLTransport.java:109)
	... 7 common frames omitted
2022-06-12 18:57:28.360 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onClose ------
2022-06-12 18:57:45.039 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-06-12 18:57:45.048 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-06-12 18:58:06.884 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5005 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-06-12 18:58:11.894 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 60970 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-06-12 18:58:11.894 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-06-12 18:58:12.795 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 18:58:12.798 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-06-12 18:58:12.826 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Elasticsearch repository interfaces.
2022-06-12 18:58:12.831 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 18:58:12.831 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-06-12 18:58:12.842 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-06-12 18:58:12.858 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 18:58:12.860 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-06-12 18:58:12.890 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2022-06-12 18:58:13.626 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-06-12 18:58:13.673 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-06-12 18:58:13.674 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-06-12 18:58:13.674 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-06-12 18:58:13.785 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-06-12 18:58:13.786 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1832 ms
2022-06-12 18:58:14.793 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-06-12 18:58:15.880 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-06-12 18:58:15.882 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-06-12 18:58:15.882 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-06-12 18:58:15.904 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onOpen ------
2022-06-12 18:58:16.299 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-06-12 18:58:16.321 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-06-12 18:58:16.338 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 25.156 seconds (JVM running for 25.812)
2022-06-12 18:58:19.979 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-06-12 18:58:19.979 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-06-12 18:58:19.981 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2022-06-12 18:58:20.248 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-06-12 18:58:20.853 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031500697"}
2022-06-12 18:58:22.982 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-06-12 18:58:22.993 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 18:58:23.023 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 18:58:24.149 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 18:58:24.154 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 18:58:24.155 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 18:58:24.276 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 18:58:24.278 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:24.278 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 18:58:24.410 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 18:58:24.411 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 18:58:24.412 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 18:58:24.414 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:24.415 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:24.593 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:24.617 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 18:58:24.618 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 18:58:24.806 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:24.807 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:24.807 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:24.992 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:24.993 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 18:58:24.994 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 18:58:25.015 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 18:58:25.016 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 18:58:25.184 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 18:58:25.185 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:25.186 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 18:58:25.323 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 18:58:25.324 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 18:58:25.325 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 18:58:25.434 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 18:58:25.435 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 18:58:25.436 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 18:58:25.437 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 18:58:25.437 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 18:58:25.876 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 18:58:25.877 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 18:58:25.879 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 18:58:25.881 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 18:58:25.881 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 18:58:25.881 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 18:58:25.881 [pool-5-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 18:58:25.882 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 18:58:25.882 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:25.882 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 18:58:25.883 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:25.954 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031505700"}
2022-06-12 18:58:26.092 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:26.092 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:26.093 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:26.287 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:26.288 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 18:58:26.289 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:58:26.442 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:58:26.443 [pool-5-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 18:58:26.443 [pool-5-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:58:26.662 [pool-5-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:58:26.663 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:26.664 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:26.804 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:26.805 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:26.805 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:26.808 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:26.950 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:26.952 [pool-5-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:26.952 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:26.953 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:27.099 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:27.100 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:27.101 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:27.101 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 18:58:27.249 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:27.250 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 18:58:27.250 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:58:27.251 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:27.418 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:27.418 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:58:27.419 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:27.657 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:27.659 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:27.660 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:27.862 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:27.863 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:27.864 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:28.067 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:28.067 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:28.068 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:28.218 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:28.219 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:28.220 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:28.386 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:28.387 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:28.388 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:28.568 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:28.569 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:28.569 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:28.570 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:28.672 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:28.673 [pool-5-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:28.673 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:58:28.674 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:28.877 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:28.878 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:58:28.879 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:29.068 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:29.069 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 18:58:29.069 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:29.271 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:29.272 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 18:58:29.272 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:29.478 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:29.478 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:29.479 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:29.874 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:29.875 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:29.876 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:30.037 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:30.038 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:30.039 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:30.157 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:30.158 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:30.158 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:30.309 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:30.310 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 18:58:30.310 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:58:30.464 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:58:30.465 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 18:58:30.464 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 18:58:30.465 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 18:58:30.465 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:58:30.909 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:58:30.909 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031510702"}
2022-06-12 18:58:30.910 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:30.910 [pool-5-thread-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 18:58:30.911 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:30.911 [pool-5-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 18:58:31.067 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:31.068 [pool-5-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:31.068 [pool-5-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:31.251 [pool-5-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:31.252 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:31.253 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:31.435 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:31.436 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:31.437 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:31.625 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:31.628 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 18:58:31.629 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:58:31.815 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:31.816 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 18:58:31.816 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 18:58:31.816 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:58:32.006 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:32.007 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:32.007 [pool-5-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 18:58:32.008 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:32.151 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:32.152 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:32.152 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:32.153 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:32.297 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:32.298 [pool-5-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:32.298 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 18:58:32.299 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:58:32.484 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:32.485 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 18:58:32.485 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 18:58:32.485 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 18:58:32.485 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 18:58:32.486 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 18:58:32.486 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:58:32.676 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:32.677 [pool-5-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 18:58:32.677 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:58:32.677 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 18:58:32.678 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:32.872 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:32.873 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:58:32.874 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:33.030 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:33.031 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 18:58:33.032 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:58:33.244 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:58:33.244 [pool-5-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 18:58:33.245 [pool-5-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:58:33.422 [pool-5-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:58:33.422 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:33.423 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:33.609 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:33.610 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:33.610 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:33.823 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:33.824 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:33.824 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:33.960 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:33.961 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:33.961 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 18:58:33.962 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:34.139 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:34.139 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 18:58:34.139 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:34.140 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:34.292 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:34.293 [pool-5-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:34.293 [pool-5-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:34.733 [pool-5-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:34.734 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:34.735 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:34.890 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:34.891 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:34.892 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:35.089 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:35.089 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 18:58:35.090 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:58:35.236 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:35.237 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 18:58:35.237 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 18:58:35.237 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:58:35.355 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:35.356 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:35.355 [pool-5-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 18:58:35.356 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:35.580 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:35.581 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:35.581 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:35.582 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:35.824 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:35.825 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 18:58:35.825 [pool-5-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:35.826 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:58:35.883 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031515705"}
2022-06-12 18:58:36.029 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:36.030 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 18:58:36.030 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 18:58:36.031 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 18:58:36.031 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:58:36.224 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:36.225 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 18:58:36.225 [pool-5-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 18:58:36.225 [pool-5-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 18:58:36.226 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:36.417 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:36.418 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 18:58:36.418 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:36.610 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:36.611 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:36.611 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:36.811 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:36.812 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:36.812 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:37.003 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:37.004 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:37.005 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:37.169 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:37.170 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:37.171 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:37.375 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:37.376 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:37.377 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:37.522 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:37.523 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:37.523 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:37.524 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:37.618 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:37.618 [pool-5-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:37.618 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:37.619 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:37.724 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:37.725 [pool-5-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:37.726 [pool-5-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:37.880 [pool-5-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:37.880 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:58:37.881 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:38.065 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:38.066 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:58:38.067 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:38.214 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:38.214 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 18:58:38.214 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:58:38.384 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:38.385 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 18:58:38.385 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 18:58:38.386 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:58:38.553 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:38.554 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:38.553 [pool-5-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 18:58:38.554 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:38.703 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:38.704 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:38.704 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:38.875 [pool-5-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:38.876 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 18:58:38.878 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:58:39.118 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:39.119 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 18:58:39.118 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 18:58:39.119 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 18:58:39.119 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:58:39.315 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:39.315 [pool-5-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 18:58:39.315 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:39.315 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 18:58:39.316 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 18:58:39.316 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:39.316 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 18:58:39.316 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 18:58:39.316 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 18:58:39.454 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:39.455 [pool-5-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:39.455 [pool-5-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:39.602 [pool-5-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:39.603 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 18:58:39.604 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:58:39.796 [pool-5-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:58:39.796 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:39.797 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:40.012 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:40.013 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 18:58:40.014 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:58:40.161 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:40.162 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 18:58:40.162 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 18:58:40.164 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:58:40.362 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:40.363 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:40.363 [pool-5-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 18:58:40.363 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:40.512 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:40.513 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 18:58:40.513 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:40.514 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:40.876 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:40.877 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 18:58:40.876 [pool-5-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:40.878 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:58:40.904 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031520707"}
2022-06-12 18:58:41.017 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:41.018 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 18:58:41.018 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 18:58:41.018 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 18:58:41.018 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:58:41.201 [pool-5-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:41.202 [pool-5-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 18:58:41.202 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:41.202 [pool-5-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 18:58:41.202 [pool-5-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 18:58:41.203 [pool-5-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 18:58:41.203 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:41.203 [pool-5-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 18:58:41.203 [pool-5-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 18:58:41.203 [pool-5-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 18:58:41.416 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:41.417 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:58:41.418 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:41.902 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:41.903 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:41.903 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:42.108 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:42.108 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:42.109 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:42.821 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:42.822 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:42.822 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:42.822 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:42.961 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:42.962 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:42.962 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:43.073 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:43.075 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 18:58:43.074 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:43.075 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:43.269 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:43.270 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:58:43.271 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:43.452 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:43.453 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:58:43.454 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:43.644 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:43.645 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:43.645 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:43.825 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:43.826 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:43.826 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:43.969 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:43.970 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:43.970 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:44.118 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:44.119 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:44.119 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:44.262 [pool-5-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:44.263 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 18:58:44.264 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:58:44.459 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:58:44.460 [pool-5-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 18:58:44.460 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:58:44.460 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 18:58:44.461 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:44.686 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:44.686 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 18:58:44.687 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:58:44.817 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:44.818 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:44.817 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 18:58:44.818 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:45.041 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:45.041 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:45.042 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:45.209 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:45.209 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 18:58:45.210 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:58:45.421 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:45.422 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 18:58:45.422 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:45.422 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 18:58:45.422 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 18:58:45.423 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 18:58:45.423 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:45.423 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 18:58:45.423 [pool-5-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 18:58:45.654 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:45.655 [pool-5-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:45.655 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 18:58:45.655 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:58:45.831 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:58:45.832 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 18:58:45.832 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:45.832 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 18:58:45.832 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:45.899 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031525711"}
2022-06-12 18:58:46.014 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:46.015 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:58:46.015 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:46.320 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:46.320 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:46.321 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:46.762 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:46.763 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:46.763 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:47.041 [pool-5-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:47.041 [pool-5-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:47.042 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:47.042 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:47.227 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:47.228 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:47.229 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:47.446 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:47.447 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:47.447 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:58:47.448 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:47.676 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:47.677 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:58:47.678 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:47.897 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:47.898 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:58:47.898 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:48.141 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:48.142 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:48.142 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:48.307 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:48.308 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:48.309 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:48.501 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:48.502 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:48.502 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:48.679 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:48.679 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:58:48.680 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:48.877 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:48.878 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 18:58:48.879 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:58:49.086 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:58:49.087 [pool-5-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 18:58:49.087 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:49.087 [pool-5-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 18:58:49.088 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:49.229 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:49.230 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:58:49.230 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:49.337 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:49.339 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:49.339 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:49.490 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:49.491 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 18:58:49.492 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:58:49.689 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:49.690 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 18:58:49.690 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 18:58:49.690 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:58:49.840 [pool-5-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:58:49.841 [pool-5-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 18:58:49.841 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:49.841 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:50.018 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:50.018 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 18:58:50.018 [pool-5-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:50.019 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:58:50.193 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:50.194 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 18:58:50.194 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:58:50.194 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 18:58:50.194 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 18:58:50.195 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:50.195 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 18:58:50.195 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 18:58:50.195 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 18:58:50.195 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 18:58:50.195 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 18:58:50.397 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:50.398 [pool-5-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 18:58:50.398 [pool-5-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:58:50.628 [pool-5-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:58:50.629 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:50.629 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:50.782 [pool-5-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:50.783 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:50.784 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:50.849 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031530713"}
2022-06-12 18:58:50.924 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:50.925 [pool-5-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:50.925 [pool-5-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 18:58:50.925 [pool-5-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:51.028 [pool-5-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:51.029 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:51.029 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:51.184 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:51.184 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 18:58:51.185 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:58:51.584 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:51.585 [pool-5-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 18:58:51.585 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:58:51.586 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:58:51.729 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:58:51.729 [pool-5-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:58:51.729 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 18:58:51.730 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:58:51.962 [pool-5-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:51.963 [pool-5-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 18:58:51.963 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 18:58:51.963 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:58:52.112 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:58:52.113 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:58:52.113 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:58:52.256 [pool-5-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:58:52.257 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:58:52.258 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:58:52.394 [pool-5-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:58:52.395 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 18:58:52.396 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:58:52.569 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:52.569 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 18:58:52.570 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 18:58:52.571 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:58:52.802 [pool-5-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:58:52.803 [pool-5-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 18:58:52.804 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 18:58:55.930 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031535716"}
2022-06-12 18:59:00.849 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031540717"}
2022-06-12 18:59:05.911 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031545720"}
2022-06-12 18:59:10.855 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031550722"}
2022-06-12 18:59:15.913 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031555726"}
2022-06-12 18:59:20.881 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031560729"}
2022-06-12 18:59:25.906 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031565731"}
2022-06-12 18:59:30.915 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031570734"}
2022-06-12 18:59:35.850 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031575736"}
2022-06-12 18:59:39.400 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 18:59:39.401 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 18:59:39.534 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 18:59:39.535 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 18:59:39.535 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 18:59:39.729 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 18:59:39.730 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:39.730 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 18:59:39.831 [http-nio-10090-exec-3] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 18:59:39.831 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 18:59:39.831 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 18:59:39.832 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:39.832 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:39.985 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:39.999 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 18:59:39.999 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 18:59:40.139 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:40.141 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:40.141 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:40.285 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:40.285 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 18:59:40.286 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 18:59:40.309 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 18:59:40.309 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 18:59:40.451 [http-nio-10090-exec-3] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 18:59:40.452 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:40.452 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 18:59:40.610 [http-nio-10090-exec-3] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 18:59:40.611 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 18:59:40.611 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 18:59:40.770 [http-nio-10090-exec-3] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 18:59:40.770 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 18:59:40.771 [http-nio-10090-exec-3] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 18:59:40.771 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 18:59:40.772 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 18:59:40.854 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031580739"}
2022-06-12 18:59:41.119 [http-nio-10090-exec-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 18:59:41.120 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 18:59:41.123 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 18:59:41.123 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 18:59:41.123 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 18:59:41.124 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 18:59:41.124 [pool-6-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 18:59:41.124 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 18:59:41.124 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:41.125 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 18:59:41.126 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:41.324 [pool-6-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 18:59:41.324 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 18:59:41.324 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:41.325 [pool-6-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:59:41.325 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:59:41.325 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:41.325 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:41.326 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:41.327 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:41.456 [pool-6-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:59:41.457 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:41.458 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:41.507 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:59:41.508 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:41.508 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:41.731 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:41.731 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:41.732 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:41.732 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:41.733 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:59:41.733 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:41.733 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:41.751 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:41.751 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:41.751 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 18:59:41.751 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 18:59:41.752 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:41.752 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:41.752 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:41.752 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:41.861 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:41.861 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:41.862 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:41.894 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:41.894 [pool-6-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:41.895 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:59:41.896 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:41.921 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:41.921 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:41.921 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:41.921 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:41.922 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:41.922 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:42.033 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:42.034 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:59:42.035 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:42.043 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:42.044 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:42.044 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:42.096 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:42.096 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:42.097 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 18:59:42.097 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:42.098 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:42.098 [pool-6-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:42.098 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 18:59:42.099 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:42.147 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:42.147 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:42.148 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:42.199 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:42.200 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:59:42.200 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:42.249 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:42.250 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:42.250 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:42.266 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:42.266 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:42.267 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:42.326 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:42.327 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 18:59:42.328 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:59:42.390 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:42.391 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:42.391 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:42.391 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:42.392 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:42.392 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:42.450 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:42.450 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:42.451 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:42.509 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:59:42.510 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 18:59:42.511 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 18:59:42.511 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:42.512 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:42.560 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:42.560 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:42.561 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 18:59:42.561 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 18:59:42.562 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:59:42.562 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:59:42.620 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:42.622 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 18:59:42.622 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:59:42.684 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:42.685 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:42.685 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:42.733 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:42.733 [pool-6-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 18:59:42.734 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 18:59:42.734 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:59:42.750 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:59:42.751 [pool-6-thread-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 18:59:42.752 [pool-6-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 18:59:42.752 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:42.753 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:42.912 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:42.912 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:42.912 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:42.912 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 18:59:42.913 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:59:42.913 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 18:59:42.913 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:42.913 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:59:42.919 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:42.920 [pool-6-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 18:59:42.920 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 18:59:42.920 [pool-6-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 18:59:42.921 [pool-6-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:59:42.969 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:42.970 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:42.970 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:43.027 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:43.028 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:43.029 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:43.034 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:43.035 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 18:59:43.035 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 18:59:43.035 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 18:59:43.035 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 18:59:43.036 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 18:59:43.036 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:59:43.155 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:43.155 [pool-6-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:59:43.155 [pool-6-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:43.156 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:43.156 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:59:43.156 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:43.156 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:43.306 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:43.306 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:59:43.307 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:43.307 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:43.307 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:43.308 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:43.341 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:43.341 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 18:59:43.342 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:43.342 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:43.369 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:43.369 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:43.370 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:43.445 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:43.446 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 18:59:43.446 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:59:43.470 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:43.470 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 18:59:43.471 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:43.471 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:43.505 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:43.506 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:43.506 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:43.573 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:43.575 [pool-6-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:43.575 [pool-6-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:43.620 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:43.621 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 18:59:43.621 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 18:59:43.622 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:59:43.634 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:43.635 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:43.635 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:43.706 [pool-6-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:43.707 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:43.707 [pool-6-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:43.708 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 18:59:43.708 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 18:59:43.708 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:59:43.708 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:43.775 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:43.775 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 18:59:43.776 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 18:59:43.776 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:43.777 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:43.835 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:43.835 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:43.836 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 18:59:43.836 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:43.847 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:43.847 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:43.847 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:43.893 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:43.894 [pool-6-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 18:59:43.894 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 18:59:43.895 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:59:43.958 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:43.959 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:43.960 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:44.014 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:44.015 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:44.015 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:44.015 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:44.015 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:44.016 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:44.077 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:44.077 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:44.078 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:44.078 [pool-6-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 18:59:44.078 [pool-6-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 18:59:44.079 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 18:59:44.079 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:44.079 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:44.079 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:44.183 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:44.184 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 18:59:44.184 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:59:44.413 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:44.413 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:44.414 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:44.414 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:44.414 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:44.414 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:44.414 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:44.414 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:44.415 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:44.470 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:44.471 [pool-6-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 18:59:44.471 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 18:59:44.471 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:59:44.603 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:44.604 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:44.605 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:44.617 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:44.618 [pool-6-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:44.619 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 18:59:44.619 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:44.660 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:44.661 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 18:59:44.662 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:59:44.727 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:44.728 [pool-6-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 18:59:44.728 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 18:59:44.728 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 18:59:44.728 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 18:59:44.728 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 18:59:44.728 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 18:59:44.729 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:44.729 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:44.762 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:44.763 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 18:59:44.763 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:59:44.772 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:44.773 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:44.773 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:44.775 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:44.775 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 18:59:44.776 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 18:59:44.776 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:59:44.878 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:44.879 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:44.880 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:44.889 [pool-6-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:44.890 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:44.890 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 18:59:44.890 [pool-6-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:44.890 [pool-6-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:44.891 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 18:59:44.891 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:59:44.945 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:44.945 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 18:59:44.946 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 18:59:44.946 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 18:59:44.946 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:59:45.004 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:45.004 [pool-6-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:45.006 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:59:45.006 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:45.065 [pool-6-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:45.065 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:45.065 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 18:59:45.066 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 18:59:45.066 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 18:59:45.066 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:59:45.067 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:45.067 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:45.113 [pool-6-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:59:45.114 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:45.114 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:45.163 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:45.164 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:45.164 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:45.221 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:45.221 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:45.221 [pool-6-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 18:59:45.222 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:45.222 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:45.222 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 18:59:45.222 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:59:45.274 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:45.274 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 18:59:45.275 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:45.275 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:45.325 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:45.326 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:59:45.327 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:45.373 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:45.374 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:45.375 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:59:45.375 [pool-6-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:45.375 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:45.376 [pool-6-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 18:59:45.376 [pool-6-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 18:59:45.376 [pool-6-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 18:59:45.376 [pool-6-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 18:59:45.376 [pool-6-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 18:59:45.376 [pool-6-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 18:59:45.376 [pool-6-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 18:59:45.476 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:45.477 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:45.477 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:45.513 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:45.513 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:45.514 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:45.561 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:45.562 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:45.563 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:45.642 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:45.642 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:45.643 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 18:59:45.643 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:45.673 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:45.675 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 18:59:45.675 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:59:45.751 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:45.752 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:59:45.752 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:45.812 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:45.813 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:45.814 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:45.874 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031585741"}
2022-06-12 18:59:45.874 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:59:45.874 [pool-6-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 18:59:45.875 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 18:59:45.875 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:45.875 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:46.000 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:46.000 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:46.001 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:46.025 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:46.027 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:46.027 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:46.066 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:46.067 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:46.067 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:46.128 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:46.130 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 18:59:46.130 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:59:46.184 [pool-6-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:46.186 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 18:59:46.186 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:59:46.243 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:46.244 [pool-6-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:46.245 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:59:46.245 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:46.313 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:59:46.313 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 18:59:46.314 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 18:59:46.314 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:46.314 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:46.378 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:46.379 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 18:59:46.379 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 18:59:46.380 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:59:46.587 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:46.587 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:46.588 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:46.588 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:46.588 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:46.588 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:46.639 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:46.639 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 18:59:46.639 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 18:59:46.640 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 18:59:46.640 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 18:59:46.640 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 18:59:46.640 [pool-6-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 18:59:46.640 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:46.641 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:46.737 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:46.738 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:46.739 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 18:59:46.739 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:46.793 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:46.794 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 18:59:46.794 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:46.853 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:46.854 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:46.855 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:46.989 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:46.990 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:46.990 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:47.026 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:47.026 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:47.026 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:47.046 [pool-6-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:47.046 [pool-6-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:47.047 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:59:47.047 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:47.138 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:47.139 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:47.140 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:47.196 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:47.198 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 18:59:47.198 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:59:47.250 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:47.251 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:47.252 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:47.323 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:47.324 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 18:59:47.325 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:59:47.436 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:59:47.437 [pool-6-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 18:59:47.437 [pool-6-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 18:59:47.438 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:47.438 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:47.493 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:47.494 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:47.495 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 18:59:47.494 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 18:59:47.495 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:47.496 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 18:59:47.496 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:59:47.647 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:47.648 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:47.648 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:47.702 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:47.703 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:47.703 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 18:59:47.703 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 18:59:47.703 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 18:59:47.703 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 18:59:47.703 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 18:59:47.703 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 18:59:47.703 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 18:59:47.704 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 18:59:47.704 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 18:59:47.704 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:47.704 [pool-6-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 18:59:47.704 [pool-6-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 18:59:47.804 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:47.804 [pool-6-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:47.805 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 18:59:47.805 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:47.863 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:47.863 [pool-6-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 18:59:47.864 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:47.864 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 18:59:47.864 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:47.864 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 18:59:48.056 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:48.057 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:48.057 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:48.109 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:48.109 [pool-6-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 18:59:48.110 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:48.110 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:48.380 [pool-6-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 18:59:48.380 [pool-6-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 18:59:48.446 [pool-6-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:48.447 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:48.448 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:48.448 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 18:59:48.448 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:48.448 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 18:59:48.611 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 18:59:48.611 [pool-6-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 18:59:48.612 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 18:59:48.612 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 18:59:48.621 [pool-6-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:48.622 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 18:59:48.622 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:59:48.862 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 18:59:48.863 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 18:59:48.863 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 18:59:48.925 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:48.926 [pool-6-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 18:59:48.927 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 18:59:48.927 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:59:49.130 [pool-6-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 18:59:49.131 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 18:59:49.131 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 18:59:49.180 [pool-6-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:49.181 [pool-6-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 18:59:49.287 [pool-6-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 18:59:49.288 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 18:59:49.289 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 18:59:49.535 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:49.535 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 18:59:49.536 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 18:59:49.536 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 18:59:49.740 [pool-6-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 18:59:49.740 [pool-6-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 18:59:49.741 [http-nio-10090-exec-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 18:59:50.977 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031590745"}
2022-06-12 18:59:55.851 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031595747"}
2022-06-12 19:00:00.889 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031600750"}
2022-06-12 19:00:06.102 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031605752"}
2022-06-12 19:00:10.865 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031610755"}
2022-06-12 19:00:16.183 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031615758"}
2022-06-12 19:00:20.980 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655031620759"}
2022-06-12 19:00:26.315 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onClose ------
2022-06-12 19:00:40.716 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 19:00:40.716 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 19:00:40.874 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 19:00:40.875 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 19:00:40.875 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 19:00:41.023 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 19:00:41.024 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:41.024 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 19:00:41.173 [http-nio-10090-exec-5] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 19:00:41.174 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 19:00:41.174 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 19:00:41.175 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:41.175 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:41.355 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:41.370 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 19:00:41.370 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 19:00:41.496 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:41.497 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:41.497 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:41.646 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:41.646 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 19:00:41.647 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 19:00:41.669 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 19:00:41.669 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 19:00:41.788 [http-nio-10090-exec-5] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 19:00:41.789 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:41.789 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 19:00:41.920 [http-nio-10090-exec-5] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 19:00:41.921 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 19:00:41.921 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 19:00:42.067 [http-nio-10090-exec-5] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 19:00:42.068 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 19:00:42.068 [http-nio-10090-exec-5] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 19:00:42.068 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 19:00:42.069 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 19:00:42.398 [http-nio-10090-exec-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 19:00:42.398 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 19:00:42.400 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 19:00:42.400 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 19:00:42.401 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 19:00:42.401 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 19:00:42.401 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 19:00:42.401 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 19:00:42.401 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 19:00:42.401 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 19:00:42.402 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:00:42.589 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:42.589 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:42.589 [pool-7-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 19:00:42.590 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:42.590 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:42.590 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:00:42.590 [pool-7-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:00:42.591 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:42.591 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:42.704 [pool-7-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:00:42.704 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:42.704 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:42.705 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:42.706 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:42.706 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:42.750 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:42.750 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:42.750 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:42.804 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:42.804 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 19:00:42.805 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:42.805 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:42.853 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:42.853 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:42.853 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 19:00:42.853 [pool-7-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:42.854 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:42.854 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:42.854 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:00:42.854 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:42.907 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:42.907 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:42.908 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:00:42.909 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:42.957 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:42.958 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:42.958 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:43.010 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:43.011 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:43.011 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:43.057 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:43.058 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:43.058 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:43.060 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:43.061 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:43.061 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:43.111 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:43.112 [pool-7-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:43.112 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 19:00:43.112 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:43.175 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:43.176 [pool-7-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:43.176 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 19:00:43.177 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:43.224 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:43.224 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:43.225 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:00:43.225 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:00:43.226 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:43.226 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:43.303 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:43.305 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:43.305 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:43.397 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:43.398 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:43.398 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:43.415 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:43.415 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:43.415 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:43.471 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:43.471 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:43.472 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:43.538 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:43.539 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:43.539 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:43.593 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:43.593 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:43.594 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 19:00:43.594 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:43.594 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:43.595 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:00:43.661 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:43.662 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 19:00:43.662 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:00:43.727 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:43.728 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 19:00:43.729 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:00:43.778 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:43.779 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 19:00:43.780 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:00:43.864 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:00:43.865 [pool-7-thread-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 19:00:43.865 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 19:00:43.865 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:43.865 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:43.917 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:43.917 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 19:00:43.918 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 19:00:43.918 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:00:43.931 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:00:43.932 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 19:00:43.932 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 19:00:43.932 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:43.933 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:43.994 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:43.995 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 19:00:43.995 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 19:00:43.996 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:00:44.036 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:44.037 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:44.037 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:44.083 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:44.084 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 19:00:44.084 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 19:00:44.084 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 19:00:44.084 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 19:00:44.085 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 19:00:44.086 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:00:44.142 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:44.143 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:44.143 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:44.173 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:44.173 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 19:00:44.174 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 19:00:44.175 [pool-7-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 19:00:44.175 [pool-7-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:00:44.242 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:44.242 [pool-7-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:44.243 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:00:44.243 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:44.291 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:00:44.292 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:44.292 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:44.360 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:44.360 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:44.361 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:00:44.362 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:44.400 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:44.401 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:44.401 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:44.438 [pool-7-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:00:44.439 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:44.440 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:44.496 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:44.496 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 19:00:44.497 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:44.497 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:44.561 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:44.562 [pool-7-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:44.562 [pool-7-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:44.594 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:44.594 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:44.595 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:44.676 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:44.677 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 19:00:44.677 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:44.677 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:44.715 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:44.716 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:44.716 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:44.782 [pool-7-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:44.782 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 19:00:44.783 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:00:44.849 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:44.850 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:44.850 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:44.854 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:44.855 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:44.855 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:44.904 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:44.904 [pool-7-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:44.905 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 19:00:44.905 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:44.955 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:44.956 [pool-7-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 19:00:44.957 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 19:00:44.957 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:00:45.001 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:45.001 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 19:00:45.001 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:00:45.008 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:45.008 [pool-7-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:45.009 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 19:00:45.009 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:45.065 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:45.066 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:45.066 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:45.106 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:45.107 [pool-7-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 19:00:45.107 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 19:00:45.108 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:45.108 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:45.118 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:45.119 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 19:00:45.119 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 19:00:45.120 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:00:45.167 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:45.167 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:45.168 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:45.214 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:45.215 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:45.215 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:45.262 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:45.262 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:45.262 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:45.311 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:45.312 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:45.312 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:45.312 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:45.312 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 19:00:45.313 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 19:00:45.313 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:45.314 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:45.361 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:45.362 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 19:00:45.362 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:00:45.413 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:45.413 [pool-7-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:45.414 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:00:45.414 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:45.583 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:45.583 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:45.584 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:45.584 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 19:00:45.584 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:45.584 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:00:45.632 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:45.632 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 19:00:45.633 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 19:00:45.633 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:00:45.656 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:45.657 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:45.657 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:45.759 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:45.760 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 19:00:45.760 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 19:00:45.761 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:00:45.775 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:45.776 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:45.776 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:00:45.776 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:45.805 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:45.805 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 19:00:45.805 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 19:00:45.805 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 19:00:45.806 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:00:45.854 [pool-7-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:45.855 [pool-7-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:45.855 [pool-7-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:45.903 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:45.904 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 19:00:45.904 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 19:00:45.904 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 19:00:45.904 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 19:00:45.904 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 19:00:45.904 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 19:00:45.905 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:45.905 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:45.947 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:45.948 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:45.948 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:45.951 [pool-7-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:00:45.951 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:45.951 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:46.007 [pool-7-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:46.008 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 19:00:46.009 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:00:46.058 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:46.058 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:46.059 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:46.060 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:46.060 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:46.060 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:46.108 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:46.109 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 19:00:46.110 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:46.110 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:46.164 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:46.165 [pool-7-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 19:00:46.166 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 19:00:46.167 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:00:46.215 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:46.215 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:46.215 [pool-7-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:46.215 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 19:00:46.216 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:00:46.216 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:00:46.216 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:46.272 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:46.273 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:46.273 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:46.321 [pool-7-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:46.321 [pool-7-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 19:00:46.322 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 19:00:46.322 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 19:00:46.322 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 19:00:46.322 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 19:00:46.322 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 19:00:46.322 [pool-7-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 19:00:46.369 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:46.369 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:46.369 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:46.413 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:46.414 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 19:00:46.414 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 19:00:46.415 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:00:46.426 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:46.427 [pool-7-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:46.427 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 19:00:46.427 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:46.481 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:46.482 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:00:46.483 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:46.585 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:46.585 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 19:00:46.585 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 19:00:46.586 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:46.586 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:46.593 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:46.594 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:46.594 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:46.648 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:46.649 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:46.649 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:46.698 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:46.699 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:46.699 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:46.754 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:46.755 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:46.755 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:46.805 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:46.806 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 19:00:46.807 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:00:46.863 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:46.864 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:46.864 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:00:46.864 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:46.941 [pool-7-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:46.942 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 19:00:46.942 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:00:46.995 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:00:46.996 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 19:00:46.996 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 19:00:46.996 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:46.997 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:47.049 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:47.050 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:47.050 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:47.096 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:47.097 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 19:00:47.097 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 19:00:47.098 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:00:47.144 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:47.145 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:47.145 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:47.195 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:47.196 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:00:47.196 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:47.245 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:47.245 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 19:00:47.245 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 19:00:47.245 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 19:00:47.245 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 19:00:47.246 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 19:00:47.246 [pool-7-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 19:00:47.246 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:47.246 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:47.295 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:47.295 [pool-7-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:47.296 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:00:47.296 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:47.390 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:47.391 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:47.391 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:47.397 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:47.397 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:47.397 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:47.447 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:47.447 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:47.447 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:47.499 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:47.500 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 19:00:47.501 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:00:47.549 [pool-7-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:47.549 [pool-7-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:47.550 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:00:47.550 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:47.602 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:47.603 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:00:47.603 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:47.697 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:00:47.697 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 19:00:47.697 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 19:00:47.698 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:47.698 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:47.704 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:47.705 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:47.705 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:47.769 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:47.770 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:47.770 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:47.823 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:47.824 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:47.824 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:47.871 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:47.872 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:00:47.872 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:47.924 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:47.925 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 19:00:47.926 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:00:47.973 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:47.973 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:47.974 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:00:47.974 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:48.036 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:48.037 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:48.037 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:48.089 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:00:48.089 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 19:00:48.089 [pool-7-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 19:00:48.090 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:48.090 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:48.143 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:48.144 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:00:48.144 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:48.210 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:48.211 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 19:00:48.211 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:00:48.265 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:48.265 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:48.266 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:48.323 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:48.324 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:48.324 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:48.372 [pool-7-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:00:48.372 [pool-7-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 19:00:48.433 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:48.434 [pool-7-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:48.435 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:00:48.435 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:48.484 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:48.486 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 19:00:48.486 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:00:48.587 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:48.587 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:48.587 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:48.643 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:48.644 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 19:00:48.644 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 19:00:48.645 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:00:48.794 [pool-7-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:48.795 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:48.795 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:48.892 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:48.892 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 19:00:48.893 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 19:00:48.893 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 19:00:48.893 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 19:00:48.893 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 19:00:48.893 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 19:00:48.893 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 19:00:48.893 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 19:00:48.894 [pool-7-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 19:00:48.894 [pool-7-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:00:48.941 [pool-7-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:48.941 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 19:00:48.942 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:00:49.099 [pool-7-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:00:49.100 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:49.100 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:49.146 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:49.146 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 19:00:49.147 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 19:00:49.147 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:00:49.245 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:49.246 [pool-7-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 19:00:49.246 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:49.247 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:49.392 [pool-7-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:49.393 [pool-7-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 19:00:49.492 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:49.493 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:00:49.493 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:00:49.695 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:00:49.695 [pool-7-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:00:49.696 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 19:00:49.696 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:00:49.907 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:00:49.907 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:00:49.907 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:00:50.073 [pool-7-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:00:50.074 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:00:50.075 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:00:50.227 [pool-7-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:00:50.228 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 19:00:50.228 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:00:50.434 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:50.434 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 19:00:50.435 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 19:00:50.436 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:00:50.588 [pool-7-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:00:50.589 [pool-7-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 19:00:50.589 [http-nio-10090-exec-5] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 19:01:47.130 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 19:01:47.131 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 19:01:47.296 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 19:01:47.297 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 19:01:47.297 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 19:01:47.476 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 19:01:47.477 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:47.477 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 19:01:47.632 [http-nio-10090-exec-7] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 19:01:47.651 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 19:01:47.652 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 19:01:47.653 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:47.653 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:47.794 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:47.805 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 19:01:47.805 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 19:01:47.946 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:47.947 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:47.947 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:48.090 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:48.091 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 19:01:48.091 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 19:01:48.114 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 19:01:48.114 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 19:01:48.274 [http-nio-10090-exec-7] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 19:01:48.275 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:48.275 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 19:01:48.444 [http-nio-10090-exec-7] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 19:01:48.445 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 19:01:48.445 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 19:01:48.628 [http-nio-10090-exec-7] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 19:01:48.629 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 19:01:48.629 [http-nio-10090-exec-7] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 19:01:48.629 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 19:01:48.629 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 19:01:48.980 [http-nio-10090-exec-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 19:01:48.981 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 19:01:48.982 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 19:01:48.983 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 19:01:48.983 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 19:01:48.984 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 19:01:48.984 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:48.984 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 19:01:48.984 [pool-8-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 19:01:48.984 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:48.984 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 19:01:49.226 [pool-8-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 19:01:49.226 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:49.227 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:49.227 [pool-8-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:01:49.226 [pool-8-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 19:01:49.227 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:49.227 [pool-8-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:01:49.227 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:49.227 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:49.355 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:49.355 [pool-8-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:01:49.356 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:49.356 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:49.356 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:49.356 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:49.415 [pool-8-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:01:49.416 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:49.416 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:49.479 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:49.479 [pool-8-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:49.480 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:01:49.480 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:49.533 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:49.533 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 19:01:49.534 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:49.534 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:49.542 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:49.542 [pool-8-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:49.543 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:01:49.543 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:49.603 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:49.603 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 19:01:49.604 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:49.604 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:49.654 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:49.654 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:49.654 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:49.666 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:49.667 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:49.667 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:49.730 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:49.730 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:49.730 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:49.770 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:49.771 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:01:49.771 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:49.789 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:49.790 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:49.790 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:49.847 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:49.847 [pool-8-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:49.848 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 19:01:49.848 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:49.903 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:49.904 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:01:49.905 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:49.909 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:49.909 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:49.910 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:49.958 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:49.958 [pool-8-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:49.959 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 19:01:49.959 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:50.026 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:50.027 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:50.027 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:50.084 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:50.084 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:50.084 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:50.084 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 19:01:50.085 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:50.085 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:01:50.173 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:50.174 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:50.174 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:50.221 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:50.222 [pool-8-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:50.223 [pool-8-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:50.273 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:01:50.273 [pool-8-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 19:01:50.274 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 19:01:50.274 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:50.274 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:50.339 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:50.339 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:50.340 [pool-8-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:50.340 [pool-8-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:50.341 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 19:01:50.341 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:01:50.390 [pool-8-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:50.391 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 19:01:50.391 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:01:50.440 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:50.441 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:50.441 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:50.506 [pool-8-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:50.507 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:01:50.507 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 19:01:50.507 [pool-8-thread-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 19:01:50.507 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:01:50.508 [pool-8-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 19:01:50.509 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:50.509 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:50.558 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:50.558 [pool-8-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 19:01:50.559 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 19:01:50.559 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:01:50.610 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:50.611 [pool-8-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:50.611 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:01:50.612 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:50.645 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:50.645 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:50.646 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:50.659 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:50.660 [pool-8-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 19:01:50.661 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 19:01:50.661 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:01:50.711 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:50.711 [pool-8-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 19:01:50.712 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 19:01:50.712 [pool-8-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 19:01:50.712 [pool-8-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:01:50.759 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:50.760 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:50.760 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:50.780 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:50.780 [pool-8-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:50.781 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:01:50.781 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:50.828 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:50.828 [pool-8-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 19:01:50.829 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 19:01:50.829 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 19:01:50.829 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 19:01:50.829 [pool-8-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 19:01:50.829 [pool-8-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:01:50.882 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:50.883 [pool-8-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:01:50.883 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:50.883 [pool-8-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:50.884 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:50.884 [pool-8-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:50.934 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:50.934 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:50.935 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:50.983 [pool-8-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:01:50.984 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:50.984 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:51.030 [pool-8-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:51.030 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:51.031 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 19:01:51.031 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 19:01:51.031 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:51.032 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:51.032 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:01:51.084 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:51.086 [pool-8-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:51.086 [pool-8-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:51.136 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:51.137 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 19:01:51.137 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:51.137 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:51.190 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:51.190 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:51.190 [pool-8-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 19:01:51.190 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:51.191 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:51.191 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 19:01:51.191 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:01:51.243 [pool-8-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:51.244 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 19:01:51.244 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:01:51.291 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:51.292 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:51.292 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:51.471 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:51.471 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:51.471 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:51.471 [pool-8-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:51.471 [pool-8-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 19:01:51.471 [pool-8-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 19:01:51.471 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 19:01:51.472 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 19:01:51.472 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:51.472 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:51.472 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:51.472 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 19:01:51.473 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:01:51.522 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:51.523 [pool-8-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:51.523 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 19:01:51.523 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:51.578 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:51.578 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:51.579 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:51.579 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:51.580 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:51.580 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:51.631 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:51.632 [pool-8-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 19:01:51.632 [pool-8-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 19:01:51.633 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:51.634 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:51.685 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:51.686 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:51.686 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:51.725 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:51.727 [pool-8-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:51.727 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:01:51.728 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:51.734 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:51.734 [pool-8-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:51.735 [pool-8-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:51.792 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:51.793 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:51.794 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:51.829 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:51.830 [pool-8-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:51.830 [pool-8-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:51.844 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:51.844 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:51.844 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:51.894 [pool-8-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:51.895 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 19:01:51.895 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:01:51.945 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:51.946 [pool-8-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:51.946 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:01:51.946 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:51.992 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:51.992 [pool-8-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:51.993 [pool-8-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:51.993 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 19:01:51.993 [pool-8-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:51.993 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:01:52.042 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:52.043 [pool-8-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 19:01:52.043 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 19:01:52.044 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:01:52.091 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:52.091 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:52.091 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:52.144 [pool-8-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:52.145 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 19:01:52.145 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:01:52.202 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:52.202 [pool-8-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 19:01:52.203 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 19:01:52.203 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:01:52.207 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:52.208 [pool-8-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 19:01:52.208 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 19:01:52.208 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 19:01:52.208 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 19:01:52.208 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 19:01:52.209 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 19:01:52.209 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:52.209 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:52.260 [pool-8-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:52.261 [pool-8-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:52.261 [pool-8-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:52.308 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:52.309 [pool-8-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 19:01:52.310 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 19:01:52.310 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:01:52.355 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:52.355 [pool-8-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 19:01:52.356 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 19:01:52.356 [pool-8-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 19:01:52.357 [pool-8-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:01:52.361 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:52.361 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:52.362 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:52.408 [pool-8-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:52.409 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 19:01:52.409 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:01:52.415 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:52.416 [pool-8-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 19:01:52.416 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 19:01:52.416 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:52.416 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:52.466 [pool-8-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:01:52.467 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:52.467 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:52.519 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:52.519 [pool-8-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:52.520 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:01:52.521 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:52.521 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:52.521 [pool-8-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 19:01:52.522 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 19:01:52.522 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:01:52.573 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:52.574 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:52.574 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:52.620 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:52.621 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 19:01:52.622 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:52.622 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:52.704 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:52.704 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:52.705 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:52.752 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:52.752 [pool-8-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:52.753 [pool-8-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:52.753 [pool-8-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 19:01:52.753 [pool-8-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 19:01:52.753 [pool-8-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 19:01:52.753 [pool-8-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 19:01:52.754 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:01:52.754 [pool-8-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 19:01:52.754 [pool-8-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 19:01:52.754 [pool-8-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 19:01:52.754 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:52.816 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:52.817 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:52.818 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:52.878 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:52.879 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:01:52.879 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:52.936 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:52.937 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:52.938 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:52.989 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:52.989 [pool-8-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:52.990 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 19:01:52.990 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:53.051 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:53.052 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:53.053 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:53.103 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:53.104 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:01:53.104 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:53.156 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:53.157 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:53.157 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:53.203 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:53.204 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 19:01:53.204 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:01:53.260 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:53.261 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:53.261 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:53.310 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:53.311 [pool-8-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:53.311 [pool-8-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:53.373 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:01:53.374 [pool-8-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 19:01:53.374 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 19:01:53.374 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:53.374 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:53.432 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:53.433 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 19:01:53.433 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:01:53.483 [pool-8-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:53.484 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 19:01:53.484 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:01:53.540 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:53.540 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:53.541 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:53.596 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:01:53.596 [pool-8-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 19:01:53.596 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 19:01:53.596 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:53.596 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:53.665 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:53.665 [pool-8-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 19:01:53.666 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 19:01:53.666 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:01:53.726 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:53.726 [pool-8-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:53.726 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:01:53.727 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:53.784 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:53.784 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:53.784 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:53.861 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:53.861 [pool-8-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 19:01:53.861 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 19:01:53.861 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 19:01:53.861 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 19:01:53.861 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 19:01:53.861 [pool-8-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 19:01:53.862 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:53.862 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:53.988 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:53.989 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:53.989 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:54.021 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:54.022 [pool-8-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:54.023 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:01:54.023 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:54.038 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:54.039 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:54.039 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:54.147 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:54.148 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:01:54.148 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:54.221 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:54.221 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:54.221 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:54.272 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:54.273 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:54.273 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:54.537 [pool-8-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:54.537 [pool-8-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:54.538 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:01:54.538 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:54.588 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:54.588 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:54.589 [pool-8-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:54.589 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 19:01:54.589 [pool-8-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:54.589 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:01:54.750 [pool-8-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:54.750 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:54.751 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:01:54.751 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:54.751 [pool-8-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 19:01:54.751 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 19:01:54.751 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:54.751 [pool-8-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 19:01:54.751 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:01:54.751 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:54.752 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:54.903 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:54.903 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:54.903 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:54.904 [pool-8-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 19:01:54.904 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:01:54.904 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:54.904 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 19:01:54.904 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:54.904 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:54.905 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:01:55.044 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:55.044 [pool-8-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 19:01:55.044 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 19:01:55.044 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 19:01:55.044 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 19:01:55.044 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 19:01:55.044 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 19:01:55.045 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 19:01:55.045 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 19:01:55.045 [pool-8-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 19:01:55.045 [pool-8-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:01:55.087 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:55.087 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:55.088 [pool-8-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:55.088 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:01:55.088 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:55.088 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:01:55.089 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:55.240 [pool-8-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:01:55.240 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:55.240 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:55.245 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:55.245 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:55.245 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 19:01:55.245 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:55.245 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:01:55.245 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:55.354 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:55.354 [pool-8-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 19:01:55.355 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:55.355 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:55.409 [pool-8-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:55.410 [pool-8-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:55.410 [pool-8-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:55.463 [pool-8-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:01:55.463 [pool-8-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 19:01:55.511 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:55.512 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:01:55.512 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:01:55.558 [pool-8-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:55.559 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 19:01:55.560 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:01:55.662 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:01:55.662 [pool-8-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:01:55.662 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 19:01:55.663 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:01:55.805 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:55.806 [pool-8-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 19:01:55.807 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 19:01:55.807 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:01:55.811 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:01:55.811 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:01:55.811 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:01:55.974 [pool-8-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:01:55.974 [pool-8-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:55.974 [pool-8-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 19:01:55.975 [pool-8-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:01:55.975 [pool-8-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:01:56.142 [pool-8-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:01:56.143 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 19:01:56.144 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:01:56.343 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:56.343 [pool-8-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 19:01:56.344 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 19:01:56.344 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:01:56.541 [pool-8-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:01:56.541 [pool-8-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 19:01:56.542 [http-nio-10090-exec-7] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 19:02:23.711 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 19:02:23.712 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 19:02:23.875 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 19:02:23.876 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 19:02:23.876 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 19:02:24.050 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 19:02:24.051 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:24.051 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 19:02:24.186 [http-nio-10090-exec-9] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 19:02:24.186 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 19:02:24.187 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 19:02:24.187 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:24.187 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:24.350 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:24.362 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 19:02:24.380 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 19:02:24.511 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:24.512 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:24.512 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:24.687 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:24.687 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 19:02:24.687 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 19:02:24.707 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 19:02:24.707 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 19:02:24.849 [http-nio-10090-exec-9] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 19:02:24.849 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:24.850 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 19:02:25.008 [http-nio-10090-exec-9] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 19:02:25.009 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 19:02:25.009 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 19:02:25.163 [http-nio-10090-exec-9] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 19:02:25.163 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 19:02:25.164 [http-nio-10090-exec-9] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 19:02:25.164 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 19:02:25.164 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 19:02:25.549 [http-nio-10090-exec-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 19:02:25.550 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 19:02:25.552 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 19:02:25.553 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 19:02:25.553 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 19:02:25.554 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 19:02:25.554 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:25.554 [pool-9-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 19:02:25.554 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 19:02:25.554 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:25.554 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 19:02:25.846 [pool-9-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 19:02:25.846 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:25.846 [pool-9-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 19:02:25.846 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:25.847 [pool-9-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:02:25.846 [pool-9-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:02:25.846 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:25.847 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:25.847 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:25.964 [pool-9-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:02:25.965 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:25.965 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:25.998 [pool-9-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:02:25.999 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:25.999 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:26.027 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:26.027 [pool-9-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:26.028 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:02:26.028 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:26.063 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:26.064 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:26.064 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:26.124 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:26.124 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:26.124 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 19:02:26.125 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 19:02:26.125 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:26.125 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:26.126 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:26.126 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:26.211 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:26.212 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:26.212 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:26.284 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:26.284 [pool-9-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:26.285 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:02:26.285 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:26.314 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:26.314 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:26.315 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:26.351 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:26.352 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:26.352 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:26.414 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:26.414 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:02:26.415 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:26.454 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:26.455 [pool-9-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:26.455 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 19:02:26.455 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:26.471 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:26.472 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:26.472 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:26.550 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:26.550 [pool-9-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:26.551 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 19:02:26.551 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:26.589 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:26.590 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:26.590 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:26.609 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:26.610 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:26.610 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:26.688 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:26.689 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:02:26.689 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:26.740 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:26.741 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:26.741 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:26.741 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 19:02:26.741 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:26.742 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:02:26.790 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:26.791 [pool-9-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:26.791 [pool-9-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:26.883 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:26.883 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:26.883 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:26.890 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:26.891 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:02:26.891 [pool-9-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:26.891 [pool-9-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 19:02:26.891 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 19:02:26.891 [pool-9-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:26.891 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:26.892 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:26.939 [pool-9-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:26.940 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 19:02:26.941 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:02:26.988 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:26.989 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 19:02:26.990 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:02:27.038 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:27.038 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:27.038 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:27.084 [pool-9-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:27.085 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 19:02:27.085 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:02:27.085 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:27.086 [pool-9-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 19:02:27.086 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 19:02:27.087 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:02:27.179 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:02:27.179 [pool-9-thread-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 19:02:27.179 [pool-9-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 19:02:27.180 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:27.180 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:27.188 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:27.188 [pool-9-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:27.189 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:02:27.189 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:27.237 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:27.237 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:27.237 [pool-9-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 19:02:27.237 [pool-9-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 19:02:27.237 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 19:02:27.238 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 19:02:27.238 [pool-9-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 19:02:27.238 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:02:27.238 [pool-9-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:02:27.288 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:27.288 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:27.289 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:27.337 [pool-9-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:02:27.338 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:27.339 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:27.387 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:27.387 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:27.387 [pool-9-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 19:02:27.387 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 19:02:27.387 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 19:02:27.387 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:27.387 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 19:02:27.388 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:27.388 [pool-9-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 19:02:27.388 [pool-9-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:02:27.438 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:27.438 [pool-9-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:27.439 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:02:27.439 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:27.485 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:27.486 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 19:02:27.486 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:27.487 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:27.540 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:27.540 [pool-9-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:02:27.540 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:27.540 [pool-9-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:27.541 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:27.541 [pool-9-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:27.590 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:27.591 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:27.591 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:27.644 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:27.644 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:27.644 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:27.689 [pool-9-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:27.690 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 19:02:27.690 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:02:27.738 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:27.738 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 19:02:27.738 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:27.739 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:27.781 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:27.782 [pool-9-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:27.783 [pool-9-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:27.785 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:27.785 [pool-9-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:27.786 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 19:02:27.786 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:27.833 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:27.833 [pool-9-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 19:02:27.834 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 19:02:27.834 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:02:27.924 [pool-9-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:27.924 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:27.925 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:27.925 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 19:02:27.925 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:27.925 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:02:27.930 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:27.930 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:27.930 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:27.979 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:27.979 [pool-9-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 19:02:27.979 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 19:02:27.979 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:27.980 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:28.030 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:28.030 [pool-9-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 19:02:28.031 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 19:02:28.031 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:02:28.077 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:28.077 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:28.077 [pool-9-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:28.078 [pool-9-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:28.078 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 19:02:28.078 [pool-9-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:28.078 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:28.130 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:28.130 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:28.131 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:28.179 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:28.179 [pool-9-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 19:02:28.179 [pool-9-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 19:02:28.180 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:28.180 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:28.226 [pool-9-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:28.227 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 19:02:28.227 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:02:28.271 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:28.272 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:28.272 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:28.281 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:28.281 [pool-9-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:28.282 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:02:28.282 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:28.336 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:28.337 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:28.337 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:28.395 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:28.395 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:28.395 [pool-9-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 19:02:28.395 [pool-9-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:28.396 [pool-9-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:28.396 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 19:02:28.396 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:02:28.443 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:28.444 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:28.444 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:28.503 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:28.503 [pool-9-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:28.503 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:02:28.504 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:28.550 [pool-9-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:28.551 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:28.551 [pool-9-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 19:02:28.551 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 19:02:28.551 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 19:02:28.551 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 19:02:28.551 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 19:02:28.551 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 19:02:28.551 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 19:02:28.551 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:02:28.552 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:28.552 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:28.606 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:28.607 [pool-9-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:28.607 [pool-9-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:28.658 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:28.658 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:28.659 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:28.705 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:28.705 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:28.706 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:28.760 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:28.761 [pool-9-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 19:02:28.761 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 19:02:28.762 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:02:28.817 [pool-9-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:28.817 [pool-9-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:28.818 [pool-9-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:28.818 [pool-9-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:28.818 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 19:02:28.818 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:02:28.873 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:28.873 [pool-9-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:28.874 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:02:28.874 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:28.922 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:28.923 [pool-9-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 19:02:28.923 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 19:02:28.923 [pool-9-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 19:02:28.923 [pool-9-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:02:28.981 [pool-9-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:28.981 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:28.981 [pool-9-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 19:02:28.982 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 19:02:28.982 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 19:02:28.982 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:02:28.982 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:02:29.030 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:29.030 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:29.031 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:29.078 [pool-9-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:02:29.079 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:29.079 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:29.127 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:29.127 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:29.127 [pool-9-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 19:02:29.127 [pool-9-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 19:02:29.128 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 19:02:29.128 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:29.128 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 19:02:29.128 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:29.128 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:02:29.179 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:29.180 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:02:29.180 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:29.227 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:29.227 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 19:02:29.228 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:29.228 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:29.284 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:29.284 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:29.285 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:29.322 [pool-9-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:29.322 [pool-9-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 19:02:29.323 [pool-9-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 19:02:29.323 [pool-9-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 19:02:29.323 [pool-9-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 19:02:29.323 [pool-9-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 19:02:29.323 [pool-9-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 19:02:29.323 [pool-9-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 19:02:29.331 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:29.331 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:29.332 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:29.439 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:29.439 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:29.440 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:29.440 [pool-9-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:29.440 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:29.440 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:02:29.440 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:29.501 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:29.502 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 19:02:29.502 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:02:29.612 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:29.613 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:29.613 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:29.660 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:29.661 [pool-9-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:29.661 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 19:02:29.662 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:29.713 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:02:29.714 [pool-9-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 19:02:29.714 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 19:02:29.714 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:29.714 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:29.762 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:29.763 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:02:29.764 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:29.816 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:29.817 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:29.817 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:29.864 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:29.864 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:29.865 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:29.916 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:29.917 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:29.917 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:29.973 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:29.974 [pool-9-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:29.974 [pool-9-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:30.021 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:30.021 [pool-9-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:30.022 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:02:30.022 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:30.071 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:30.071 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 19:02:30.072 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:02:30.121 [pool-9-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:30.122 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 19:02:30.123 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:02:30.179 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:30.179 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:30.180 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:30.226 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:02:30.226 [pool-9-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 19:02:30.226 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 19:02:30.226 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:30.227 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:30.326 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:30.327 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:30.327 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:02:30.327 [pool-9-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 19:02:30.328 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:30.328 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 19:02:30.328 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:02:30.377 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:30.377 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:30.378 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:30.481 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:30.481 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:30.482 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:30.535 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:30.535 [pool-9-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 19:02:30.536 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 19:02:30.536 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 19:02:30.536 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 19:02:30.536 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 19:02:30.536 [pool-9-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 19:02:30.536 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:30.536 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:30.589 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:30.589 [pool-9-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:30.590 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:02:30.590 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:30.638 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:30.638 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 19:02:30.639 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:02:30.732 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:30.732 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:30.733 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:30.743 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:30.743 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:30.743 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:30.794 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:02:30.794 [pool-9-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 19:02:30.794 [pool-9-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 19:02:30.794 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:30.795 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:30.843 [pool-9-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:30.843 [pool-9-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:30.844 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:02:30.844 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:30.893 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:30.894 [pool-9-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:30.895 [pool-9-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:30.955 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:30.955 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:30.955 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:31.004 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:31.004 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:31.004 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:31.052 [pool-9-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:31.052 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 19:02:31.053 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:02:31.100 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:31.100 [pool-9-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:31.101 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:02:31.101 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:31.150 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:31.151 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:02:31.151 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:31.202 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:31.202 [pool-9-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 19:02:31.203 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 19:02:31.203 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:02:31.251 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:31.252 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:31.252 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:31.344 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:31.345 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:02:31.345 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:31.352 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:31.352 [pool-9-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 19:02:31.352 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 19:02:31.352 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 19:02:31.352 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 19:02:31.352 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 19:02:31.352 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 19:02:31.352 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 19:02:31.353 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 19:02:31.353 [pool-9-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 19:02:31.353 [pool-9-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:02:31.400 [pool-9-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:31.401 [pool-9-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:31.401 [pool-9-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:31.457 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:31.458 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 19:02:31.458 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:02:31.509 [pool-9-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:02:31.510 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:31.510 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:31.559 [pool-9-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:31.560 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 19:02:31.560 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:02:31.613 [pool-9-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:02:31.613 [pool-9-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 19:02:31.660 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:31.660 [pool-9-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 19:02:31.661 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:31.661 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:31.708 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:31.709 [pool-9-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 19:02:31.709 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 19:02:31.710 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:02:31.817 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:31.818 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:02:31.818 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:02:31.867 [pool-9-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:31.867 [pool-9-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 19:02:31.969 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:02:31.969 [pool-9-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:02:31.969 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 19:02:31.970 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:02:32.178 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:02:32.178 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:02:32.179 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:02:32.329 [pool-9-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:02:32.330 [pool-9-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:02:32.330 [pool-9-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:02:32.472 [pool-9-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:02:32.472 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 19:02:32.473 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:02:32.668 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:32.668 [pool-9-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 19:02:32.668 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 19:02:32.669 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:02:33.301 [pool-9-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:02:33.301 [pool-9-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 19:02:33.301 [http-nio-10090-exec-9] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 19:06:06.403 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 19:06:06.404 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 19:06:06.594 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 19:06:06.595 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 19:06:06.595 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 19:06:06.774 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 19:06:06.775 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:06.775 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 19:06:06.951 [http-nio-10090-exec-2] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 19:06:06.951 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 19:06:06.951 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 19:06:06.952 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:06.952 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:07.202 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:07.215 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 19:06:07.215 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 19:06:07.381 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:07.381 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:07.381 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:07.836 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:07.837 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 19:06:07.837 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 19:06:07.858 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 19:06:07.858 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 19:06:08.081 [http-nio-10090-exec-2] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 19:06:08.082 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:08.082 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 19:06:08.235 [http-nio-10090-exec-2] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 19:06:08.235 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 19:06:08.236 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 19:06:08.399 [http-nio-10090-exec-2] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 19:06:08.399 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 19:06:08.400 [http-nio-10090-exec-2] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 19:06:08.400 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 19:06:08.400 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 19:06:08.717 [http-nio-10090-exec-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 19:06:08.717 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 19:06:08.719 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 19:06:08.720 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 19:06:08.720 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 19:06:08.721 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 19:06:08.721 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:08.721 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 19:06:08.721 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 19:06:08.736 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:08.736 [pool-10-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 19:06:08.961 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:08.961 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:08.961 [pool-10-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 19:06:08.961 [pool-10-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 19:06:08.961 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:08.962 [pool-10-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:06:08.962 [pool-10-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:06:08.962 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:08.962 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:09.099 [pool-10-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:06:09.099 [pool-10-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:06:09.099 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:09.099 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:09.099 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:09.099 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:09.150 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:09.150 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:09.150 [pool-10-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:09.150 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:09.151 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:06:09.151 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:09.151 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:09.258 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:09.258 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 19:06:09.259 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:09.259 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:09.299 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:09.299 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:09.299 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 19:06:09.299 [pool-10-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:09.300 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:09.300 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:09.300 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:06:09.300 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:09.310 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:09.310 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:09.310 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:09.412 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:09.413 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:09.413 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:09.413 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:09.413 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:09.413 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:09.457 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:09.458 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:09.458 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:09.507 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:09.508 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:06:09.508 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:09.558 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:09.558 [pool-10-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:09.558 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 19:06:09.558 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:09.617 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:09.617 [pool-10-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:09.617 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 19:06:09.619 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:09.657 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:09.658 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:06:09.659 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:09.674 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:09.674 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:09.674 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:09.759 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:09.760 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:09.760 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:09.770 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:09.771 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:09.771 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:09.774 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:09.775 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:09.775 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:09.823 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:09.824 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 19:06:09.825 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:06:09.876 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:09.876 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:09.877 [pool-10-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:09.877 [pool-10-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:09.877 [pool-10-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:09.878 [pool-10-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:09.931 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:09.932 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 19:06:09.933 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:06:09.984 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:06:09.984 [pool-10-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 19:06:09.985 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 19:06:09.985 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:09.985 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:10.044 [pool-10-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:10.046 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 19:06:10.046 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:06:10.077 [pool-10-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:10.078 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 19:06:10.078 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:06:10.097 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:06:10.097 [pool-10-thread-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 19:06:10.098 [pool-10-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 19:06:10.098 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:10.098 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:10.148 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:10.148 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:10.149 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:10.197 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:10.197 [pool-10-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 19:06:10.198 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 19:06:10.199 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:06:10.200 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:10.200 [pool-10-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 19:06:10.201 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 19:06:10.201 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:06:10.303 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:10.303 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:10.304 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:10.304 [pool-10-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:10.304 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:10.304 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:06:10.304 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:10.353 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:10.353 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:10.353 [pool-10-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 19:06:10.353 [pool-10-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 19:06:10.353 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 19:06:10.353 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 19:06:10.354 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 19:06:10.354 [pool-10-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 19:06:10.354 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 19:06:10.354 [pool-10-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:06:10.354 [pool-10-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 19:06:10.354 [pool-10-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:06:10.469 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:10.469 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:10.469 [pool-10-thread-3] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:06:10.470 [pool-10-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:10.470 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:10.470 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:10.470 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:10.470 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:10.470 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:06:10.470 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:10.529 [pool-10-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:06:10.529 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:10.529 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:10.626 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:10.626 [pool-10-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:10.627 [pool-10-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:10.673 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:10.674 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 19:06:10.674 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:10.674 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:10.675 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:10.675 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:10.675 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:10.730 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:10.730 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 19:06:10.731 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:10.731 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:10.784 [pool-10-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:10.785 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 19:06:10.785 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:06:10.836 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:10.836 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:10.837 [pool-10-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:10.837 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:10.837 [pool-10-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:10.837 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:10.886 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:10.886 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:10.887 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:10.949 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:10.949 [pool-10-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 19:06:10.950 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 19:06:10.950 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:06:10.988 [pool-10-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:10.988 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 19:06:10.988 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:06:11.001 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:11.001 [pool-10-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:11.002 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 19:06:11.002 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:11.052 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:11.053 [pool-10-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:11.053 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 19:06:11.053 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:11.103 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:11.103 [pool-10-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 19:06:11.103 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 19:06:11.103 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:11.103 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:11.103 [pool-10-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 19:06:11.103 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:11.103 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 19:06:11.104 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:06:11.221 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:11.222 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:11.222 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:11.229 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:11.229 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:11.229 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:11.279 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:11.279 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:11.279 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:11.349 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:11.349 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:11.349 [pool-10-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:11.349 [pool-10-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 19:06:11.350 [pool-10-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:11.350 [pool-10-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 19:06:11.350 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:11.350 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:11.407 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:11.408 [pool-10-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:11.408 [pool-10-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:11.459 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:11.459 [pool-10-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:11.459 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:06:11.459 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:11.506 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:11.506 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:11.506 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:11.526 [pool-10-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:11.526 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 19:06:11.527 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:06:11.581 [pool-10-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:11.582 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 19:06:11.582 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:06:11.635 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:11.635 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:11.636 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:11.642 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:11.642 [pool-10-thread-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:11.643 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:06:11.643 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:11.703 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:11.703 [pool-10-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 19:06:11.703 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 19:06:11.703 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:06:11.788 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:11.788 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:11.788 [pool-10-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 19:06:11.788 [pool-10-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:11.789 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 19:06:11.789 [pool-10-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:11.789 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:06:11.828 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:11.828 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:11.828 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:11.845 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:11.845 [pool-10-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 19:06:11.845 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 19:06:11.845 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 19:06:11.845 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 19:06:11.845 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 19:06:11.845 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 19:06:11.846 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:11.846 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:11.947 [pool-10-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:11.948 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 19:06:11.948 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:06:11.956 [pool-10-thread-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:11.957 [pool-10-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:11.957 [pool-10-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:12.002 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:12.002 [pool-10-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 19:06:12.002 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 19:06:12.003 [pool-10-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 19:06:12.003 [pool-10-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:06:12.071 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:12.072 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:12.072 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:12.145 [pool-10-thread-4] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:12.145 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:12.145 [pool-10-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 19:06:12.145 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 19:06:12.146 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 19:06:12.146 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:06:12.146 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:06:12.256 [pool-10-thread-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:06:12.257 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:12.257 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:12.274 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:12.274 [pool-10-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:12.274 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:06:12.275 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:12.322 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:12.322 [pool-10-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 19:06:12.323 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 19:06:12.323 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:06:12.373 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:12.374 [pool-10-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 19:06:12.374 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 19:06:12.374 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:12.374 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:12.422 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:12.422 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:12.422 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 19:06:12.423 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:12.423 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:12.423 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:12.423 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:12.480 [pool-10-thread-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:12.480 [pool-10-thread-4] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 19:06:12.480 [pool-10-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 19:06:12.480 [pool-10-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 19:06:12.480 [pool-10-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 19:06:12.480 [pool-10-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 19:06:12.480 [pool-10-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 19:06:12.480 [pool-10-thread-4] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 19:06:12.525 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:12.526 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:12.526 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:12.526 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:12.527 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:12.527 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:12.527 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:06:12.527 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:12.527 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:12.626 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:12.626 [pool-10-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:12.627 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:06:12.627 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:12.650 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:12.650 [pool-10-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:12.651 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 19:06:12.651 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:12.683 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:12.683 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:12.683 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:12.782 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:12.782 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:12.783 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:12.797 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:12.797 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:12.797 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:12.847 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:12.847 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 19:06:12.847 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:06:12.899 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:12.899 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:06:12.900 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:12.949 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:12.950 [pool-10-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:12.950 [pool-10-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:13.004 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:06:13.004 [pool-10-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 19:06:13.004 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 19:06:13.005 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:13.005 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:13.056 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:13.057 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:13.057 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:13.106 [pool-10-thread-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:13.107 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 19:06:13.107 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:06:13.168 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:13.168 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:13.168 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:13.218 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:13.219 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 19:06:13.219 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:06:13.276 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:13.276 [pool-10-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 19:06:13.277 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 19:06:13.277 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:06:13.330 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:13.330 [pool-10-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:13.331 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:06:13.331 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:13.396 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:06:13.396 [pool-10-thread-2] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 19:06:13.397 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 19:06:13.397 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:13.397 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:13.449 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:13.450 [pool-10-thread-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 19:06:13.450 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 19:06:13.450 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 19:06:13.450 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 19:06:13.450 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 19:06:13.450 [pool-10-thread-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 19:06:13.450 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:13.451 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:13.515 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:13.515 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:13.515 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:13.576 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:13.576 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:13.577 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:13.652 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:13.652 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:13.653 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:13.719 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:13.720 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:06:13.720 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:13.774 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:13.774 [pool-10-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:13.775 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:06:13.775 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:13.831 [pool-10-thread-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:13.832 [pool-10-thread-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:13.832 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:06:13.832 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:13.888 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:13.889 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:13.889 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:13.946 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:13.947 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:13.947 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:13.998 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:13.999 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:13.999 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:14.059 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:14.059 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 19:06:14.060 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:06:14.112 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:14.113 [pool-10-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:14.113 [pool-10-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:14.178 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:14.178 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:06:14.178 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:14.232 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:06:14.232 [pool-10-thread-3] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 19:06:14.232 [pool-10-thread-3] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 19:06:14.233 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:14.233 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:14.288 [pool-10-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:14.289 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 19:06:14.289 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:06:14.352 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:14.352 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:06:14.353 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:14.413 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:14.413 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:14.413 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:14.463 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:14.464 [pool-10-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 19:06:14.464 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 19:06:14.464 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:06:14.522 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:14.523 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 19:06:14.523 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:06:14.574 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:14.575 [pool-10-thread-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:14.575 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:06:14.576 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:14.625 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:14.626 [pool-10-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 19:06:14.626 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 19:06:14.626 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 19:06:14.626 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 19:06:14.626 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 19:06:14.626 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 19:06:14.626 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 19:06:14.626 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 19:06:14.627 [pool-10-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 19:06:14.627 [pool-10-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:06:14.724 [pool-10-thread-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:06:14.725 [pool-10-thread-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 19:06:14.736 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:14.736 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:14.737 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:14.785 [pool-10-thread-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:06:14.786 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:14.786 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:14.880 [pool-10-thread-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:14.880 [pool-10-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:14.881 [pool-10-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:14.982 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:14.983 [pool-10-thread-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 19:06:14.983 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:14.983 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:15.083 [pool-10-thread-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:15.084 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 19:06:15.084 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:06:15.255 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:15.256 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:06:15.256 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:06:15.308 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:15.309 [pool-10-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 19:06:15.310 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 19:06:15.310 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:06:15.402 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:06:15.402 [pool-10-thread-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:06:15.403 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 19:06:15.403 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:06:15.614 [pool-10-thread-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:15.614 [pool-10-thread-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 19:06:15.689 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:06:15.690 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:06:15.690 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:06:16.187 [pool-10-thread-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:06:16.188 [pool-10-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:06:16.188 [pool-10-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:06:16.384 [pool-10-thread-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:06:16.385 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 19:06:16.385 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:06:16.768 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:16.768 [pool-10-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 19:06:16.769 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 19:06:16.769 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:06:17.798 [pool-10-thread-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:06:17.799 [pool-10-thread-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 19:06:17.799 [http-nio-10090-exec-2] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 19:09:33.055 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-06-12 19:09:33.058 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-06-12 19:16:23.906 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5006 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-06-12 19:16:28.916 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 61030 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-06-12 19:16:28.917 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-06-12 19:16:29.767 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 19:16:29.769 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-06-12 19:16:29.789 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Elasticsearch repository interfaces.
2022-06-12 19:16:29.794 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 19:16:29.794 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-06-12 19:16:29.802 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-06-12 19:16:29.812 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 19:16:29.813 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-06-12 19:16:29.835 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2022-06-12 19:16:30.511 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-06-12 19:16:30.559 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-06-12 19:16:30.559 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-06-12 19:16:30.560 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-06-12 19:16:30.645 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-06-12 19:16:30.645 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1670 ms
2022-06-12 19:16:31.544 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-06-12 19:16:32.502 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-06-12 19:16:32.503 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-06-12 19:16:32.504 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-06-12 19:16:32.802 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onOpen ------
2022-06-12 19:16:32.846 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-06-12 19:16:32.861 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-06-12 19:16:32.872 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.516 seconds (JVM running for 25.012)
2022-06-12 19:16:37.732 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032597283"}
2022-06-12 19:16:39.963 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-06-12 19:16:39.963 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-06-12 19:16:39.965 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2022-06-12 19:16:40.237 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-06-12 19:16:42.690 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-06-12 19:16:42.700 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 19:16:42.728 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 19:16:42.734 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032602286"}
2022-06-12 19:16:42.862 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 19:16:42.867 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 19:16:42.867 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 19:16:42.993 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 19:16:42.995 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:42.995 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 19:16:43.137 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 19:16:43.138 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 19:16:43.139 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 19:16:43.141 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:43.142 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:16:43.294 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:16:43.315 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 19:16:43.316 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 19:16:43.467 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:16:43.468 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:43.469 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:16:43.657 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:16:43.658 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 19:16:43.659 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 19:16:43.681 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 19:16:43.681 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 19:16:43.812 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 19:16:43.813 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:43.814 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 19:16:44.011 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 19:16:44.013 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 19:16:44.013 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 19:16:44.145 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 19:16:44.146 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 19:16:44.146 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 19:16:44.147 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 19:16:44.148 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 19:16:44.497 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 19:16:44.498 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 19:16:44.500 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 19:16:44.500 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 19:16:44.501 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 19:16:44.501 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:16:44.663 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:16:44.664 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:44.665 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:44.893 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:44.894 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 19:16:44.895 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:44.896 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:45.064 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:45.066 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:16:45.066 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:45.229 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:45.230 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:16:45.232 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 19:16:45.232 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:45.402 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:45.403 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:45.404 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:45.598 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:45.601 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:45.602 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:16:45.761 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:16:45.764 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 19:16:45.765 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:16:45.964 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:45.965 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 19:16:45.966 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 19:16:45.966 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:16:46.158 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:46.158 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 19:16:46.159 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 19:16:46.159 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 19:16:46.159 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 19:16:46.160 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 19:16:46.161 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:16:46.364 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:16:46.366 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:46.367 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:46.517 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:46.518 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 19:16:46.519 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:46.519 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:46.723 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:46.724 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:16:46.724 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:46.905 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:46.905 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:16:46.906 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 19:16:46.906 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:47.112 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:47.113 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:47.113 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:47.261 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:47.262 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:47.263 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:16:47.415 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:16:47.417 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 19:16:47.417 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:16:47.642 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:47.643 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 19:16:47.644 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 19:16:47.644 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:16:47.747 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032607289"}
2022-06-12 19:16:47.808 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:47.808 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 19:16:47.809 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 19:16:47.810 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 19:16:47.810 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:16:48.021 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:16:48.022 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:48.022 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:48.177 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:48.178 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 19:16:48.179 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:48.180 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:48.376 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:48.377 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:16:48.378 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:48.530 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:48.531 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:16:48.532 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 19:16:48.532 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:48.717 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:48.718 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:48.718 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:48.867 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:48.868 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:48.868 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:16:49.082 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:16:49.083 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 19:16:49.084 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:16:49.334 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:49.335 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 19:16:49.336 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 19:16:49.336 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:16:49.548 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:49.548 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 19:16:49.548 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 19:16:49.549 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 19:16:49.549 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 19:16:49.549 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 19:16:49.549 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 19:16:49.549 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:49.550 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:49.711 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:49.712 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:16:49.713 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:49.899 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:49.900 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:16:49.901 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:16:49.902 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:50.105 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:50.106 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:50.107 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:50.359 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:50.361 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:16:50.361 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:50.516 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:50.518 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:50.518 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:50.710 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:50.713 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 19:16:50.714 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:16:50.872 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:16:50.873 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 19:16:50.873 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 19:16:50.874 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:50.874 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:51.103 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:51.103 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:16:51.103 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:51.314 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:51.315 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:16:51.316 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:16:51.316 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:51.491 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:51.491 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:51.492 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:52.108 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:52.110 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:16:52.111 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:52.279 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:52.280 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:52.280 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:52.478 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:52.479 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 19:16:52.480 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:16:52.723 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032612290"}
2022-06-12 19:16:52.724 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:16:52.724 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 19:16:52.724 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 19:16:52.725 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:52.725 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:52.875 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:52.876 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:16:52.876 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:52.992 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:52.993 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:16:52.994 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:16:52.994 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:53.159 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:53.160 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:53.161 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:53.381 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:53.382 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:53.382 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:16:53.595 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:16:53.597 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 19:16:53.597 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:16:53.793 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:53.794 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 19:16:53.795 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 19:16:53.795 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:16:53.998 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:53.999 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 19:16:54.000 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 19:16:54.000 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:54.001 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:54.197 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:54.198 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:16:54.198 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:54.336 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:54.337 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:16:54.339 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:16:54.340 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:54.504 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:54.505 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:54.506 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:54.654 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:54.656 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:54.657 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:16:54.822 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:16:54.822 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 19:16:54.823 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:16:54.979 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:54.979 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 19:16:54.980 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 19:16:54.980 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:16:55.227 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:55.227 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 19:16:55.227 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 19:16:55.228 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:55.228 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:55.459 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:55.460 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:16:55.461 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:55.698 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:55.699 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:16:55.699 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:16:55.700 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:56.016 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:56.016 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:56.017 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:56.175 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:56.177 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:16:56.177 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:56.336 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:56.337 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:56.337 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:56.496 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:56.497 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 19:16:56.498 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:16:56.758 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:16:56.759 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 19:16:56.759 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 19:16:56.760 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:56.761 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:56.984 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:56.984 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:16:56.985 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:57.228 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:57.229 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:16:57.230 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:16:57.230 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:57.430 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:57.431 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:16:57.431 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:57.597 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:57.599 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:57.599 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:16:57.728 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032617293"}
2022-06-12 19:16:57.784 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:16:57.785 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 19:16:57.785 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:16:57.931 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:57.931 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 19:16:57.932 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 19:16:57.932 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:16:58.150 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:58.151 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 19:16:58.151 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 19:16:58.151 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 19:16:58.151 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 19:16:58.151 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 19:16:58.151 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 19:16:58.151 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 19:16:58.152 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 19:16:58.152 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 19:16:58.153 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:16:58.344 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:16:58.344 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:16:58.345 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:58.508 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:58.509 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 19:16:58.509 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:58.509 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:58.683 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:58.684 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:16:58.685 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:16:58.889 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:16:58.889 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:16:58.890 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 19:16:58.890 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:16:59.094 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:16:59.095 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:16:59.095 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:16:59.243 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:16:59.244 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:16:59.245 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:16:59.421 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:16:59.422 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 19:16:59.424 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:16:59.631 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:59.632 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 19:16:59.632 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 19:16:59.633 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:16:59.877 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:16:59.878 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 19:16:59.878 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 19:16:59.878 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 19:16:59.878 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 19:16:59.880 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 19:16:59.880 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:17:00.079 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:17:00.079 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:00.079 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:00.238 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:00.238 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 19:17:00.239 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:00.240 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:00.396 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:00.397 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:17:00.397 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:00.554 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:00.554 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:17:00.555 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 19:17:00.556 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:17:00.789 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:17:00.790 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:00.790 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:01.009 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:01.010 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:01.011 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:17:01.486 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:17:01.488 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 19:17:01.488 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:17:01.711 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:17:01.712 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 19:17:01.714 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 19:17:01.714 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:17:01.997 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:17:01.997 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 19:17:01.997 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 19:17:01.998 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 19:17:01.998 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:17:02.199 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:17:02.200 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:02.200 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:02.349 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:02.350 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 19:17:02.351 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:02.351 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:02.536 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:02.538 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:17:02.538 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:02.689 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:02.690 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:17:02.691 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 19:17:02.692 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:17:02.747 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032622296"}
2022-06-12 19:17:02.893 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:17:02.894 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:02.894 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:03.046 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:03.046 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:03.047 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:17:03.473 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:17:03.474 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 19:17:03.475 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:17:03.655 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:17:03.655 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 19:17:03.656 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 19:17:03.656 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:17:03.856 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:17:03.857 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 19:17:03.857 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 19:17:03.857 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 19:17:03.858 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 19:17:03.858 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 19:17:03.858 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 19:17:03.858 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:03.859 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:04.072 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:04.073 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:17:04.074 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:04.230 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:04.230 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:17:04.231 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:17:04.232 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:17:04.441 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:17:04.442 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:04.444 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:04.586 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:04.586 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:17:04.587 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:17:04.740 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:17:04.740 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:04.740 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:04.926 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:04.927 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 19:17:04.928 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:17:05.113 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:17:05.114 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 19:17:05.114 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 19:17:05.114 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:05.114 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:05.344 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:05.345 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:17:05.345 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:05.494 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:05.494 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:17:05.495 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:17:05.495 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:17:05.708 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:17:05.709 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:05.709 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:05.887 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:05.888 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:17:05.889 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:17:06.101 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:17:06.102 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:06.103 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:06.258 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:06.259 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 19:17:06.260 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:17:06.464 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:17:06.465 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 19:17:06.465 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 19:17:06.466 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:06.466 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:06.687 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:06.688 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:17:06.688 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:06.841 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:06.842 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:17:06.843 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:17:06.844 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:17:07.099 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:17:07.100 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:07.100 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:07.231 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:07.233 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:07.234 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:17:07.386 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:17:07.387 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 19:17:07.388 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:17:07.582 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:17:07.582 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 19:17:07.583 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 19:17:07.584 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:17:07.720 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:17:07.720 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 19:17:07.720 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 19:17:07.722 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:07.723 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:07.767 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032627301"}
2022-06-12 19:17:07.898 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:07.899 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:17:07.899 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:08.029 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:08.030 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:17:08.031 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:17:08.032 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:17:08.232 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:17:08.233 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:08.234 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:08.396 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:08.397 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:17:08.398 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:17:08.564 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:17:08.564 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:08.565 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:08.717 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:08.718 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 19:17:08.718 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:17:08.909 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:17:08.910 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 19:17:08.910 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 19:17:08.911 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:08.911 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:09.099 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:09.100 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:17:09.101 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:09.292 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:09.292 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:17:09.293 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:17:09.294 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:17:09.519 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:17:09.520 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:09.521 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:09.675 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:09.676 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:09.677 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:17:09.862 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:17:09.863 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 19:17:09.864 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:17:10.051 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:17:10.052 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 19:17:10.053 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 19:17:10.053 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:17:10.260 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:17:10.261 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 19:17:10.261 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 19:17:10.261 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:10.262 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:10.477 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:10.477 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:17:10.478 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:17:10.629 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:17:10.629 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:17:10.630 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:17:10.631 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:17:10.839 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:17:10.840 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:17:10.841 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:17:10.991 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:17:10.992 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:17:10.993 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:17:11.137 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:17:11.138 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 19:17:11.139 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:17:11.325 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:17:11.325 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 19:17:11.326 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 19:17:11.327 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:17:11.537 [http-nio-10090-exec-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:17:11.537 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 19:17:11.537 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 19:17:11.537 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 19:17:11.537 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 19:17:11.537 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 19:17:11.538 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 19:17:11.538 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 19:17:11.538 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 19:17:12.778 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032632305"}
2022-06-12 19:17:17.718 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032637308"}
2022-06-12 19:17:22.768 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032642313"}
2022-06-12 19:17:27.720 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032647315"}
2022-06-12 19:17:32.720 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032652317"}
2022-06-12 19:17:37.762 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032657319"}
2022-06-12 19:17:42.796 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032662322"}
2022-06-12 19:17:48.391 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032667325"}
2022-06-12 19:17:52.738 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032672329"}
2022-06-12 19:17:57.824 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032677333"}
2022-06-12 19:18:02.734 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032682336"}
2022-06-12 19:18:08.019 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032687339"}
2022-06-12 19:18:12.756 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032692343"}
2022-06-12 19:18:17.723 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032697345"}
2022-06-12 19:18:22.748 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032702347"}
2022-06-12 19:18:27.400 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-06-12 19:18:27.408 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-06-12 19:18:47.314 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5000 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-06-12 19:18:52.323 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 61044 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-06-12 19:18:52.324 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-06-12 19:18:53.111 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 19:18:53.114 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-06-12 19:18:53.133 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 Elasticsearch repository interfaces.
2022-06-12 19:18:53.138 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 19:18:53.139 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-06-12 19:18:53.147 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-06-12 19:18:53.157 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 19:18:53.158 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-06-12 19:18:53.182 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2022-06-12 19:18:53.847 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-06-12 19:18:53.900 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-06-12 19:18:53.901 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-06-12 19:18:53.902 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-06-12 19:18:54.000 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-06-12 19:18:54.000 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1623 ms
2022-06-12 19:18:54.895 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-06-12 19:18:55.881 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-06-12 19:18:55.883 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-06-12 19:18:55.883 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-06-12 19:18:56.286 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-06-12 19:18:56.305 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-06-12 19:18:56.317 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.519 seconds (JVM running for 25.006)
2022-06-12 19:18:56.554 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onOpen ------
2022-06-12 19:19:01.195 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-06-12 19:19:01.195 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-06-12 19:19:01.197 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2022-06-12 19:19:01.483 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-06-12 19:19:01.627 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032741371"}
2022-06-12 19:19:04.329 [http-nio-10090-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-06-12 19:19:04.341 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type not in (16,27,38) 
2022-06-12 19:19:04.371 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 19:19:04.519 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getUserBillTotalByUser - <==      Total: 1
2022-06-12 19:19:04.524 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==>  Preparing: SELECT SUM(size) as size FROM `bib_cfd`.`user_bill` WHERE type in (41,52) and source_id in (SELECT source_id FROM `bib_cfd`.`user_bill` as bill,`bib_cfd`.`swap_order` as swap WHERE bill.source_id=swap.id and swap.margin_type='FIXED' and bill.`user_id` = '51905047' AND type=4 AND `size` = '0') 
2022-06-12 19:19:04.525 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - ==> Parameters: 
2022-06-12 19:19:04.671 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getUserBillByUserForFixed - <==      Total: 1
2022-06-12 19:19:04.673 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:04.673 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - ==> Parameters: 
2022-06-12 19:19:04.845 [http-nio-10090-exec-1] DEBUG c.z.demo.dao.dev1.AccountDao.getUserBalanceByUser - <==      Total: 1
2022-06-12 19:19:04.846 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，数据库金额，balance:1011.0317222400000002,hold:0E-16
2022-06-12 19:19:04.847 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，账户金额:1018.72392472,操作后，账户变化金额:-7.6922024800000000,逐仓爆仓盈余对应的平仓手续费总值:0,操作后，计算剩余的金额:1011.0317222400000000,操作后，数据库存储的总金额:1011.0317222400000002
2022-06-12 19:19:04.849 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:04.849 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:05.036 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:05.059 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where user_id = ? and type in (16,27,38) AND `created_date` > '2022-06-12 17:00:00' 
2022-06-12 19:19:05.060 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - ==> Parameters: 51905047(String)
2022-06-12 19:19:05.229 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillTotalToPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:05.230 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:05.231 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:05.388 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:05.389 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，user_partner_balance数据库金额，balance:0.8588602480000000,hold:0E-16
2022-06-12 19:19:05.390 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，user_partner_balance账户金额:0.2,操作后，账户变化金额:0.6588602480000000,操作后，计算剩余的金额:0.8588602480000000,操作后，数据库存储的总金额:0.8588602480000000
2022-06-12 19:19:05.412 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==>  Preparing: SELECT user_id userId,sum(size) total from `bib_cfd`.`user_bill` where created_date>'2022-06-12 17:00:00' and user_id = ? and type in (5,6) 
2022-06-12 19:19:05.412 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - ==> Parameters: 51905047(String)
2022-06-12 19:19:05.602 [http-nio-10090-exec-1] DEBUG c.z.d.d.d.A.getUserBillToOtcAndAssetTotalByUser - <==      Total: 1
2022-06-12 19:19:05.603 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`otc_user_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:05.603 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - ==> Parameters: 
2022-06-12 19:19:05.790 [http-nio-10090-exec-1] DEBUG c.z.d.dao.dev1.AccountDao.getOtcUserBalanceByUser - <==      Total: 1
2022-06-12 19:19:05.791 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance FROM `bib_cfd`.`asset_user_balance` WHERE `user_id` = '51905047' AND `currency_id` = '6' LIMIT 0,1000 
2022-06-12 19:19:05.791 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - ==> Parameters: 
2022-06-12 19:19:05.962 [http-nio-10090-exec-1] DEBUG c.z.d.d.dev1.AccountDao.getAssetUserBalanceByUser - <==      Total: 1
2022-06-12 19:19:05.963 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 操作后，otc&asset_user_balance数据库金额，balance:10.1100000000000000
2022-06-12 19:19:05.963 [http-nio-10090-exec-1] INFO  com.zmj.demo.common.dev1.BalanceCalc - 下单前，otc&asset_user_balance账户金额:10.11,操作后，账户变化金额:0,操作后，计算剩余的金额:10.11,操作后，数据库存储的总金额:10.1100000000000000
2022-06-12 19:19:05.964 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==>  Preparing: SELECT user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId FROM `bib_cfd`.`user_bill` WHERE `user_id` = '51905047' and created_date>='2022-06-12 17:00:00' 
2022-06-12 19:19:05.964 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - ==> Parameters: 
2022-06-12 19:19:06.344 [http-nio-10090-exec-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBillByUser - <==      Total: 36
2022-06-12 19:19:06.344 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 用户:51905047,流水:[UserBillChain(userId=51905047, type=3, size=-8.6316212121212121, preBalance=1018.7239247200000002, postBalance=1010.0923035078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.3418122000000000, preBalance=1010.0923035078787881, postBalance=1009.7504913078787881, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77884, note=逐仓市价开仓,订单号:77884,成交价格:27565.5000000000000000,开仓数量:31.0000000000000000,开仓保证金:-8.6316212121212121,开仓手续费:-0.3418122000000000, createdDate=2022-06-12 17:25:37, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341812200000000, preBalance=0.2000000000000000, postBalance=0.2341812200000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77884, note=手续费返佣：0.03418122,单号来源:77884,用户来源: 51905047, createdDate=2022-06-12 17:25:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-15.5890424242424242, preBalance=1009.7504913078787881, postBalance=994.1614488836363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.6173260800000000, preBalance=994.1614488836363639, postBalance=993.5441228036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77885, note=逐仓市价开仓,订单号:77885,成交价格:27559.2000000000000000,开仓数量:56.0000000000000000,开仓保证金:-15.5890424242424242,开仓手续费:-0.6173260800000000, createdDate=2022-06-12 17:25:41, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-27.2818260000000000, preBalance=993.5441228036363639, postBalance=966.2622968036363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-1.0912730400000000, preBalance=966.2622968036363639, postBalance=965.1710237636363639, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77886, note=逐仓市价开仓,订单号:77886,成交价格:27557.4000000000000000,开仓数量:99.0000000000000000,开仓保证金:-27.2818260000000000,开仓手续费:-1.0912730400000000, createdDate=2022-06-12 17:25:49, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0617326080000000, preBalance=0.2341812200000000, postBalance=0.2959138280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77885, note=手续费返佣：0.061732608,单号来源:77885,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1091273040000000, preBalance=0.2959138280000000, postBalance=0.4050411320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77886, note=手续费返佣：0.109127304,单号来源:77886,用户来源: 51905047, createdDate=2022-06-12 17:25:50, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=7.7760212121212121, preBalance=965.1710237636363639, postBalance=972.6055750157575760, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓盈亏:-0.8556000000000000,手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=16.7762424242424242, preBalance=972.6055750157575760, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓盈亏:1.1872000000000000,手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.3414699600000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77887, note=逐仓市价全部平仓,订单号:77887,仓位id:567427085531275264,金额:8.6316212121212121,成交价格:27537.9000000000000000,平仓数量:31.0000000000000000,平仓手续费:-0.3414699600000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.6168512000000000, preBalance=988.7649662400000002, postBalance=988.7649662400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77888, note=逐仓市价全部平仓,订单号:77888,仓位id:567427105253900288,金额:15.5890424242424242,成交价格:27538.0000000000000000,平仓数量:56.0000000000000000,平仓手续费:-0.6168512000000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=25.3513260000000000, preBalance=988.7649662400000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓盈亏:-1.9305000000000000,手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-1.0905008400000000, preBalance=1013.0257914000000002, postBalance=1013.0257914000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77889, note=逐仓市价全部平仓,订单号:77889,仓位id:567427135368765440,金额:27.2818260000000000,成交价格:27537.9000000000000000,平仓数量:99.0000000000000000,平仓手续费:-1.0905008400000000, createdDate=2022-06-12 17:26:38, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0341469960000000, preBalance=0.4050411320000000, postBalance=0.4391881280000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77887, note=手续费返佣：0.034146996,单号来源:77887,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0616851200000000, preBalance=0.4391881280000000, postBalance=0.5008732480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77888, note=手续费返佣：0.06168512,单号来源:77888,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.1090500840000000, preBalance=0.5008732480000000, postBalance=0.6099233320000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77889, note=手续费返佣：0.109050084,单号来源:77889,用户来源: 51905047, createdDate=2022-06-12 17:26:40, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-4.8445980000000000, preBalance=1013.0257914000000002, postBalance=1008.1811934000000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.1937839200000000, preBalance=1008.1811934000000002, postBalance=1007.9874094800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77890, note=逐仓市价开仓,订单号:77890,成交价格:1468.0600000000000000,开仓数量:33.0000000000000000,开仓保证金:-4.8445980000000000,开仓手续费:-0.1937839200000000, createdDate=2022-06-12 17:34:16, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193783920000000, preBalance=0.6099233320000000, postBalance=0.6293017240000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77890, note=手续费返佣：0.019378392,单号来源:77890,用户来源: 51905047, createdDate=2022-06-12 17:34:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=3, size=-12.9162880000000000, preBalance=1007.9874094800000002, postBalance=995.0711214800000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5166515200000000, preBalance=995.0711214800000002, postBalance=994.5544699600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77891, note=逐仓市价开仓,订单号:77891,成交价格:1467.7600000000000000,开仓数量:88.0000000000000000,开仓保证金:-12.9162880000000000,开仓手续费:-0.5166515200000000, createdDate=2022-06-12 17:34:20, fromUserId=0, total=null), UserBillChain(userId=51905047, type=3, size=-13.3602560000000000, preBalance=994.5544699600000002, postBalance=981.1942139600000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=51, size=-0.5344102400000000, preBalance=981.1942139600000002, postBalance=980.6598037200000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77892, note=逐仓市价开仓,订单号:77892,成交价格:1468.1600000000000000,开仓数量:91.0000000000000000,开仓保证金:-13.3602560000000000,开仓手续费:-0.5344102400000000, createdDate=2022-06-12 17:34:27, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0516651520000000, preBalance=0.6293017240000000, postBalance=0.6809668760000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77891, note=手续费返佣：0.051665152,单号来源:77891,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534410240000000, preBalance=0.6809668760000000, postBalance=0.7344079000000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77892, note=手续费返佣：0.053441024,单号来源:77892,用户来源: 51905047, createdDate=2022-06-12 17:34:30, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=4, size=4.6894980000000000, preBalance=980.6598037200000002, postBalance=985.1555798400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓盈亏:-0.1551000000000000,手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.0570880000000000, preBalance=985.1555798400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓盈亏:0.1408000000000000,手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.1937218800000000, preBalance=997.6960726400000002, postBalance=997.6960726400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77893, note=逐仓市价全部平仓,订单号:77893,仓位id:567429263456542720,金额:4.8445980000000000,成交价格:1467.5900000000000000,平仓数量:33.0000000000000000,平仓手续费:-0.1937218800000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=4, size=13.8698560000000000, preBalance=997.6960726400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓盈亏:0.5096000000000000,手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5165952000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77894, note=逐仓市价全部平仓,订单号:77894,仓位id:567429280923398144,金额:12.9162880000000000,成交价格:1467.6000000000000000,平仓数量:88.0000000000000000,平仓手续费:-0.5165952000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=52, size=-0.5342064000000000, preBalance=1011.0317222400000002, postBalance=1011.0317222400000002, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=51904446, parentId=51904446, sourceId=77895, note=逐仓市价全部平仓,订单号:77895,仓位id:567429310573187072,金额:13.3602560000000000,成交价格:1467.6000000000000000,平仓数量:91.0000000000000000,平仓手续费:-0.5342064000000000, createdDate=2022-06-12 17:35:12, fromUserId=0, total=null), UserBillChain(userId=51905047, type=16, size=0.0193721880000000, preBalance=0.7344079000000000, postBalance=0.7537800880000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77893, note=手续费返佣：0.019372188,单号来源:77893,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0516595200000000, preBalance=0.7537800880000000, postBalance=0.8054396080000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77894, note=手续费返佣：0.05165952,单号来源:77894,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null), UserBillChain(userId=51905047, type=16, size=0.0534206400000000, preBalance=0.8054396080000000, postBalance=0.8588602480000000, preProfit=0E-16, postProfit=0E-16, preMargin=0E-16, postMargin=0E-16, partnerId=null, parentId=null, sourceId=77895, note=手续费返佣：0.05342064,单号来源:77895,用户来源: 51905047, createdDate=2022-06-12 17:35:20, fromUserId=51905047, total=null)]
2022-06-12 19:19:06.346 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 19:19:06.347 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-8.6316212121212121
2022-06-12 19:19:06.359 [thread-run-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77884' LIMIT 0,1 
2022-06-12 19:19:06.359 [thread-run-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:19:06.482 [thread-run-1] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:19:06.483 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:06.483 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:06.530 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032746374"}
2022-06-12 19:19:06.703 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:06.705 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.3418122000000000
2022-06-12 19:19:06.707 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:06.708 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:06.940 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:06.941 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:06.941 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:07.095 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:07.096 [thread-run-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:07.098 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77884' LIMIT 0,1000 
2022-06-12 19:19:07.099 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:07.328 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:07.329 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:07.331 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:07.482 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:07.486 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:07.486 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:07.683 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:07.686 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 19:19:07.686 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:19:07.903 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:07.904 [thread-run-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77884,数据库:0.03418122,计算:0.034181
2022-06-12 19:19:07.906 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77884' and type=? limit 0,100 
2022-06-12 19:19:07.906 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:19:08.111 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:08.112 [thread-run-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77884,比列:0.900000,数据库:0.3076309800000000,计算得:0.307630
2022-06-12 19:19:08.113 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341812200000000
2022-06-12 19:19:08.114 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2000000000000000,分佣金额:0.0341812200000000,之后余额:0.2341812200000000
2022-06-12 19:19:08.114 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-15.5890424242424242
2022-06-12 19:19:08.116 [thread-run-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77885' LIMIT 0,1 
2022-06-12 19:19:08.117 [thread-run-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:19:08.356 [thread-run-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:19:08.358 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:08.358 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:08.524 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:08.525 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.6173260800000000
2022-06-12 19:19:08.527 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:08.528 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:08.747 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:08.749 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:08.750 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:08.910 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:08.911 [thread-run-5] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:08.912 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77885' LIMIT 0,1000 
2022-06-12 19:19:08.913 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:09.080 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:09.081 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:09.081 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:09.249 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:09.250 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:09.251 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:09.423 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:09.425 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 19:19:09.426 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:19:09.675 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:09.675 [thread-run-5] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77885,数据库:0.06173260,计算:0.061732
2022-06-12 19:19:09.676 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77885' and type=? limit 0,100 
2022-06-12 19:19:09.677 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:19:09.849 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:09.849 [thread-run-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77885,比列:0.900000,数据库:0.5555934720000000,计算得:0.555593
2022-06-12 19:19:09.850 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-27.2818260000000000
2022-06-12 19:19:09.852 [thread-run-6] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77886' LIMIT 0,1 
2022-06-12 19:19:09.852 [thread-run-6] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:19:10.054 [thread-run-6] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:19:10.055 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:10.055 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:10.218 [thread-run-6] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:10.219 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-1.0912730400000000
2022-06-12 19:19:10.221 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:10.222 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:10.461 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:10.462 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:10.462 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:10.621 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:10.621 [thread-run-7] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:10.623 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77886' LIMIT 0,1000 
2022-06-12 19:19:10.623 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:10.809 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:10.810 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:10.811 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:10.958 [thread-run-7] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:10.959 [thread-run-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:10.960 [thread-run-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:11.150 [thread-run-7] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:11.151 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 19:19:11.152 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:19:11.311 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:11.312 [thread-run-7] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77886,数据库:0.10912730,计算:0.109127
2022-06-12 19:19:11.313 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77886' and type=? limit 0,100 
2022-06-12 19:19:11.313 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:19:11.519 [thread-run-7] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:11.520 [thread-run-7] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77886,比列:0.900000,数据库:0.9821457360000000,计算得:0.982145
2022-06-12 19:19:11.521 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0617326080000000
2022-06-12 19:19:11.522 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2341812200000000,分佣金额:0.0617326080000000,之后余额:0.2959138280000000
2022-06-12 19:19:11.522 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1091273040000000
2022-06-12 19:19:11.523 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.2959138280000000,分佣金额:0.1091273040000000,之后余额:0.4050411320000000
2022-06-12 19:19:11.523 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:7.7760212121212121
2022-06-12 19:19:11.525 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:11.525 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:11.566 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032751377"}
2022-06-12 19:19:11.725 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:11.726 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:11.727 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:11.879 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:11.880 [thread-run-10] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:11.881 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:19:11.882 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:12.019 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:12.021 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:12.021 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:12.222 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:12.224 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:19:12.225 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:12.408 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:12.410 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:12.410 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:12.573 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:12.575 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,1 
2022-06-12 19:19:12.575 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:19:12.799 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:19:12.800 [thread-run-10] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77887,计算得:-0.855600
2022-06-12 19:19:12.801 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:16.7762424242424242
2022-06-12 19:19:12.802 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:12.803 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:12.992 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:12.993 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:12.994 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:13.208 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:13.209 [thread-run-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:13.210 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:19:13.211 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:13.376 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:13.378 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:13.378 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:13.569 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:13.571 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:19:13.571 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:13.750 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:13.751 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:13.751 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:13.944 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:13.945 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,1 
2022-06-12 19:19:13.946 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:19:14.162 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:19:14.162 [thread-run-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77888,计算得:1.187200
2022-06-12 19:19:14.163 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.3414699600000000
2022-06-12 19:19:14.164 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:14.165 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:14.342 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:14.344 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:14.344 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:14.564 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:14.564 [thread-run-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:14.565 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77887' LIMIT 0,1000 
2022-06-12 19:19:14.565 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:14.810 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:14.811 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:14.812 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:15.016 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:15.019 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:15.019 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:15.247 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:15.249 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 19:19:15.249 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:19:15.412 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:15.413 [thread-run-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77887,数据库:0.03414699,计算:0.034146
2022-06-12 19:19:15.414 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77887' and type=? limit 0,100 
2022-06-12 19:19:15.414 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:19:15.642 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:15.642 [thread-run-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77887,比列:0.900000,数据库:0.3073229640000000,计算得:0.307322
2022-06-12 19:19:15.643 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.6168512000000000
2022-06-12 19:19:15.644 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:15.644 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:15.851 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:15.853 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:15.853 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:16.064 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:16.065 [thread-run-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:16.066 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77888' LIMIT 0,1000 
2022-06-12 19:19:16.067 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:16.317 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:16.319 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:16.319 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:16.446 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:16.448 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:16.448 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:16.578 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032756383"}
2022-06-12 19:19:16.651 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:16.653 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 19:19:16.653 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:19:16.821 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:16.822 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77888,数据库:0.06168512,计算:0.061685
2022-06-12 19:19:16.823 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77888' and type=? limit 0,100 
2022-06-12 19:19:16.823 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:19:17.022 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:17.023 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77888,比列:0.900000,数据库:0.5551660800000000,计算得:0.555166
2022-06-12 19:19:17.024 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:25.3513260000000000
2022-06-12 19:19:17.025 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:17.026 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:17.225 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:17.227 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:17.227 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:17.417 [thread-run-4] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:17.418 [thread-run-4] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:17.418 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:19:17.419 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:17.794 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:17.795 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:17.796 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:17.997 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:17.998 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:19:17.999 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:18.317 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:18.318 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:18.318 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:18.495 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:18.496 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,1 
2022-06-12 19:19:18.497 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:19:18.687 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:19:18.688 [thread-run-4] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77889,计算得:-1.930500
2022-06-12 19:19:18.688 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-1.0905008400000000
2022-06-12 19:19:18.689 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:18.689 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:18.819 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:18.820 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:18.821 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:18.983 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:18.984 [thread-run-5] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:18.985 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77889' LIMIT 0,1000 
2022-06-12 19:19:18.985 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:19.135 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:19.136 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%btcusdt%' 
2022-06-12 19:19:19.137 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:19.355 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:19.356 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:19.357 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:19.517 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:19.518 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 19:19:19.519 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:19:19.681 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:19.682 [thread-run-5] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77889,数据库:0.10905008,计算:0.109050
2022-06-12 19:19:19.683 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77889' and type=? limit 0,100 
2022-06-12 19:19:19.683 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:19:19.869 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:19.869 [thread-run-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77889,比列:0.900000,数据库:0.9814507560000000,计算得:0.981450
2022-06-12 19:19:19.870 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0341469960000000
2022-06-12 19:19:19.871 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4050411320000000,分佣金额:0.0341469960000000,之后余额:0.4391881280000000
2022-06-12 19:19:19.871 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0616851200000000
2022-06-12 19:19:19.872 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.4391881280000000,分佣金额:0.0616851200000000,之后余额:0.5008732480000000
2022-06-12 19:19:19.872 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.1090500840000000
2022-06-12 19:19:19.872 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.5008732480000000,分佣金额:0.1090500840000000,之后余额:0.6099233320000000
2022-06-12 19:19:19.873 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-4.8445980000000000
2022-06-12 19:19:19.873 [thread-run-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77890' LIMIT 0,1 
2022-06-12 19:19:19.874 [thread-run-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:19:20.046 [thread-run-9] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:19:20.047 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:20.048 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:20.238 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:20.239 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.1937839200000000
2022-06-12 19:19:20.240 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:20.241 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:20.447 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:20.448 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:20.449 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:20.612 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:20.613 [thread-run-10] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:20.614 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77890' LIMIT 0,1000 
2022-06-12 19:19:20.615 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:20.813 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:20.814 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:20.815 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:21.015 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:21.017 [thread-run-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:21.018 [thread-run-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:21.229 [thread-run-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:21.230 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 19:19:21.232 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:19:21.465 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:21.466 [thread-run-10] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77890,数据库:0.01937839,计算:0.019378
2022-06-12 19:19:21.467 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77890' and type=? limit 0,100 
2022-06-12 19:19:21.468 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:19:21.590 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032761385"}
2022-06-12 19:19:21.649 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:21.650 [thread-run-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77890,比列:0.900000,数据库:0.1744055280000000,计算得:0.174405
2022-06-12 19:19:21.651 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193783920000000
2022-06-12 19:19:21.651 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6099233320000000,分佣金额:0.0193783920000000,之后余额:0.6293017240000000
2022-06-12 19:19:21.652 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-12.9162880000000000
2022-06-12 19:19:21.652 [thread-run-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77891' LIMIT 0,1 
2022-06-12 19:19:21.653 [thread-run-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:19:21.811 [thread-run-2] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:19:21.812 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:21.812 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:21.979 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:21.980 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5166515200000000
2022-06-12 19:19:21.981 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:21.982 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:22.185 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:22.186 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:22.187 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:22.514 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:22.515 [thread-run-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:22.516 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77891' LIMIT 0,1000 
2022-06-12 19:19:22.516 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:23.333 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:23.334 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:23.335 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:23.510 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:23.511 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:23.512 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:23.676 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:23.677 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 19:19:23.678 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:19:23.946 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:23.946 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77891,数据库:0.05166515,计算:0.051665
2022-06-12 19:19:23.948 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77891' and type=? limit 0,100 
2022-06-12 19:19:23.949 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:19:24.413 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:24.414 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77891,比列:0.900000,数据库:0.4649863680000000,计算得:0.464986
2022-06-12 19:19:24.414 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓-保证金:-13.3602560000000000
2022-06-12 19:19:24.416 [thread-run-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `type` IS NULL AND `order_id` = '77892' LIMIT 0,1 
2022-06-12 19:19:24.416 [thread-run-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - ==> Parameters: 
2022-06-12 19:19:24.594 [thread-run-4] DEBUG c.z.d.dao.dev1.AccountDao.positionActionForMargin - <==      Total: 1
2022-06-12 19:19:24.595 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:24.596 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:24.861 [thread-run-4] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:24.861 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 开仓手续费(永续合约) -扣用户:-0.5344102400000000
2022-06-12 19:19:24.863 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:24.863 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:25.074 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:25.075 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:25.076 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:25.359 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:25.360 [thread-run-5] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:25.361 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77892' LIMIT 0,1000 
2022-06-12 19:19:25.361 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:25.696 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:25.697 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:25.698 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:25.990 [thread-run-5] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:25.991 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:25.991 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:26.177 [thread-run-5] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:26.178 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 19:19:26.179 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:19:26.439 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:26.439 [thread-run-5] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:51,订单:77892,数据库:0.05344102,计算:0.053441
2022-06-12 19:19:26.440 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77892' and type=? limit 0,100 
2022-06-12 19:19:26.441 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:19:26.548 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032766387"}
2022-06-12 19:19:27.090 [thread-run-5] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:27.091 [thread-run-5] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:51,订单:77892,比列:0.900000,数据库:0.4809692160000000,计算得:0.480969
2022-06-12 19:19:27.091 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516651520000000
2022-06-12 19:19:27.092 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6293017240000000,分佣金额:0.0516651520000000,之后余额:0.6809668760000000
2022-06-12 19:19:27.092 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534410240000000
2022-06-12 19:19:27.093 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.6809668760000000,分佣金额:0.0534410240000000,之后余额:0.7344079000000000
2022-06-12 19:19:27.093 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:4.6894980000000000
2022-06-12 19:19:27.094 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:27.094 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:27.472 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:27.473 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:27.474 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:27.660 [thread-run-8] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:27.660 [thread-run-8] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:27.662 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:19:27.663 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:27.879 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:27.880 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:27.880 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:28.036 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:28.037 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:19:28.038 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:28.184 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:28.185 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:28.185 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:28.327 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:28.328 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,1 
2022-06-12 19:19:28.329 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:19:28.535 [thread-run-8] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:19:28.535 [thread-run-8] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77893,计算得:-0.155100
2022-06-12 19:19:28.536 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.0570880000000000
2022-06-12 19:19:28.537 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:28.538 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:28.749 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:28.750 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:28.750 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:28.955 [thread-run-9] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:28.956 [thread-run-9] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:28.957 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:19:28.957 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:29.160 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:29.161 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:29.161 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:29.311 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:29.312 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:19:29.313 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:30.206 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:30.207 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:30.208 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:30.393 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:30.394 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,1 
2022-06-12 19:19:30.395 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:19:30.603 [thread-run-9] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:19:30.604 [thread-run-9] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77894,计算得:0.140800
2022-06-12 19:19:30.604 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.1937218800000000
2022-06-12 19:19:30.605 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:30.606 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:30.822 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:30.823 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:30.823 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:31.070 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:31.070 [thread-run-10] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:31.071 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77893' LIMIT 0,1000 
2022-06-12 19:19:31.071 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:31.265 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:31.265 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:31.266 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:31.450 [thread-run-10] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:31.452 [thread-run-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:31.452 [thread-run-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:31.557 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032771389"}
2022-06-12 19:19:31.612 [thread-run-10] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:31.613 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 19:19:31.614 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:19:31.777 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:31.778 [thread-run-10] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77893,数据库:0.01937218,计算:0.019372
2022-06-12 19:19:31.778 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77893' and type=? limit 0,100 
2022-06-12 19:19:31.779 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:19:32.005 [thread-run-10] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:32.005 [thread-run-10] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77893,比列:0.900000,数据库:0.1743496920000000,计算得:0.174349
2022-06-12 19:19:32.006 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓-平仓收益:13.8698560000000000
2022-06-12 19:19:32.008 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:32.008 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:32.235 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:32.237 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:32.237 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:32.381 [thread-run-1] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:32.381 [thread-run-1] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:32.383 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:19:32.383 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:32.538 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:32.539 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:32.539 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:32.744 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:32.745 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:19:32.745 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:32.954 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:32.955 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:32.955 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:33.343 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:33.344 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,1 
2022-06-12 19:19:33.345 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - ==> Parameters: 51904446(String), 27(Integer)
2022-06-12 19:19:33.549 [thread-run-1] DEBUG com.zmj.demo.dao.dev1.AccountDao.getUserBill - <==      Total: 1
2022-06-12 19:19:33.549 [thread-run-1] INFO  com.zmj.demo.common.dev1.ProfitCalc - defaultPartnerProfit--只有默认合伙人--盈亏校验--->用户:51905047,默认合伙人:51904446,交易类型:4,订单:77895,计算得:0.509600
2022-06-12 19:19:33.550 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5165952000000000
2022-06-12 19:19:33.551 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:33.551 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:33.755 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:33.756 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:33.756 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:33.915 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:33.916 [thread-run-2] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:33.917 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77894' LIMIT 0,1000 
2022-06-12 19:19:33.917 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:34.142 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:34.143 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:34.143 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:34.347 [thread-run-2] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:34.349 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:34.349 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:34.541 [thread-run-2] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:34.542 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 19:19:34.542 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:19:34.769 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:34.769 [thread-run-2] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77894,数据库:0.05165952,计算:0.051659
2022-06-12 19:19:34.769 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77894' and type=? limit 0,100 
2022-06-12 19:19:34.770 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:19:34.981 [thread-run-2] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:34.981 [thread-run-2] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77894,比列:0.900000,数据库:0.4649356800000000,计算得:0.464935
2022-06-12 19:19:34.981 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 平仓手续费 -扣用户:-0.5342064000000000
2022-06-12 19:19:34.982 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:34.982 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:35.202 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:35.203 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==>  Preparing: SELECT user_id userId,parent_id parentId,gparent_id gparentId,partner_id partnerId,dist_id distId,level,type,defaulted,config,open_bet openBet,is_profession isProfession FROM `bib_cfd`.`user_distributor` WHERE `user_id` = '51904446' LIMIT 0,1 
2022-06-12 19:19:35.204 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - ==> Parameters: 
2022-06-12 19:19:35.375 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserDistributor - <==      Total: 1
2022-06-12 19:19:35.376 [thread-run-3] INFO  com.zmj.demo.common.SqlUtil - 用户:51905047,合伙人:[{"userId":"51905047","parentId":"51904446","gparentId":"0","partnerId":"51904446","distId":"0","level":"1","type":0,"defaulted":"0","openBet":1,"isProfession":"0","config":{"allotLowerFeeRate":0.100000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.200000,"partnerTransferOutRatio":0.100000,"rebateUserRatio":0.100000,"userLossGivingBonsRate":0.000000}}, {"userId":"51904446","parentId":"0","gparentId":"0","partnerId":"0","distId":"0","level":"0","type":0,"defaulted":"1","openBet":0,"isProfession":"0","config":{"allotLowerFeeRate":0.500000,"level":0,"maxConfigLevel":10,"partnerTransferOutMin":0.000000,"partnerTransferOutRatio":0.000000,"rebateUserRatio":0.0000,"userLossGivingBonsRate":0.000000}}]
2022-06-12 19:19:35.376 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==>  Preparing: SELECT id,position_id positionId,order_id orderId,user_id userId,symbol,leverage,margin_type marginType,direction,side,quantity,closed_quantity closedQuantity,margin, open_price openPrice,close_price closePrice,avg_cost avgCost,liquidate_by liquidateBy FROM `bib_cfd`.`position_action` WHERE `user_id` = '51905047' AND `order_id` = '77895' LIMIT 0,1000 
2022-06-12 19:19:35.377 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - ==> Parameters: 
2022-06-12 19:19:35.596 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.positionAction - <==      Total: 1
2022-06-12 19:19:35.596 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==>  Preparing: SELECT one_lot_size oneLotSize FROM `bib_cfd`.`instruments` WHERE `symbol` LIKE '%ethusdt%' 
2022-06-12 19:19:35.597 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - ==> Parameters: 
2022-06-12 19:19:35.805 [thread-run-3] DEBUG com.zmj.demo.dao.dev1.AccountDao.instruments - <==      Total: 1
2022-06-12 19:19:35.806 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==>  Preparing: SELECT user_id userId,currency_id currencyId,balance,hold FROM `bib_cfd`.`user_partner_balance` WHERE `user_id` = '51905047' LIMIT 0,1 
2022-06-12 19:19:35.806 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - ==> Parameters: 
2022-06-12 19:19:36.250 [thread-run-3] DEBUG c.z.d.d.d.AccountDao.getUserPartnerBalanceByUser - <==      Total: 1
2022-06-12 19:19:36.251 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 19:19:36.252 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51905047(String), 16(Integer)
2022-06-12 19:19:36.474 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:36.475 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - --有合伙人--用户自己有返佣--给用户的手续费返佣校验--->用户:51905047,交易类型:52,订单:77895,数据库:0.05342064,计算:0.053420
2022-06-12 19:19:36.477 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==>  Preparing: select user_id userId,type,size,pre_balance preBalance,post_balance postBalance,pre_profit preProfit,post_profit postProfit,pre_margin preMargin,post_margin postMargin,partner_id partnerId,parent_id parentId,source_id sourceId,note,created_date createdDate,from_user_id fromUserId from `bib_cfd`.`user_bill` where user_id=? and source_id='77895' and type=? limit 0,100 
2022-06-12 19:19:36.477 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - ==> Parameters: 51904446(String), 16(Integer)
2022-06-12 19:19:37.091 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032776394"}
2022-06-12 19:19:37.150 [thread-run-3] DEBUG c.zmj.demo.dao.dev1.AccountDao.getUserBillFeeBack - <==      Total: 1
2022-06-12 19:19:37.150 [thread-run-3] INFO  com.zmj.demo.common.dev1.FeeCalc - feeToPartnerClac--有合伙人--用户自己有返佣--给默认合伙人返佣--手续费校验-->用户:51905047,合伙人:51904446,交易类型:52,订单:77895,比列:0.900000,数据库:0.4807857600000000,计算得:0.480785
2022-06-12 19:19:37.151 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0193721880000000
2022-06-12 19:19:37.151 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7344079000000000,分佣金额:0.0193721880000000,之后余额:0.7537800880000000
2022-06-12 19:19:37.151 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0516595200000000
2022-06-12 19:19:37.152 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.7537800880000000,分佣金额:0.0516595200000000,之后余额:0.8054396080000000
2022-06-12 19:19:37.152 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - 合伙人手续费  (合伙人收取下面邀请人的交易手续费) 区分普通和默认:0.0534206400000000
2022-06-12 19:19:37.152 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - 分佣金额余额加减--->用户:51905047,类型:16,之前余额:0.8054396080000000,分佣金额:0.0534206400000000,之后余额:0.8588602480000000
2022-06-12 19:19:37.153 [http-nio-10090-exec-1] INFO  com.zmj.demo.service.impl.ToolServiceImpl - --------51905047流水--------
2022-06-12 19:19:41.635 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032781396"}
2022-06-12 19:19:46.592 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032786399"}
2022-06-12 19:19:51.529 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655032791402"}
2022-06-12 19:19:57.142 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onClose ------
2022-06-12 19:46:47.871 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-06-12 19:46:47.883 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-06-12 19:49:16.849 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5005 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-06-12 19:49:21.859 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 61166 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-06-12 19:49:21.861 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-06-12 19:49:22.783 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 19:49:22.786 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-06-12 19:49:22.814 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 0 Elasticsearch repository interfaces.
2022-06-12 19:49:22.819 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 19:49:22.820 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-06-12 19:49:22.829 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-06-12 19:49:22.845 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 19:49:22.846 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-06-12 19:49:22.870 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2022-06-12 19:49:23.586 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-06-12 19:49:23.643 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-06-12 19:49:23.643 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-06-12 19:49:23.644 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-06-12 19:49:23.740 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-06-12 19:49:23.741 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1822 ms
2022-06-12 19:49:24.690 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-06-12 19:49:25.547 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-06-12 19:49:25.548 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-06-12 19:49:25.548 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-06-12 19:49:25.705 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onOpen ------
2022-06-12 19:49:25.902 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-06-12 19:49:25.920 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-06-12 19:49:25.938 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.629 seconds (JVM running for 25.114)
2022-06-12 19:49:30.676 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034570460"}
2022-06-12 19:49:35.670 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034575462"}
2022-06-12 19:49:40.667 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034580466"}
2022-06-12 19:49:41.390 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-06-12 19:49:41.390 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-06-12 19:49:41.391 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2022-06-12 19:49:42.425 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 9
2022-06-12 19:49:42.425 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 0
2022-06-12 19:49:42.425 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 4
2022-06-12 19:49:42.426 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 2
2022-06-12 19:49:42.425 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 6
2022-06-12 19:49:42.426 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 3
2022-06-12 19:49:42.425 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 7
2022-06-12 19:49:42.425 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 8
2022-06-12 19:49:42.425 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 5
2022-06-12 19:49:42.426 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 1
2022-06-12 19:49:45.680 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034585469"}
2022-06-12 19:49:50.703 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034590472"}
2022-06-12 19:49:53.124 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 7
2022-06-12 19:49:53.124 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 9
2022-06-12 19:49:53.124 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 6
2022-06-12 19:49:53.124 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 2
2022-06-12 19:49:53.124 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 0
2022-06-12 19:49:53.124 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 8
2022-06-12 19:49:53.124 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 5
2022-06-12 19:49:53.124 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 3
2022-06-12 19:49:53.124 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 1
2022-06-12 19:49:53.124 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 4
2022-06-12 19:49:55.669 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034595476"}
2022-06-12 19:50:00.906 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034600479"}
2022-06-12 19:50:05.713 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034605482"}
2022-06-12 19:50:10.703 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034610484"}
2022-06-12 19:50:15.667 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034615487"}
2022-06-12 19:50:20.705 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034620489"}
2022-06-12 19:50:40.733 [main] WARN  org.springframework.boot.StartupInfoLogger - InetAddress.getLocalHost().getHostName() took 5003 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-06-12 19:50:45.745 [main] INFO  com.zmj.demo.DemoApplication - Starting DemoApplication using Java 1.8.0_312 on gai.local with PID 61220 (/Users/mac/tools/gitPro/515/demo/target/classes started by mac in /Users/mac/tools/gitPro/515/demo)
2022-06-12 19:50:45.746 [main] INFO  com.zmj.demo.DemoApplication - No active profile set, falling back to default profiles: default
2022-06-12 19:50:46.690 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 19:50:46.694 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2022-06-12 19:50:46.718 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 0 Elasticsearch repository interfaces.
2022-06-12 19:50:46.723 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 19:50:46.723 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2022-06-12 19:50:46.731 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2022-06-12 19:50:46.749 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2022-06-12 19:50:46.751 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-06-12 19:50:46.769 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2022-06-12 19:50:47.505 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 10090 (http)
2022-06-12 19:50:47.559 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10090"]
2022-06-12 19:50:47.560 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-06-12 19:50:47.560 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-06-12 19:50:47.651 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-06-12 19:50:47.652 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1845 ms
2022-06-12 19:50:48.613 [main] INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-06-12 19:50:49.419 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - ------ MyWebSocket onOpen ------
2022-06-12 19:50:49.418 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Spring Data Elasticsearch: 4.2.1
2022-06-12 19:50:49.420 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client in build: 7.12.1
2022-06-12 19:50:49.421 [main] INFO  o.s.data.elasticsearch.support.VersionInfo - Version Elasticsearch Client used: 7.12.1
2022-06-12 19:50:49.782 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10090"]
2022-06-12 19:50:49.799 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 10090 (http) with context path ''
2022-06-12 19:50:49.813 [main] INFO  com.zmj.demo.DemoApplication - Started DemoApplication in 24.625 seconds (JVM running for 25.139)
2022-06-12 19:50:54.449 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034653525"}
2022-06-12 19:50:57.881 [http-nio-10090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-06-12 19:50:57.881 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-06-12 19:50:57.883 [http-nio-10090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2022-06-12 19:50:59.409 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034658528"}
2022-06-12 19:51:02.924 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 0
2022-06-12 19:51:02.924 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 7
2022-06-12 19:51:02.924 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 2
2022-06-12 19:51:02.924 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 5
2022-06-12 19:51:02.924 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 9
2022-06-12 19:51:02.924 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 3
2022-06-12 19:51:02.924 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 8
2022-06-12 19:51:02.924 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 4
2022-06-12 19:51:02.924 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 6
2022-06-12 19:51:02.925 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 1
2022-06-12 19:51:04.443 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034663532"}
2022-06-12 19:51:07.928 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 14
2022-06-12 19:51:07.928 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 10
2022-06-12 19:51:07.928 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 16
2022-06-12 19:51:07.928 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 17
2022-06-12 19:51:07.928 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 15
2022-06-12 19:51:07.928 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 13
2022-06-12 19:51:07.928 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 12
2022-06-12 19:51:07.928 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 11
2022-06-12 19:51:07.930 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 19
2022-06-12 19:51:07.930 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 18
2022-06-12 19:51:09.421 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034668533"}
2022-06-12 19:51:12.932 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 24
2022-06-12 19:51:12.933 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 29
2022-06-12 19:51:12.932 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 28
2022-06-12 19:51:12.932 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 26
2022-06-12 19:51:12.932 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 25
2022-06-12 19:51:12.932 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 20
2022-06-12 19:51:12.932 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 22
2022-06-12 19:51:12.932 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 21
2022-06-12 19:51:12.932 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 27
2022-06-12 19:51:12.932 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 23
2022-06-12 19:51:14.455 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034673535"}
2022-06-12 19:51:17.935 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 34
2022-06-12 19:51:17.935 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 32
2022-06-12 19:51:17.935 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 39
2022-06-12 19:51:17.935 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 38
2022-06-12 19:51:17.935 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 31
2022-06-12 19:51:17.935 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 37
2022-06-12 19:51:17.935 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 35
2022-06-12 19:51:17.935 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 33
2022-06-12 19:51:17.935 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 30
2022-06-12 19:51:17.935 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 36
2022-06-12 19:51:19.414 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034678539"}
2022-06-12 19:51:22.938 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 44
2022-06-12 19:51:22.938 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 42
2022-06-12 19:51:22.938 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 45
2022-06-12 19:51:22.938 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 43
2022-06-12 19:51:22.938 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 40
2022-06-12 19:51:22.938 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 41
2022-06-12 19:51:22.941 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 46
2022-06-12 19:51:22.941 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 49
2022-06-12 19:51:22.941 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 48
2022-06-12 19:51:22.941 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 47
2022-06-12 19:51:24.420 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034683542"}
2022-06-12 19:51:27.943 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 51
2022-06-12 19:51:27.943 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 54
2022-06-12 19:51:27.943 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 50
2022-06-12 19:51:27.945 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 58
2022-06-12 19:51:27.943 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 52
2022-06-12 19:51:27.943 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 55
2022-06-12 19:51:27.945 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 57
2022-06-12 19:51:27.944 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 53
2022-06-12 19:51:27.945 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 59
2022-06-12 19:51:27.945 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 56
2022-06-12 19:51:29.462 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034688545"}
2022-06-12 19:51:32.949 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 61
2022-06-12 19:51:32.949 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 69
2022-06-12 19:51:32.949 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 60
2022-06-12 19:51:32.949 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 66
2022-06-12 19:51:32.949 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 68
2022-06-12 19:51:32.949 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 65
2022-06-12 19:51:32.949 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 67
2022-06-12 19:51:32.949 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 64
2022-06-12 19:51:32.949 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 63
2022-06-12 19:51:32.949 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 62
2022-06-12 19:51:34.447 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034693548"}
2022-06-12 19:51:37.955 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 71
2022-06-12 19:51:37.955 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 72
2022-06-12 19:51:37.955 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 74
2022-06-12 19:51:37.955 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 78
2022-06-12 19:51:37.955 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 73
2022-06-12 19:51:37.955 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 79
2022-06-12 19:51:37.955 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 77
2022-06-12 19:51:37.955 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 75
2022-06-12 19:51:37.955 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 76
2022-06-12 19:51:37.955 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 70
2022-06-12 19:51:39.527 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034698551"}
2022-06-12 19:51:42.961 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 87
2022-06-12 19:51:42.961 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 85
2022-06-12 19:51:42.961 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 89
2022-06-12 19:51:42.961 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 86
2022-06-12 19:51:42.961 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 83
2022-06-12 19:51:42.961 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 80
2022-06-12 19:51:42.961 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 81
2022-06-12 19:51:42.961 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 84
2022-06-12 19:51:42.961 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 88
2022-06-12 19:51:42.961 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 82
2022-06-12 19:51:44.412 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034703556"}
2022-06-12 19:51:47.966 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 97
2022-06-12 19:51:47.966 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 92
2022-06-12 19:51:47.966 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 90
2022-06-12 19:51:47.966 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 94
2022-06-12 19:51:47.966 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 91
2022-06-12 19:51:47.966 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 93
2022-06-12 19:51:47.966 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 98
2022-06-12 19:51:47.966 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 96
2022-06-12 19:51:47.966 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 99
2022-06-12 19:51:47.966 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 95
2022-06-12 19:51:49.414 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034708559"}
2022-06-12 19:51:54.419 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034713561"}
2022-06-12 19:51:59.429 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034718564"}
2022-06-12 19:52:04.417 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034723567"}
2022-06-12 19:52:09.410 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034728570"}
2022-06-12 19:52:09.753 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 5
2022-06-12 19:52:09.753 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 3
2022-06-12 19:52:09.753 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 6
2022-06-12 19:52:09.753 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 4
2022-06-12 19:52:09.753 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 8
2022-06-12 19:52:09.753 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 1
2022-06-12 19:52:09.753 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 7
2022-06-12 19:52:09.753 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 0
2022-06-12 19:52:09.753 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 9
2022-06-12 19:52:09.753 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 2
2022-06-12 19:52:14.450 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034733574"}
2022-06-12 19:52:14.758 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 15
2022-06-12 19:52:14.758 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 14
2022-06-12 19:52:14.758 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 19
2022-06-12 19:52:14.758 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 16
2022-06-12 19:52:14.758 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 10
2022-06-12 19:52:14.758 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 11
2022-06-12 19:52:14.758 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 18
2022-06-12 19:52:14.758 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 17
2022-06-12 19:52:14.758 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 12
2022-06-12 19:52:14.758 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 13
2022-06-12 19:52:19.475 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034738576"}
2022-06-12 19:52:19.769 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 22
2022-06-12 19:52:19.769 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 27
2022-06-12 19:52:19.769 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 28
2022-06-12 19:52:19.769 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 20
2022-06-12 19:52:19.769 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 25
2022-06-12 19:52:19.769 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 26
2022-06-12 19:52:19.769 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 21
2022-06-12 19:52:19.769 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 23
2022-06-12 19:52:19.769 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 24
2022-06-12 19:52:19.769 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 29
2022-06-12 19:52:24.470 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034743578"}
2022-06-12 19:52:24.773 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 31
2022-06-12 19:52:24.773 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 38
2022-06-12 19:52:24.773 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 34
2022-06-12 19:52:24.773 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 37
2022-06-12 19:52:24.773 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 39
2022-06-12 19:52:24.773 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 36
2022-06-12 19:52:24.773 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 33
2022-06-12 19:52:24.773 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 30
2022-06-12 19:52:24.773 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 35
2022-06-12 19:52:24.773 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 32
2022-06-12 19:52:29.445 [Thread-2] INFO  com.zmj.demo.client.WebSocketClient - 发送：：：{"pong":"1655034748581"}
2022-06-12 19:52:29.775 [thread-run-9] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 40
2022-06-12 19:52:29.775 [thread-run-6] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 46
2022-06-12 19:52:29.775 [thread-run-1] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 41
2022-06-12 19:52:29.775 [thread-run-5] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 43
2022-06-12 19:52:29.775 [thread-run-3] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 45
2022-06-12 19:52:29.775 [thread-run-2] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 47
2022-06-12 19:52:29.775 [thread-run-7] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 44
2022-06-12 19:52:29.775 [thread-run-4] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 42
2022-06-12 19:52:29.776 [thread-run-8] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 49
2022-06-12 19:52:29.776 [thread-run-10] INFO  com.zmj.demo.common.dev1.UserCheckThread - thread run, message=index = 48
2022-06-12 19:52:33.724 [thread-run-8] ERROR com.zmj.demo.common.dev1.UserCheckThread - thread run error: 
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at com.zmj.demo.common.dev1.UserCheckThread.test(UserCheckThread.java:224)
	at com.zmj.demo.common.dev1.UserCheckThread$$FastClassBySpringCGLIB$$3a4b7371.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2022-06-12 19:52:33.724 [thread-run-10] ERROR com.zmj.demo.common.dev1.UserCheckThread - thread run error: 
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at com.zmj.demo.common.dev1.UserCheckThread.test(UserCheckThread.java:224)
	at com.zmj.demo.common.dev1.UserCheckThread$$FastClassBySpringCGLIB$$3a4b7371.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2022-06-12 19:52:33.724 [thread-run-6] ERROR com.zmj.demo.common.dev1.UserCheckThread - thread run error: 
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at com.zmj.demo.common.dev1.UserCheckThread.test(UserCheckThread.java:224)
	at com.zmj.demo.common.dev1.UserCheckThread$$FastClassBySpringCGLIB$$3a4b7371.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2022-06-12 19:52:33.724 [thread-run-4] ERROR com.zmj.demo.common.dev1.UserCheckThread - thread run error: 
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at com.zmj.demo.common.dev1.UserCheckThread.test(UserCheckThread.java:224)
	at com.zmj.demo.common.dev1.UserCheckThread$$FastClassBySpringCGLIB$$3a4b7371.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2022-06-12 19:52:33.724 [thread-run-9] ERROR com.zmj.demo.common.dev1.UserCheckThread - thread run error: 
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at com.zmj.demo.common.dev1.UserCheckThread.test(UserCheckThread.java:224)
	at com.zmj.demo.common.dev1.UserCheckThread$$FastClassBySpringCGLIB$$3a4b7371.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2022-06-12 19:52:33.724 [thread-run-5] ERROR com.zmj.demo.common.dev1.UserCheckThread - thread run error: 
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at com.zmj.demo.common.dev1.UserCheckThread.test(UserCheckThread.java:224)
	at com.zmj.demo.common.dev1.UserCheckThread$$FastClassBySpringCGLIB$$3a4b7371.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2022-06-12 19:52:33.724 [thread-run-2] ERROR com.zmj.demo.common.dev1.UserCheckThread - thread run error: 
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at com.zmj.demo.common.dev1.UserCheckThread.test(UserCheckThread.java:224)
	at com.zmj.demo.common.dev1.UserCheckThread$$FastClassBySpringCGLIB$$3a4b7371.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2022-06-12 19:52:33.724 [thread-run-1] ERROR com.zmj.demo.common.dev1.UserCheckThread - thread run error: 
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at com.zmj.demo.common.dev1.UserCheckThread.test(UserCheckThread.java:224)
	at com.zmj.demo.common.dev1.UserCheckThread$$FastClassBySpringCGLIB$$3a4b7371.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2022-06-12 19:52:33.725 [thread-run-7] ERROR com.zmj.demo.common.dev1.UserCheckThread - thread run error: 
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at com.zmj.demo.common.dev1.UserCheckThread.test(UserCheckThread.java:224)
	at com.zmj.demo.common.dev1.UserCheckThread$$FastClassBySpringCGLIB$$3a4b7371.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2022-06-12 19:52:33.725 [thread-run-3] ERROR com.zmj.demo.common.dev1.UserCheckThread - thread run error: 
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at com.zmj.demo.common.dev1.UserCheckThread.test(UserCheckThread.java:224)
	at com.zmj.demo.common.dev1.UserCheckThread$$FastClassBySpringCGLIB$$3a4b7371.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
