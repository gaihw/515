<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.test.dao.userBaseInfo.UserDao">
    <resultMap id="BaseResultMap" type="com.test.domain.User">
        <result column="id" property="id" />
        <result column="uid" property="uid" />
        <result column="user_name" property="userName" />
        <result column="email_nation" property="emailNation" />
        <result column="email" property="email" />
        <result column="nick_name" property="nickName" />
        <result column="login_pwd" property="loginPwd" />
        <result column="trade_pwd" property="tradePwd" />
        <result column="pwd_flag" property="pwdFlag" />
        <result column="nation" property="nation" />
        <result column="mobile" property="mobile" />
        <result column="google_key" property="googleKey" />
        <result column="status_flag" property="statusFlag" />
        <result column="config_flag" property="configFlag" />
        <result column="user_level" property="userLevel" />
        <result column="channel" property="channel" />
        <result column="inviter_id" property="inviterId" />
        <result column="register_time" property="registerTime" />
        <result column="update_time" property="updateTime" />
    </resultMap>
    <resultMap id="Sms" type="com.test.domain.Sms">
        <result column="keywords" property="keywords" />
<!--        <result column="send_time" property="sendTime" />-->
    </resultMap>
    <!--        id,uid,user_name,email_nation,email,nick_name,login_pwd,trade_pwd,mobile-->
    <sql id="Base_Column_List_UserInfo">
        id,mobile
    </sql>
    <select id="findByMobile" resultMap="BaseResultMap" parameterType="java.lang.String">
        select
        <include refid="Base_Column_List_UserInfo" />
        from user_base_info
        where mobile = #{mobile}
    </select>

    <select id="findByUserId" resultMap="BaseResultMap" parameterType="java.lang.Integer">
        select
        <include refid="Base_Column_List_UserInfo" />
        from user_base_info
        where id = #{id}
    </select>
    <select id="findUser" resultMap="BaseResultMap" parameterType="com.test.domain.User">
        select
        <include refid="Base_Column_List_UserInfo" />
        from user_base_info
        <trim prefix="WHERE" prefixOverrides="and">
            <if test="0 != id and '' !=id">
                AND id=#{id}
            </if>
            <if test="null != mobile and '' !=mobile">
                AND mobile = #{mobile}
            </if>
        </trim>
    </select>

    <select id="sms" resultMap="Sms" parameterType="java.lang.String">
        select
        keywords
        from sms_record_2020
        <trim prefix="WHERE" prefixOverrides="and">
            <if test="null != mobile and '' !=mobile">
                AND mobile = #{mobile}
            </if>
        </trim>
        order by send_time desc limit 0,1
    </select>
    <!--

<select id="findAllCity" resultMap="BaseResultMap" >
    select
    <include refid="Base_Column_List" />
    from city
</select>

<insert id="saveCity" parameterType="City" useGeneratedKeys="true" keyProperty="id">
    insert into
    city(id,province_id,city_name,description)
    values
    (#{id},#{provinceId},#{cityName},#{description})
</insert>

<update id="updateCity" parameterType="City">
    update
    city
    set
    <if test="provinceId!=null">
        province_id = #{provinceId},
    </if>
    <if test="cityName!=null">
        city_name = #{cityName},
    </if>
    <if test="description!=null">
        description = #{description}
    </if>
    where
    id = #{id}
</update>

<delete id="deleteCity" parameterType="java.lang.Long">
    delete from
    city
    where
    id = #{id}
</delete>
-->
</mapper>
